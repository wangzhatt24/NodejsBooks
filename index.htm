<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>Web Development with Node and Express, 2nd Edition</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:"BIZ UDGothic";}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:"Bahnschrift Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Bahnschrift;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight SemiConde";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiCondensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold SemiConden";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Light Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiLight Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Bahnschrift SemiBold Condensed";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Candara Light";
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Corbel Light";
	panose-1:2 11 3 3 2 2 4 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Gadugi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Ink Free";
	panose-1:3 8 4 2 0 5 0 0 0 0;}
@font-face
	{font-family:"Javanese Text";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Leelawadee UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Leelawadee UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";}
@font-face
	{font-family:"Malgun Gothic Semilight";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Malgun Gothic Semilight";}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";}
@font-face
	{font-family:"Microsoft JhengHei UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI";}
@font-face
	{font-family:"Microsoft JhengHei Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei Light";}
@font-face
	{font-family:"Microsoft JhengHei UI Light";
	panose-1:2 11 3 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei UI Light";}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft YaHei";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei";}
@font-face
	{font-family:"Microsoft YaHei UI";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@Microsoft YaHei UI";}
@font-face
	{font-family:"Microsoft YaHei Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei Light";}
@font-face
	{font-family:"Microsoft YaHei UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Microsoft YaHei UI Light";}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Myanmar Text";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Nirmala UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:3 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Black";
	panose-1:2 11 10 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Historic";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semilight";
	panose-1:2 11 4 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@SimSun";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:NSimSun;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@NSimSun";}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";}
@font-face
	{font-family:"Sitka Small";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Text";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Subheading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Heading";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Display";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:"Sitka Banner";
	panose-1:2 0 5 5 0 0 0 2 0 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:"\@Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Yu Gothic UI";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI";}
@font-face
	{font-family:"Yu Gothic UI Semibold";
	panose-1:2 11 7 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semibold";}
@font-face
	{font-family:"Yu Gothic Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Light";}
@font-face
	{font-family:"Yu Gothic UI Light";
	panose-1:2 11 3 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Light";}
@font-face
	{font-family:"Yu Gothic Medium";
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic Medium";}
@font-face
	{font-family:"Yu Gothic UI Semilight";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Yu Gothic UI Semilight";}
@font-face
	{font-family:"HoloLens MDL2 Assets";
	panose-1:5 10 1 2 1 1 1 1 1 1;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:Dubai;
	panose-1:2 11 5 3 3 4 3 3 2 4;}
@font-face
	{font-family:"Dubai Light";
	panose-1:2 11 3 3 3 4 3 3 2 4;}
@font-face
	{font-family:"Dubai Medium";
	panose-1:2 11 6 3 3 4 3 3 2 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Leelawadee;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Microsoft Uighur";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"Cascadia Code ExtraLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code Light";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code SemiLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Code SemiBold";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono ExtraLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono Light";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono SemiLight";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:"Cascadia Mono SemiBold";
	panose-1:2 11 6 9 2 0 0 2 0 4;}
@font-face
	{font-family:Abadi;}
@font-face
	{font-family:"Abadi Extra Light";}
@font-face
	{font-family:Abel;}
@font-face
	{font-family:"Abril Fatface";}
@font-face
	{font-family:"ADLaM Display";}
@font-face
	{font-family:Aharoni;}
@font-face
	{font-family:"Al Fresco";}
@font-face
	{font-family:Aldhabi;}
@font-face
	{font-family:Alef;}
@font-face
	{font-family:Aleo;}
@font-face
	{font-family:"Aleo Light";}
@font-face
	{font-family:"Amasis MT Pro";}
@font-face
	{font-family:"Amasis MT Pro Black";}
@font-face
	{font-family:"Amasis MT Pro Light";}
@font-face
	{font-family:"Amasis MT Pro Medium";}
@font-face
	{font-family:"Amatic SC";}
@font-face
	{font-family:AngsanaUPC;}
@font-face
	{font-family:Anton;}
@font-face
	{font-family:Aparajita;}
@font-face
	{font-family:"Arabic Typesetting";}
@font-face
	{font-family:"Aref Ruqaa";}
@font-face
	{font-family:"Arial Nova";}
@font-face
	{font-family:"Arial Nova Cond";}
@font-face
	{font-family:"Arial Nova Cond Light";}
@font-face
	{font-family:"Arial Nova Light";}
@font-face
	{font-family:Assistant;}
@font-face
	{font-family:"Assistant ExtraBold";}
@font-face
	{font-family:"Assistant ExtraLight";}
@font-face
	{font-family:"Assistant Light";}
@font-face
	{font-family:"Assistant SemiBold";}
@font-face
	{font-family:Athiti;}
@font-face
	{font-family:"Athiti ExtraLight";}
@font-face
	{font-family:"Athiti Light";}
@font-face
	{font-family:"Athiti Medium";}
@font-face
	{font-family:"Athiti SemiBold";}
@font-face
	{font-family:"Avenir Next LT Pro";}
@font-face
	{font-family:"Avenir Next LT Pro Demi";}
@font-face
	{font-family:"Avenir Next LT Pro Light";}
@font-face
	{font-family:"Baguet Script";}
@font-face
	{font-family:Barlow;}
@font-face
	{font-family:"Barlow Black";}
@font-face
	{font-family:"Barlow Condensed";}
@font-face
	{font-family:"Barlow Condensed Black";}
@font-face
	{font-family:"Barlow Condensed ExtraBold";}
@font-face
	{font-family:"Barlow Condensed ExtraLight";}
@font-face
	{font-family:"Barlow Condensed Light";}
@font-face
	{font-family:"Barlow Condensed Medium";}
@font-face
	{font-family:"Barlow Condensed SemiBold";}
@font-face
	{font-family:"Barlow Condensed Thin";}
@font-face
	{font-family:"Barlow ExtraBold";}
@font-face
	{font-family:"Barlow ExtraLight";}
@font-face
	{font-family:"Barlow Light";}
@font-face
	{font-family:"Barlow Medium";}
@font-face
	{font-family:"Barlow Semi Condensed";}
@font-face
	{font-family:"Barlow Semi Condensed Black";}
@font-face
	{font-family:"Barlow Semi Condensed ExLight";}
@font-face
	{font-family:"Barlow Semi Condensed ExtraBold";}
@font-face
	{font-family:"Barlow Semi Condensed Light";}
@font-face
	{font-family:"Barlow Semi Condensed Medium";}
@font-face
	{font-family:"Barlow Semi Condensed SemiBold";}
@font-face
	{font-family:"Barlow Semi Condensed Thin";}
@font-face
	{font-family:"Barlow SemiBold";}
@font-face
	{font-family:"Barlow Thin";}
@font-face
	{font-family:BatangChe;}
@font-face
	{font-family:"Bebas Neue";}
@font-face
	{font-family:Bembo;}
@font-face
	{font-family:Bierstadt;}
@font-face
	{font-family:"Bierstadt Display";}
@font-face
	{font-family:BierstadtAlt;}
@font-face
	{font-family:"BierstadtAlt2 Cond";}
@font-face
	{font-family:"BierstadtAlt3 Cond";}
@font-face
	{font-family:"BierstadtAlt4 Cond";}
@font-face
	{font-family:BierstadtAlt5;}
@font-face
	{font-family:Biome;}
@font-face
	{font-family:"Biome Light";}
@font-face
	{font-family:"Boucherie Sans";}
@font-face
	{font-family:"Browallia New";}
@font-face
	{font-family:BrowalliaUPC;}
@font-face
	{font-family:"Buxton Sketch";}
@font-face
	{font-family:"Caveat Brush";}
@font-face
	{font-family:Cavolini;}
@font-face
	{font-family:"Chamberi Super Display";}
@font-face
	{font-family:Charmonman;}
@font-face
	{font-family:Chonburi;}
@font-face
	{font-family:"Cochocib Script Latin Pro";}
@font-face
	{font-family:"Concert One";}
@font-face
	{font-family:Cond;}
@font-face
	{font-family:Congenial;}
@font-face
	{font-family:"Congenial Black";}
@font-face
	{font-family:"Congenial Light";}
@font-face
	{font-family:"Congenial SemiBold";}
@font-face
	{font-family:"Congenial UltraLight";}
@font-face
	{font-family:Convection;}
@font-face
	{font-family:"Convection Condensed";}
@font-face
	{font-family:"Convection Extra Bold";}
@font-face
	{font-family:"Convection Symbol";}
@font-face
	{font-family:"Convection UI";}
@font-face
	{font-family:CordiaUPC;}
@font-face
	{font-family:Dante;}
@font-face
	{font-family:DaunPenh;}
@font-face
	{font-family:David;}
@font-face
	{font-family:Daytona;}
@font-face
	{font-family:"Daytona Condensed";}
@font-face
	{font-family:"Daytona Condensed Light";}
@font-face
	{font-family:"Daytona Light";}
@font-face
	{font-family:"DengXian Light";}
@font-face
	{font-family:"Didact Gothic";}
@font-face
	{font-family:DilleniaUPC;}
@font-face
	{font-family:"DM Mono";}
@font-face
	{font-family:"DM Mono Light";}
@font-face
	{font-family:"DM Mono Medium";}
@font-face
	{font-family:"DM Sans";}
@font-face
	{font-family:"DM Sans Medium";}
@font-face
	{font-family:"DM Serif Display";}
@font-face
	{font-family:"DM Serif Text";}
@font-face
	{font-family:DokChampa;}
@font-face
	{font-family:Dosis;}
@font-face
	{font-family:"Dosis ExtraBold";}
@font-face
	{font-family:"Dosis ExtraLight";}
@font-face
	{font-family:"Dosis Light";}
@font-face
	{font-family:"Dosis Medium";}
@font-face
	{font-family:"Dosis SemiBold";}
@font-face
	{font-family:DotumChe;}
@font-face
	{font-family:"Dreaming Outloud Pro";}
@font-face
	{font-family:"Dreaming Outloud Script Pro";}
@font-face
	{font-family:"EB Garamond";}
@font-face
	{font-family:"EB Garamond ExtraBold";}
@font-face
	{font-family:"EB Garamond Medium";}
@font-face
	{font-family:"EB Garamond SemiBold";}
@font-face
	{font-family:"Elephant Pro";}
@font-face
	{font-family:EucrosiaUPC;}
@font-face
	{font-family:Euphemia;}
@font-face
	{font-family:Fahkwang;}
@font-face
	{font-family:"Fahkwang ExtraLight";}
@font-face
	{font-family:"Fahkwang Light";}
@font-face
	{font-family:"Fahkwang Medium";}
@font-face
	{font-family:"Fahkwang SemiBold";}
@font-face
	{font-family:"Fairwater Script";}
@font-face
	{font-family:"Fairwater Script Light";}
@font-face
	{font-family:FangSong;}
@font-face
	{font-family:"Fave Script Bold Pro";}
@font-face
	{font-family:"Fira Code";}
@font-face
	{font-family:"Fira Code Light";}
@font-face
	{font-family:"Fira Code Medium";}
@font-face
	{font-family:"Fira Code Retina";}
@font-face
	{font-family:"Fira Mono";}
@font-face
	{font-family:"Fira Mono Medium";}
@font-face
	{font-family:"Fira Sans";}
@font-face
	{font-family:"Fira Sans Black";}
@font-face
	{font-family:"Fira Sans Condensed";}
@font-face
	{font-family:"Fira Sans Condensed Black";}
@font-face
	{font-family:"Fira Sans Condensed ExtraBold";}
@font-face
	{font-family:"Fira Sans Condensed ExtraLight";}
@font-face
	{font-family:"Fira Sans Condensed Light";}
@font-face
	{font-family:"Fira Sans Condensed Medium";}
@font-face
	{font-family:"Fira Sans Condensed SemiBold";}
@font-face
	{font-family:"Fira Sans Condensed Thin";}
@font-face
	{font-family:"Fira Sans Extra Condensed";}
@font-face
	{font-family:"Fira Sans Extra Condensed Black";}
@font-face
	{font-family:"Fira Sans Extra Condensed Light";}
@font-face
	{font-family:"Fira Sans Extra Condensed Thin";}
@font-face
	{font-family:"Fira Sans ExtraBold";}
@font-face
	{font-family:"Fira Sans ExtraLight";}
@font-face
	{font-family:"Fira Sans Light";}
@font-face
	{font-family:"Fira Sans Medium";}
@font-face
	{font-family:"Fira Sans SemiBold";}
@font-face
	{font-family:"Fira Sans Thin";}
@font-face
	{font-family:"Fjalla One";}
@font-face
	{font-family:"Forte Forward";}
@font-face
	{font-family:"Frank Ruhl Libre";}
@font-face
	{font-family:"Frank Ruhl Libre Black";}
@font-face
	{font-family:"Frank Ruhl Libre Light";}
@font-face
	{font-family:"Frank Ruhl Libre Medium";}
@font-face
	{font-family:FrankRuehl;}
@font-face
	{font-family:"Fredoka One";}
@font-face
	{font-family:FreesiaUPC;}
@font-face
	{font-family:Gabriela;}
@font-face
	{font-family:Gaegu;}
@font-face
	{font-family:"Gaegu Light";}
@font-face
	{font-family:"Georgia Pro";}
@font-face
	{font-family:"Georgia Pro Black";}
@font-face
	{font-family:"Georgia Pro Cond";}
@font-face
	{font-family:"Georgia Pro Cond Black";}
@font-face
	{font-family:"Georgia Pro Cond Light";}
@font-face
	{font-family:"Georgia Pro Cond Semibold";}
@font-face
	{font-family:"Georgia Pro Light";}
@font-face
	{font-family:"Georgia Pro Semibold";}
@font-face
	{font-family:"Gill Sans Nova";}
@font-face
	{font-family:"Gill Sans Nova Cond";}
@font-face
	{font-family:"Gill Sans Nova Cond Lt";}
@font-face
	{font-family:"Gill Sans Nova Cond Ultra Bold";}
@font-face
	{font-family:"Gill Sans Nova Cond XBd";}
@font-face
	{font-family:"Gill Sans Nova Light";}
@font-face
	{font-family:"Gill Sans Nova Ultra Bold";}
@font-face
	{font-family:Gisha;}
@font-face
	{font-family:"Goudy Type";}
@font-face
	{font-family:Grandview;}
@font-face
	{font-family:"Grandview Display";}
@font-face
	{font-family:Grotesque;}
@font-face
	{font-family:"Grotesque Light";}
@font-face
	{font-family:GulimChe;}
@font-face
	{font-family:Gungsuh;}
@font-face
	{font-family:GungsuhChe;}
@font-face
	{font-family:"Hadassah Friedlaender";}
@font-face
	{font-family:"Hammersmith One";}
@font-face
	{font-family:Heebo;}
@font-face
	{font-family:"Heebo Black";}
@font-face
	{font-family:"Heebo ExtraBold";}
@font-face
	{font-family:"Heebo Light";}
@font-face
	{font-family:"Heebo Medium";}
@font-face
	{font-family:"Heebo Thin";}
@font-face
	{font-family:HGGothicE;}
@font-face
	{font-family:HGMaruGothicMPRO;}
@font-face
	{font-family:HGMinchoE;}
@font-face
	{font-family:HGPGothicE;}
@font-face
	{font-family:HGPMinchoE;}
@font-face
	{font-family:HGPSoeiKakugothicUB;}
@font-face
	{font-family:HGSGothicE;}
@font-face
	{font-family:HGSMinchoE;}
@font-face
	{font-family:HGSoeiKakugothicUB;}
@font-face
	{font-family:HGSSoeiKakugothicUB;}
@font-face
	{font-family:Hind;}
@font-face
	{font-family:"Hind Colombo";}
@font-face
	{font-family:"Hind Colombo Light";}
@font-face
	{font-family:"Hind Colombo Medium";}
@font-face
	{font-family:"Hind Colombo SemiBold";}
@font-face
	{font-family:"Hind Guntur";}
@font-face
	{font-family:"Hind Guntur Light";}
@font-face
	{font-family:"Hind Guntur Medium";}
@font-face
	{font-family:"Hind Guntur SemiBold";}
@font-face
	{font-family:"Hind Jalandhar";}
@font-face
	{font-family:"Hind Jalandhar Light";}
@font-face
	{font-family:"Hind Jalandhar Medium";}
@font-face
	{font-family:"Hind Jalandhar SemiBold";}
@font-face
	{font-family:"Hind Kochi";}
@font-face
	{font-family:"Hind Kochi Light";}
@font-face
	{font-family:"Hind Kochi Medium";}
@font-face
	{font-family:"Hind Kochi SemiBold";}
@font-face
	{font-family:"Hind Light";}
@font-face
	{font-family:"Hind Madurai";}
@font-face
	{font-family:"Hind Madurai Light";}
@font-face
	{font-family:"Hind Madurai Medium";}
@font-face
	{font-family:"Hind Madurai SemiBold";}
@font-face
	{font-family:"Hind Medium";}
@font-face
	{font-family:"Hind Mysuru";}
@font-face
	{font-family:"Hind Mysuru Light";}
@font-face
	{font-family:"Hind Mysuru Medium";}
@font-face
	{font-family:"Hind Mysuru SemiBold";}
@font-face
	{font-family:"Hind SemiBold";}
@font-face
	{font-family:"Hind Siliguri";}
@font-face
	{font-family:"Hind Siliguri Light";}
@font-face
	{font-family:"Hind Siliguri Medium";}
@font-face
	{font-family:"Hind Siliguri SemiBold";}
@font-face
	{font-family:"Hind Vadodara";}
@font-face
	{font-family:"Hind Vadodara Light";}
@font-face
	{font-family:"Hind Vadodara Medium";}
@font-face
	{font-family:"Hind Vadodara SemiBold";}
@font-face
	{font-family:"IBM Plex Mono";}
@font-face
	{font-family:"IBM Plex Mono ExtraLight";}
@font-face
	{font-family:"IBM Plex Mono Light";}
@font-face
	{font-family:"IBM Plex Mono Medium";}
@font-face
	{font-family:"IBM Plex Mono SemiBold";}
@font-face
	{font-family:"IBM Plex Mono Thin";}
@font-face
	{font-family:"IBM Plex Sans";}
@font-face
	{font-family:"IBM Plex Sans Condensed";}
@font-face
	{font-family:"IBM Plex Sans Condensed Light";}
@font-face
	{font-family:"IBM Plex Sans Condensed Medium";}
@font-face
	{font-family:"IBM Plex Sans Condensed Thin";}
@font-face
	{font-family:"IBM Plex Sans ExtraLight";}
@font-face
	{font-family:"IBM Plex Sans Light";}
@font-face
	{font-family:"IBM Plex Sans Medium";}
@font-face
	{font-family:"IBM Plex Sans SemiBold";}
@font-face
	{font-family:"IBM Plex Sans Thin";}
@font-face
	{font-family:"IBM Plex Serif";}
@font-face
	{font-family:"IBM Plex Serif ExtraLight";}
@font-face
	{font-family:"IBM Plex Serif Light";}
@font-face
	{font-family:"IBM Plex Serif Medium";}
@font-face
	{font-family:"IBM Plex Serif SemiBold";}
@font-face
	{font-family:"IBM Plex Serif Thin";}
@font-face
	{font-family:Inconsolata;}
@font-face
	{font-family:"Inconsolata Black";}
@font-face
	{font-family:"Inconsolata Bold";}
@font-face
	{font-family:"Inconsolata Condensed";}
@font-face
	{font-family:"Inconsolata Condensed Black";}
@font-face
	{font-family:"Inconsolata Condensed Bold";}
@font-face
	{font-family:"Inconsolata Condensed ExtraBold";}
@font-face
	{font-family:"Inconsolata Condensed Light";}
@font-face
	{font-family:"Inconsolata Condensed Medium";}
@font-face
	{font-family:"Inconsolata Condensed SemiBold";}
@font-face
	{font-family:"Inconsolata Expanded";}
@font-face
	{font-family:"Inconsolata Expanded Black";}
@font-face
	{font-family:"Inconsolata Expanded Bold";}
@font-face
	{font-family:"Inconsolata Expanded ExtraBold";}
@font-face
	{font-family:"Inconsolata Expanded ExtraLight";}
@font-face
	{font-family:"Inconsolata Expanded Light";}
@font-face
	{font-family:"Inconsolata Expanded Medium";}
@font-face
	{font-family:"Inconsolata Expanded SemiBold";}
@font-face
	{font-family:"Inconsolata ExtraBold";}
@font-face
	{font-family:"Inconsolata ExtraCondensed";}
@font-face
	{font-family:"Inconsolata ExtraCondensed Bold";}
@font-face
	{font-family:"Inconsolata ExtraExpanded";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Black";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Bold";}
@font-face
	{font-family:"Inconsolata ExtraExpanded Light";}
@font-face
	{font-family:"Inconsolata ExtraLight";}
@font-face
	{font-family:"Inconsolata Light";}
@font-face
	{font-family:"Inconsolata Medium";}
@font-face
	{font-family:"Inconsolata SemiBold";}
@font-face
	{font-family:"Inconsolata SemiCondensed";}
@font-face
	{font-family:"Inconsolata SemiCondensed Black";}
@font-face
	{font-family:"Inconsolata SemiCondensed Bold";}
@font-face
	{font-family:"Inconsolata SemiCondensed Light";}
@font-face
	{font-family:"Inconsolata SemiExpanded";}
@font-face
	{font-family:"Inconsolata SemiExpanded Black";}
@font-face
	{font-family:"Inconsolata SemiExpanded Bold";}
@font-face
	{font-family:"Inconsolata SemiExpanded Light";}
@font-face
	{font-family:"Inconsolata SemiExpanded Medium";}
@font-face
	{font-family:"Inconsolata UltraCondensed";}
@font-face
	{font-family:"Inconsolata UltraCondensed Bold";}
@font-face
	{font-family:"Inconsolata UltraExpanded";}
@font-face
	{font-family:"Inconsolata UltraExpanded Black";}
@font-face
	{font-family:"Inconsolata UltraExpanded Bold";}
@font-face
	{font-family:"Inconsolata UltraExpanded Light";}
@font-face
	{font-family:IrisUPC;}
@font-face
	{font-family:"Iskoola Pota";}
@font-face
	{font-family:Italianno;}
@font-face
	{font-family:JasmineUPC;}
@font-face
	{font-family:"Josefin Sans";}
@font-face
	{font-family:"Josefin Sans Bold";}
@font-face
	{font-family:"Josefin Sans Light";}
@font-face
	{font-family:"Josefin Sans SemiBold";}
@font-face
	{font-family:"Josefin Sans Thin";}
@font-face
	{font-family:"Josefin Slab";}
@font-face
	{font-family:"Josefin Slab Light";}
@font-face
	{font-family:"Josefin Slab SemiBold";}
@font-face
	{font-family:"Josefin Slab Thin";}
@font-face
	{font-family:Jumble;}
@font-face
	{font-family:KaiTi;}
@font-face
	{font-family:Kalinga;}
@font-face
	{font-family:Karla;}
@font-face
	{font-family:"Karla ExtraBold";}
@font-face
	{font-family:"Karla ExtraLight";}
@font-face
	{font-family:"Karla Light";}
@font-face
	{font-family:"Karla Medium";}
@font-face
	{font-family:"Karla Tamil Inclined";}
@font-face
	{font-family:"Karla Tamil Upright";}
@font-face
	{font-family:Kartika;}
@font-face
	{font-family:Kermit;}
@font-face
	{font-family:"Kermit Condensed";}
@font-face
	{font-family:"Kermit Expanded";}
@font-face
	{font-family:"Kermit Extrabold";}
@font-face
	{font-family:"Kermit Extrabold Condensed";}
@font-face
	{font-family:"Kermit Extrabold Expanded";}
@font-face
	{font-family:"Kermit Extralight";}
@font-face
	{font-family:"Kermit Extralight Condensed";}
@font-face
	{font-family:"Kermit Extralight Expanded";}
@font-face
	{font-family:"Kermit Light";}
@font-face
	{font-family:"Kermit Light Condensed";}
@font-face
	{font-family:"Kermit Light Expanded";}
@font-face
	{font-family:"Kermit Semibold";}
@font-face
	{font-family:"Kermit Semibold Condensed";}
@font-face
	{font-family:"Kermit Semibold Expanded";}
@font-face
	{font-family:"Kermit Thin";}
@font-face
	{font-family:"Kermit Thin Condensed";}
@font-face
	{font-family:"Kermit Thin Expanded";}
@font-face
	{font-family:"Khmer UI";}
@font-face
	{font-family:Kigelia;}
@font-face
	{font-family:"Kigelia Arabic";}
@font-face
	{font-family:"Kigelia Arabic Light";}
@font-face
	{font-family:"Kigelia Light";}
@font-face
	{font-family:"Klee One";}
@font-face
	{font-family:"Klee One SemiBold";}
@font-face
	{font-family:KodchiangUPC;}
@font-face
	{font-family:Kokila;}
@font-face
	{font-family:Krub;}
@font-face
	{font-family:"Krub ExtraLight";}
@font-face
	{font-family:"Krub Light";}
@font-face
	{font-family:"Krub Medium";}
@font-face
	{font-family:"Krub SemiBold";}
@font-face
	{font-family:Lalezar;}
@font-face
	{font-family:"Lao UI";}
@font-face
	{font-family:Lato;}
@font-face
	{font-family:"Lato Black";}
@font-face
	{font-family:"Lato ExtraBold";}
@font-face
	{font-family:"Lato ExtraLight";}
@font-face
	{font-family:"Lato Light";}
@font-face
	{font-family:"Lato Medium";}
@font-face
	{font-family:"Lato SemiBold";}
@font-face
	{font-family:"Lato Thin";}
@font-face
	{font-family:"Levenim MT";}
@font-face
	{font-family:"Libre Barcode 128";}
@font-face
	{font-family:"Libre Barcode 128 Text";}
@font-face
	{font-family:"Libre Barcode 39";}
@font-face
	{font-family:"Libre Barcode 39 Extended";}
@font-face
	{font-family:"Libre Barcode 39 Extended Text";}
@font-face
	{font-family:"Libre Barcode 39 Text";}
@font-face
	{font-family:"Libre Barcode EAN13 Text";}
@font-face
	{font-family:"Libre Baskerville";}
@font-face
	{font-family:"Libre Franklin";}
@font-face
	{font-family:"Libre Franklin Black";}
@font-face
	{font-family:"Libre Franklin ExtraBold";}
@font-face
	{font-family:"Libre Franklin ExtraLight";}
@font-face
	{font-family:"Libre Franklin Light";}
@font-face
	{font-family:"Libre Franklin Medium";}
@font-face
	{font-family:"Libre Franklin SemiBold";}
@font-face
	{font-family:"Libre Franklin Thin";}
@font-face
	{font-family:Ligconsolata;}
@font-face
	{font-family:LilyUPC;}
@font-face
	{font-family:Livvic;}
@font-face
	{font-family:"Livvic Black";}
@font-face
	{font-family:"Livvic ExtraLight";}
@font-face
	{font-family:"Livvic Light";}
@font-face
	{font-family:"Livvic Medium";}
@font-face
	{font-family:"Livvic SemiBold";}
@font-face
	{font-family:"Livvic Thin";}
@font-face
	{font-family:Lobster;}
@font-face
	{font-family:"Lobster Two";}
@font-face
	{font-family:Lora;}
@font-face
	{font-family:"Lora Medium";}
@font-face
	{font-family:"Mangal Pro";}
@font-face
	{font-family:Meddon;}
@font-face
	{font-family:Meiryo;}
@font-face
	{font-family:"Meiryo UI";}
@font-face
	{font-family:Merriweather;}
@font-face
	{font-family:"Merriweather Black";}
@font-face
	{font-family:"Merriweather Light";}
@font-face
	{font-family:"Merriweather Sans";}
@font-face
	{font-family:"Merriweather Sans ExtraBold";}
@font-face
	{font-family:"Merriweather Sans Light";}
@font-face
	{font-family:"Microsoft GothicNeo";}
@font-face
	{font-family:"Microsoft GothicNeo Light";}
@font-face
	{font-family:MingLiU_HKSCS;}
@font-face
	{font-family:Miriam;}
@font-face
	{font-family:"Miriam Fixed";}
@font-face
	{font-family:"Miriam Libre";}
@font-face
	{font-family:Mitr;}
@font-face
	{font-family:"Mitr ExtraLight";}
@font-face
	{font-family:"Mitr Light";}
@font-face
	{font-family:"Mitr Medium";}
@font-face
	{font-family:"Mitr SemiBold";}
@font-face
	{font-family:"Modern Love";}
@font-face
	{font-family:"Modern Love Caps";}
@font-face
	{font-family:"Modern Love Grunge";}
@font-face
	{font-family:Montserrat;}
@font-face
	{font-family:"Montserrat Black";}
@font-face
	{font-family:"Montserrat ExtraBold";}
@font-face
	{font-family:"Montserrat ExtraLight";}
@font-face
	{font-family:"Montserrat Light";}
@font-face
	{font-family:"Montserrat Medium";}
@font-face
	{font-family:"Montserrat SemiBold";}
@font-face
	{font-family:"Montserrat Thin";}
@font-face
	{font-family:MoolBoran;}
@font-face
	{font-family:"MS PMincho";}
@font-face
	{font-family:"Mystical Woods Rough Script";}
@font-face
	{font-family:"Mystical Woods Smooth Script";}
@font-face
	{font-family:"Nanum Brush Script";}
@font-face
	{font-family:"Nanum Pen";}
@font-face
	{font-family:NanumGothic;}
@font-face
	{font-family:NanumGothicCoding;}
@font-face
	{font-family:NanumGothicExtraBold;}
@font-face
	{font-family:NanumMyeongjo;}
@font-face
	{font-family:NanumMyeongjoExtraBold;}
@font-face
	{font-family:Narkisim;}
@font-face
	{font-family:"Neue Haas Grotesk Text Pro";}
@font-face
	{font-family:"News Gothic MT";}
@font-face
	{font-family:Nina;}
@font-face
	{font-family:"Nirmala Text";}
@font-face
	{font-family:"Nirmala Text Semilight";}
@font-face
	{font-family:"Nordique Inline";}
@font-face
	{font-family:"Noto Music";}
@font-face
	{font-family:"Noto Nastaliq Urdu";}
@font-face
	{font-family:"Noto Sans";}
@font-face
	{font-family:"Noto Sans AnatoHiero";}
@font-face
	{font-family:"Noto Sans Avestan";}
@font-face
	{font-family:"Noto Sans Bassa Vah";}
@font-face
	{font-family:"Noto Sans Batak";}
@font-face
	{font-family:"Noto Sans Bhaiksuki";}
@font-face
	{font-family:"Noto Sans Brahmi";}
@font-face
	{font-family:"Noto Sans Buginese";}
@font-face
	{font-family:"Noto Sans Buhid";}
@font-face
	{font-family:"Noto Sans Carian";}
@font-face
	{font-family:"Noto Sans CaucAlban";}
@font-face
	{font-family:"Noto Sans Chakma";}
@font-face
	{font-family:"Noto Sans Coptic";}
@font-face
	{font-family:"Noto Sans Cuneiform";}
@font-face
	{font-family:"Noto Sans Cypriot";}
@font-face
	{font-family:"Noto Sans Deseret";}
@font-face
	{font-family:"Noto Sans Devanagari";}
@font-face
	{font-family:"Noto Sans Devanagari Black";}
@font-face
	{font-family:"Noto Sans Devanagari ExtraBold";}
@font-face
	{font-family:"Noto Sans Devanagari ExtraLight";}
@font-face
	{font-family:"Noto Sans Devanagari Light";}
@font-face
	{font-family:"Noto Sans Devanagari Medium";}
@font-face
	{font-family:"Noto Sans Devanagari SemiBold";}
@font-face
	{font-family:"Noto Sans Devanagari Thin";}
@font-face
	{font-family:"Noto Sans Devanagari UI";}
@font-face
	{font-family:"Noto Sans Devanagari UI Black";}
@font-face
	{font-family:"Noto Sans Devanagari UI Light";}
@font-face
	{font-family:"Noto Sans Devanagari UI Medium";}
@font-face
	{font-family:"Noto Sans Devanagari UI Thin";}
@font-face
	{font-family:"Noto Sans Duployan";}
@font-face
	{font-family:"Noto Sans EgyptHiero";}
@font-face
	{font-family:"Noto Sans Elbasan";}
@font-face
	{font-family:"Noto Sans Elymaic";}
@font-face
	{font-family:"Noto Sans Glagolitic";}
@font-face
	{font-family:"Noto Sans Gothic";}
@font-face
	{font-family:"Noto Sans Grantha";}
@font-face
	{font-family:"Noto Sans Gujarati";}
@font-face
	{font-family:"Noto Sans Gujarati Black";}
@font-face
	{font-family:"Noto Sans Gujarati ExtraBold";}
@font-face
	{font-family:"Noto Sans Gujarati ExtraLight";}
@font-face
	{font-family:"Noto Sans Gujarati Light";}
@font-face
	{font-family:"Noto Sans Gujarati Medium";}
@font-face
	{font-family:"Noto Sans Gujarati SemiBold";}
@font-face
	{font-family:"Noto Sans Gujarati Thin";}
@font-face
	{font-family:"Noto Sans Gujarati UI";}
@font-face
	{font-family:"Noto Sans Gujarati UI Black";}
@font-face
	{font-family:"Noto Sans Gujarati UI ExtraBold";}
@font-face
	{font-family:"Noto Sans Gujarati UI Light";}
@font-face
	{font-family:"Noto Sans Gujarati UI Medium";}
@font-face
	{font-family:"Noto Sans Gujarati UI SemiBold";}
@font-face
	{font-family:"Noto Sans Gujarati UI Thin";}
@font-face
	{font-family:"Noto Sans Gunjala Gondi";}
@font-face
	{font-family:"Noto Sans Hanunoo";}
@font-face
	{font-family:"Noto Sans Hatran";}
@font-face
	{font-family:"Noto Sans ImpAramaic";}
@font-face
	{font-family:"Noto Sans Indic Siyaq Numbers";}
@font-face
	{font-family:"Noto Sans InsPahlavi";}
@font-face
	{font-family:"Noto Sans InsParthi";}
@font-face
	{font-family:"Noto Sans Javanese";}
@font-face
	{font-family:"Noto Sans Kaithi";}
@font-face
	{font-family:"Noto Sans Kharoshthi";}
@font-face
	{font-family:"Noto Sans Khojki";}
@font-face
	{font-family:"Noto Sans Khudawadi";}
@font-face
	{font-family:"Noto Sans Lepcha";}
@font-face
	{font-family:"Noto Sans Limbu";}
@font-face
	{font-family:"Noto Sans Linear A";}
@font-face
	{font-family:"Noto Sans Linear B";}
@font-face
	{font-family:"Noto Sans Lycian";}
@font-face
	{font-family:"Noto Sans Lydian";}
@font-face
	{font-family:"Noto Sans Mahajani";}
@font-face
	{font-family:"Noto Sans Mandaic";}
@font-face
	{font-family:"Noto Sans Manichaean";}
@font-face
	{font-family:"Noto Sans Marchen";}
@font-face
	{font-family:"Noto Sans Masaram Gondi";}
@font-face
	{font-family:"Noto Sans Math";}
@font-face
	{font-family:"Noto Sans Mayan Numerals";}
@font-face
	{font-family:"Noto Sans Mende Kikakui";}
@font-face
	{font-family:"Noto Sans Meroitic";}
@font-face
	{font-family:"Noto Sans Miao";}
@font-face
	{font-family:"Noto Sans Modi";}
@font-face
	{font-family:"Noto Sans Mongolian";}
@font-face
	{font-family:"Noto Sans Mro";}
@font-face
	{font-family:"Noto Sans Multani";}
@font-face
	{font-family:"Noto Sans Myanmar";}
@font-face
	{font-family:"Noto Sans Myanmar Blk";}
@font-face
	{font-family:"Noto Sans Myanmar ExtBd";}
@font-face
	{font-family:"Noto Sans Myanmar ExtLt";}
@font-face
	{font-family:"Noto Sans Myanmar Light";}
@font-face
	{font-family:"Noto Sans Myanmar Med";}
@font-face
	{font-family:"Noto Sans Myanmar SemBd";}
@font-face
	{font-family:"Noto Sans Myanmar Thin";}
@font-face
	{font-family:"Noto Sans Myanmar UI";}
@font-face
	{font-family:"Noto Sans Myanmar UI Black";}
@font-face
	{font-family:"Noto Sans Myanmar UI ExtraBold";}
@font-face
	{font-family:"Noto Sans Myanmar UI ExtraLight";}
@font-face
	{font-family:"Noto Sans Myanmar UI Light";}
@font-face
	{font-family:"Noto Sans Myanmar UI Medium";}
@font-face
	{font-family:"Noto Sans Myanmar UI SemiBold";}
@font-face
	{font-family:"Noto Sans Myanmar UI Thin";}
@font-face
	{font-family:"Noto Sans Nabataean";}
@font-face
	{font-family:"Noto Sans Newa";}
@font-face
	{font-family:"Noto Sans NewTaiLue";}
@font-face
	{font-family:"Noto Sans NKo";}
@font-face
	{font-family:"Noto Sans Nushu";}
@font-face
	{font-family:"Noto Sans Ogham";}
@font-face
	{font-family:"Noto Sans Old Italic";}
@font-face
	{font-family:"Noto Sans Old Permic";}
@font-face
	{font-family:"Noto Sans Old Turkic";}
@font-face
	{font-family:"Noto Sans OldHung";}
@font-face
	{font-family:"Noto Sans OldNorArab";}
@font-face
	{font-family:"Noto Sans OldPersian";}
@font-face
	{font-family:"Noto Sans OldSogdian";}
@font-face
	{font-family:"Noto Sans OldSouArab";}
@font-face
	{font-family:"Noto Sans Oriya";}
@font-face
	{font-family:"Noto Sans Oriya Blk";}
@font-face
	{font-family:"Noto Sans Oriya Thin";}
@font-face
	{font-family:"Noto Sans Oriya UI";}
@font-face
	{font-family:"Noto Sans Oriya UI Blk";}
@font-face
	{font-family:"Noto Sans Oriya UI Thin";}
@font-face
	{font-family:"Noto Sans Osage";}
@font-face
	{font-family:"Noto Sans Osmanya";}
@font-face
	{font-family:"Noto Sans Pahawh Hmong";}
@font-face
	{font-family:"Noto Sans Palmyrene";}
@font-face
	{font-family:"Noto Sans PauCinHau";}
@font-face
	{font-family:"Noto Sans PhagsPa";}
@font-face
	{font-family:"Noto Sans Phoenician";}
@font-face
	{font-family:"Noto Sans PsaPahlavi";}
@font-face
	{font-family:"Noto Sans Rejang";}
@font-face
	{font-family:"Noto Sans Runic";}
@font-face
	{font-family:"Noto Sans Samaritan";}
@font-face
	{font-family:"Noto Sans Saurashtra";}
@font-face
	{font-family:"Noto Sans Sharada";}
@font-face
	{font-family:"Noto Sans Shavian";}
@font-face
	{font-family:"Noto Sans Siddham";}
@font-face
	{font-family:"Noto Sans Sogdian";}
@font-face
	{font-family:"Noto Sans Soyombo";}
@font-face
	{font-family:"Noto Sans Syloti Nagri";}
@font-face
	{font-family:"Noto Sans Symbols2";}
@font-face
	{font-family:"Noto Sans Syriac";}
@font-face
	{font-family:"Noto Sans Syriac Black";}
@font-face
	{font-family:"Noto Sans Syriac Thin";}
@font-face
	{font-family:"Noto Sans Tagalog";}
@font-face
	{font-family:"Noto Sans Tagbanwa";}
@font-face
	{font-family:"Noto Sans Tai Le";}
@font-face
	{font-family:"Noto Sans Tai Viet";}
@font-face
	{font-family:"Noto Sans Takri";}
@font-face
	{font-family:"Noto Sans Tamil Supplement";}
@font-face
	{font-family:"Noto Sans Thai Looped Black";}
@font-face
	{font-family:"Noto Sans Thai Looped Bold";}
@font-face
	{font-family:"Noto Sans Thai Looped ExtLight";}
@font-face
	{font-family:"Noto Sans Thai Looped Extrabold";}
@font-face
	{font-family:"Noto Sans Thai Looped Light";}
@font-face
	{font-family:"Noto Sans Thai Looped Medium";}
@font-face
	{font-family:"Noto Sans Thai Looped Regular";}
@font-face
	{font-family:"Noto Sans Thai Looped Semibold";}
@font-face
	{font-family:"Noto Sans Thai Looped Thin";}
@font-face
	{font-family:"Noto Sans Tifinagh";}
@font-face
	{font-family:"Noto Sans Tirhuta";}
@font-face
	{font-family:"Noto Sans Ugaritic";}
@font-face
	{font-family:"Noto Sans Vai";}
@font-face
	{font-family:"Noto Sans Wancho";}
@font-face
	{font-family:"Noto Sans WarangCiti";}
@font-face
	{font-family:"Noto Sans Yi";}
@font-face
	{font-family:"Noto Sans Zanabazar";}
@font-face
	{font-family:"Noto Serif";}
@font-face
	{font-family:"Noto Serif Ahom";}
@font-face
	{font-family:"Noto Serif Balinese";}
@font-face
	{font-family:"Noto Serif Dogra";}
@font-face
	{font-family:"Noto Serif Grantha";}
@font-face
	{font-family:"Noto Serif Myanmar";}
@font-face
	{font-family:"Noto Serif Myanmar Blk";}
@font-face
	{font-family:"Noto Serif Myanmar ExtBd";}
@font-face
	{font-family:"Noto Serif Myanmar ExtLt";}
@font-face
	{font-family:"Noto Serif Myanmar Light";}
@font-face
	{font-family:"Noto Serif Myanmar Med";}
@font-face
	{font-family:"Noto Serif Myanmar SemBd";}
@font-face
	{font-family:"Noto Serif Myanmar Thin";}
@font-face
	{font-family:"Noto Serif Tangut";}
@font-face
	{font-family:"Noto Traditional Nushu";}
@font-face
	{font-family:Nunito;}
@font-face
	{font-family:"Nunito Black";}
@font-face
	{font-family:"Nunito ExtraBold";}
@font-face
	{font-family:"Nunito ExtraLight";}
@font-face
	{font-family:"Nunito Light";}
@font-face
	{font-family:"Nunito Sans";}
@font-face
	{font-family:"Nunito Sans Black";}
@font-face
	{font-family:"Nunito Sans ExtraBold";}
@font-face
	{font-family:"Nunito Sans ExtraLight";}
@font-face
	{font-family:"Nunito Sans Light";}
@font-face
	{font-family:"Nunito Sans SemiBold";}
@font-face
	{font-family:"Nunito SemiBold";}
@font-face
	{font-family:Nyala;}
@font-face
	{font-family:OCRB;}
@font-face
	{font-family:"Open Sans";}
@font-face
	{font-family:"Open Sans ExtraBold";}
@font-face
	{font-family:"Open Sans Light";}
@font-face
	{font-family:"Open Sans SemiBold";}
@font-face
	{font-family:Oranienbaum;}
@font-face
	{font-family:Oswald;}
@font-face
	{font-family:"Oswald ExtraLight";}
@font-face
	{font-family:"Oswald Light";}
@font-face
	{font-family:"Oswald Medium";}
@font-face
	{font-family:"Oswald SemiBold";}
@font-face
	{font-family:Oxygen;}
@font-face
	{font-family:"Oxygen Light";}
@font-face
	{font-family:"Oxygen Mono";}
@font-face
	{font-family:Pacifico;}
@font-face
	{font-family:Palanquin;}
@font-face
	{font-family:"Palanquin ExtraLight";}
@font-face
	{font-family:"Palanquin Light";}
@font-face
	{font-family:"Palanquin Medium";}
@font-face
	{font-family:"Palanquin SemiBold";}
@font-face
	{font-family:"Palanquin Thin";}
@font-face
	{font-family:"Patrick Hand";}
@font-face
	{font-family:"Patrick Hand SC";}
@font-face
	{font-family:"Petit Formal Script";}
@font-face
	{font-family:"Plantagenet Cherokee";}
@font-face
	{font-family:"Playfair Display";}
@font-face
	{font-family:"Playfair Display Black";}
@font-face
	{font-family:"Playfair Display SC";}
@font-face
	{font-family:"Playfair Display SC Black";}
@font-face
	{font-family:"Poiret One";}
@font-face
	{font-family:Poppins;}
@font-face
	{font-family:"Poppins Black";}
@font-face
	{font-family:"Poppins ExtraBold";}
@font-face
	{font-family:"Poppins ExtraLight";}
@font-face
	{font-family:"Poppins Light";}
@font-face
	{font-family:"Poppins Medium";}
@font-face
	{font-family:"Poppins SemiBold";}
@font-face
	{font-family:"Poppins Thin";}
@font-face
	{font-family:Posterama;}
@font-face
	{font-family:Pridi;}
@font-face
	{font-family:"Pridi ExtraLight";}
@font-face
	{font-family:"Pridi Light";}
@font-face
	{font-family:"Pridi Medium";}
@font-face
	{font-family:"Pridi SemiBold";}
@font-face
	{font-family:Prompt;}
@font-face
	{font-family:"Prompt Black";}
@font-face
	{font-family:"Prompt ExtraBold";}
@font-face
	{font-family:"Prompt ExtraLight";}
@font-face
	{font-family:"Prompt Light";}
@font-face
	{font-family:"Prompt Medium";}
@font-face
	{font-family:"Prompt SemiBold";}
@font-face
	{font-family:"Prompt Thin";}
@font-face
	{font-family:"PT Mono";}
@font-face
	{font-family:"PT Sans";}
@font-face
	{font-family:"PT Sans Caption";}
@font-face
	{font-family:"PT Sans Narrow";}
@font-face
	{font-family:"PT Serif";}
@font-face
	{font-family:"PT Serif Caption";}
@font-face
	{font-family:Quattrocento;}
@font-face
	{font-family:"Quattrocento Sans";}
@font-face
	{font-family:Questrial;}
@font-face
	{font-family:"Quire Sans";}
@font-face
	{font-family:"Quire Sans Light";}
@font-face
	{font-family:"Quire Sans Pro Light";}
@font-face
	{font-family:Raleway;}
@font-face
	{font-family:"Raleway Black";}
@font-face
	{font-family:"Raleway ExtraBold";}
@font-face
	{font-family:"Raleway ExtraLight";}
@font-face
	{font-family:"Raleway Light";}
@font-face
	{font-family:"Raleway Medium";}
@font-face
	{font-family:"Raleway SemiBold";}
@font-face
	{font-family:"Raleway Thin";}
@font-face
	{font-family:"Rastanty Cortez";}
@font-face
	{font-family:"Reem Kufi";}
@font-face
	{font-family:Roboto;}
@font-face
	{font-family:"Roboto Black";}
@font-face
	{font-family:"Roboto Condensed";}
@font-face
	{font-family:"Roboto Condensed Light";}
@font-face
	{font-family:"Roboto Condensed Medium";}
@font-face
	{font-family:"Roboto Light";}
@font-face
	{font-family:"Roboto Medium";}
@font-face
	{font-family:"Roboto Mono";}
@font-face
	{font-family:"Roboto Mono Light";}
@font-face
	{font-family:"Roboto Mono Medium";}
@font-face
	{font-family:"Roboto Mono Thin";}
@font-face
	{font-family:"Roboto Serif 20pt";}
@font-face
	{font-family:"Roboto Serif 20pt Black";}
@font-face
	{font-family:"Roboto Serif 20pt ExtraBold";}
@font-face
	{font-family:"Roboto Serif 20pt ExtraLight";}
@font-face
	{font-family:"Roboto Serif 20pt Light";}
@font-face
	{font-family:"Roboto Serif 20pt Medium";}
@font-face
	{font-family:"Roboto Serif 20pt SemiBold";}
@font-face
	{font-family:"Roboto Serif 20pt Thin";}
@font-face
	{font-family:"Roboto Slab";}
@font-face
	{font-family:"Roboto Slab Black";}
@font-face
	{font-family:"Roboto Slab ExtraBold";}
@font-face
	{font-family:"Roboto Slab ExtraLight";}
@font-face
	{font-family:"Roboto Slab Light";}
@font-face
	{font-family:"Roboto Slab Medium";}
@font-face
	{font-family:"Roboto Slab SemiBold";}
@font-face
	{font-family:"Roboto Slab Thin";}
@font-face
	{font-family:"Roboto Thin";}
@font-face
	{font-family:"Rockwell Light";}
@font-face
	{font-family:"Rockwell Nova";}
@font-face
	{font-family:"Rockwell Nova Cond";}
@font-face
	{font-family:"Rockwell Nova Cond Light";}
@font-face
	{font-family:"Rockwell Nova Extra Bold";}
@font-face
	{font-family:"Rockwell Nova Light";}
@font-face
	{font-family:Rod;}
@font-face
	{font-family:"Sabon Next LT";}
@font-face
	{font-family:Sacramento;}
@font-face
	{font-family:Sagona;}
@font-face
	{font-family:"Sagona Book";}
@font-face
	{font-family:"Sagona ExtraLight";}
@font-face
	{font-family:"Sakkal Majalla";}
@font-face
	{font-family:"Sanskrit Text";}
@font-face
	{font-family:Seaford;}
@font-face
	{font-family:"Seaford Display";}
@font-face
	{font-family:"Secular One";}
@font-face
	{font-family:"Segoe Marker";}
@font-face
	{font-family:"Segoe Pro";}
@font-face
	{font-family:"Segoe Pro Black";}
@font-face
	{font-family:"Segoe Pro Cond";}
@font-face
	{font-family:"Segoe Pro Display";}
@font-face
	{font-family:"Segoe Pro Display Light";}
@font-face
	{font-family:"Segoe Pro Display Semibold";}
@font-face
	{font-family:"Segoe Pro Display SemiLight";}
@font-face
	{font-family:"Segoe Pro Light";}
@font-face
	{font-family:"Segoe Pro Semibold";}
@font-face
	{font-family:"Segoe Pro SemiLight";}
@font-face
	{font-family:"Segoe UI Emoji L";}
@font-face
	{font-family:"Segoe UI Variable Display";}
@font-face
	{font-family:"Segoe UI Variable Display Light";}
@font-face
	{font-family:"Segoe UI Variable Small";}
@font-face
	{font-family:"Segoe UI Variable Small Light";}
@font-face
	{font-family:"Segoe UI Variable Text";}
@font-face
	{font-family:"Segoe UI Variable Text Light";}
@font-face
	{font-family:"Segoe Xbox Symbol";}
@font-face
	{font-family:Selawik;}
@font-face
	{font-family:"Selawik Light";}
@font-face
	{font-family:"Selawik Semibold";}
@font-face
	{font-family:"Shadows Into Light Two";}
@font-face
	{font-family:"Shonar Bangla";}
@font-face
	{font-family:"Simplified Arabic";}
@font-face
	{font-family:"Simplified Arabic Fixed";}
@font-face
	{font-family:"Sitka Banner Semibold";}
@font-face
	{font-family:"Sitka Display Semibold";}
@font-face
	{font-family:"Sitka Heading Semibold";}
@font-face
	{font-family:"Sitka Small Semibold";}
@font-face
	{font-family:"Sitka Subheading Semibold";}
@font-face
	{font-family:"Sitka Text Semibold";}
@font-face
	{font-family:Skeena;}
@font-face
	{font-family:"Skeena Display";}
@font-face
	{font-family:"Source Code Pro";}
@font-face
	{font-family:"Source Code Pro Black";}
@font-face
	{font-family:"Source Code Pro ExtraLight";}
@font-face
	{font-family:"Source Code Pro Light";}
@font-face
	{font-family:"Source Code Pro Medium";}
@font-face
	{font-family:"Source Code Pro Semibold";}
@font-face
	{font-family:"Source Sans Pro";}
@font-face
	{font-family:"Source Sans Pro Black";}
@font-face
	{font-family:"Source Sans Pro ExtraLight";}
@font-face
	{font-family:"Source Sans Pro Light";}
@font-face
	{font-family:"Source Sans Pro SemiBold";}
@font-face
	{font-family:"Source Serif Pro";}
@font-face
	{font-family:"Source Serif Pro Black";}
@font-face
	{font-family:"Source Serif Pro ExtraLight";}
@font-face
	{font-family:"Source Serif Pro Light";}
@font-face
	{font-family:"Source Serif Pro SemiBold";}
@font-face
	{font-family:"Speak Pro";}
@font-face
	{font-family:"Speak Pro Light";}
@font-face
	{font-family:Staatliches;}
@font-face
	{font-family:STCaiyun;}
@font-face
	{font-family:STFangsong;}
@font-face
	{font-family:STHupo;}
@font-face
	{font-family:STKaiti;}
@font-face
	{font-family:STXihei;}
@font-face
	{font-family:STXingkai;}
@font-face
	{font-family:STXinwei;}
@font-face
	{font-family:STZhongsong;}
@font-face
	{font-family:"Suez One";}
@font-face
	{font-family:Tenorite;}
@font-face
	{font-family:"Tenorite Display";}
@font-face
	{font-family:"TH SarabunPSK";}
@font-face
	{font-family:"The Hand";}
@font-face
	{font-family:"The Hand Black";}
@font-face
	{font-family:"The Hand Extrablack";}
@font-face
	{font-family:"The Hand Light";}
@font-face
	{font-family:"The Serif Hand";}
@font-face
	{font-family:"The Serif Hand Black";}
@font-face
	{font-family:"The Serif Hand Extrablack";}
@font-face
	{font-family:"The Serif Hand Light";}
@font-face
	{font-family:"Tisa Offc Serif Pro";}
@font-face
	{font-family:"Tisa Offc Serif Pro Thin";}
@font-face
	{font-family:"Titillium Web";}
@font-face
	{font-family:"Titillium Web Black";}
@font-face
	{font-family:"Titillium Web ExtraLight";}
@font-face
	{font-family:"Titillium Web Light";}
@font-face
	{font-family:"Titillium Web SemiBold";}
@font-face
	{font-family:"Trade Gothic Inline";}
@font-face
	{font-family:"Trade Gothic Next";}
@font-face
	{font-family:"Trade Gothic Next Cond";}
@font-face
	{font-family:"Trade Gothic Next Heavy";}
@font-face
	{font-family:"Trade Gothic Next HvyCd";}
@font-face
	{font-family:"Trade Gothic Next Light";}
@font-face
	{font-family:"Trade Gothic Next Rounded";}
@font-face
	{font-family:"Traditional Arabic";}
@font-face
	{font-family:Trirong;}
@font-face
	{font-family:"Trirong Black";}
@font-face
	{font-family:"Trirong ExtraBold";}
@font-face
	{font-family:"Trirong ExtraLight";}
@font-face
	{font-family:"Trirong Light";}
@font-face
	{font-family:"Trirong Medium";}
@font-face
	{font-family:"Trirong SemiBold";}
@font-face
	{font-family:"Trirong Thin";}
@font-face
	{font-family:Ubuntu;}
@font-face
	{font-family:"Ubuntu Condensed";}
@font-face
	{font-family:"Ubuntu Light";}
@font-face
	{font-family:"Ubuntu Medium";}
@font-face
	{font-family:"Ubuntu Mono";}
@font-face
	{font-family:"UD Digi Kyokasho N-B";}
@font-face
	{font-family:"UD Digi Kyokasho N-R";}
@font-face
	{font-family:"UD Digi Kyokasho NK-B";}
@font-face
	{font-family:"UD Digi Kyokasho NK-R";}
@font-face
	{font-family:"UD Digi Kyokasho NP-B";}
@font-face
	{font-family:"UD Digi Kyokasho NP-R";}
@font-face
	{font-family:Univers;}
@font-face
	{font-family:"Univers Condensed";}
@font-face
	{font-family:"Univers Condensed Light";}
@font-face
	{font-family:"Univers Light";}
@font-face
	{font-family:"Urdu Typesetting";}
@font-face
	{font-family:Utsaah;}
@font-face
	{font-family:Vani;}
@font-face
	{font-family:"Varela Round";}
@font-face
	{font-family:"Verdana Pro";}
@font-face
	{font-family:"Verdana Pro Black";}
@font-face
	{font-family:"Verdana Pro Cond";}
@font-face
	{font-family:"Verdana Pro Cond Black";}
@font-face
	{font-family:"Verdana Pro Cond Light";}
@font-face
	{font-family:"Verdana Pro Cond SemiBold";}
@font-face
	{font-family:"Verdana Pro Light";}
@font-face
	{font-family:"Verdana Pro SemiBold";}
@font-face
	{font-family:Vijaya;}
@font-face
	{font-family:"Walbaum Display";}
@font-face
	{font-family:"Walbaum Display Heavy";}
@font-face
	{font-family:"Walbaum Display Light";}
@font-face
	{font-family:"Walbaum Display SemiBold";}
@font-face
	{font-family:"Walbaum Heading";}
@font-face
	{font-family:"Walbaum Text";}
@font-face
	{font-family:"Work Sans";}
@font-face
	{font-family:"Work Sans Black";}
@font-face
	{font-family:"Work Sans ExtraBold";}
@font-face
	{font-family:"Work Sans ExtraLight";}
@font-face
	{font-family:"Work Sans Light";}
@font-face
	{font-family:"Work Sans Medium";}
@font-face
	{font-family:"Work Sans SemiBold";}
@font-face
	{font-family:"Work Sans Thin";}
@font-face
	{font-family:Yesteryear;}
@font-face
	{font-family:"Yu Mincho";}
@font-face
	{font-family:"Yu Mincho Demibold";}
@font-face
	{font-family:"Yu Mincho Light";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	text-autospace:none;
	font-size:11.0pt;
	font-family:"Times New Roman",serif;}
h1
	{margin-top:3.6pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:55.0pt;
	text-autospace:none;
	font-size:28.5pt;
	font-family:"Arial",sans-serif;}
h2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:55.0pt;
	text-autospace:none;
	font-size:20.0pt;
	font-family:"Arial",sans-serif;}
h3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:55.0pt;
	text-autospace:none;
	font-size:16.5pt;
	font-family:"Arial",sans-serif;}
h4
	{margin-top:9.15pt;
	margin-right:109.25pt;
	margin-bottom:0cm;
	margin-left:108.65pt;
	text-align:center;
	text-autospace:none;
	font-size:14.0pt;
	font-family:"Arial",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:7.0pt;
	margin-right:37.5pt;
	margin-bottom:0cm;
	margin-left:5.45pt;
	text-indent:1.35pt;
	text-autospace:none;
	font-size:56.0pt;
	font-family:"Arial",sans-serif;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0cm;
	text-autospace:none;
	font-size:14.0pt;
	font-family:"Times New Roman",serif;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:11.45pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:155.8pt;
	text-indent:-18.75pt;
	text-autospace:none;
	font-size:11.0pt;
	font-family:"Georgia",serif;
	text-decoration:underline;}
p.TableParagraph, li.TableParagraph, div.TableParagraph
	{mso-style-name:"Table Paragraph";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:5.35pt;
	line-height:11.95pt;
	text-autospace:none;
	font-size:11.0pt;
	font-family:"BIZ UDGothic",sans-serif;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{text-autospace:none;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:612.0pt 792.0pt;
	margin:91.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection3
	{page:WordSection3;}
@page WordSection4
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection4
	{page:WordSection4;}
@page WordSection5
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection5
	{page:WordSection5;}
@page WordSection6
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection6
	{page:WordSection6;}
@page WordSection7
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection7
	{page:WordSection7;}
@page WordSection8
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection8
	{page:WordSection8;}
@page WordSection9
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection9
	{page:WordSection9;}
@page WordSection10
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection10
	{page:WordSection10;}
@page WordSection11
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection11
	{page:WordSection11;}
@page WordSection12
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection12
	{page:WordSection12;}
@page WordSection13
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection13
	{page:WordSection13;}
@page WordSection14
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection14
	{page:WordSection14;}
@page WordSection15
	{size:612.0pt 792.0pt;
	margin:91.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection15
	{page:WordSection15;}
@page WordSection16
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection16
	{page:WordSection16;}
@page WordSection17
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection17
	{page:WordSection17;}
@page WordSection18
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection18
	{page:WordSection18;}
@page WordSection19
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection19
	{page:WordSection19;}
@page WordSection20
	{size:612.0pt 792.0pt;
	margin:91.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection20
	{page:WordSection20;}
@page WordSection21
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection21
	{page:WordSection21;}
@page WordSection22
	{size:612.0pt 792.0pt;
	margin:91.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection22
	{page:WordSection22;}
@page WordSection23
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection23
	{page:WordSection23;}
@page WordSection24
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection24
	{page:WordSection24;}
@page WordSection25
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection25
	{page:WordSection25;}
@page WordSection26
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection26
	{page:WordSection26;}
@page WordSection27
	{size:612.0pt 792.0pt;
	margin:63.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection27
	{page:WordSection27;}
@page WordSection28
	{size:612.0pt 792.0pt;
	margin:91.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection28
	{page:WordSection28;}
@page WordSection29
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection29
	{page:WordSection29;}
@page WordSection30
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection30
	{page:WordSection30;}
@page WordSection31
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection31
	{page:WordSection31;}
@page WordSection32
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection32
	{page:WordSection32;}
@page WordSection33
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection33
	{page:WordSection33;}
@page WordSection34
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection34
	{page:WordSection34;}
@page WordSection35
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection35
	{page:WordSection35;}
@page WordSection36
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection36
	{page:WordSection36;}
@page WordSection37
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection37
	{page:WordSection37;}
@page WordSection38
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection38
	{page:WordSection38;}
@page WordSection39
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection39
	{page:WordSection39;}
@page WordSection40
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection40
	{page:WordSection40;}
@page WordSection41
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection41
	{page:WordSection41;}
@page WordSection42
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection42
	{page:WordSection42;}
@page WordSection43
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection43
	{page:WordSection43;}
@page WordSection44
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection44
	{page:WordSection44;}
@page WordSection45
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection45
	{page:WordSection45;}
@page WordSection46
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection46
	{page:WordSection46;}
@page WordSection47
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection47
	{page:WordSection47;}
@page WordSection48
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection48
	{page:WordSection48;}
@page WordSection49
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection49
	{page:WordSection49;}
@page WordSection50
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection50
	{page:WordSection50;}
@page WordSection51
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection51
	{page:WordSection51;}
@page WordSection52
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection52
	{page:WordSection52;}
@page WordSection53
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection53
	{page:WordSection53;}
@page WordSection54
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection54
	{page:WordSection54;}
@page WordSection55
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection55
	{page:WordSection55;}
@page WordSection56
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection56
	{page:WordSection56;}
@page WordSection57
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection57
	{page:WordSection57;}
@page WordSection58
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection58
	{page:WordSection58;}
@page WordSection59
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection59
	{page:WordSection59;}
@page WordSection60
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection60
	{page:WordSection60;}
@page WordSection61
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection61
	{page:WordSection61;}
@page WordSection62
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection62
	{page:WordSection62;}
@page WordSection63
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection63
	{page:WordSection63;}
@page WordSection64
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection64
	{page:WordSection64;}
@page WordSection65
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection65
	{page:WordSection65;}
@page WordSection66
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection66
	{page:WordSection66;}
@page WordSection67
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection67
	{page:WordSection67;}
@page WordSection68
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection68
	{page:WordSection68;}
@page WordSection69
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection69
	{page:WordSection69;}
@page WordSection70
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection70
	{page:WordSection70;}
@page WordSection71
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection71
	{page:WordSection71;}
@page WordSection72
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection72
	{page:WordSection72;}
@page WordSection73
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection73
	{page:WordSection73;}
@page WordSection74
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection74
	{page:WordSection74;}
@page WordSection75
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection75
	{page:WordSection75;}
@page WordSection76
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection76
	{page:WordSection76;}
@page WordSection77
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection77
	{page:WordSection77;}
@page WordSection78
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection78
	{page:WordSection78;}
@page WordSection79
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection79
	{page:WordSection79;}
@page WordSection80
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection80
	{page:WordSection80;}
@page WordSection81
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection81
	{page:WordSection81;}
@page WordSection82
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection82
	{page:WordSection82;}
@page WordSection83
	{size:612.0pt 792.0pt;
	margin:86.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection83
	{page:WordSection83;}
@page WordSection84
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection84
	{page:WordSection84;}
@page WordSection85
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection85
	{page:WordSection85;}
@page WordSection86
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection86
	{page:WordSection86;}
@page WordSection87
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection87
	{page:WordSection87;}
@page WordSection88
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection88
	{page:WordSection88;}
@page WordSection89
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection89
	{page:WordSection89;}
@page WordSection90
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection90
	{page:WordSection90;}
@page WordSection91
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection91
	{page:WordSection91;}
@page WordSection92
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection92
	{page:WordSection92;}
@page WordSection93
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection93
	{page:WordSection93;}
@page WordSection94
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection94
	{page:WordSection94;}
@page WordSection95
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection95
	{page:WordSection95;}
@page WordSection96
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection96
	{page:WordSection96;}
@page WordSection97
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection97
	{page:WordSection97;}
@page WordSection98
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection98
	{page:WordSection98;}
@page WordSection99
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection99
	{page:WordSection99;}
@page WordSection100
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection100
	{page:WordSection100;}
@page WordSection101
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection101
	{page:WordSection101;}
@page WordSection102
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection102
	{page:WordSection102;}
@page WordSection103
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection103
	{page:WordSection103;}
@page WordSection104
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection104
	{page:WordSection104;}
@page WordSection105
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection105
	{page:WordSection105;}
@page WordSection106
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection106
	{page:WordSection106;}
@page WordSection107
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection107
	{page:WordSection107;}
@page WordSection108
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection108
	{page:WordSection108;}
@page WordSection109
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection109
	{page:WordSection109;}
@page WordSection110
	{size:612.0pt 792.0pt;
	margin:81.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection110
	{page:WordSection110;}
@page WordSection111
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection111
	{page:WordSection111;}
@page WordSection112
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection112
	{page:WordSection112;}
@page WordSection113
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection113
	{page:WordSection113;}
@page WordSection114
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection114
	{page:WordSection114;}
@page WordSection115
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection115
	{page:WordSection115;}
@page WordSection116
	{size:612.0pt 792.0pt;
	margin:67.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection116
	{page:WordSection116;}
@page WordSection117
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection117
	{page:WordSection117;}
@page WordSection118
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection118
	{page:WordSection118;}
@page WordSection119
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection119
	{page:WordSection119;}
@page WordSection120
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection120
	{page:WordSection120;}
@page WordSection121
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection121
	{page:WordSection121;}
@page WordSection122
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection122
	{page:WordSection122;}
@page WordSection123
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection123
	{page:WordSection123;}
@page WordSection124
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection124
	{page:WordSection124;}
@page WordSection125
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection125
	{page:WordSection125;}
@page WordSection126
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection126
	{page:WordSection126;}
@page WordSection127
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection127
	{page:WordSection127;}
@page WordSection128
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection128
	{page:WordSection128;}
@page WordSection129
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection129
	{page:WordSection129;}
@page WordSection130
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection130
	{page:WordSection130;}
@page WordSection131
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection131
	{page:WordSection131;}
@page WordSection132
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection132
	{page:WordSection132;}
@page WordSection133
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection133
	{page:WordSection133;}
@page WordSection134
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection134
	{page:WordSection134;}
@page WordSection135
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection135
	{page:WordSection135;}
@page WordSection136
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection136
	{page:WordSection136;}
@page WordSection137
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection137
	{page:WordSection137;}
@page WordSection138
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection138
	{page:WordSection138;}
@page WordSection139
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection139
	{page:WordSection139;}
@page WordSection140
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection140
	{page:WordSection140;}
@page WordSection141
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection141
	{page:WordSection141;}
@page WordSection142
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection142
	{page:WordSection142;}
@page WordSection143
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection143
	{page:WordSection143;}
@page WordSection144
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection144
	{page:WordSection144;}
@page WordSection145
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection145
	{page:WordSection145;}
@page WordSection146
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection146
	{page:WordSection146;}
@page WordSection147
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection147
	{page:WordSection147;}
@page WordSection148
	{size:612.0pt 792.0pt;
	margin:65.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection148
	{page:WordSection148;}
@page WordSection149
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection149
	{page:WordSection149;}
@page WordSection150
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection150
	{page:WordSection150;}
@page WordSection151
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection151
	{page:WordSection151;}
@page WordSection152
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection152
	{page:WordSection152;}
@page WordSection153
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection153
	{page:WordSection153;}
@page WordSection154
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection154
	{page:WordSection154;}
@page WordSection155
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection155
	{page:WordSection155;}
@page WordSection156
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection156
	{page:WordSection156;}
@page WordSection157
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection157
	{page:WordSection157;}
@page WordSection158
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection158
	{page:WordSection158;}
@page WordSection159
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection159
	{page:WordSection159;}
@page WordSection160
	{size:612.0pt 792.0pt;
	margin:83.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection160
	{page:WordSection160;}
@page WordSection161
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection161
	{page:WordSection161;}
@page WordSection162
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection162
	{page:WordSection162;}
@page WordSection163
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection163
	{page:WordSection163;}
@page WordSection164
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection164
	{page:WordSection164;}
@page WordSection165
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection165
	{page:WordSection165;}
@page WordSection166
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection166
	{page:WordSection166;}
@page WordSection167
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection167
	{page:WordSection167;}
@page WordSection168
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection168
	{page:WordSection168;}
@page WordSection169
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection169
	{page:WordSection169;}
@page WordSection170
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection170
	{page:WordSection170;}
@page WordSection171
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection171
	{page:WordSection171;}
@page WordSection172
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection172
	{page:WordSection172;}
@page WordSection173
	{size:612.0pt 792.0pt;
	margin:76.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection173
	{page:WordSection173;}
@page WordSection174
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection174
	{page:WordSection174;}
@page WordSection175
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection175
	{page:WordSection175;}
@page WordSection176
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection176
	{page:WordSection176;}
@page WordSection177
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection177
	{page:WordSection177;}
@page WordSection178
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection178
	{page:WordSection178;}
@page WordSection179
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection179
	{page:WordSection179;}
@page WordSection180
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection180
	{page:WordSection180;}
@page WordSection181
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection181
	{page:WordSection181;}
@page WordSection182
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection182
	{page:WordSection182;}
@page WordSection183
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection183
	{page:WordSection183;}
@page WordSection184
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection184
	{page:WordSection184;}
@page WordSection185
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection185
	{page:WordSection185;}
@page WordSection186
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection186
	{page:WordSection186;}
@page WordSection187
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection187
	{page:WordSection187;}
@page WordSection188
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection188
	{page:WordSection188;}
@page WordSection189
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection189
	{page:WordSection189;}
@page WordSection190
	{size:612.0pt 792.0pt;
	margin:88.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection190
	{page:WordSection190;}
@page WordSection191
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection191
	{page:WordSection191;}
@page WordSection192
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection192
	{page:WordSection192;}
@page WordSection193
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection193
	{page:WordSection193;}
@page WordSection194
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection194
	{page:WordSection194;}
@page WordSection195
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection195
	{page:WordSection195;}
@page WordSection196
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection196
	{page:WordSection196;}
@page WordSection197
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection197
	{page:WordSection197;}
@page WordSection198
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection198
	{page:WordSection198;}
@page WordSection199
	{size:612.0pt 792.0pt;
	margin:77.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection199
	{page:WordSection199;}
@page WordSection200
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection200
	{page:WordSection200;}
@page WordSection201
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection201
	{page:WordSection201;}
@page WordSection202
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection202
	{page:WordSection202;}
@page WordSection203
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection203
	{page:WordSection203;}
@page WordSection204
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection204
	{page:WordSection204;}
@page WordSection205
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection205
	{page:WordSection205;}
@page WordSection206
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection206
	{page:WordSection206;}
@page WordSection207
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection207
	{page:WordSection207;}
@page WordSection208
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection208
	{page:WordSection208;}
@page WordSection209
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection209
	{page:WordSection209;}
@page WordSection210
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection210
	{page:WordSection210;}
@page WordSection211
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection211
	{page:WordSection211;}
@page WordSection212
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection212
	{page:WordSection212;}
@page WordSection213
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection213
	{page:WordSection213;}
@page WordSection214
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection214
	{page:WordSection214;}
@page WordSection215
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection215
	{page:WordSection215;}
@page WordSection216
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection216
	{page:WordSection216;}
@page WordSection217
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection217
	{page:WordSection217;}
@page WordSection218
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection218
	{page:WordSection218;}
@page WordSection219
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection219
	{page:WordSection219;}
@page WordSection220
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection220
	{page:WordSection220;}
@page WordSection221
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection221
	{page:WordSection221;}
@page WordSection222
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection222
	{page:WordSection222;}
@page WordSection223
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection223
	{page:WordSection223;}
@page WordSection224
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection224
	{page:WordSection224;}
@page WordSection225
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection225
	{page:WordSection225;}
@page WordSection226
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection226
	{page:WordSection226;}
@page WordSection227
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection227
	{page:WordSection227;}
@page WordSection228
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection228
	{page:WordSection228;}
@page WordSection229
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection229
	{page:WordSection229;}
@page WordSection230
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection230
	{page:WordSection230;}
@page WordSection231
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection231
	{page:WordSection231;}
@page WordSection232
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection232
	{page:WordSection232;}
@page WordSection233
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection233
	{page:WordSection233;}
@page WordSection234
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection234
	{page:WordSection234;}
@page WordSection235
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection235
	{page:WordSection235;}
@page WordSection236
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection236
	{page:WordSection236;}
@page WordSection237
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection237
	{page:WordSection237;}
@page WordSection238
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection238
	{page:WordSection238;}
@page WordSection239
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection239
	{page:WordSection239;}
@page WordSection240
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection240
	{page:WordSection240;}
@page WordSection241
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection241
	{page:WordSection241;}
@page WordSection242
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection242
	{page:WordSection242;}
@page WordSection243
	{size:612.0pt 792.0pt;
	margin:86.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection243
	{page:WordSection243;}
@page WordSection244
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection244
	{page:WordSection244;}
@page WordSection245
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection245
	{page:WordSection245;}
@page WordSection246
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection246
	{page:WordSection246;}
@page WordSection247
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection247
	{page:WordSection247;}
@page WordSection248
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection248
	{page:WordSection248;}
@page WordSection249
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection249
	{page:WordSection249;}
@page WordSection250
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection250
	{page:WordSection250;}
@page WordSection251
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection251
	{page:WordSection251;}
@page WordSection252
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection252
	{page:WordSection252;}
@page WordSection253
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection253
	{page:WordSection253;}
@page WordSection254
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection254
	{page:WordSection254;}
@page WordSection255
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection255
	{page:WordSection255;}
@page WordSection256
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection256
	{page:WordSection256;}
@page WordSection257
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection257
	{page:WordSection257;}
@page WordSection258
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection258
	{page:WordSection258;}
@page WordSection259
	{size:612.0pt 792.0pt;
	margin:64.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection259
	{page:WordSection259;}
@page WordSection260
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection260
	{page:WordSection260;}
@page WordSection261
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection261
	{page:WordSection261;}
@page WordSection262
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection262
	{page:WordSection262;}
@page WordSection263
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection263
	{page:WordSection263;}
@page WordSection264
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection264
	{page:WordSection264;}
@page WordSection265
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection265
	{page:WordSection265;}
@page WordSection266
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection266
	{page:WordSection266;}
@page WordSection267
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection267
	{page:WordSection267;}
@page WordSection268
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection268
	{page:WordSection268;}
@page WordSection269
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection269
	{page:WordSection269;}
@page WordSection270
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection270
	{page:WordSection270;}
@page WordSection271
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection271
	{page:WordSection271;}
@page WordSection272
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection272
	{page:WordSection272;}
@page WordSection273
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection273
	{page:WordSection273;}
@page WordSection274
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection274
	{page:WordSection274;}
@page WordSection275
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection275
	{page:WordSection275;}
@page WordSection276
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection276
	{page:WordSection276;}
@page WordSection277
	{size:612.0pt 792.0pt;
	margin:76.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection277
	{page:WordSection277;}
@page WordSection278
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection278
	{page:WordSection278;}
@page WordSection279
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection279
	{page:WordSection279;}
@page WordSection280
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection280
	{page:WordSection280;}
@page WordSection281
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection281
	{page:WordSection281;}
@page WordSection282
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection282
	{page:WordSection282;}
@page WordSection283
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection283
	{page:WordSection283;}
@page WordSection284
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection284
	{page:WordSection284;}
@page WordSection285
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection285
	{page:WordSection285;}
@page WordSection286
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection286
	{page:WordSection286;}
@page WordSection287
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection287
	{page:WordSection287;}
@page WordSection288
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection288
	{page:WordSection288;}
@page WordSection289
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection289
	{page:WordSection289;}
@page WordSection290
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection290
	{page:WordSection290;}
@page WordSection291
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection291
	{page:WordSection291;}
@page WordSection292
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection292
	{page:WordSection292;}
@page WordSection293
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection293
	{page:WordSection293;}
@page WordSection294
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection294
	{page:WordSection294;}
@page WordSection295
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection295
	{page:WordSection295;}
@page WordSection296
	{size:612.0pt 792.0pt;
	margin:84.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection296
	{page:WordSection296;}
@page WordSection297
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection297
	{page:WordSection297;}
@page WordSection298
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection298
	{page:WordSection298;}
@page WordSection299
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection299
	{page:WordSection299;}
@page WordSection300
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection300
	{page:WordSection300;}
@page WordSection301
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection301
	{page:WordSection301;}
@page WordSection302
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection302
	{page:WordSection302;}
@page WordSection303
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection303
	{page:WordSection303;}
@page WordSection304
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection304
	{page:WordSection304;}
@page WordSection305
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection305
	{page:WordSection305;}
@page WordSection306
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection306
	{page:WordSection306;}
@page WordSection307
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection307
	{page:WordSection307;}
@page WordSection308
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection308
	{page:WordSection308;}
@page WordSection309
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection309
	{page:WordSection309;}
@page WordSection310
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection310
	{page:WordSection310;}
@page WordSection311
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection311
	{page:WordSection311;}
@page WordSection312
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection312
	{page:WordSection312;}
@page WordSection313
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection313
	{page:WordSection313;}
@page WordSection314
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection314
	{page:WordSection314;}
@page WordSection315
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection315
	{page:WordSection315;}
@page WordSection316
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection316
	{page:WordSection316;}
@page WordSection317
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection317
	{page:WordSection317;}
@page WordSection318
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection318
	{page:WordSection318;}
@page WordSection319
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection319
	{page:WordSection319;}
@page WordSection320
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection320
	{page:WordSection320;}
@page WordSection321
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection321
	{page:WordSection321;}
@page WordSection322
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection322
	{page:WordSection322;}
@page WordSection323
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection323
	{page:WordSection323;}
@page WordSection324
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection324
	{page:WordSection324;}
@page WordSection325
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection325
	{page:WordSection325;}
@page WordSection326
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection326
	{page:WordSection326;}
@page WordSection327
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection327
	{page:WordSection327;}
@page WordSection328
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection328
	{page:WordSection328;}
@page WordSection329
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection329
	{page:WordSection329;}
@page WordSection330
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection330
	{page:WordSection330;}
@page WordSection331
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection331
	{page:WordSection331;}
@page WordSection332
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection332
	{page:WordSection332;}
@page WordSection333
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection333
	{page:WordSection333;}
@page WordSection334
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection334
	{page:WordSection334;}
@page WordSection335
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection335
	{page:WordSection335;}
@page WordSection336
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection336
	{page:WordSection336;}
@page WordSection337
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection337
	{page:WordSection337;}
@page WordSection338
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection338
	{page:WordSection338;}
@page WordSection339
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection339
	{page:WordSection339;}
@page WordSection340
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection340
	{page:WordSection340;}
@page WordSection341
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection341
	{page:WordSection341;}
@page WordSection342
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection342
	{page:WordSection342;}
@page WordSection343
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection343
	{page:WordSection343;}
@page WordSection344
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection344
	{page:WordSection344;}
@page WordSection345
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection345
	{page:WordSection345;}
@page WordSection346
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection346
	{page:WordSection346;}
@page WordSection347
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection347
	{page:WordSection347;}
@page WordSection348
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection348
	{page:WordSection348;}
@page WordSection349
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection349
	{page:WordSection349;}
@page WordSection350
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection350
	{page:WordSection350;}
@page WordSection351
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection351
	{page:WordSection351;}
@page WordSection352
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection352
	{page:WordSection352;}
@page WordSection353
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection353
	{page:WordSection353;}
@page WordSection354
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection354
	{page:WordSection354;}
@page WordSection355
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection355
	{page:WordSection355;}
@page WordSection356
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection356
	{page:WordSection356;}
@page WordSection357
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection357
	{page:WordSection357;}
@page WordSection358
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection358
	{page:WordSection358;}
@page WordSection359
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection359
	{page:WordSection359;}
@page WordSection360
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection360
	{page:WordSection360;}
@page WordSection361
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection361
	{page:WordSection361;}
@page WordSection362
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection362
	{page:WordSection362;}
@page WordSection363
	{size:612.0pt 792.0pt;
	margin:90.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection363
	{page:WordSection363;}
@page WordSection364
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection364
	{page:WordSection364;}
@page WordSection365
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection365
	{page:WordSection365;}
@page WordSection366
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection366
	{page:WordSection366;}
@page WordSection367
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection367
	{page:WordSection367;}
@page WordSection368
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection368
	{page:WordSection368;}
@page WordSection369
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection369
	{page:WordSection369;}
@page WordSection370
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection370
	{page:WordSection370;}
@page WordSection371
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection371
	{page:WordSection371;}
@page WordSection372
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection372
	{page:WordSection372;}
@page WordSection373
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection373
	{page:WordSection373;}
@page WordSection374
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection374
	{page:WordSection374;}
@page WordSection375
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection375
	{page:WordSection375;}
@page WordSection376
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection376
	{page:WordSection376;}
@page WordSection377
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection377
	{page:WordSection377;}
@page WordSection378
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection378
	{page:WordSection378;}
@page WordSection379
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection379
	{page:WordSection379;}
@page WordSection380
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection380
	{page:WordSection380;}
@page WordSection381
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection381
	{page:WordSection381;}
@page WordSection382
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection382
	{page:WordSection382;}
@page WordSection383
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection383
	{page:WordSection383;}
@page WordSection384
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection384
	{page:WordSection384;}
@page WordSection385
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection385
	{page:WordSection385;}
@page WordSection386
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection386
	{page:WordSection386;}
@page WordSection387
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection387
	{page:WordSection387;}
@page WordSection388
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection388
	{page:WordSection388;}
@page WordSection389
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection389
	{page:WordSection389;}
@page WordSection390
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection390
	{page:WordSection390;}
@page WordSection391
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection391
	{page:WordSection391;}
@page WordSection392
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection392
	{page:WordSection392;}
@page WordSection393
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection393
	{page:WordSection393;}
@page WordSection394
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection394
	{page:WordSection394;}
@page WordSection395
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection395
	{page:WordSection395;}
@page WordSection396
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection396
	{page:WordSection396;}
@page WordSection397
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection397
	{page:WordSection397;}
@page WordSection398
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection398
	{page:WordSection398;}
@page WordSection399
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection399
	{page:WordSection399;}
@page WordSection400
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection400
	{page:WordSection400;}
@page WordSection401
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection401
	{page:WordSection401;}
@page WordSection402
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection402
	{page:WordSection402;}
@page WordSection403
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection403
	{page:WordSection403;}
@page WordSection404
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection404
	{page:WordSection404;}
@page WordSection405
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection405
	{page:WordSection405;}
@page WordSection406
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection406
	{page:WordSection406;}
@page WordSection407
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection407
	{page:WordSection407;}
@page WordSection408
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection408
	{page:WordSection408;}
@page WordSection409
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection409
	{page:WordSection409;}
@page WordSection410
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection410
	{page:WordSection410;}
@page WordSection411
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection411
	{page:WordSection411;}
@page WordSection412
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection412
	{page:WordSection412;}
@page WordSection413
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection413
	{page:WordSection413;}
@page WordSection414
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection414
	{page:WordSection414;}
@page WordSection415
	{size:612.0pt 792.0pt;
	margin:76.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection415
	{page:WordSection415;}
@page WordSection416
	{size:612.0pt 792.0pt;
	margin:84.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection416
	{page:WordSection416;}
@page WordSection417
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection417
	{page:WordSection417;}
@page WordSection418
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection418
	{page:WordSection418;}
@page WordSection419
	{size:612.0pt 792.0pt;
	margin:84.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection419
	{page:WordSection419;}
@page WordSection420
	{size:612.0pt 792.0pt;
	margin:83.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection420
	{page:WordSection420;}
@page WordSection421
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection421
	{page:WordSection421;}
@page WordSection422
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection422
	{page:WordSection422;}
@page WordSection423
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection423
	{page:WordSection423;}
@page WordSection424
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection424
	{page:WordSection424;}
@page WordSection425
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection425
	{page:WordSection425;}
@page WordSection426
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection426
	{page:WordSection426;}
@page WordSection427
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection427
	{page:WordSection427;}
@page WordSection428
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection428
	{page:WordSection428;}
@page WordSection429
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection429
	{page:WordSection429;}
@page WordSection430
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection430
	{page:WordSection430;}
@page WordSection431
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection431
	{page:WordSection431;}
@page WordSection432
	{size:612.0pt 792.0pt;
	margin:61.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection432
	{page:WordSection432;}
@page WordSection433
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection433
	{page:WordSection433;}
@page WordSection434
	{size:612.0pt 792.0pt;
	margin:25.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection434
	{page:WordSection434;}
@page WordSection435
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection435
	{page:WordSection435;}
@page WordSection436
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection436
	{page:WordSection436;}
@page WordSection437
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection437
	{page:WordSection437;}
@page WordSection438
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection438
	{page:WordSection438;}
@page WordSection439
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection439
	{page:WordSection439;}
@page WordSection440
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection440
	{page:WordSection440;}
@page WordSection441
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection441
	{page:WordSection441;}
@page WordSection442
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection442
	{page:WordSection442;}
@page WordSection443
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection443
	{page:WordSection443;}
@page WordSection444
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection444
	{page:WordSection444;}
@page WordSection445
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection445
	{page:WordSection445;}
@page WordSection446
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection446
	{page:WordSection446;}
@page WordSection447
	{size:612.0pt 792.0pt;
	margin:72.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection447
	{page:WordSection447;}
@page WordSection448
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection448
	{page:WordSection448;}
@page WordSection449
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection449
	{page:WordSection449;}
@page WordSection450
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection450
	{page:WordSection450;}
@page WordSection451
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection451
	{page:WordSection451;}
@page WordSection452
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection452
	{page:WordSection452;}
@page WordSection453
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection453
	{page:WordSection453;}
@page WordSection454
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection454
	{page:WordSection454;}
@page WordSection455
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection455
	{page:WordSection455;}
@page WordSection456
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection456
	{page:WordSection456;}
@page WordSection457
	{size:612.0pt 792.0pt;
	margin:76.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection457
	{page:WordSection457;}
@page WordSection458
	{size:612.0pt 792.0pt;
	margin:83.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection458
	{page:WordSection458;}
@page WordSection459
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection459
	{page:WordSection459;}
@page WordSection460
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection460
	{page:WordSection460;}
@page WordSection461
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection461
	{page:WordSection461;}
@page WordSection462
	{size:612.0pt 792.0pt;
	margin:71.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection462
	{page:WordSection462;}
@page WordSection463
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection463
	{page:WordSection463;}
@page WordSection464
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection464
	{page:WordSection464;}
@page WordSection465
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection465
	{page:WordSection465;}
@page WordSection466
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection466
	{page:WordSection466;}
@page WordSection467
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection467
	{page:WordSection467;}
@page WordSection468
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection468
	{page:WordSection468;}
@page WordSection469
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection469
	{page:WordSection469;}
@page WordSection470
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection470
	{page:WordSection470;}
@page WordSection471
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection471
	{page:WordSection471;}
@page WordSection472
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection472
	{page:WordSection472;}
@page WordSection473
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection473
	{page:WordSection473;}
@page WordSection474
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection474
	{page:WordSection474;}
@page WordSection475
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection475
	{page:WordSection475;}
@page WordSection476
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection476
	{page:WordSection476;}
@page WordSection477
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection477
	{page:WordSection477;}
@page WordSection478
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection478
	{page:WordSection478;}
@page WordSection479
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection479
	{page:WordSection479;}
@page WordSection480
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection480
	{page:WordSection480;}
@page WordSection481
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection481
	{page:WordSection481;}
@page WordSection482
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection482
	{page:WordSection482;}
@page WordSection483
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection483
	{page:WordSection483;}
@page WordSection484
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection484
	{page:WordSection484;}
@page WordSection485
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection485
	{page:WordSection485;}
@page WordSection486
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection486
	{page:WordSection486;}
@page WordSection487
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection487
	{page:WordSection487;}
@page WordSection488
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection488
	{page:WordSection488;}
@page WordSection489
	{size:612.0pt 792.0pt;
	margin:78.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection489
	{page:WordSection489;}
@page WordSection490
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection490
	{page:WordSection490;}
@page WordSection491
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection491
	{page:WordSection491;}
@page WordSection492
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection492
	{page:WordSection492;}
@page WordSection493
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection493
	{page:WordSection493;}
@page WordSection494
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection494
	{page:WordSection494;}
@page WordSection495
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection495
	{page:WordSection495;}
@page WordSection496
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection496
	{page:WordSection496;}
@page WordSection497
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection497
	{page:WordSection497;}
@page WordSection498
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection498
	{page:WordSection498;}
@page WordSection499
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection499
	{page:WordSection499;}
@page WordSection500
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection500
	{page:WordSection500;}
@page WordSection501
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection501
	{page:WordSection501;}
@page WordSection502
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection502
	{page:WordSection502;}
@page WordSection503
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection503
	{page:WordSection503;}
@page WordSection504
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection504
	{page:WordSection504;}
@page WordSection505
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection505
	{page:WordSection505;}
@page WordSection506
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection506
	{page:WordSection506;}
@page WordSection507
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection507
	{page:WordSection507;}
@page WordSection508
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection508
	{page:WordSection508;}
@page WordSection509
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection509
	{page:WordSection509;}
@page WordSection510
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection510
	{page:WordSection510;}
@page WordSection511
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection511
	{page:WordSection511;}
@page WordSection512
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection512
	{page:WordSection512;}
@page WordSection513
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection513
	{page:WordSection513;}
@page WordSection514
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection514
	{page:WordSection514;}
@page WordSection515
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection515
	{page:WordSection515;}
@page WordSection516
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection516
	{page:WordSection516;}
@page WordSection517
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection517
	{page:WordSection517;}
@page WordSection518
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection518
	{page:WordSection518;}
@page WordSection519
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection519
	{page:WordSection519;}
@page WordSection520
	{size:612.0pt 792.0pt;
	margin:69.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection520
	{page:WordSection520;}
@page WordSection521
	{size:612.0pt 792.0pt;
	margin:68.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection521
	{page:WordSection521;}
@page WordSection522
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection522
	{page:WordSection522;}
@page WordSection523
	{size:612.0pt 792.0pt;
	margin:87.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection523
	{page:WordSection523;}
@page WordSection524
	{size:612.0pt 792.0pt;
	margin:70.0pt 19.0pt 14.0pt 35.0pt;}
div.WordSection524
	{page:WordSection524;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal style='margin-left:8.0pt'><span style='position:absolute;
z-index:-1667380224;left:0px;margin-left:0px;margin-top:0px;width:817px;
height:1056px'><img width=817 height=1056
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image001.gif"></span><span
style='font-size:10.0pt;position:relative;top:-32.0pt'><img width=215
height=39 id=image2.jpeg
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image002.jpg"></span><span
style='font-size:10.0pt;position:relative;top:-32.0pt'> </span><span
style='font-size:10.0pt'><img width=104 height=102 id=image3.jpeg
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image003.jpg"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>&nbsp;</p>

<p class=MsoTitle style='line-height:92%'><span style='color:#211C1D'>Web<span
style='letter-spacing:2.0pt'> </span>Development with Node&amp; </span><span
style='color:#211C1D;letter-spacing:-.1pt'>Express</span></p>

<p class=MsoNormal style='margin-top:6.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:8.55pt;margin-bottom:.0001pt'><span style='font-size:27.5pt;
font-family:"Arial",sans-serif;color:#5B2A16;letter-spacing:-.1pt'>Leveraging</span><span
style='font-size:27.5pt;font-family:"Arial",sans-serif;color:#5B2A16;
letter-spacing:-1.15pt'> </span><span style='font-size:27.5pt;font-family:"Arial",sans-serif;
color:#5B2A16;letter-spacing:-.1pt'>the</span><span style='font-size:27.5pt;
font-family:"Arial",sans-serif;color:#5B2A16;letter-spacing:-1.45pt'> </span><span
style='font-size:27.5pt;font-family:"Arial",sans-serif;color:#5B2A16;
letter-spacing:-.1pt'>JavaScript</span><span style='font-size:27.5pt;
font-family:"Arial",sans-serif;color:#5B2A16;letter-spacing:.25pt'> </span><span
style='font-size:27.5pt;font-family:"Arial",sans-serif;color:#5B2A16;
letter-spacing:-.1pt'>Staci&lt;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:31.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:42.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal align=right style='margin-right:22.25pt;text-align:right'><span
style='font-size:25.0pt;font-family:"Arial",sans-serif;color:#211C1D'>Ethan</span><span
style='font-size:25.0pt;font-family:"Arial",sans-serif;color:#211C1D;
letter-spacing:.85pt'> </span><span style='font-size:25.0pt;font-family:"Arial",sans-serif;
color:#211C1D;letter-spacing:-.1pt'>Brown</span></p>

</div>

<span style='font-size:25.0pt;font-family:"Arial",sans-serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection2>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:4.5pt;
font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:5.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-18.0pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark0"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Preface</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark1"><span style='font-size:14.0pt;color:#070707'>Who</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>This</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>Book</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Is</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>For</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark2"><span style='font-size:14.0pt;color:#070707'>Notes</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>on</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>the</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Second</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Edition</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark3"><span style='font-size:14.0pt;color:#070707'>How</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>This</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>Book</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Is</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Organized</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark5"><span style='font-size:14.0pt;color:#070707'>Example</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Website</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark4"><span style='font-size:14.0pt;color:#070707'>Conventions</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Used</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707'>in</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.65pt'> </span><span style='font-size:14.0pt;color:#070707'>This</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Book</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark6"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Code</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Examples</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark7"><span style='font-size:14.0pt;color:#070707'>OReilly</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Online</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Learning</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark9"><span style='font-size:14.0pt;color:#070707'>How</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>to</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Contact</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.25pt'>Us</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark8"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Acknowledgments</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark10"><span style='font-size:14.0pt;color:#070707'>1.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Introducing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark10"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>JavaScript</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Revolution</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark18"><span style='font-size:14.0pt;color:#070707'>Introducing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark20"><span style='font-size:14.0pt;color:#070707'>Server-Side</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.9pt'> </span><span style='font-size:14.0pt;
color:#070707'>Client-Side</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.85pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Applications</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark26"><span style='font-size:14.0pt;color:#070707'>A</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>Brief</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>History</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.45pt'> </span><span style='font-size:14.0pt;color:#070707'>of</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark31"><span style='font-size:14.0pt;color:#070707'>Node:</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>A</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>New</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Kind</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>of</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>Web</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Server</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark38"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Node</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Ecosystem</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark41"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Licensing</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark49"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark51"><span style='font-size:14.0pt;color:#070707'>2.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Getting</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Started</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>with</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Node</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark53"><span style='font-size:14.0pt;color:#070707'>Getting</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Node</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark57"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>the</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Terminal</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection3>

<p class=MsoListParagraph style='margin-top:4.85pt;text-indent:-18.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark68"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Editors</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark73"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.25pt'>npm</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark79"><span style='font-size:14.0pt;color:#070707'>A</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Simple</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>Web</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Server</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>with</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Node</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark83"><span style='font-size:14.0pt;color:#070707'>Hello</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>World</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark86"><span style='font-size:14.0pt;color:#070707'>Event-Driven</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Programming</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark89"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Routing</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark91"><span style='font-size:14.0pt;color:#070707'>Serving</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Static</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Resources</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-16.6pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>f.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark97"><span style='font-size:14.0pt;color:#070707'>Onward</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>to</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark101"><span style='font-size:14.0pt;color:#070707'>3.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Saving</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>Time</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>with</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark103"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Scaffolding</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark107"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>Meadowlark</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707'>Travel</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.8pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Website</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark106"><span style='font-size:14.0pt;color:#070707'>Initial</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Steps</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark116"><span style='font-size:14.0pt;color:#070707'>Views</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Layouts</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark127"><span style='font-size:14.0pt;color:#070707'>Static</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Files</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Views</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark128"><span style='font-size:14.0pt;color:#070707'>Dynamic</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Content</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>in</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.7pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Views</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark131"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark134"><span style='font-size:14.0pt;color:#070707'>4.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Tidying</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>Up</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark134"><span style='font-size:14.0pt;color:#070707'>File</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>Directory</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Structure</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark136"><span style='font-size:14.0pt;color:#070707'>Best</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Practices</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark139"><span style='font-size:14.0pt;color:#070707'>Version</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Control</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark143"><span style='font-size:14.0pt;color:#070707'>How</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707'>to</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>Use</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.45pt'> </span><span style='font-size:14.0pt;color:#070707'>Git</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>with</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>This</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.45pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Book</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:114.9pt;
margin-bottom:0cm;margin-left:206.15pt;margin-bottom:.0001pt;text-indent:-15.85pt;
line-height:112%'><span style='font-size:14.0pt;line-height:112%;color:#333333;
text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark146"><span style='font-size:14.0pt;line-height:
112%;color:#070707'>If Youre Following Along by Doing It</span><span
style='font-size:14.0pt;line-height:112%;color:#070707;text-decoration:none'> </span><span
style='font-size:14.0pt;line-height:112%;color:#070707;letter-spacing:-.1pt'>Yourself</span></a></p>

</div>

<span style='font-size:14.0pt;line-height:112%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection4>

<p class=MsoListParagraph style='margin-top:4.85pt;margin-right:106.6pt;
margin-bottom:0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-20.2pt;
line-height:112%'><span style='font-size:14.0pt;line-height:112%;color:#333333;
text-decoration:none'>ii.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark148"><span style='font-size:14.0pt;line-height:
112%;color:#070707'>If Youre Following Along by Using the</span><span
style='font-size:14.0pt;line-height:112%;color:#070707;text-decoration:none'> </span><span
style='font-size:14.0pt;line-height:112%;color:#070707'>Official Repository</span></a></p>

<p class=MsoListParagraph style='margin-top:10.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark149"><span style='font-size:14.0pt;color:#070707'>npm</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Packages</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark156"><span style='font-size:14.0pt;color:#070707'>Project</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Metadata</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark155"><span style='font-size:14.0pt;color:#070707'>Node</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Modules</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark163"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:12.9pt;margin-right:
321.9pt;margin-bottom:0cm;margin-left:20.15pt;margin-bottom:.0001pt;text-align:
right;text-indent:-20.2pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark165"><span style='font-size:14.0pt;color:#070707'>5.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>Quality</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Assurance</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark167"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707'>QA</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Plan</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark169"><span style='font-size:14.0pt;color:#070707'>QA:</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707'>Is</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.4pt'> </span><span style='font-size:14.0pt;
color:#070707'>It</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.4pt'> </span><span style='font-size:14.0pt;color:#070707'>Worth</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>It?</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;text-indent:-18.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark175"><span style='font-size:14.0pt;color:#070707'>Logic</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Versus</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Presentation</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark177"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>Types</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707'>of</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.45pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Tests</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark179"><span style='font-size:14.0pt;color:#070707'>Overview</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>of</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>QA</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.5pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Techniques</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark184"><span style='font-size:14.0pt;color:#070707'>Installing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.85pt'> </span><span style='font-size:14.0pt;
color:#070707'>Configuring</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.85pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Jest</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:11.45pt;margin-right:
322.95pt;margin-bottom:0cm;margin-left:18.7pt;margin-bottom:.0001pt;text-align:
right'><span style='font-size:14.0pt;color:#333333;text-decoration:none'>g.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark186"><span style='font-size:14.0pt;color:#070707'>Unit</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Testing</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark186"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Mocking</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark187"><span style='font-size:14.0pt;color:#070707'>Refactoring</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>the</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>Application</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.8pt'> </span><span style='font-size:14.0pt;color:#070707'>for</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Testability</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark192"><span style='font-size:14.0pt;color:#070707'>Writing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Our</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>First</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Test</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark197"><span style='font-size:14.0pt;color:#070707'>Test</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Maintenance</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark199"><span style='font-size:14.0pt;color:#070707'>Code</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Coverage</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>h.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark203"><span style='font-size:14.0pt;color:#070707'>Integration</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.1pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Testing</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark206"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Linting</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>j.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark216"><span style='font-size:14.0pt;color:#070707'>Continuous</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Integration</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>k.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark221"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333;text-decoration:none'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark223"><span style='font-size:14.0pt;color:#070707'>6.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>The</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Request</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>and</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Response</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Objects</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection5>

<p class=MsoListParagraph style='margin-top:4.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark223"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707'>Parts</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.35pt'> </span><span style='font-size:14.0pt;
color:#070707'>of</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.4pt'> </span><span style='font-size:14.0pt;color:#070707'>a</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>URL</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark236"><span style='font-size:14.0pt;color:#070707'>HTTP</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Request</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Methods</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark235"><span style='font-size:14.0pt;color:#070707'>Request</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Headers</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark240"><span style='font-size:14.0pt;color:#070707'>Response</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Headers</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark246"><span style='font-size:14.0pt;color:#070707'>Internet</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Media</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Types</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark247"><span style='font-size:14.0pt;color:#070707'>Request</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Body</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark243"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Request</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Object</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark258"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Response</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Object</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark284"><span style='font-size:14.0pt;color:#070707'>Getting</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>More</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Information</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>j.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark290"><span style='font-size:14.0pt;color:#070707'>Boiling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>It</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Down</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark290"><span style='font-size:14.0pt;color:#070707'>Rendering</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Content</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark295"><span style='font-size:14.0pt;color:#070707'>Processing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Forms</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark299"><span style='font-size:14.0pt;color:#070707'>Providing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>an</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>API</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>k.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark307"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark309"><span style='font-size:14.0pt;color:#070707'>7.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Templating</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Handlebars</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark312"><span style='font-size:14.0pt;color:#070707'>There</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Are</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>No</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Absolute</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Rules</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Except</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>This</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>One</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark315"><span style='font-size:14.0pt;color:#070707'>Choosing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>Template</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.75pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Engine</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark317"><span style='font-size:14.0pt;color:#070707'>Pug:</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>A</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>Different</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Approach</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark320"><span style='font-size:14.0pt;color:#070707'>Handlebars</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Basics</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark325"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Comments</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark328"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Blocks</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark332"><span style='font-size:14.0pt;color:#070707'>Server-Side</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Templates</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark335"><span style='font-size:14.0pt;color:#070707'>Views</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Layouts</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection6>

<p class=MsoListParagraph style='margin-top:4.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark339"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Layouts</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>(or</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Not)</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>in</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark341"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Sections</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark343"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Partials</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-31.7pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>viii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark348"><span style='font-size:14.0pt;color:#070707'>Perfecting</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Templates</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark353"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:12.85pt;margin-right:
338.2pt;margin-bottom:0cm;margin-left:20.15pt;margin-bottom:.0001pt;text-align:
right;text-indent:-20.2pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark355"><span style='font-size:14.0pt;color:#070707'>8.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707'>Form</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Handling</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark357"><span style='font-size:14.0pt;color:#070707'>Sending</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Client</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Data</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>to</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>the</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Server</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark361"><span style='font-size:14.0pt;color:#070707'>HTML</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Forms</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:11.45pt;margin-right:
341.55pt;margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-align:
right;text-indent:-18.0pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark364"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Encoding</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark363"><span style='font-size:14.0pt;color:#070707'>Different</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Approaches</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>to</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.7pt'> </span><span style='font-size:14.0pt;color:#070707'>Form</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Handling</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark369"><span style='font-size:14.0pt;color:#070707'>Form</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Handling</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;text-indent:-16.6pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>f.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark375"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Fetch</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>to</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.5pt'> </span><span style='font-size:14.0pt;color:#070707'>Send</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Form</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark379"><span style='font-size:14.0pt;color:#070707'>File</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Uploads</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark384"><span style='font-size:14.0pt;color:#070707'>File</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Uploads</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Fetch</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>h.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark389"><span style='font-size:14.0pt;color:#070707'>Improving</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>File</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>Upload</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.75pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.25pt'>UI</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark391"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-26.65pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>10.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark393"><span style='font-size:14.0pt;color:#070707'>9.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Cookies</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Sessions</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark397"><span style='font-size:14.0pt;color:#070707'>Externalizing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.25pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Credentials</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark401"><span style='font-size:14.0pt;color:#070707'>Cookies</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>in</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark406"><span style='font-size:14.0pt;color:#070707'>Examining</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Cookies</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark405"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Sessions</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark414"><span style='font-size:14.0pt;color:#070707'>Memory</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Stores</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark416"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Sessions</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection7>

<p class=MsoListParagraph style='margin-top:4.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark418"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Sessions</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707'>to</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.65pt'> </span><span style='font-size:14.0pt;color:#070707'>Implement</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Flash</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Messages</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark422"><span style='font-size:14.0pt;color:#070707'>What</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>to</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Use</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Sessions</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>For</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark426"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-23.8pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>11.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark427"><span style='font-size:14.0pt;color:#070707'>10.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Middleware</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark431"><span style='font-size:14.0pt;color:#070707'>Middleware</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.25pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Principles</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark434"><span style='font-size:14.0pt;color:#070707'>Middleware</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.25pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Examples</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark438"><span style='font-size:14.0pt;color:#070707'>Common</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Middleware</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark456"><span style='font-size:14.0pt;color:#070707'>Third-Party</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Middleware</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark458"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>12.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark460"><span style='font-size:14.0pt;color:#070707'>11.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Sending</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Email</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark460"><span style='font-size:14.0pt;color:#070707'>SMTP,</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>MSAs,</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>MTAs</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark465"><span style='font-size:14.0pt;color:#070707'>Receiving</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Email</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark467"><span style='font-size:14.0pt;color:#070707'>Email</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Headers</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark471"><span style='font-size:14.0pt;color:#070707'>Email</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Formats</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark470"><span style='font-size:14.0pt;color:#070707'>HTML</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Email</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark474"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Nodemailer</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark478"><span style='font-size:14.0pt;color:#070707'>Sending</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Mail</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark480"><span style='font-size:14.0pt;color:#070707'>Sending</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Mail</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>to</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.65pt'> </span><span style='font-size:14.0pt;color:#070707'>Multiple</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Recipients</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark484"><span style='font-size:14.0pt;color:#070707'>Better</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Options</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>for</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Bulk</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Email</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark486"><span style='font-size:14.0pt;color:#070707'>Sending</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>HTML</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Email</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark486"><span style='font-size:14.0pt;color:#070707'>Images</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>in</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>HTML</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Email</span></a></p>

<p class=MsoBodyText style='margin-top:11.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:186.0pt;margin-bottom:.0001pt'><span style='font-family:"Georgia",serif;
color:#333333'>ii.<span style='letter-spacing:3.55pt'> </span></span><a
href="#_bookmark490"><span style='font-family:"Georgia",serif;color:#070707'>Using<span
style='letter-spacing:.4pt'> </span>Views<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.4pt'> </span>Send<span style='letter-spacing:.45pt'> </span>HTML<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>Email</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:181.7pt;margin-bottom:.0001pt'><span style='font-family:"Georgia",serif;
color:#333333'>iii.<span style='letter-spacing:4.0pt'> </span></span><a
href="#_bookmark492"><span style='font-family:"Georgia",serif;color:#070707'>Encapsulating<span
style='letter-spacing:.6pt'> </span>Email<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Functionality</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Georgia",serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection8>

<p class=MsoBodyText style='margin-top:4.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:139.95pt;margin-bottom:.0001pt'><span style='font-family:"Georgia",serif;
color:#333333'>i.<span style='letter-spacing:2.75pt'> </span></span><a
href="#_bookmark496"><span style='font-family:"Georgia",serif;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>13.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark499"><span style='font-size:14.0pt;color:#070707'>12.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Production</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Concerns</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark499"><span style='font-size:14.0pt;color:#070707'>Execution</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Environments</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark502"><span style='font-size:14.0pt;color:#070707'>Environment-Specific</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:2.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Configuration</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark506"><span style='font-size:14.0pt;color:#070707'>Running</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>Node</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Process</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark511"><span style='font-size:14.0pt;color:#070707'>Scaling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Website</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark515"><span style='font-size:14.0pt;color:#070707'>Scaling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Out</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>App</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Clusters</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark518"><span style='font-size:14.0pt;color:#070707'>Handling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707'>Uncaught</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Exceptions</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark524"><span style='font-size:14.0pt;color:#070707'>Scaling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Out</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>Multiple</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Servers</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark533"><span style='font-size:14.0pt;color:#070707'>Monitoring</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.9pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Website</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark534"><span style='font-size:14.0pt;color:#070707'>Third-Party</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707'>Uptime</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Monitors</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-16.6pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>f.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark537"><span style='font-size:14.0pt;color:#070707'>Stress</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Testing</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark540"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>14.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark542"><span style='font-size:14.0pt;color:#070707'>13.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Persistence</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark542"><span style='font-size:14.0pt;color:#070707'>Filesystem</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Persistence</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark548"><span style='font-size:14.0pt;color:#070707'>Cloud</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Persistence</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark551"><span style='font-size:14.0pt;color:#070707'>Database</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Persistence</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark559"><span style='font-size:14.0pt;color:#070707'>A</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707'>Note</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.4pt'> </span><span style='font-size:14.0pt;
color:#070707'>on</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.4pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Performance</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark558"><span style='font-size:14.0pt;color:#070707'>Abstracting</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>the</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707'>Database</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.85pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Layer</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark563"><span style='font-size:14.0pt;color:#070707'>Setting</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Up</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>MongoDB</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark567"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Mongoose</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark569"><span style='font-size:14.0pt;color:#070707'>Database</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707'>Connections</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707'>with</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.9pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Mongoose</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark571"><span style='font-size:14.0pt;color:#070707'>Creating</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Schemas</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.75pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Models</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection9>

<p class=MsoListParagraph style='margin-top:4.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark574"><span style='font-size:14.0pt;color:#070707'>Seeding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Initial</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-31.7pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>viii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark576"><span style='font-size:14.0pt;color:#070707'>Retrieving</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ix.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark581"><span style='font-size:14.0pt;color:#070707'>Adding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>x.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark585"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>PostgreSQL</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>xi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark593"><span style='font-size:14.0pt;color:#070707'>Adding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark596"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>Database</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>for</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Session</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Storage</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark601"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.25pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>15.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark603"><span style='font-size:14.0pt;color:#070707'>14.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Routing</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark610"><span style='font-size:14.0pt;color:#070707'>Routes</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>SEO</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark612"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Subdomains</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark616"><span style='font-size:14.0pt;color:#070707'>Route</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Handlers</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707'>Are</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.65pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Middleware</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark620"><span style='font-size:14.0pt;color:#070707'>Route</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Paths</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>Regular</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Expressions</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark622"><span style='font-size:14.0pt;color:#070707'>Route</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Parameters</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark624"><span style='font-size:14.0pt;color:#070707'>Organizing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.1pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Routes</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark626"><span style='font-size:14.0pt;color:#070707'>Declaring</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Routes</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>in</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.55pt'> </span><span style='font-size:14.0pt;color:#070707'>a</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Module</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>h.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark628"><span style='font-size:14.0pt;color:#070707'>Grouping</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.95pt'> </span><span
style='font-size:14.0pt;color:#070707'>Handlers</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.95pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Logically</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark630"><span style='font-size:14.0pt;color:#070707'>Automatically</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707'>Rendering</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Views</span></a></p>

<p class=MsoListParagraph style='text-indent:-15.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>j.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark632"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>16.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark634"><span style='font-size:14.0pt;color:#070707'>15.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>REST</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707'>APIs</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.45pt'> </span><span style='font-size:14.0pt;color:#070707'>and</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>JSON</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark638"><span style='font-size:14.0pt;color:#070707'>JSON</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>XML</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark641"><span style='font-size:14.0pt;color:#070707'>Our</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.25pt'>API</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark646"><span style='font-size:14.0pt;color:#070707'>API</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>Error</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.5pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Reporting</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark651"><span style='font-size:14.0pt;color:#070707'>Cross-Origin</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span
style='font-size:14.0pt;color:#070707'>Resource</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span style='font-size:
14.0pt;color:#070707;letter-spacing:-.1pt'>Sharing</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection10>

<p class=MsoListParagraph style='margin-top:4.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark656"><span style='font-size:14.0pt;color:#070707'>Our</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Tests</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark659"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Express</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>to</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Provide</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>an</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>API</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark662"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:12.9pt;margin-right:
272.55pt;margin-bottom:0cm;margin-left:25.2pt;margin-bottom:.0001pt;text-align:
right;text-indent:-25.2pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>17.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark665"><span style='font-size:14.0pt;color:#070707'>16.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Single-Page</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Applications</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark665"><span style='font-size:14.0pt;color:#070707'>A</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Short</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>History</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>of</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Web</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>Application</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Development</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark670"><span style='font-size:14.0pt;color:#070707'>SPA</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Technologies</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:11.45pt;margin-right:
268.15pt;margin-bottom:0cm;margin-left:18.0pt;margin-bottom:.0001pt;text-align:
right;text-indent:-18.0pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark679"><span style='font-size:14.0pt;color:#070707'>Creating</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>React</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.25pt'>App</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark681"><span style='font-size:14.0pt;color:#070707'>React</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Basics</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark685"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Home</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Page</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark689"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Routing</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark693"><span style='font-size:14.0pt;color:#070707'>Vacations</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707'>PageVisual</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Design</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark698"><span style='font-size:14.0pt;color:#070707'>Vacations</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.1pt'> </span><span
style='font-size:14.0pt;color:#070707'>PageServer</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Integration</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark700"><span style='font-size:14.0pt;color:#070707'>Sending</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Information</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>to</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>the</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Server</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark705"><span style='font-size:14.0pt;color:#070707'>State</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Management</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark711"><span style='font-size:14.0pt;color:#070707'>Deployment</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Options</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark718"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-26.65pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>18.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark721"><span style='font-size:14.0pt;color:#070707'>17.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.45pt'> </span><span
style='font-size:14.0pt;color:#070707'>Static</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.45pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Content</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark728"><span style='font-size:14.0pt;color:#070707'>Performance</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Considerations</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark736"><span style='font-size:14.0pt;color:#070707'>Content</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Delivery</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Networks</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.05pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark739"><span style='font-size:14.0pt;color:#070707'>Designing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>for</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>CDNs</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark739"><span style='font-size:14.0pt;color:#070707'>Server-Rendered</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.5pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Website</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark744"><span style='font-size:14.0pt;color:#070707'>Single-Page</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.1pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Applications</span></a></p>

<p class=MsoListParagraph align=right style='margin-top:12.9pt;margin-right:
267.45pt;margin-bottom:0cm;margin-left:20.15pt;margin-bottom:.0001pt;
text-align:right;text-indent:-20.2pt'><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark743"><span style='font-size:14.0pt;color:#070707'>Caching</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Static</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Assets</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection11>

<p class=MsoListParagraph style='margin-top:4.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark750"><span style='font-size:14.0pt;color:#070707'>Changing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>Static</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Content</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark754"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>19.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark760"><span style='font-size:14.0pt;color:#070707'>18.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Security</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark760"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>HTTPS</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark763"><span style='font-size:14.0pt;color:#070707'>Generating</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>Own</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.75pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Certificate</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark770"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Free</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Certificate</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Authority</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark773"><span style='font-size:14.0pt;color:#070707'>Purchasing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Certificate</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark780"><span style='font-size:14.0pt;color:#070707'>Enabling</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>HTTPS</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707'>for</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.65pt'> </span><span style='font-size:14.0pt;color:#070707'>Your</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>Express</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>App</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark783"><span style='font-size:14.0pt;color:#070707'>A</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.35pt'> </span><span
style='font-size:14.0pt;color:#070707'>Note</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.4pt'> </span><span style='font-size:14.0pt;
color:#070707'>on</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.4pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Ports</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark788"><span style='font-size:14.0pt;color:#070707'>HTTPS</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Proxies</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark790"><span style='font-size:14.0pt;color:#070707'>Cross-Site</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>Request</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.85pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Forgery</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark794"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Authentication</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark796"><span style='font-size:14.0pt;color:#070707'>Authentication</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span
style='font-size:14.0pt;color:#070707'>Versus</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:1.05pt'> </span><span style='font-size:
14.0pt;color:#070707;letter-spacing:-.1pt'>Authorization</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark799"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Problem</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>with</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Passwords</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark798"><span style='font-size:14.0pt;color:#070707'>Third-Party</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Authentication</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark803"><span style='font-size:14.0pt;color:#070707'>Storing</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Users</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>in</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.55pt'> </span><span style='font-size:14.0pt;color:#070707'>Your</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Database</span></a></p>

<p class=MsoListParagraph style='margin-top:11.45pt;margin-right:76.8pt;
margin-bottom:0cm;margin-left:206.15pt;margin-bottom:.0001pt;line-height:112%'><span
style='font-size:14.0pt;line-height:112%;color:#333333;text-decoration:none'>v.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark805"><span style='font-size:14.0pt;line-height:112%;color:#070707'>Authentication
Versus Registration and the</span><span style='font-size:14.0pt;line-height:
112%;color:#070707;text-decoration:none'> </span><span style='font-size:14.0pt;
line-height:112%;color:#070707'>User Experience</span></a></p>

<p class=MsoListParagraph style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark809"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Passport</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark817"><span style='font-size:14.0pt;color:#070707'>Role-Based</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.1pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Authorization</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-31.7pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>viii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark821"><span style='font-size:14.0pt;color:#070707'>Adding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.15pt'> </span><span
style='font-size:14.0pt;color:#070707'>Authentication</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.2pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Providers</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>d.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark825"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-28.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>20.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark828"><span style='font-size:14.0pt;color:#070707'>19.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Integrating</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>with</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707'>Third-Party</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.8pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>APIs</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection12>

<p class=MsoListParagraph style='margin-top:4.85pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark828"><span style='font-size:14.0pt;color:#070707'>Social</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Media</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark832"><span style='font-size:14.0pt;color:#070707'>Social</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Media</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>Plugins</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707'>and</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>Site</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Performance</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark831"><span style='font-size:14.0pt;color:#070707'>Searching</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>for</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Tweets</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark836"><span style='font-size:14.0pt;color:#070707'>Rendering</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Tweets</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark841"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Geocoding</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark841"><span style='font-size:14.0pt;color:#070707'>Geocoding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>with</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.85pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Google</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark847"><span style='font-size:14.0pt;color:#070707'>Geocoding</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>Your</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.85pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark850"><span style='font-size:14.0pt;color:#070707'>Displaying</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.25pt'>Map</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-18.0pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark854"><span style='font-size:14.0pt;color:#070707'>Weather</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>Data</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark857"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-25.95pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>21.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark859"><span style='font-size:14.0pt;color:#070707'>20.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Debugging</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark859"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>First</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>Principle</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.5pt'> </span><span style='font-size:14.0pt;color:#070707'>of</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Debugging</span></a></p>

<p class=MsoListParagraph style='text-indent:-19.45pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark863"><span style='font-size:14.0pt;color:#070707'>Take</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Advantage</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>of</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.6pt'> </span><span style='font-size:14.0pt;color:#070707'>REPL</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>the</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Console</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark866"><span style='font-size:14.0pt;color:#070707'>Using</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Nodes</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.7pt'> </span><span style='font-size:14.0pt;
color:#070707'>Built-in</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.75pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Debugger</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark868"><span style='font-size:14.0pt;color:#070707'>Node</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Inspector</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Clients</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark878"><span style='font-size:14.0pt;color:#070707'>Debugging</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.25pt'> </span><span
style='font-size:14.0pt;color:#070707'>Asynchronous</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.25pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Functions</span></a></p>

<p class=MsoListParagraph style='text-indent:-16.6pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark880"><span style='font-size:14.0pt;color:#070707'>Debugging</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:1.0pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>g.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark892"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-28.1pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>22.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark895"><span style='font-size:14.0pt;color:#070707'>21.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Going</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.2pt'>Live</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark895"><span style='font-size:14.0pt;color:#070707'>Domain</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>Registration</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707'>and</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.85pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Hosting</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark902"><span style='font-size:14.0pt;color:#070707'>Domain</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.8pt'> </span><span
style='font-size:14.0pt;color:#070707'>Name</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>System</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark901"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Security</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark906"><span style='font-size:14.0pt;color:#070707'>Top-Level</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Domains</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection13>

<p class=MsoListParagraph style='margin-top:4.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark912"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Subdomains</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark914"><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Nameservers</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark917"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Hosting</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark933"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Deployment</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark950"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>23.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark952"><span style='font-size:14.0pt;color:#070707'>22.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Maintenance</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark952"><span style='font-size:14.0pt;color:#070707'>The</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Principles</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>of</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.6pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Maintenance</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark952"><span style='font-size:14.0pt;color:#070707'>Have</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>a</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.6pt'> </span><span style='font-size:14.0pt;
color:#070707'>Longevity</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.6pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.2pt'>Plan</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark959"><span style='font-size:14.0pt;color:#070707'>Use</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Source</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Control</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-24.5pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark958"><span style='font-size:14.0pt;color:#070707'>Use</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.4pt'> </span><span
style='font-size:14.0pt;color:#070707'>an</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.4pt'> </span><span style='font-size:14.0pt;
color:#070707'>Issue</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.45pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Tracker</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>iv.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark963"><span style='font-size:14.0pt;color:#070707'>Exercise</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.7pt'> </span><span
style='font-size:14.0pt;color:#070707'>Good</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Hygiene</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>v.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark966"><span style='font-size:14.0pt;color:#070707'>Dont</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Procrastinate</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vi.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark969"><span style='font-size:14.0pt;color:#070707'>Do</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.5pt'> </span><span
style='font-size:14.0pt;color:#070707'>Routine</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>QA</span><span style='font-size:14.0pt;color:#070707;letter-spacing:
.5pt'> </span><span style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Checks</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>vii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark972"><span style='font-size:14.0pt;color:#070707'>Monitor</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Analytics</span></a></p>

<p class=MsoListParagraph style='margin-top:11.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-31.7pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>viii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark976"><span style='font-size:14.0pt;color:#070707'>Optimize</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.9pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Performance</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-23.05pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ix.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark975"><span style='font-size:14.0pt;color:#070707'>Prioritize</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Lead</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.75pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Tracking</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>x.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark980"><span style='font-size:14.0pt;color:#070707'>Prevent</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707'>Invisible</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.85pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Failures</span></a></p>

<p class=MsoListParagraph style='margin-top:12.85pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark983"><span style='font-size:14.0pt;color:#070707'>Code</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.55pt'> </span><span
style='font-size:14.0pt;color:#070707'>Reuse</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.55pt'> </span><span style='font-size:14.0pt;
color:#070707'>and</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Refactoring</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:206.2pt;margin-bottom:.0001pt;text-indent:-15.85pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>i.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark987"><span style='font-size:14.0pt;color:#070707'>Private</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;color:#070707'>npm</span><span style='font-size:14.0pt;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Registry</span></a></p>

<p class=MsoListParagraph style='margin-left:206.2pt;text-indent:-20.2pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>ii.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark986"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Middleware</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;text-indent:-18.0pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>c.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark991"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-28.1pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>24.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark995"><span style='font-size:14.0pt;color:#070707'>23.</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707'>Additional</span><span style='font-size:
14.0pt;color:#070707;letter-spacing:.8pt'> </span><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Resources</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark997"><span style='font-size:14.0pt;color:#070707'>Online</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.65pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Documentation</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection14>

<p class=MsoListParagraph style='margin-top:4.85pt;text-indent:-19.45pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>b.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark1003"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Periodicals</span></a></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark1001"><span style='font-size:14.0pt;
color:#070707'>Stack</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.55pt'> </span><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>Overflow</span></a></p>

<p class=MsoListParagraph style='text-indent:-20.2pt'><span style='font-size:
14.0pt;color:#333333;text-decoration:none'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark1007"><span style='font-size:14.0pt;
color:#070707'>Contributing</span><span style='font-size:14.0pt;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;color:#070707'>to</span><span
style='font-size:14.0pt;color:#070707;letter-spacing:.75pt'> </span><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph><span style='font-size:14.0pt;color:#333333;
text-decoration:none'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><a href="#_bookmark1012"><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoListParagraph style='margin-top:12.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;text-indent:-27.4pt'><span
style='font-size:14.0pt;color:#333333;text-decoration:none'>25.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><a
href="#_bookmark1014"><span style='font-size:14.0pt;color:#070707;letter-spacing:
-.1pt'>Index</span></a></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection15>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"Georgia",serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"Georgia",serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:12.9pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:145.4pt;margin-bottom:.0001pt;text-indent:-36.0pt;line-height:
105%'><b><span style='font-size:28.5pt;line-height:105%;font-family:"Arial",sans-serif;
color:#3F3F3F'>Web Development with Node and Express</span></b></p>

<p class=MsoNormal align=center style='margin-top:12.65pt;margin-right:15.9pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:20.0pt;color:#545454'>Leveraging<span style='letter-spacing:
-.25pt'> </span>the<span style='letter-spacing:-.25pt'> </span>JavaScript<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Stack</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:30.5pt'>&nbsp;</span></p>

<p class=MsoBodyText align=center style='margin-right:15.9pt;text-align:center'><span
style='color:#333333'>SECOND<span style='letter-spacing:.9pt'> </span><span
style='letter-spacing:-.1pt'>EDITION</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:15.9pt;text-align:center'><b><span
style='font-size:20.0pt;color:#333333'>Ethan<span style='letter-spacing:-.25pt'>
</span><span style='letter-spacing:-.2pt'>Brown</span></span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt'>&nbsp;</span></b></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=398 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=20 height=20
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image004.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection16>

<h4 align=left style='margin-top:3.55pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#3F3F3F'>Web<span style='letter-spacing:.65pt'> </span>Development<span
style='letter-spacing:.7pt'> </span>with<span style='letter-spacing:.7pt'> </span>Node<span
style='letter-spacing:.65pt'> </span>and<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>by<span
style='letter-spacing:.45pt'> </span>Ethan<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Brown</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:245%'><span
style='color:#333333'>Copyright  2020 Ethan Brown. All rights reserved.
Printed in the United States of America.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Published by OReilly Media, Inc., 1005 Gravenstein
Highway North, Sebastopol, CA 95472.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>OReilly books may be purchased for educational,
business, or sales promotional use. Online editions are also available for most
titles (</span><a href="http://oreilly.com/"><span style='color:#070707'>http://oreilly.com</span></a><span
style='color:#333333'>). For more information, contact our
corporate/institutional sales department: 800-998-9938 or </span><a
href="mailto:corporate@oreilly.com"><i><span style='color:#333333;letter-spacing:
-.1pt;text-decoration:none'>corporate@oreilly.com</span></i><span
style='color:#333333;letter-spacing:-.1pt;text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:17.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:239.2pt;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt;line-height:215%'><span
style='color:#333333'>Acquisitions Editor: Jennifer Pollock Developmental
Editor: Angela Rufino Production Editor: Nan Barber Copyeditor: Kim Wimpsett
Proofreader: Sharon Wilkey</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:205.55pt;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt;line-height:215%'><span
style='color:#333333'>Indexer: WordCo Indexing Services, Inc. Interior
Designer: David Futato</span></p>

<p class=MsoBodyText style='margin-left:101.8pt;line-height:16.0pt'><span
style='color:#333333'>Cover<span style='letter-spacing:.65pt'> </span>Designer:<span
style='letter-spacing:.65pt'> </span>Karen<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Montgomery</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection17>

<p class=MsoBodyText style='margin-top:4.2pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;text-indent:-3.6pt;line-height:
200%'><span style='color:#333333'>Illustrator: Rebecca Demarest November 2019:
Second Edition</span></p>

<h4 align=left style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left;line-height:12.5pt'><span
style='color:#3F3F3F'>Revision<span style='letter-spacing:.6pt'> </span>History<span
style='letter-spacing:.6pt'> </span>for<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.6pt'> </span>Second<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Edition</span></span></h4>

<p class=MsoBodyText style='margin-top:12.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:absolute;
z-index:15729664;left:0px;margin-left:169px;margin-top:25px;width:7px;
height:7px'><img width=7 height=7
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image005.gif"></span><span
style='color:#333333'>2019-11-12:<span style='letter-spacing:.8pt'> </span>First<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Release</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>See </span><a
href="http://oreilly.com/catalog/errata.csp?isbn=9781492053514"><span
style='color:#070707'>http://oreilly.com/catalog/errata.csp?isbn=9781492053514</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for release <span
style='letter-spacing:-.1pt'>details.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The OReilly logo is a registered trademark of OReilly
Media, Inc. <i>Web Development with Node and Express</i>, the cover image, and
related trade dress are trademarks of OReilly Media, Inc.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The views expressed in this work are those of the author,
and do not represent the publishers views. While the publisher and the author
have used good faith efforts to ensure that the information and instructions
contained in this work are accurate, the publisher and the author disclaim<span
style='letter-spacing:4.0pt'> </span>all responsibility for errors or
omissions, including without limitation responsibility for damages resulting
from the use of or reliance on this work. Use of the information and
instructions contained in this work is at your own risk. If any code samples or
other technology this work contains or describes is subject to open source
licenses or the intellectual property rights of others, it is your
responsibility to ensure that your use thereof complies with such licenses
and/or rights.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:366.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:245%'><span
style='color:#333333;letter-spacing:-.1pt'>978-1-492-05351-4 [LSI]</span></p>

</div>

<span style='font-size:11.0pt;line-height:245%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection18>

<h4 align=left style='margin-top:3.55pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#3F3F3F;letter-spacing:-.1pt'>Dedication</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>This<span
style='letter-spacing:.4pt'> </span>book<span style='letter-spacing:.5pt'> </span>is<span
style='letter-spacing:.45pt'> </span>dedicated<span style='letter-spacing:.5pt'>
</span>to<span style='letter-spacing:.5pt'> </span>my<span style='letter-spacing:
.45pt'> </span><span style='letter-spacing:-.1pt'>family:</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>My father, Tom, who gave me a love of engineering; my
mother, Ann, who gave me a love of writing; and my sister, Meris, who has been
a constant companion.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection19>

<h1><a name="Who_This_Book_Is_For"></a><a name="_bookmark1"></a><a
name=Preface></a><a name="_bookmark0"></a><span style='letter-spacing:-.1pt'>Preface</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=576 height=1
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image006.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Arial",sans-serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection20>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.25pt'><b><span style='font-size:10.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Who<span
style='letter-spacing:-.25pt'> </span>This<span style='letter-spacing:-.1pt'> </span>Book<span
style='letter-spacing:-.1pt'> </span>Is<span style='letter-spacing:-.1pt'> </span><span
style='letter-spacing:-.25pt'>For</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This book is for programmers who want to create web
applications (traditional<span style='letter-spacing:2.0pt'> </span>websites;<span
style='letter-spacing:2.0pt'> </span>single-page<span style='letter-spacing:
2.0pt'> </span>applications<span style='letter-spacing:2.0pt'> </span>with<span
style='letter-spacing:2.0pt'> </span>React,<span style='letter-spacing:2.0pt'> </span>Angular,<span
style='letter-spacing:2.0pt'> </span>or Vue; REST APIs; or anything in between)
using JavaScript, Node, and Express. One of the exciting aspects of Node development
is that it has attracted a whole new audience of programmers. The accessibility
and flexibility of JavaScript have attracted self-taught programmers from all
over the world. At no time in the history of computer science has programming
been so accessible. The number and quality of online resources for learning to
program (and getting help when you get stuck) is truly astonishing and
inspiring. So to those new (possibly self-taught) programmers, I welcome you.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Then,<span style='letter-spacing:1.55pt'> </span>of<span
style='letter-spacing:1.5pt'> </span>course,<span style='letter-spacing:1.55pt'>
</span>there<span style='letter-spacing:1.5pt'> </span>are<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>programmers<span
style='letter-spacing:1.5pt'> </span>like<span style='letter-spacing:1.5pt'> </span>me,<span
style='letter-spacing:1.55pt'> </span>who<span style='letter-spacing:1.55pt'> </span>have<span
style='letter-spacing:1.5pt'> </span>been around for a while. Like many
programmers of my era, I started off with assembler and BASIC and went through
Pascal, C++, Perl, Java, PHP, Ruby, C, C#, and JavaScript. At university, I was
exposed to more niche languages such as ML, LISP, and PROLOG. Many of these
languages are near and dear to my heart, but in none of these languages do I
see so much promise as I do in JavaScript. So I am also writing this book for
programmers<span style='letter-spacing:1.55pt'> </span>like<span
style='letter-spacing:1.55pt'> </span>myself,<span style='letter-spacing:1.6pt'>
</span>who<span style='letter-spacing:1.6pt'> </span>have<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.55pt'> </span>lot<span
style='letter-spacing:1.55pt'> </span>of<span style='letter-spacing:1.55pt'> </span>experience<span
style='letter-spacing:1.55pt'> </span>and<span style='letter-spacing:1.6pt'> </span>perhaps<span
style='letter-spacing:1.55pt'> </span>a more philosophical outlook on specific
technologies.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>No experience with Node is necessary, but you should have
some experience with JavaScript. If youre new to programming, I recommend </span><a
href="http://bit.ly/2KfDqkQ"><span style='color:#070707'>Codecademy</span></a><span
style='color:#333333'>. If youre an intermediate or experienced programmer, I
recommend my own book, </span><a
href="http://shop.oreilly.com/product/0636920035534.do"><i><span
style='color:#070707'>Learning JavaScript, 3rd Edition</span></i></a><i><span
style='color:#070707'> </span></i><span style='color:#333333'>(OReilly).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection21>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="How_This_Book_Is_Organized"></a><a name="_bookmark3"></a><span
style='color:#333333'>The<span style='letter-spacing:1.35pt'> </span>examples<span
style='letter-spacing:1.35pt'> </span>in<span style='letter-spacing:1.4pt'> </span>this<span
style='letter-spacing:1.35pt'> </span>book<span style='letter-spacing:1.4pt'> </span>can<span
style='letter-spacing:1.4pt'> </span>be<span style='letter-spacing:1.35pt'> </span>used<span
style='letter-spacing:1.4pt'> </span>with<span style='letter-spacing:1.4pt'> </span>any<span
style='letter-spacing:1.4pt'> </span>system<span style='letter-spacing:1.35pt'>
</span>that<span style='letter-spacing:1.35pt'> </span>Node<span
style='letter-spacing:1.35pt'> </span>works on (which covers Windows, macOS,
and Linux, among others). The examples are geared toward command-line
(terminal) users, so you should have some familiarity with your systems terminal.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Most important, this book is for programmers who are
excited. Excited<span style='letter-spacing:2.0pt'> </span>about the future of
the internet and want to be part of it. Excited about learning new things, new
techniques, and new ways of looking at web development. If, dear reader, you
are not excited, I hope you will be by the time you reach the end of this
book.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Notes_on_the_Second_Edition"></a><a name="_bookmark2"></a><span
style='color:#8E0011'>Notes<span style='letter-spacing:-.15pt'> </span>on<span
style='letter-spacing:-.15pt'> </span>the<span style='letter-spacing:-.15pt'> </span>Second<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Edition</span></span></h2>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It was a joy to write the first edition of this book, and
I am to this day pleased with the practical advice I was able to put into it
and the warm response of my readers. The first edition was published just as
Express 4.0 was released from beta, and while Express is still on version 4.x,
the middleware and tools that go along with Express have undergone <i>massive </i>changes.<span
style='letter-spacing:1.95pt'> </span>Furthermore,<span style='letter-spacing:
1.95pt'> </span>JavaScript<span style='letter-spacing:1.85pt'> </span>itself<span
style='letter-spacing:1.85pt'> </span>has<span style='letter-spacing:1.85pt'> </span>evolved,<span
style='letter-spacing:1.95pt'> </span>and<span style='letter-spacing:1.95pt'> </span>even<span
style='letter-spacing:1.95pt'> </span>the<span style='letter-spacing:1.85pt'> </span>way
web applications are designed has undergone a tectonic shift (away from pure
server-side rendering and toward single-page applications [SPAs]).</span></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While many of the principles in the first edition are
still useful and valid, the specific techniques and tools are almost completely
different. A new edition is overdue. Because of the ascendancy of SPAs, the
focus of this second edition has also shifted to place more emphasis on Express
as a server for APIs and static assets, and it includes an SPA example.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection22>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>How<span
style='letter-spacing:-.25pt'> </span>This<span style='letter-spacing:-.1pt'> </span>Book<span
style='letter-spacing:-.1pt'> </span>Is<span style='letter-spacing:-.1pt'>
Organized</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark10"><span style='color:#070707'>Chapter 1</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and </span><a
href="#_bookmark51"><span style='color:#070707'>Chapter 2</span></a><span
style='color:#070707'> </span><span style='color:#333333'>will introduce you to
Node and Express and some of<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>tools<span style='letter-spacing:1.4pt'> </span>youll<span
style='letter-spacing:1.4pt'> </span>be<span style='letter-spacing:1.4pt'> </span>using<span
style='letter-spacing:1.45pt'> </span>throughout<span style='letter-spacing:
1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>book.<span
style='letter-spacing:1.45pt'> </span>In<span style='letter-spacing:1.45pt'> </span></span><a
href="#_bookmark101"><span style='color:#070707'>Chapter<span style='letter-spacing:
1.4pt'> </span>3</span></a><span style='color:#070707;letter-spacing:1.45pt'> </span><span
style='color:#333333'>and<span style='letter-spacing:2.0pt'> </span></span><a
href="#_bookmark134"><span style='color:#070707'>Chapter 4</span></a><span
style='color:#333333'>, you start using Express and build the skeleton of a
sample<span style='letter-spacing:2.0pt'> </span>website that will be used as a
running example throughout the rest of the <span style='letter-spacing:-.1pt'>book.</span></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark165"><span style='color:#070707'>Chapter 5</span></a><span
style='color:#070707'> </span><span style='color:#333333'>discusses testing and
QA, and </span><a href="#_bookmark223"><span style='color:#070707'>Chapter 6</span></a><span
style='color:#070707'> </span><span style='color:#333333'>covers some of Nodes
more<span style='letter-spacing:1.65pt'> </span>important<span
style='letter-spacing:1.65pt'> </span>constructs<span style='letter-spacing:
1.65pt'> </span>and<span style='letter-spacing:1.7pt'> </span>how<span
style='letter-spacing:1.65pt'> </span>they<span style='letter-spacing:1.7pt'> </span>are<span
style='letter-spacing:1.65pt'> </span>extended<span style='letter-spacing:1.7pt'>
</span>and<span style='letter-spacing:1.7pt'> </span>used<span
style='letter-spacing:1.7pt'> </span>by Express. </span><a href="#_bookmark309"><span
style='color:#070707'>Chapter 7</span></a><span style='color:#070707'> </span><span
style='color:#333333'>covers templating (using Handlebars), which lays the
foundation<span style='letter-spacing:1.9pt'> </span>of building<span
style='letter-spacing:1.9pt'> </span>useful websites with<span
style='letter-spacing:1.9pt'> </span>Express.<span style='letter-spacing:1.9pt'>
</span></span><a href="#_bookmark355"><span style='color:#070707'>Chapter 8</span></a><span
style='color:#070707;letter-spacing:1.9pt'> </span><span style='color:#333333'>and
</span><a href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#070707'> </span><span style='color:#333333'>cover cookies,
sessions, and form handlers, rounding out the things you<span style='letter-spacing:
1.65pt'> </span>need<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>know to<span style='letter-spacing:1.65pt'>
</span>build<span style='letter-spacing:1.65pt'> </span>basic functional
websites with<span style='letter-spacing:1.65pt'> </span>Express.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark427"><span style='color:#070707'>Chapter<span style='letter-spacing:
1.8pt'> </span>10</span></a><span style='color:#070707;letter-spacing:1.85pt'> </span><span
style='color:#333333'>delves<span style='letter-spacing:1.8pt'> </span>into<span
style='letter-spacing:1.85pt'> </span>middleware,<span style='letter-spacing:
1.85pt'> </span>a<span style='letter-spacing:1.8pt'> </span>concept<span
style='letter-spacing:1.8pt'> </span>central<span style='letter-spacing:1.8pt'>
</span>to<span style='letter-spacing:1.85pt'> </span>Express. </span><a
href="#_bookmark460"><span style='color:#070707'>Chapter 11</span></a><span
style='color:#070707'> </span><span style='color:#333333'>explains how to use
middleware to send email from the server and discusses security and layout
issues inherent to email.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark499"><span style='color:#070707'>Chapter 12</span></a><span
style='color:#070707'> </span><span style='color:#333333'>offers a preview into
production concerns. Even though at this stage in the book you dont have all
the information you need to build a production-ready website, thinking about
production now can save you from major headaches in the future.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark542"><span style='color:#070707'>Chapter 13</span></a><span
style='color:#070707'> </span><span style='color:#333333'>is about persistence,
with a focus on MongoDB (one of the leading document databases) and PostgreSQL
(a popular open-source relational database management system).</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark603"><span
style='color:#070707'>Chapter<span style='letter-spacing:.45pt'> </span>14</span></a><span
style='color:#070707;letter-spacing:.6pt'> </span><span style='color:#333333'>gets<span
style='letter-spacing:.45pt'> </span>into<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.5pt'> </span>details<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.5pt'> </span>routing<span style='letter-spacing:.6pt'> </span>with<span
style='letter-spacing:.55pt'> </span>Express<span style='letter-spacing:.5pt'> </span>(how<span
style='letter-spacing:.45pt'> </span>URLs<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>are</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection23>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Conventions_Used_in_This_Book"></a><a name="_bookmark4"></a><span
style='color:#333333'>mapped to content), and </span><a href="#_bookmark634"><span
style='color:#070707'>Chapter 15</span></a><span style='color:#070707'> </span><span
style='color:#333333'>takes a diversion into writing APIs with Express. </span><a
href="#_bookmark721"><span style='color:#070707'>Chapter 17</span></a><span
style='color:#070707'> </span><span style='color:#333333'>covers the details of
serving static content, with<span style='letter-spacing:4.0pt'> </span>a focus
on maximizing performance.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark760"><span style='color:#070707'>Chapter 18</span></a><span
style='color:#070707'> </span><span style='color:#333333'>discusses security:
how to build authentication and authorization into your app (with a focus on
using a third-party authentication provider), as well as how to run your site
over HTTPS.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark828"><span style='color:#070707'>Chapter 19</span></a><span
style='color:#070707'> </span><span style='color:#333333'>explains how to
integrate with third-party services. Examples used are Twitter, Google Maps,
and the US National Weather Service.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark665"><span style='color:#070707'>Chapter 16</span></a><span
style='color:#070707'> </span><span style='color:#333333'>takes what weve
learned about Express and uses it to refactor the running example as an SPA,
with Express as the backend server providing the API we created in </span><a
href="#_bookmark634"><span style='color:#070707'>Chapter 15</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="#_bookmark859"><span style='color:#070707'>Chapter 20</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and </span><a
href="#_bookmark895"><span style='color:#070707'>Chapter 21</span></a><span
style='color:#070707'> </span><span style='color:#333333'>get you ready for the
big day: your site launch. They cover debugging, so you can root out any
defects before launch, and the process of going live. </span><a
href="#_bookmark952"><span style='color:#070707'>Chapter 22</span></a><span
style='color:#070707'> </span><span style='color:#333333'>talks about the next
important (and<span style='letter-spacing:2.0pt'> </span>oft-neglected) phase:
maintenance.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:104.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>The book concludes with </span><a
href="#_bookmark995"><span style='color:#070707'>Chapter 23</span></a><span
style='color:#333333'>, which points you to additional resources, should you
want to further your education about Node and Express, and where you can go to
get help.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt;text-align:justify'><span style='color:#8E0011'>Example<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Starting<span style='letter-spacing:1.6pt'> </span>in<span
style='letter-spacing:1.6pt'> </span></span><a href="#_bookmark101"><span
style='color:#070707'>Chapter<span style='letter-spacing:1.55pt'> </span>3</span></a><span
style='color:#333333'>,<span style='letter-spacing:1.6pt'> </span>a<span
style='letter-spacing:1.55pt'> </span>running<span style='letter-spacing:1.6pt'>
</span>example<span style='letter-spacing:1.55pt'> </span>will<span
style='letter-spacing:1.55pt'> </span>be<span style='letter-spacing:1.55pt'> </span>used<span
style='letter-spacing:1.6pt'> </span>throughout<span style='letter-spacing:
1.55pt'> </span>the book: the Meadowlark Travel website. I wrote the first
edition just after getting back from a trip to Lisbon, and I had travel on my
mind, so the example website I chose is for a fictional travel company<span
style='letter-spacing:.8pt'> </span>in<span style='letter-spacing:.8pt'> </span>my<span
style='letter-spacing:.8pt'> </span>home state</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection24>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Using_Code_Examples"></a><a name="_bookmark6"></a><a
name="Example_Website"></a><a name="_bookmark5"></a><span style='color:#333333'>of
Oregon (the Western Meadowlark is the state songbird of Oregon). Meadowlark
Travel allows travelers to connect to local amateur tour guides, and it
partners with companies offering bike and scooter rentals and local tours, with
a focus on ecotourism.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Like any pedagogical example, the Meadowlark Travel
website is contrived, but it is an example that covers many of the challenges
facing real-world websites: third-party component integration, geolocation,
ecommerce, performance, and security.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>As the focus on this book is backend infrastructure, the
example website will not be complete; it merely serves as a fictional example
of a real- world website to provide depth and context to the examples.
Presumably, you are working on your own website, and you can use the Meadowlark
Travel example as a template for it.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Conventions<span style='letter-spacing:-.25pt'>
</span>Used<span style='letter-spacing:-.2pt'> </span>in<span style='letter-spacing:
-.2pt'> </span>This<span style='letter-spacing:-.2pt'> Book</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.6pt'> </span>following<span style='letter-spacing:.7pt'>
</span>typographical<span style='letter-spacing:.65pt'> </span>conventions<span
style='letter-spacing:.65pt'> </span>are<span style='letter-spacing:.65pt'> </span>used<span
style='letter-spacing:.7pt'> </span>in<span style='letter-spacing:.7pt'> </span>this<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>book:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Italic</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Indicates new terms, URLs, email addresses, filenames,
and file <span style='letter-spacing:-.1pt'>extensions.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>Constant<span
style='letter-spacing:.85pt'> </span></span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.25pt'>w</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.25pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.25pt'>d</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.25pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.2pt'>h</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Used for program listings, as well as within paragraphs
to refer to program elements such as variable or function names, databases,
data types, environment variables, statements, and keywords.</span></p>

<p class=MsoNormal style='margin-top:11.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><b><i><span style='font-size:
14.0pt;font-family:"Courier New";color:#333333'>Constant<span style='letter-spacing:
1.0pt'> </span>width<span style='letter-spacing:1.0pt'> </span><span
style='letter-spacing:-.2pt'>bold</span></span></i></b></p>

<p class=MsoBodyText style='margin-top:8.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Shows<span
style='letter-spacing:.5pt'> </span>commands<span style='letter-spacing:.5pt'> </span>or<span
style='letter-spacing:.55pt'> </span>other<span style='letter-spacing:.5pt'> </span>text<span
style='letter-spacing:.5pt'> </span>that<span style='letter-spacing:.55pt'> </span>should<span
style='letter-spacing:.55pt'> </span>be<span style='letter-spacing:.55pt'> </span>typed<span
style='letter-spacing:.55pt'> </span>literally<span style='letter-spacing:.6pt'>
</span>by<span style='letter-spacing:.55pt'> </span><span style='letter-spacing:
-.25pt'>the</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection25>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>user.</span></p>

<p class=MsoNormal style='margin-top:13.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Courier New";color:#333333'>Constant<span style='letter-spacing:
1.0pt'> </span>width<span style='letter-spacing:1.0pt'> </span><span
style='letter-spacing:-.1pt'>italic</span></span></i></p>

<p class=MsoBodyText style='margin-top:8.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Shows text that should be replaced with user-supplied
values or by values determined by context.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=107
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image007.gif"
  alt="Text Box: TIP&#13;&#10;This element signifies a tip or suggestion.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=108
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image008.gif"
  alt="Text Box: NOTE&#13;&#10;This element signifies a general note.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=108
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image009.gif"
  alt="Text Box: WARNING&#13;&#10;This element indicates a warning or caution.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt;text-align:justify'><span style='color:#8E0011'>Using<span
style='letter-spacing:-.2pt'> </span>Code<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Examples</span></span></h2>

<p class=MsoNormal style='margin-top:13.65pt;margin-right:98.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='font-size:14.0pt;line-height:133%;color:#333333'>Supplemental
material (code examples, exercises, etc.) is available for </span><a
href="https://github.com/EthanRBrown/web-development-with-node-and-express-2e"><span
style='font-size:14.0pt;line-height:133%;color:#333333;text-decoration:none'>download
at </span><i><span style='font-size:14.0pt;line-height:133%;color:#070707'>https://github.com/EthanRBrown/web-development-with-</span></i><i><span
style='font-size:14.0pt;line-height:133%;color:#070707;text-decoration:none'> </span></i><i><span
style='font-size:14.0pt;line-height:133%;color:#070707;letter-spacing:-.1pt'>node-and-express-2e</span></i><span
style='font-size:14.0pt;line-height:133%;color:#333333;letter-spacing:-.1pt;
text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This book is here to help you get your job done. In
general, if example<span style='letter-spacing:4.0pt'> </span>code is offered
with this book, you may use it in your programs and documentation.<span
style='letter-spacing:1.75pt'> </span>You<span style='letter-spacing:1.75pt'> </span>do<span
style='letter-spacing:1.75pt'> </span>not<span style='letter-spacing:1.65pt'> </span>need<span
style='letter-spacing:1.75pt'> </span>to<span style='letter-spacing:1.75pt'> </span>contact<span
style='letter-spacing:1.65pt'> </span>us<span style='letter-spacing:1.65pt'> </span>for<span
style='letter-spacing:1.65pt'> </span>permission<span style='letter-spacing:
1.75pt'> </span>unless youre reproducing a significant portion of the code.
For example, writing<span style='letter-spacing:4.0pt'> </span>a program that
uses several chunks of code from this book does not</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection26>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name=Acknowledgments></a><a name="_bookmark8"></a><span
style='color:#333333'>require permission. Selling or distributing a CD-ROM of
examples from OReilly books does require permission. Answering a question by
citing this book and quoting example code does not require permission.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:90.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Incorporating a significant amount of example
code from this book into your products documentation does require permission.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>We appreciate, but do
not require, attribution. An attribution usually includes the title, author,
publisher, and ISBN. For example: <i>Web Development with Node and Express,
Second Edition </i>by Ethan Brown (OReilly). Copyright 2019 Ethan Brown,
978-1-492-05351-4.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you feel your use of code examples falls outside fair
use or the<span style='letter-spacing:2.0pt'> </span>permission given here,
feel free to contact us at </span><a href="mailto:permissions@oreilly.com"><i><span
style='color:#070707'>permissions@oreilly.com</span></i></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="OReilly_Online_Learning"></a><a name="_bookmark7"></a><span
style='color:#8E0011'>OReilly<span style='letter-spacing:-.3pt'> </span>Online<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Learning</span></span></h2>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=129
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image010.gif"
  alt="Text Box: NOTE&#13;&#10;For almost 40 years, OReilly Media has provided technology and business training, knowledge, and insight to help companies succeed.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Our unique network of experts and innovators share their
knowledge and expertise through books, articles, conferences, and our online
learning platform. OReillys online learning platform gives you on-demand
access to live training courses, in-depth learning paths, interactive coding
environments, and a vast collection of text and video from OReilly and 200+<span
style='letter-spacing:2.0pt'> </span>other<span style='letter-spacing:2.0pt'> </span>publishers.<span
style='letter-spacing:2.0pt'> </span>For<span style='letter-spacing:2.0pt'> </span>more<span
style='letter-spacing:2.0pt'> </span>information,<span style='letter-spacing:
2.0pt'> </span>please<span style='letter-spacing:2.0pt'> </span>visit </span><a
href="http://oreilly.com/"><i><span style='color:#070707;letter-spacing:-.1pt'>http://oreilly.com</span></i></a><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection27>

<h2 style='margin-top:3.9pt'><a name="How_to_Contact_Us"></a><a
name="_bookmark9"></a><span style='color:#8E0011'>How<span style='letter-spacing:
-.15pt'> </span>to<span style='letter-spacing:-.15pt'> </span>Contact<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.25pt'>Us</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Please address comments and questions concerning this
book to the <span style='letter-spacing:-.1pt'>publisher:</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:17.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:101.75pt'><span style='color:#333333'>OReilly<span
style='letter-spacing:.7pt'> </span>Media,<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.2pt'>Inc.</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:205.55pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt;line-height:215%'><span
style='color:#333333'>1005 Gravenstein Highway North Sebastopol, CA 95472</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:185.9pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt;line-height:215%'><span
style='color:#333333'>800-998-9938 (in the United States or Canada)
707-829-0515 (international or local)</span></p>

<p class=MsoBodyText style='margin-left:101.75pt;line-height:16.0pt'><span
style='color:#333333'>707-829-0104<span style='letter-spacing:1.55pt'> </span><span
style='letter-spacing:-.1pt'>(fax)</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>We have a web page for
this book, where we list errata, examples, and any additional information. You
can access this page at </span><a
href="https://oreil.ly/web_dev_node_express_2e"><i><span style='font-size:14.0pt;
line-height:133%;color:#070707;letter-spacing:-.1pt'>https://oreil.ly/web_dev_node_express_2e</span></i></a><span
style='font-size:14.0pt;line-height:133%;color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>To<span
style='letter-spacing:.6pt'> </span>comment<span style='letter-spacing:.55pt'> </span>or<span
style='letter-spacing:.55pt'> </span>ask<span style='letter-spacing:.6pt'> </span>technical<span
style='letter-spacing:.55pt'> </span>questions<span style='letter-spacing:.55pt'>
</span>about<span style='letter-spacing:.55pt'> </span>this<span
style='letter-spacing:.55pt'> </span>book,<span style='letter-spacing:.6pt'> </span>send<span
style='letter-spacing:.6pt'> </span>email<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>to</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><a
href="mailto:bookquestions@oreilly.com"><i><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>bookquestions@oreilly.com</span></i></a><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For more information about our books, courses,
conferences, and news, see our website at </span><a
href="http://www.oreilly.com/"><i><span style='color:#070707'>http://www.oreilly.com</span></i></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Find<span style='letter-spacing:.55pt'> </span>us<span
style='letter-spacing:.55pt'> </span>on<span style='letter-spacing:.55pt'> </span>Facebook:<span
style='letter-spacing:.55pt'> </span></span><a
href="http://facebook.com/oreilly"><i><span style='font-size:14.0pt;color:#070707;
letter-spacing:-.1pt'>http://facebook.com/oreilly</span></i></a></p>

<p class=MsoBodyText style='margin-top:.5pt'><i><span style='font-size:20.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Follow<span style='letter-spacing:.45pt'> </span>us<span
style='letter-spacing:.5pt'> </span>on<span style='letter-spacing:.5pt'> </span>Twitter:<span
style='letter-spacing:.5pt'> </span></span><a
href="http://twitter.com/oreillymedia"><i><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>http://twitter.com/oreillymedia</span></i></a></p>

<p class=MsoBodyText style='margin-top:.5pt'><i><span style='font-size:20.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Watch<span style='letter-spacing:.6pt'> </span>us<span
style='letter-spacing:.55pt'> </span>on<span style='letter-spacing:.6pt'> </span>YouTube:<span
style='letter-spacing:.55pt'> </span></span><a
href="http://www.youtube.com/oreillymedia"><i><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>http://www.youtube.com/oreillymedia</span></i></a></p>

<p class=MsoBodyText><i><span style='font-size:16.0pt'>&nbsp;</span></i></p>

<h2 style='margin-top:13.8pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Acknowledgments</span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection28>

<p class=MsoBodyText style='margin-top:3.9pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So many people in my life have played a part in making
this book a reality; it would not have been possible without the influence of
all the people who have touched my life and made me who I am today.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I would like to start out by thanking everyone at Pop
Art: not only has my time at Pop Art given me a renewed passion for
engineering, but I have learned so much from everyone there, and without their
support, this book would<span style='letter-spacing:1.55pt'> </span>not<span
style='letter-spacing:1.5pt'> </span>exist.<span style='letter-spacing:1.55pt'>
</span>I<span style='letter-spacing:1.5pt'> </span>am<span style='letter-spacing:
1.5pt'> </span>grateful<span style='letter-spacing:1.5pt'> </span>to<span
style='letter-spacing:1.55pt'> </span>Steve<span style='letter-spacing:1.5pt'> </span>Rosenbaum<span
style='letter-spacing:1.5pt'> </span>for<span style='letter-spacing:1.5pt'> </span>creating<span
style='letter-spacing:1.55pt'> </span>an inspiring place to work, and to Del
Olds for bringing me on board, making me<span style='letter-spacing:1.55pt'> </span>feel<span
style='letter-spacing:1.55pt'> </span>welcome,<span style='letter-spacing:1.6pt'>
</span>and<span style='letter-spacing:1.6pt'> </span>being<span
style='letter-spacing:1.6pt'> </span>an<span style='letter-spacing:1.6pt'> </span>honorable<span
style='letter-spacing:1.55pt'> </span>leader.<span style='letter-spacing:1.6pt'>
</span>Thanks<span style='letter-spacing:1.55pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>Paul<span style='letter-spacing:1.55pt'> </span>Inman
for his unwavering support and inspiring attitude toward engineering, and Tony
Alferez for his warm support and for helping me carve out time for writing<span
style='letter-spacing:1.65pt'> </span>without<span style='letter-spacing:1.6pt'>
</span>impacting<span style='letter-spacing:1.65pt'> </span>Pop<span
style='letter-spacing:1.65pt'> </span>Art.<span style='letter-spacing:1.65pt'> </span>Finally,<span
style='letter-spacing:1.65pt'> </span>thanks<span style='letter-spacing:1.6pt'>
</span>to<span style='letter-spacing:1.65pt'> </span>all<span style='letter-spacing:
1.6pt'> </span>the<span style='letter-spacing:1.6pt'> </span>great engineers I
have worked with, who keep me on my toes: John Skelton, Dylan Hallstrom, Greg
Yung, Quinn Michaels, CJ Stritzel, Colwyn Fritze- Moor,<span style='letter-spacing:
2.0pt'> </span>Diana Holland,<span style='letter-spacing:2.0pt'> </span>Sam
Wilskey,<span style='letter-spacing:2.0pt'> </span>Cory<span style='letter-spacing:
2.0pt'> </span>Buckley,<span style='letter-spacing:2.0pt'> </span>and<span
style='letter-spacing:2.0pt'> </span>Damion<span style='letter-spacing:2.0pt'> </span>Moyer.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I owe a great debt of gratitude to my current team at
Value Management Strategies, Inc. I have learned so much about the business
side of software from Robert Stewart and Greg Brink, and so much about team
communication, cohesion, and effectiveness from Ashley Carson (thanks<span
style='letter-spacing:4.0pt'> </span>for your unwavering support, Scratch
Chromatic). Terry Hays, Cheryl Kramer, and Eric Trimble, thank you all for your
hard work and support! And thanks to Damon Yeutter, Tyler Brenton, and Brad
Wells for their critical work on requirements analysis and project management.
Most importantly, thank you to the talented and dedicated developers who have
worked with metirelesslyat VMS: Adam Smith, Shane Ryan, Jeremy Loss, Dan
Mace, Michael Meow, Julianne Soifer, Matt Nakatani, and Jake <span
style='letter-spacing:-.1pt'>Feldmann.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection29>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Thanks<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.4pt'> </span>all<span style='letter-spacing:1.35pt'> </span>of<span
style='letter-spacing:1.35pt'> </span>my<span style='letter-spacing:1.4pt'> </span>bandmates<span
style='letter-spacing:1.35pt'> </span>at<span style='letter-spacing:1.35pt'> </span>School<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>Rock!<span
style='letter-spacing:1.35pt'> </span>What<span style='letter-spacing:1.35pt'> </span>a<span
style='letter-spacing:1.35pt'> </span>crazy<span style='letter-spacing:1.4pt'> </span>journey
its been and what a joyful creative outlet to have. Special thanks to the
instructors who share their passion and knowledge of music: Josh Thomas, Amanda
Sloane, Dave Coniglio, Dan Lee, Derek Blackstone, and Cory West. Thank you all
for giving me the opportunity to be a rock star!</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Zach Mason, thank you for being an inspiration to me.
This book may be no <i>The Lost Books of the Odyssey</i>, but it is <i>mine</i>,
and I dont know if I would have been so bold without your example.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Elizabeth and Ezra, thank you for the gifts you both gave
me. I will love you both forever.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I owe everything to my family. I couldnt have wished for
a better, more loving education than the one they gave me, and I see their exceptional
parenting reflected in my sister too.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Many thanks to Simon St. Laurent for giving me this
opportunity, and to Angela Rufino (second edition) and Brian Anderson (first
edition) for their steady and encouraging editing. Thanks to everyone at
OReilly for their dedication and passion. Thanks to Alejandra Olvera-Novack,
Chetan Karande, Brian Sletten, Tamas Piros, Jennifer Pierce, Mike Wilson, Ray
Villalobos, and Eric Elliot for their thorough and constructive technical <span
style='letter-spacing:-.1pt'>reviews.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Katy Roberts and Hanna Nelson provided invaluable
feedback and advice on my over the transom proposal that made this book
possible. Thank<span style='letter-spacing:2.0pt'> </span>you<span
style='letter-spacing:1.7pt'> </span>both<span style='letter-spacing:1.7pt'> </span>so<span
style='letter-spacing:1.7pt'> </span>much!<span style='letter-spacing:1.65pt'> </span>Thanks<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.7pt'> </span>Chris<span
style='letter-spacing:1.65pt'> </span>Cowell-Shah<span style='letter-spacing:
1.7pt'> </span>for<span style='letter-spacing:1.65pt'> </span>his<span
style='letter-spacing:1.65pt'> </span>excellent feedback on the QA chapter.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Lastly,<span
style='letter-spacing:.55pt'> </span>thanks<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.6pt'> </span>my<span style='letter-spacing:.55pt'> </span>dear<span
style='letter-spacing:.5pt'> </span>friends,<span style='letter-spacing:.6pt'> </span>without<span
style='letter-spacing:.5pt'> </span>whom<span style='letter-spacing:.5pt'> </span>I<span
style='letter-spacing:.55pt'> </span>surely<span style='letter-spacing:.55pt'> </span>would<span
style='letter-spacing:.6pt'> </span>have<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.2pt'>gone</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection30>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>insane: Byron Clayton, Mark Booth, Katy Roberts, and
Kimberly Christensen. I love you all.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection31>

<h1><a name="1._Introducing_Express"></a><a name="The_JavaScript_Revolution"></a><a
name="_bookmark10"></a>Chapter<span style='letter-spacing:.7pt'> </span>1.<span
style='letter-spacing:.75pt'> </span>Introducing<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>Express</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=576 height=1
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image011.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><b><span style='font-size:31.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<h2><span style='color:#8E0011'>The<span style='letter-spacing:-.3pt'> </span>JavaScript<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Revolution</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark11"></a><span style='color:#333333'>Before I introduce the main
subject of this book, it is important to provide<span style='letter-spacing:
4.0pt'> </span>a little background and historical context, and that means
talking about JavaScript and Node. The age of JavaScript is truly upon us. From
its humble beginnings as a client-side scripting language, not only has it
become completely ubiquitous on the client side, but its use as a server-<span
style='letter-spacing:2.0pt'> </span>side language has finally taken off too,
thanks to Node.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The<span style='letter-spacing:1.65pt'> </span>promise<span
style='letter-spacing:1.65pt'> </span>of<span style='letter-spacing:1.65pt'> </span>an<span
style='letter-spacing:1.7pt'> </span>all-JavaScript<span style='letter-spacing:
1.65pt'> </span>technology<span style='letter-spacing:1.7pt'> </span>stack<span
style='letter-spacing:1.7pt'> </span>is<span style='letter-spacing:1.65pt'> </span>clear:<span
style='letter-spacing:1.65pt'> </span>no<span style='letter-spacing:1.7pt'> </span>more
context switching! No longer do you have to switch mental gears from JavaScript<span
style='letter-spacing:1.6pt'> </span>to<span style='letter-spacing:1.7pt'> </span>PHP,<span
style='letter-spacing:1.7pt'> </span>C#,<span style='letter-spacing:1.7pt'> </span>Ruby,<span
style='letter-spacing:1.7pt'> </span>or<span style='letter-spacing:1.6pt'> </span>Python<span
style='letter-spacing:1.7pt'> </span>(or<span style='letter-spacing:1.6pt'> </span>any<span
style='letter-spacing:1.7pt'> </span>other<span style='letter-spacing:1.6pt'> </span>server-side
language). Furthermore, it empowers frontend engineers to make the jump<span
style='letter-spacing:2.0pt'> </span>to<span style='letter-spacing:1.8pt'> </span>server-side<span
style='letter-spacing:1.75pt'> </span>programming.<span style='letter-spacing:
1.8pt'> </span>This<span style='letter-spacing:1.75pt'> </span>is<span
style='letter-spacing:1.75pt'> </span>not<span style='letter-spacing:1.75pt'> </span>to<span
style='letter-spacing:1.8pt'> </span>say<span style='letter-spacing:1.8pt'> </span>that<span
style='letter-spacing:1.75pt'> </span>server-side programming is strictly about
the language; theres still a lot to learn. With JavaScript, though, at least
the language wont be a barrier.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This book is for all those who see the promise of the
JavaScript technology stack. Perhaps you are a frontend engineer looking to
extend your experience into backend development. Perhaps youre an experienced
backend developer like myself who is looking to JavaScript as a viable
alternative to entrenched server-side languages.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youve been a software engineer for as long as I have,
you have seen many languages, frameworks, and APIs come into vogue. Some have
taken off, and some have faded into obsolescence. You probably take</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection32>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>pride in your ability to rapidly learn new languages, new
systems. Every<span style='letter-spacing:2.0pt'> </span>new language you come
across feels a little more familiar: you recognize a bit here from a language
you learned in college, a bit there from that job<span style='letter-spacing:
4.0pt'> </span>you had a few years ago. It feels good to have that kind of
perspective, certainly,<span style='letter-spacing:1.65pt'> </span>but<span
style='letter-spacing:1.6pt'> </span>its<span style='letter-spacing:1.6pt'> </span>also<span
style='letter-spacing:1.65pt'> </span>wearying.<span style='letter-spacing:
1.65pt'> </span>Sometimes<span style='letter-spacing:1.6pt'> </span>you<span
style='letter-spacing:1.65pt'> </span>want<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>just<span style='letter-spacing:1.6pt'> </span><i>get
something<span style='letter-spacing:1.65pt'> </span>done</i>,<span
style='letter-spacing:1.65pt'> </span>without having<span style='letter-spacing:
1.65pt'> </span>to<span style='letter-spacing:1.65pt'> </span>learn<span
style='letter-spacing:1.65pt'> </span>a whole new technology<span
style='letter-spacing:1.65pt'> </span>or dust off skills you havent used in
months or years.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>JavaScript may seem, at first, an unlikely champion. I
sympathize, believe me. If you told me in 2007 that I would not only come to
think of<span style='letter-spacing:2.0pt'> </span>JavaScript as my<span
style='letter-spacing:1.35pt'> </span>language of choice,<span
style='letter-spacing:1.35pt'> </span>but also<span style='letter-spacing:1.35pt'>
</span>write a book<span style='letter-spacing:1.35pt'> </span>about it,<span
style='letter-spacing:1.35pt'> </span>I would have told you you were crazy. I
had all the usual prejudices against JavaScript: I thought it was a toy
language, something for amateurs and dilettantes<span style='letter-spacing:
1.4pt'> </span>to<span style='letter-spacing:1.45pt'> </span>mangle<span
style='letter-spacing:1.4pt'> </span>and<span style='letter-spacing:1.45pt'> </span>abuse.<span
style='letter-spacing:1.45pt'> </span>To<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>fair,<span style='letter-spacing:1.45pt'> </span>JavaScript<span
style='letter-spacing:1.4pt'> </span>did<span style='letter-spacing:1.45pt'> </span>lower<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>bar
for amateurs, and there was a lot of questionable JavaScript out there,<span
style='letter-spacing:4.0pt'> </span>which did not help the languages
reputation. To turn a popular saying on<span style='letter-spacing:2.0pt'> </span>its
head, Hate the player, not the game.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It is unfortunate that people suffer this prejudice
against JavaScript; it has prevented people from discovering how powerful,
flexible, and elegant the language<span style='letter-spacing:1.6pt'> </span>is.<span
style='letter-spacing:1.7pt'> </span>Many<span style='letter-spacing:1.7pt'> </span>people<span
style='letter-spacing:1.6pt'> </span>are<span style='letter-spacing:1.6pt'> </span>just<span
style='letter-spacing:1.6pt'> </span>now<span style='letter-spacing:1.6pt'> </span>starting<span
style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:1.7pt'> </span>take<span
style='letter-spacing:1.6pt'> </span>JavaScript seriously, even though the
language as we know it now has been around since 1996 (although many of its
more attractive features were added in <span style='letter-spacing:-.1pt'>2005).</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>By picking up this book, you are probably free of that
prejudice: either because, like me, you have gotten past it or because you
never had it in the first place. In either case, you are fortunate, and I look
forward to introducing<span style='letter-spacing:1.8pt'> </span>you<span
style='letter-spacing:1.8pt'> </span>to<span style='letter-spacing:1.8pt'> </span>Express,<span
style='letter-spacing:1.8pt'> </span>a<span style='letter-spacing:1.7pt'> </span>technology<span
style='letter-spacing:1.8pt'> </span>made<span style='letter-spacing:1.7pt'> </span>possible<span
style='letter-spacing:1.7pt'> </span>by<span style='letter-spacing:1.8pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>delightful and surprising language.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection33>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In 2009, years after people had started to realize the
power and expressiveness of JavaScript as a browser scripting language, <a
name="_bookmark13"></a>Ryan Dahl saw<span style='letter-spacing:1.85pt'> </span>JavaScripts<span
style='letter-spacing:1.85pt'> </span>potential<span style='letter-spacing:
1.85pt'> </span>as<span style='letter-spacing:1.85pt'> </span>a<span
style='letter-spacing:1.85pt'> </span>server-side<span style='letter-spacing:
1.85pt'> </span>language,<span style='letter-spacing:1.9pt'> </span>and<span
style='letter-spacing:1.9pt'> </span>Node.js<span style='letter-spacing:1.85pt'>
</span>was born. This was a fertile time for internet technology. <a
name="_bookmark14"></a>Ruby (and Ruby on Rails) took some great ideas from
academic computer science, combined them<span style='letter-spacing:1.3pt'> </span>with<span
style='letter-spacing:1.35pt'> </span>some<span style='letter-spacing:1.3pt'> </span>new<span
style='letter-spacing:1.3pt'> </span>ideas<span style='letter-spacing:1.3pt'> </span>of<span
style='letter-spacing:1.3pt'> </span>its<span style='letter-spacing:1.3pt'> </span>own,<span
style='letter-spacing:1.35pt'> </span>and<span style='letter-spacing:1.35pt'> </span>showed<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.3pt'> </span>world<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.3pt'> </span>quicker
way to build websites and web applications. <a name="_bookmark12"></a>Microsoft,
in a valiant effort<span style='letter-spacing:4.0pt'> </span>to become
relevant in the internet age, did amazing things with .NET and learned not only
from Ruby and JavaScript but also from Javas mistakes, while borrowing heavily
from the halls of academia.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Today, web developers have the freedom to use the very
latest JavaScript language features without fear of alienating users with older
browsers, thanks to transcompilation technologies like Babel. <a
name="_bookmark15"></a>Webpack has become the ubiquitous solution for managing
dependencies in web applications<span style='letter-spacing:4.0pt'> </span>and
ensuring performance, and frameworks such as React, Angular, and Vue are
changing the way people approach web development, relegating declarative
Document Object Model (DOM) manipulation libraries (such<span style='letter-spacing:
2.0pt'> </span>as jQuery) to yesterdays news.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It is an exciting time to be involved in internet
technology. Everywhere there are amazing new ideas (or amazing old ideas
revitalized). The spirit of innovation and excitement is greater now than it
has been in many<span style='letter-spacing:4.0pt'> </span><span
style='letter-spacing:-.1pt'>years<a name="_bookmark16"></a>.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Introducing<span style='letter-spacing:-.5pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark17"></a><span style='color:#333333'>The Express website
describes Express as a minimal and flexible Node.js web application framework
that provides a robust set of features for web<span style='letter-spacing:4.0pt'>
</span>and<span style='letter-spacing:1.0pt'> </span>mobile applications. What
does that really<span style='letter-spacing:1.0pt'> </span>mean,<span
style='letter-spacing:1.0pt'> </span>though? Lets break</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection34>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Introducing_Express"></a><a
name="_bookmark18"></a><span style='color:#333333'>that<span style='letter-spacing:
.65pt'> </span>description<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>down:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Minimal</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>This is one of the most appealing aspects of Express.
Many times, framework developers forget that usually less is more. The
Express philosophy is to provide the <i>minimal </i>layer between your brain
and the server. That doesnt mean that its not robust or that it doesnt have
enough useful features. It means that it gets in your way less, allowing you
full expression of your ideas, while at the same time providing something<span
style='letter-spacing:2.0pt'> </span>useful.<span style='letter-spacing:2.0pt'>
</span>Express<span style='letter-spacing:2.0pt'> </span>provides<span
style='letter-spacing:2.0pt'> </span>you<span style='letter-spacing:2.0pt'> </span>a<span
style='letter-spacing:2.0pt'> </span>minimal<span style='letter-spacing:2.0pt'>
</span>framework,<span style='letter-spacing:2.0pt'> </span>and you can add in
different parts of Express functionality as needed, replacing whatever doesnt
meet your needs. This is a breath of fresh<span style='letter-spacing:2.0pt'> </span>air.
So many frameworks give you <i>everything</i>, leaving you with a bloated,
mysterious, and complex project before youve even written a single line of code.
Often, the first task is to waste time carving off unneeded functionality or
replacing the functionality that doesnt meet requirements.<span
style='letter-spacing:2.0pt'> </span>Express<span style='letter-spacing:2.0pt'>
</span>takes<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>opposite<span style='letter-spacing:2.0pt'>
</span>approach,<span style='letter-spacing:2.0pt'> </span>allowing<span
style='letter-spacing:2.0pt'> </span>you<span style='letter-spacing:2.0pt'> </span>to
add what you need when you need it.</span></p>

<p class=MsoNormal style='margin-top:10.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Flexible</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>At the end of the day, what Express does is very simple:
it accepts<span style='letter-spacing:4.0pt'> </span>HTTP requests from a
client (which can be a browser, a mobile device, another<span style='letter-spacing:
2.0pt'> </span>server,<span style='letter-spacing:2.0pt'> </span>a<span
style='letter-spacing:2.0pt'> </span>desktop<span style='letter-spacing:2.0pt'>
</span>applicationanything<span style='letter-spacing:2.0pt'> </span>that<span
style='letter-spacing:2.0pt'> </span>speaks<span style='letter-spacing:2.0pt'> </span>HTTP)
and returns an HTTP response. This basic pattern describes almost everything<span
style='letter-spacing:2.0pt'> </span>connected<span style='letter-spacing:2.0pt'>
</span>to<span style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:
2.0pt'> </span>internet,<span style='letter-spacing:2.0pt'> </span>making<span
style='letter-spacing:2.0pt'> </span>Express<span style='letter-spacing:2.0pt'>
</span>extremely flexible in its applications.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Web<span style='letter-spacing:.8pt'> </span>application<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>framework</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Perhaps<span style='letter-spacing:1.65pt'> </span>a<span
style='letter-spacing:1.65pt'> </span>more<span style='letter-spacing:1.65pt'> </span>accurate<span
style='letter-spacing:1.65pt'> </span>description<span style='letter-spacing:
1.7pt'> </span>would<span style='letter-spacing:1.7pt'> </span>be<span
style='letter-spacing:1.65pt'> </span>server-side<span style='letter-spacing:
1.65pt'> </span>part<span style='letter-spacing:1.65pt'> </span>of<span
style='letter-spacing:1.65pt'> </span>a web application framework. Today, when
you think of web<span style='letter-spacing:2.0pt'> </span>application
framework, you generally think of a single-page<span style='letter-spacing:
4.0pt'> </span>application framework like React, Angular, or Vue. However,
except<span style='letter-spacing:4.0pt'> </span>for a handful of standalone
applications, most web applications need to share data and integrate with other
services. They generally do so through a web API, which can be considered the
server-side</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection35>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>component of a web application framework. Note that its
still possible (and sometimes desirable) to build an entire application with
server-<span style='letter-spacing:4.0pt'> </span>side<span style='letter-spacing:
1.65pt'> </span>rendering<span style='letter-spacing:1.7pt'> </span>only,<span
style='letter-spacing:1.7pt'> </span>in<span style='letter-spacing:1.7pt'> </span>which<span
style='letter-spacing:1.7pt'> </span>case<span style='letter-spacing:1.65pt'> </span>Express<span
style='letter-spacing:1.65pt'> </span>may<span style='letter-spacing:1.7pt'> </span>very<span
style='letter-spacing:1.7pt'> </span>well<span style='letter-spacing:1.65pt'> </span>constitute
the entire web application framework!</span></p>

<p class=MsoBodyText style='margin-top:12.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In addition to the features of Express explicitly
mentioned in its own description, I would add two of my own:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.2pt'>Fast</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>As Express became the go-to web framework for Node.js
development, it attracted a lot of attention from big companies that were
running high-performance, high-traffic websites. This created pressure on the
Express team to focus on performance, and Express now offers leading
performance for high-traffic websites.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Unopinionated</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>One of the hallmarks of the JavaScript ecosystem is its
size and diversity. While Express is often at the center of Node.js web
development, there are hundreds (if not thousands) of community packages that
go into an Express application. The Express team recognized this ecosystem
diversity and responded by providing an extremely flexible middleware system
that makes it easy to use the components of your choice in creating your
application. Over the course of Expresss development, you can see it shedding
built-in components in favor of configurable middleware.</span></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:98.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>I mentioned that Express is the server-side
part of a web application frameworkso we should probably consider the
relationship between server-side and client-side applications.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='text-align:justify'><span style='color:#8E0011'>Server-Side<span
style='letter-spacing:-.4pt'> </span>and<span style='letter-spacing:-.35pt'> </span>Client-Side<span
style='letter-spacing:-.35pt'> </span><span style='letter-spacing:-.1pt'>Applications</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:97.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark19"></a><span style='color:#333333'>A <i>server-side
application </i>is one where the pages in the application are rendered on the
server (as HTML, CSS, images and other multimedia</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection36>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Server-Side_and_Client-Side_Applications"></a><a name="_bookmark20"></a><span
style='color:#333333'>assets, and JavaScript) and sent to the client. <a
name="_bookmark21"></a>A <i>client-side application</i>, by contrast, renders
most of its own user interface from an initial application bundle that is sent
only once. That is, once the browser receives the initial (generally very
minimal) HTML, it uses JavaScript to modify the <a name="_bookmark22"></a>DOM
dynamically and doesnt need to rely on the server to display new pages (though
raw data usually still comes from the server).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Prior to 1999, server-side applications were the
standard. As a matter of<span style='letter-spacing:2.0pt'> </span>fact,<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>term<span
style='letter-spacing:1.55pt'> </span><i>web<span style='letter-spacing:1.6pt'>
</span>application<span style='letter-spacing:1.6pt'> </span></i>was<span
style='letter-spacing:1.55pt'> </span>officially<span style='letter-spacing:
1.6pt'> </span>introduced<span style='letter-spacing:1.6pt'> </span>that<span
style='letter-spacing:1.55pt'> </span>year.<span style='letter-spacing:1.6pt'> </span>I<span
style='letter-spacing:1.55pt'> </span>think of the period roughly between 1999
and 2012 as the Web 2.0 era, during which the technologies and techniques that
would eventually become<span style='letter-spacing:4.0pt'> </span>client-side
applications were being developed. By 2012, with smartphones firmly entrenched,
it was common practice to send as little information as possible over the
network, a practice that favored client-side applications.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark23"></a><span style='color:#333333'>Server-side applications are
often called <i>server-side rendered </i>(SSR), and client-side applications
are usually called <a name="_bookmark24"></a><i>single-page applications </i>(SPAs).
Client-side applications are fully realized in frameworks such as React,
Angular, and Vue. Ive always felt that single-page was a bit of a misnomer<span
style='letter-spacing:2.0pt'> </span>becausefrom<span style='letter-spacing:
2.0pt'> </span>the<span style='letter-spacing:2.0pt'> </span>users<span
style='letter-spacing:2.0pt'> </span>perspectivethere<span style='letter-spacing:
2.0pt'> </span>can<span style='letter-spacing:2.0pt'> </span>indeed<span
style='letter-spacing:2.0pt'> </span>be many pages. The only difference is
whether the page is shipped from the server or dynamically rendered in the
client.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In<span style='letter-spacing:1.9pt'> </span>reality,<span
style='letter-spacing:1.9pt'> </span>there<span style='letter-spacing:1.85pt'> </span>are<span
style='letter-spacing:1.85pt'> </span>many<span style='letter-spacing:1.9pt'> </span>blurred<span
style='letter-spacing:1.9pt'> </span>lines<span style='letter-spacing:1.85pt'> </span>between<span
style='letter-spacing:1.9pt'> </span>server-side<span style='letter-spacing:
1.85pt'> </span>applications and<span style='letter-spacing:2.0pt'> </span>client-side<span
style='letter-spacing:2.0pt'> </span>applications.<span style='letter-spacing:
2.0pt'> </span>Many<span style='letter-spacing:2.0pt'> </span>client-side<span
style='letter-spacing:2.0pt'> </span>applications<span style='letter-spacing:
2.0pt'> </span>have<span style='letter-spacing:2.0pt'> </span>two<span
style='letter-spacing:2.0pt'> </span>to three HTML bundles that can be sent to
that client (for example, the public interface and the logged-in interface, or
a regular interface and an admin interface). <a name="_bookmark25"></a>Furthermore,
SPAs are often combined with SSR to increase<span style='letter-spacing:4.0pt'>
</span>first-page-load performance and aid in search engine optimization (SEO).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection37>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Node:_A_New_Kind_of_Web_Server"></a><a name="_bookmark31"></a><span
style='color:#333333'>In general, if the server sends a small number of HTML
files (generally<span style='letter-spacing:4.0pt'> </span>one to three), and
the user experiences a rich, multiview experience based on dynamic DOM
manipulation, we consider that client-side rendering.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The data (usually in the form of JSON) and multimedia
assets for different views generally still come from the network.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Express, of course, doesnt really care much if youre
making a server- side or client-side application; it is happy to fill either
role. It makes no difference to<span style='letter-spacing:.8pt'> </span>Express
if you<span style='letter-spacing:.8pt'> </span>are serving<span
style='letter-spacing:.8pt'> </span>one HTML bundle or a hundred.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While SPAs have definitively won as the predominant web
application architecture, this book begins with examples consistent with
server-side applications. They are still relevant, and the conceptual
difference between serving one HTML bundle or many is small. There is an SPA
example in </span><a href="#_bookmark665"><span style='color:#070707'>Chapter
16</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="A_Brief_History_of_Express"></a><a name="_bookmark26"></a><span
style='color:#8E0011'>A<span style='letter-spacing:-.15pt'> </span>Brief<span
style='letter-spacing:-.15pt'> </span>History<span style='letter-spacing:-.15pt'>
</span>of<span style='letter-spacing:-.1pt'> Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark27"></a><span style='color:#333333'>The creator of Express, TJ
Holowaychuk, describes Express as a web framework inspired by <a
name="_bookmark28"></a>Sinatra, which is a web framework based on Ruby.<span
style='letter-spacing:4.0pt'> </span>It is no surprise that Express borrows
from a framework built on Ruby:<span style='letter-spacing:2.0pt'> </span>Ruby
spawned a wealth of great approaches to web development, aimed at making web
development faster, more efficient, and more maintainable.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark29"></a><span style='color:#333333'>As<span style='letter-spacing:
1.45pt'> </span>much<span style='letter-spacing:1.5pt'> </span>as<span
style='letter-spacing:1.45pt'> </span>Express<span style='letter-spacing:1.45pt'>
</span>was<span style='letter-spacing:1.45pt'> </span>inspired<span
style='letter-spacing:1.5pt'> </span>by<span style='letter-spacing:1.5pt'> </span>Sinatra,<span
style='letter-spacing:1.5pt'> </span>it<span style='letter-spacing:1.45pt'> </span>was<span
style='letter-spacing:1.45pt'> </span>also<span style='letter-spacing:1.5pt'> </span>deeply
intertwined<span style='letter-spacing:1.95pt'> </span>with<span
style='letter-spacing:1.95pt'> </span>Connect,<span style='letter-spacing:1.95pt'>
</span>a<span style='letter-spacing:1.9pt'> </span>plug-in<span
style='letter-spacing:1.9pt'> </span>library<span style='letter-spacing:1.95pt'>
</span>for<span style='letter-spacing:1.9pt'> </span>Node.<span
style='letter-spacing:1.95pt'> </span><a name="_bookmark30"></a>Connect<span
style='letter-spacing:1.9pt'> </span>coined the term <i>middleware </i>to
describe pluggable Node modules that can handle web requests to varying
degrees. In 2014, in version 4.0, Express removed its dependency on Connect, but
it still owes its concept of middleware to <span style='letter-spacing:-.1pt'>Connect.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection38>

<p class=MsoBodyText style='margin-left:54.95pt'><span style='font-size:10.0pt'><img
width=580 height=129
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image012.gif"
alt="Text Box: NOTE&#13;&#10;Express underwent a fairly substantial rewrite between 2.x and 3.0, then again between 3.x and&#13;&#10;4.0. This book focuses on version 4.0.&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt;text-align:justify'><span style='color:#8E0011'>Node:<span
style='letter-spacing:-.2pt'> </span>A<span style='letter-spacing:-.1pt'> </span>New<span
style='letter-spacing:-.1pt'> </span>Kind<span style='letter-spacing:-.1pt'> </span>of<span
style='letter-spacing:-.1pt'> </span>Web<span style='letter-spacing:-.1pt'>
Server</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:83.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark32"></a><span style='color:#333333'>In a way, Node has
a lot in common with other popular web servers, like Microsofts Internet
Information Services (IIS) or Apache. What is more interesting, though, is how
it differs, so lets start there.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Much like Express, Nodes approach to web servers is very
minimal. Unlike IIS or Apache, which a person can spend many years mastering,
Node is easy to set up and configure. That is not to say that tuning Node
servers for maximum performance in a production setting is a trivial matter;
its just that the configuration options are simpler and more <span
style='letter-spacing:-.1pt'>straightforward.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark33"></a><span style='color:#333333'>Another major difference
between Node and more traditional web servers<span style='letter-spacing:4.0pt'>
</span>is that Node is single threaded. At first blush, this may seem like a
step backward. As it turns out, it is a stroke of genius. Single threading
vastly simplifies the business of writing web apps, and if you need the
performance of a multithreaded app, you can simply spin up more<span
style='letter-spacing:4.0pt'> </span>instances of Node, and you will
effectively have the performance benefits<span style='letter-spacing:2.0pt'> </span>of
multithreading. The astute reader is probably thinking this sounds like smoke
and mirrors. After all, isnt multithreading through server<span
style='letter-spacing:4.0pt'> </span>parallelism (as opposed to app
parallelism) simply moving the complexity around,<span style='letter-spacing:
1.6pt'> </span>not<span style='letter-spacing:1.55pt'> </span>eliminating<span
style='letter-spacing:1.6pt'> </span>it?<span style='letter-spacing:1.55pt'> </span>Perhaps,<span
style='letter-spacing:1.6pt'> </span>but<span style='letter-spacing:1.55pt'> </span>in<span
style='letter-spacing:1.6pt'> </span>my<span style='letter-spacing:1.6pt'> </span>experience,<span
style='letter-spacing:1.6pt'> </span>it<span style='letter-spacing:1.55pt'> </span>has<span
style='letter-spacing:1.55pt'> </span>moved the complexity to exactly where it
should be. Furthermore, with the<span style='letter-spacing:2.0pt'> </span>growing
popularity of cloud computing and treating servers as generic</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection39>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark37"></a><span style='color:#333333'>commodities, this approach
makes a lot more sense. IIS and Apache are powerful indeed, and they are
designed to squeeze the very last drop of performance out of todays powerful
hardware. That comes at a cost, though: they require considerable expertise to
set up and tune to achieve that performance.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark35"></a><span style='color:#333333'>In terms of the way apps are
written, Node apps have more in common<span style='letter-spacing:4.0pt'> </span>with
PHP or Ruby apps than .NET or Java apps. While the JavaScript engine that Node
uses (Googles V8) does compile JavaScript to native machine code (much like C
or C++), it does so transparently,</span><a name="_bookmark34"></a><a
href="#_bookmark50"><sup><span style='font-family:"Arial",sans-serif;
color:#070707'>1</span></sup></a><span style='font-family:"Arial",sans-serif;
color:#070707'> </span><span style='color:#333333'>so from the users
perspective, it behaves like a purely interpreted language. Not<span
style='letter-spacing:4.0pt'> </span>having a separate compile step reduces
maintenance and deployment hassles: all you have to do is update a JavaScript
file, and your changes<span style='letter-spacing:4.0pt'> </span>will
automatically be available.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark36"></a><span style='color:#333333'>Another compelling benefit
of Node apps is that Node is incredibly<span style='letter-spacing:4.0pt'> </span>platform
independent. Its not the first or only platform-independent server technology,
but platform independence is really more of a spectrum than a binary
proposition. For example, you can run .NET apps on a Linux server thanks<span
style='letter-spacing:1.6pt'> </span>to<span style='letter-spacing:1.65pt'> </span>Mono,<span
style='letter-spacing:1.65pt'> </span>but<span style='letter-spacing:1.6pt'> </span>its<span
style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:1.6pt'> </span>painful<span
style='letter-spacing:1.6pt'> </span>endeavor<span style='letter-spacing:1.6pt'>
</span>thanks<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>spotty documentation and system
incompatibilities. Likewise, you can run PHP apps<span style='letter-spacing:
1.0pt'> </span>on<span style='letter-spacing:1.05pt'> </span>a<span
style='letter-spacing:1.0pt'> </span>Windows<span style='letter-spacing:1.0pt'>
</span>server,<span style='letter-spacing:1.05pt'> </span>but<span
style='letter-spacing:1.0pt'> </span>it<span style='letter-spacing:1.0pt'> </span>is<span
style='letter-spacing:1.0pt'> </span>not<span style='letter-spacing:1.0pt'> </span>generally<span
style='letter-spacing:1.05pt'> </span>as<span style='letter-spacing:1.0pt'> </span>easy<span
style='letter-spacing:1.05pt'> </span>to<span style='letter-spacing:1.05pt'> </span>set<span
style='letter-spacing:1.0pt'> </span>up<span style='letter-spacing:1.05pt'> </span>as<span
style='letter-spacing:1.0pt'> </span>it<span style='letter-spacing:1.0pt'> </span>is
on a Linux machine. Node, on the other hand, is a snap to set up on all the
major operating systems (Windows, macOS, and Linux) and enables easy
collaboration.<span style='letter-spacing:1.6pt'> </span>Among<span
style='letter-spacing:1.6pt'> </span>website<span style='letter-spacing:1.5pt'>
</span>design<span style='letter-spacing:1.6pt'> </span>teams,<span
style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:1.5pt'> </span>mix<span
style='letter-spacing:1.6pt'> </span>of<span style='letter-spacing:1.5pt'> </span>PCs<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.6pt'> </span>Macs<span
style='letter-spacing:1.5pt'> </span>is quite common. Certain platforms, like
.NET, introduce challenges for frontend developers and designers, who often use
Macs, which has a huge impact on collaboration and efficiency. The idea of
being able to spin up a functioning server on any operating system in a matter
of minutes (or even seconds!) is a dream come true.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection40>

<h2 style='margin-top:3.95pt'><a name=Licensing></a><a name="_bookmark41"></a><a
name="The_Node_Ecosystem"></a><a name="_bookmark38"></a><span style='color:
#8E0011'>The<span style='letter-spacing:-.15pt'> </span>Node<span
style='letter-spacing:-.1pt'> Ecosystem</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark39"></a><span style='color:#333333'>Node, of course, lies at the
heart of the stack. Its the software that enables JavaScript to run on the
server, uncoupled from a browser, which in turn allows frameworks written in
JavaScript (like Express) to be used.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Another important component is the database, which will
be covered in more depth in </span><a href="#_bookmark542"><span
style='color:#070707'>Chapter 13</span></a><span style='color:#333333'>. All
but the simplest of web apps will need a database, and there are databases that
are more at home in the Node ecosystem than others.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It is unsurprising that database interfaces are available
for all the major relational databases (MySQL, MariaDB, PostgreSQL, Oracle, SQL
Server); it would be foolish to neglect those established behemoths.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, the advent of Node development has revitalized a
new approach<span style='letter-spacing:2.0pt'> </span>to<span
style='letter-spacing:1.9pt'> </span>database<span style='letter-spacing:1.8pt'>
</span>storage:<span style='letter-spacing:1.8pt'> </span>the<span
style='letter-spacing:1.8pt'> </span>so-called<span style='letter-spacing:1.9pt'>
</span>NoSQL<span style='letter-spacing:1.8pt'> </span>databases.<span
style='letter-spacing:1.9pt'> </span>Its<span style='letter-spacing:1.8pt'> </span>not<span
style='letter-spacing:1.8pt'> </span>always helpful<span style='letter-spacing:
1.35pt'> </span>to<span style='letter-spacing:1.4pt'> </span>define<span
style='letter-spacing:1.35pt'> </span>something<span style='letter-spacing:
1.4pt'> </span>as<span style='letter-spacing:1.35pt'> </span>what<span
style='letter-spacing:1.35pt'> </span>its<span style='letter-spacing:1.35pt'> </span><i>not</i>,<span
style='letter-spacing:1.4pt'> </span>so<span style='letter-spacing:1.4pt'> </span>well<span
style='letter-spacing:1.35pt'> </span>add<span style='letter-spacing:1.4pt'> </span>that<span
style='letter-spacing:1.35pt'> </span>these NoSQL databases might be more
properly called document databases or key/value pair databases. They
provide a conceptually simpler approach<span style='letter-spacing:2.0pt'> </span>to
data storage. There are many, but MongoDB is one of the front-runners, and its
the NoSQL database we will be using in this book.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Because building a functional website depends on multiple
pieces of technology, acronyms have been spawned to describe the stack that a
website is built on. For example, the combination of Linux, Apache, MySQL, and
PHP is referred to as the <i>LAMP </i>stack. <a name="_bookmark40"></a>Valeri
Karpov, an engineer at MongoDB, coined the acronym <i>MEAN</i>: Mongo, Express,
Angular, and Node. While its certainly catchy, it is limiting: there are so
many choices for databases and application frameworks that MEAN doesnt
capture the diversity of the ecosystem (it also leaves out what I believe is an
important component: rendering engines).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection41>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:72.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Coining an inclusive acronym is an interesting exercise.
The indispensable component,<span style='letter-spacing:1.85pt'> </span>of<span
style='letter-spacing:1.8pt'> </span>course,<span style='letter-spacing:1.85pt'>
</span>is<span style='letter-spacing:1.8pt'> </span>Node.<span
style='letter-spacing:1.85pt'> </span>While<span style='letter-spacing:1.8pt'> </span>there<span
style='letter-spacing:1.8pt'> </span>are<span style='letter-spacing:1.8pt'> </span>other<span
style='letter-spacing:1.8pt'> </span>server-side JavaScript<span
style='letter-spacing:1.9pt'> </span>containers,<span style='letter-spacing:
1.95pt'> </span>Node<span style='letter-spacing:1.9pt'> </span>is<span
style='letter-spacing:1.9pt'> </span>emerging<span style='letter-spacing:1.95pt'>
</span>as<span style='letter-spacing:1.9pt'> </span>the<span style='letter-spacing:
1.9pt'> </span>dominant<span style='letter-spacing:1.9pt'> </span>one.<span
style='letter-spacing:1.95pt'> </span>Express, also, is not the only web app
framework available, though it is close to<span style='letter-spacing:4.0pt'> </span>Node<span
style='letter-spacing:1.65pt'> </span>in<span style='letter-spacing:1.7pt'> </span>its<span
style='letter-spacing:1.65pt'> </span>dominance.<span style='letter-spacing:
1.7pt'> </span>The<span style='letter-spacing:1.65pt'> </span>two<span
style='letter-spacing:1.7pt'> </span>other<span style='letter-spacing:1.65pt'> </span>components<span
style='letter-spacing:1.65pt'> </span>that<span style='letter-spacing:1.65pt'> </span>are<span
style='letter-spacing:1.65pt'> </span>usually essential for web app development
are a database server and a rendering engine (either a templating engine like
Handlebars or an SPA framework like<span style='letter-spacing:1.5pt'> </span>React).<span
style='letter-spacing:1.55pt'> </span>For<span style='letter-spacing:1.5pt'> </span>these<span
style='letter-spacing:1.5pt'> </span>last<span style='letter-spacing:1.5pt'> </span>two<span
style='letter-spacing:1.55pt'> </span>components,<span style='letter-spacing:
1.55pt'> </span>there<span style='letter-spacing:1.5pt'> </span>arent<span
style='letter-spacing:1.5pt'> </span>as<span style='letter-spacing:1.5pt'> </span>many<span
style='letter-spacing:1.55pt'> </span>clear front-runners, and this is where I
believe its a disservice to be restrictive.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark42"></a><span style='color:#333333'>What ties all these
technologies together is JavaScript, so in an effort to be inclusive, I will be
referring to the <i>JavaScript stack</i>. For the purposes of<span
style='letter-spacing:4.0pt'> </span>this book, that means Node, Express, and
MongoDB (there is also a relational database example in </span><a
href="#_bookmark542"><span style='color:#070707'>Chapter 13</span></a><span
style='color:#333333'>).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>Licensing</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark43"></a><span style='color:#333333'>When developing Node
applications, you may find yourself having to pay more attention to licensing
than you ever have before (I certainly have).</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>One of the beauties of the Node ecosystem is the vast
array of packages available to you. However, each of those packages carries its
own licensing, and worse, each package may depend on other packages, meaning
that understanding the licensing of the various parts of the app youve written
can be tricky.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, there is some good news. <a name="_bookmark44"></a>One
of the most popular licenses for Node packages is the MIT license, which is
painlessly permissive, allowing you to do <i>almost </i>anything you want,
including use the package in closed source software. However, you shouldnt
just assume every package you use is MIT licensed.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection42>

<p class=MsoBodyText style='margin-left:54.95pt'><span style='font-size:10.0pt'><img
width=579 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image013.gif"
alt="Text Box: TIP&#13;&#10;There are several packages available in npm that will try to figure out the licenses of each dependency in your project. Search npm for nlf or license-report.&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While MIT is the most common license you will encounter,
you may also see the following licenses:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>GNU<span style='letter-spacing:.6pt'> </span>General<span
style='letter-spacing:.65pt'> </span>Public<span style='letter-spacing:.65pt'> </span>License<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>(GPL)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark45"></a><span style='color:#333333'>The GPL is a popular open
source license that has been cleverly crafted to keep software free. That means
if you use GPL-licensed code in your project, your project must <i>also </i>be
GPL licensed.</span></p>

<p class=MsoBodyText style='margin-left:76.55pt;line-height:16.0pt'><span
style='color:#333333'>Naturally,<span style='letter-spacing:.55pt'> </span>this<span
style='letter-spacing:.55pt'> </span>means<span style='letter-spacing:.55pt'> </span>your<span
style='letter-spacing:.55pt'> </span>project<span style='letter-spacing:.55pt'>
</span>cant<span style='letter-spacing:.5pt'> </span>be<span style='letter-spacing:
.55pt'> </span>closed<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>source.</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Apache<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.25pt'>2.0</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark46"></a><span style='color:#333333'>This license, like MIT,
allows you to use a different license for your project, including a closed
source license. You must, however, include notice of components that use the
Apache 2.0 license.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Berkeley<span style='letter-spacing:.8pt'> </span>Software<span
style='letter-spacing:.85pt'> </span>Distribution<span style='letter-spacing:
.9pt'> </span><span style='letter-spacing:-.2pt'>(BSD)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark47"></a><span style='color:#333333'>Similar to Apache, this
license allows you to use whatever license you wish for your project, as long
as you include notice of the BSD-<span style='letter-spacing:2.0pt'> </span>licensed
components.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;Software is sometimes dual licensed (licensed under two different licenses). A common reason for doing this is to allow the software to be used in both GPL projects and projects with more permissive licensing. (For a component to be used in GPL software, the component must be GPL licensed.) This is a licensing scheme I often employ with my own projects: dual licensing with GPL and MIT.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection43>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, if you find yourself writing your own packages,
you should be a good citizen and pick a license for your package, and document
it correctly. There is nothing more frustrating to a developer than using
someones package and having to dig around in the source to determine the
licensing or, worse, find that it isnt licensed at all.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark49"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I hope this chapter has given you some more insight into
what Express is and how it fits into the larger Node and JavaScript ecosystem,
as well some clarity on the relationship between server-side and client-side
web <span style='letter-spacing:-.1pt'>applications.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre still feeling confused about what Express
actually <i>is</i>, dont<span style='letter-spacing:4.0pt'> </span>worry:
sometimes its much easier to just start using something to understand what it
is, and this book will get you started building web applications with Express.
Before we start using Express, however, were going to take a tour of Node in
the next chapter, which is important background information to understanding
how Express works.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:67.35pt;margin-bottom:.0001pt'><a href="#_bookmark34"><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707;
letter-spacing:4.1pt'> </span><a name="_bookmark50"></a><span style='font-size:
10.5pt;color:#333333'>Often<span style='letter-spacing:.2pt'> </span>called<span
style='letter-spacing:.2pt'> </span><i>just<span style='letter-spacing:.2pt'> </span>in<span
style='letter-spacing:.2pt'> </span>time<span style='letter-spacing:.2pt'> </span></i>(JIT)<span
style='letter-spacing:.2pt'> </span><span style='letter-spacing:-.1pt'>compilation.</span></span></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection44>

<h1 style='margin-right:37.5pt;line-height:105%'><a name="Using_the_Terminal"></a><a
name="_bookmark57"></a><a name="2._Getting_Started_with_Node"></a><a
name="_bookmark51"></a>Chapter 2. Getting Started with <span style='letter-spacing:
-.2pt'>Node</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark52"></a><span style='color:#333333'>If you dont have any
experience with Node, this chapter is for you. Understanding<span
style='letter-spacing:2.0pt'> </span>Express<span style='letter-spacing:2.0pt'>
</span>and<span style='letter-spacing:2.0pt'> </span>its<span style='letter-spacing:
2.0pt'> </span>usefulness<span style='letter-spacing:2.0pt'> </span>requires<span
style='letter-spacing:2.0pt'> </span>a<span style='letter-spacing:2.0pt'> </span>basic<span
style='letter-spacing:2.0pt'> </span>understanding of<span style='letter-spacing:
1.55pt'> </span>Node.<span style='letter-spacing:1.6pt'> </span>If<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.6pt'> </span>already<span
style='letter-spacing:1.6pt'> </span>have<span style='letter-spacing:1.55pt'> </span>experience<span
style='letter-spacing:1.55pt'> </span>building<span style='letter-spacing:1.6pt'>
</span>web<span style='letter-spacing:1.6pt'> </span>apps<span
style='letter-spacing:1.55pt'> </span>with<span style='letter-spacing:1.6pt'> </span>Node,
feel free to skip this chapter. In this chapter, we will be building a very
minimal web server with Node; in the next chapter, we will see how to do the
same thing with Express.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Getting_Node"></a><a name="_bookmark53"></a><span
style='color:#8E0011'>Getting<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.2pt'>Node</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark54"></a><span style='color:#333333'>Getting Node installed on
your system couldnt be easier. The Node team has gone to great lengths to make
sure the installation process is simple<span style='letter-spacing:4.0pt'> </span>and
straightforward on all major platforms.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Go to the </span><a href="http://nodejs.org/"><span
style='color:#070707'>Node home page</span></a><span style='color:#333333'>.
Click the big green button that has a version number followed by LTS
(Recommended for Most Users). LTS stands for <i>Long-Term Support</i>, and is
somewhat more stable than the version labeled Current, which contains more
recent features and performance <span style='letter-spacing:-.1pt'>improvements.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark56"></a><span style='color:#333333'>For Windows and macOS, an
installer will be downloaded that walks you through the process. <a
name="_bookmark55"></a>For Linux, you will probably be up and running more
quickly if you </span><a href="http://bit.ly/36UYMxI"><span style='color:#070707'>use
a package manager</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image015.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection45>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image016.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You can also download </span><a
href="https://nodejs.org/en/download"><span style='color:#070707'>a standalone
installer</span></a><span style='color:#333333'>, which can be helpful if you
are distributing Node to your organization.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Using<span style='letter-spacing:-.15pt'> </span>the<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Terminal</span></span></h2>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark58"></a><span style='color:#333333'>Im an unrepentant fan of
the power and productivity of using a terminal (also called a <i>console </i>or
<i>command prompt</i>). Throughout this book, all examples will assume youre
using a terminal. If youre not friends with your terminal, I highly recommend
you spend some time familiarizing yourself with your terminal of choice. Many
of the utilities in this book have corresponding GUI interfaces, so if youre
dead set against using a terminal, you have options, but you will have to find
your own way.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark60"></a><span style='color:#333333'>If youre on macOS or Linux,
you have a wealth of venerable shells (the terminal command interpreter) to
choose from. <a name="_bookmark59"></a>The most popular by far is bash,<span
style='letter-spacing:1.6pt'> </span>though<span style='letter-spacing:1.6pt'> </span>zsh<span
style='letter-spacing:1.6pt'> </span>has<span style='letter-spacing:1.5pt'> </span>its<span
style='letter-spacing:1.5pt'> </span>adherents.<span style='letter-spacing:
1.6pt'> </span>The<span style='letter-spacing:1.5pt'> </span>main<span
style='letter-spacing:1.6pt'> </span>reason<span style='letter-spacing:1.6pt'> </span>I<span
style='letter-spacing:1.5pt'> </span>gravitate<span style='letter-spacing:1.5pt'>
</span>toward bash (other than long familiarity) is ubiquity. Sit down in front
of any<span style='letter-spacing:4.0pt'> </span>Unix-based<span
style='letter-spacing:1.0pt'> </span>computer,<span style='letter-spacing:1.0pt'>
</span>and<span style='letter-spacing:1.0pt'> </span>99% of the time,<span
style='letter-spacing:1.0pt'> </span>the default shell will be bash.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark62"></a><span style='color:#333333'>If youre a Windows user,
things arent quite so rosy. Microsoft has never been particularly interested
in providing a pleasant terminal experience, so youll have to do a little more
work. <a name="_bookmark61"></a>Git helpfully includes a Git bash shell,
which provides a Unix-like terminal experience (it has only a small subset of
the normally available Unix command-line utilities, but its a useful subset).<span
style='letter-spacing:.85pt'> </span>While Git bash<span style='letter-spacing:
.85pt'> </span>provides you<span style='letter-spacing:.85pt'> </span>with<span
style='letter-spacing:.85pt'> </span>a minimal bash<span style='letter-spacing:
.85pt'> </span>shell,<span style='letter-spacing:.85pt'> </span>its</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection46>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a name=Editors></a><a
name="_bookmark68"></a><span style='color:#333333'>still using the built-in
Windows console application, which leads to an exercise in frustration (even
simple functionality like resizing a console window, selecting text, cutting,
and pasting is unintuitive and awkward).<span style='letter-spacing:2.0pt'> </span>For
this reason, I recommend installing a more sophisticated terminal such as </span><a
href="https://github.com/cbucher/console"><span style='color:#070707'>ConsoleZ</span></a><span
style='color:#070707'> </span><span style='color:#333333'>or </span><a
href="https://conemu.github.io/"><span style='color:#070707'>ConEmu</span></a><span
style='color:#333333'>. <a name="_bookmark63"></a>For Windows power usersespecially
for .NET developers or for hardcore Windows systems or network administrators
there is another option: Microsofts own PowerShell. PowerShell lives up<span
style='letter-spacing:4.0pt'> </span>to its name: people do remarkable things
with it, and a skilled PowerShell user could give a Unix command-line guru a
run for their money.</span></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, if you move between macOS/Linux and Windows, I
still recommend sticking with Git bash for the consistency it provides.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark64"></a><span style='color:#333333'>If youre using Windows 10
or later, you can now install Ubuntu Linux directly on Windows! This is not
dual-boot or virtualization but some<span style='letter-spacing:4.0pt'> </span>great
work on behalf of Microsofts open source team to bring the Linux experience to
Windows. You can install Ubuntu on Windows through the </span><a
href="http://bit.ly/2KcSfEI"><span style='color:#070707'>Microsoft App Store</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark66"></a><span style='color:#333333'>A final option for Windows
users is virtualization. With the power and architecture of modern computers,
the performance of virtual machines (VMs) is practically indistinguishable from
actual machines. <a name="_bookmark65"></a>Ive had great luck with Oracles
free </span><a href="https://www.virtualbox.org/"><span style='color:#070707'>VirtualBox</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark67"></a><span style='color:#333333'>Finally, no matter what
system youre on, there are excellent cloud-based development environments,
such as </span><a href="https://aws.amazon.com/cloud9/"><span style='color:
#070707'>Cloud9</span></a><span style='color:#070707'> </span><span
style='color:#333333'>(now an AWS product).</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Cloud9 will spin up a new Node development environment
that makes it extremely easy to get started quickly with Node.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once youve settled on a shell that makes you happy, I
recommend you spend<span style='letter-spacing:.5pt'> </span>some<span
style='letter-spacing:.5pt'> </span>time<span style='letter-spacing:.5pt'> </span>getting<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.5pt'> </span>know<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span>basics.<span
style='letter-spacing:.55pt'> </span>There<span style='letter-spacing:.45pt'> </span>are<span
style='letter-spacing:.5pt'> </span>many<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>wonderful</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection47>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a name=npm></a><a
name="_bookmark73"></a><span style='color:#333333'>tutorials on the internet (</span><a
href="https://guide.bash.academy/"><span style='color:#070707'>The Bash Guide</span></a><span
style='color:#070707'> </span><span style='color:#333333'>is a great place to
start), and<span style='letter-spacing:2.0pt'> </span>youll save yourself a
lot of headaches later by learning a little now. At minimum, you should know
how to navigate directories; copy, move, and delete files; and break out of a
command-line program (usually Ctrl-C). If you want to become a terminal ninja,
I encourage you to learn how to search for text in files, search for files and
directories, chain commands together (the old Unix philosophy), and redirect
output.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image017.gif"
  alt="Text Box: CAUTION&#13;&#10;On many Unix-like systems, Ctrl-S has a special meaning: it will freeze the terminal (this was once used to pause output quickly scrolling past). Since this is such a common shortcut for Save, its easy to unthinkingly press, which leads to a confusing situation for most people (this happens to me more often than I care to admit). To unfreeze the terminal, simply hit Ctrl-Q. So if youre ever confounded by a terminal that seems to have suddenly frozen, try pressing Ctrl-Q and see if that releases it.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Editors</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:73.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark72"></a><span style='color:#333333'>Few<span style='letter-spacing:
1.7pt'> </span>topics<span style='letter-spacing:1.7pt'> </span>inspire<span
style='letter-spacing:1.7pt'> </span>such<span style='letter-spacing:1.8pt'> </span>heated<span
style='letter-spacing:1.8pt'> </span>debate<span style='letter-spacing:1.7pt'> </span>among<span
style='letter-spacing:1.8pt'> </span>programmers<span style='letter-spacing:
1.7pt'> </span>as<span style='letter-spacing:1.7pt'> </span>the<span
style='letter-spacing:1.7pt'> </span>choice of<span style='letter-spacing:1.35pt'>
</span>editors,<span style='letter-spacing:1.4pt'> </span>and<span
style='letter-spacing:1.4pt'> </span>for<span style='letter-spacing:1.35pt'> </span>good<span
style='letter-spacing:1.4pt'> </span>reason:<span style='letter-spacing:1.35pt'>
</span>the<span style='letter-spacing:1.35pt'> </span>editor<span
style='letter-spacing:1.35pt'> </span>is<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.35pt'> </span>primary<span style='letter-spacing:1.4pt'>
</span>tool.<span style='letter-spacing:1.4pt'> </span>My<span
style='letter-spacing:1.4pt'> </span>editor of choice is vi (or an editor that
has a vi mode)<a name="_bookmark71"></a>.</span><a href="#_bookmark99"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>1</span></sup></a><span
style='font-family:"Arial",sans-serif;color:#070707'> </span><span
style='color:#333333'>vi isnt for everyone (my coworkers constantly roll their
eyes at me when I tell them how easy it would be to do what theyre doing in
vi), but finding a powerful editor and learning<span style='letter-spacing:
1.6pt'> </span>to<span style='letter-spacing:1.6pt'> </span>use it will
significantly<span style='letter-spacing:1.6pt'> </span>increase your
productivity<span style='letter-spacing:1.6pt'> </span>and,<span
style='letter-spacing:1.6pt'> </span>dare I say it, enjoyment. One of the
reasons I particularly like vi (though hardly<span style='letter-spacing:4.0pt'>
</span>the most important reason) is that, like bash, it is ubiquitous. If you
have access<span style='letter-spacing:1.2pt'> </span>to<span style='letter-spacing:
1.3pt'> </span>a<span style='letter-spacing:1.2pt'> </span>Unix<span
style='letter-spacing:1.3pt'> </span>system,<span style='letter-spacing:1.3pt'>
</span>vi<span style='letter-spacing:1.2pt'> </span>is<span style='letter-spacing:
1.2pt'> </span>there<span style='letter-spacing:1.2pt'> </span>for<span
style='letter-spacing:1.2pt'> </span>you.<span style='letter-spacing:1.3pt'> </span>Most<span
style='letter-spacing:1.2pt'> </span>popular<span style='letter-spacing:1.2pt'>
</span>editors<span style='letter-spacing:1.2pt'> </span>have<span
style='letter-spacing:1.2pt'> </span>a vi mode that allows you to use vi
keyboard commands. Once you get<span style='letter-spacing:4.0pt'> </span>used<span
style='letter-spacing:.6pt'> </span>to<span style='letter-spacing:.6pt'> </span>it,<span
style='letter-spacing:.6pt'> </span>its hard<span style='letter-spacing:.6pt'>
</span>to<span style='letter-spacing:.6pt'> </span>imagine using<span
style='letter-spacing:.6pt'> </span>anything<span style='letter-spacing:.6pt'> </span>else.<span
style='letter-spacing:.6pt'> </span>vi is a hard<span style='letter-spacing:
.6pt'> </span>road<span style='letter-spacing:.6pt'> </span>at first,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection48>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>but<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.45pt'> </span>payoff<span
style='letter-spacing:.4pt'> </span>is<span style='letter-spacing:.45pt'> </span>worth<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>it.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark74"></a><span style='color:#333333'>If, like me, you see the
value in being familiar with an editor thats<span style='letter-spacing:4.0pt'>
</span>available anywhere, your other option is Emacs. Emacs and I have never
quite gotten on (and usually youre either an Emacs person or a vi person), but
I absolutely respect the power and flexibility that Emacs provides. If<span
style='letter-spacing:4.0pt'> </span>vis modal editing approach isnt for you,
I would encourage you to look into Emacs.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While knowing a console editor (like vi or Emacs) can
come in incredibly handy, you may still want a more modern editor. <a
name="_bookmark76"></a>A popular choice is<span style='letter-spacing:4.0pt'> </span></span><a
href="https://code.visualstudio.com/"><span style='color:#070707'>Visual Studio
Code</span></a><span style='color:#070707'> </span><span style='color:#333333'>(not
to be confused with Visual Studio without the Code). I can heartily endorse
Visual Studio Code; it is a well-designed, fast, efficient editor that is
perfectly suited for Node and JavaScript development.<span style='letter-spacing:
1.8pt'> </span><a name="_bookmark75"></a>Another<span style='letter-spacing:
1.7pt'> </span>popular<span style='letter-spacing:1.7pt'> </span>choice<span
style='letter-spacing:1.7pt'> </span>is<span style='letter-spacing:1.7pt'> </span></span><a
href="https://atom.io/"><span style='color:#070707'>Atom</span></a><span
style='color:#333333'>,<span style='letter-spacing:1.8pt'> </span>which<span
style='letter-spacing:1.8pt'> </span>is<span style='letter-spacing:1.7pt'> </span>also<span
style='letter-spacing:1.8pt'> </span>popular<span style='letter-spacing:1.7pt'>
</span>in the JavaScript community. Both of these editors are available for
free on Windows, macOS, and Linux (and both have vi modes!).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have a good tool to edit code, lets turn our
attention to npm, which will help us get packages that other people have
written so we can take advantage of the large and active JavaScript community.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011;letter-spacing:-.25pt'>npm</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark77"></a><span style='color:#333333'>npm is the ubiquitous
package manager for Node packages (and is how well get and install Express).
In the wry tradition of PHP, GNU, WINE, and others, <i>npm </i>is not an
acronym (which is why it isnt capitalized); rather, it is a recursive
abbreviation for npm is not an acronym.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Broadly<span
style='letter-spacing:.75pt'> </span>speaking,<span style='letter-spacing:.8pt'>
</span>a<span style='letter-spacing:.7pt'> </span>package<span
style='letter-spacing:.75pt'> </span>managers<span style='letter-spacing:.7pt'>
</span>two<span style='letter-spacing:.8pt'> </span>primary<span
style='letter-spacing:.8pt'> </span>responsibilities<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.25pt'>are</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection49>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>installing packages and managing dependencies. npm is a
fast, capable,<span style='letter-spacing:4.0pt'> </span>and painless package
manager, which I feel is in large part responsible for the rapid growth and
diversity of the Node ecosystem.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;There is a popular competing package manager called Yarn that uses the same package database that npm does; well be using Yarn in Chapter 16.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>npm is installed when you install Node, so if you
followed the steps listed earlier, youve already got it. So lets get to work!</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark78"></a><span style='color:#333333'>The primary command youll
be using with npm (unsurprisingly) is </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>install</span><span style='color:#333333'>. For example, to
install nodemon (a popular utility to automatically restart a Node program when
you make changes to the source code),<span style='letter-spacing:.95pt'> </span>you<span
style='letter-spacing:.95pt'> </span>would<span style='letter-spacing:.95pt'> </span>issue
the following<span style='letter-spacing:.95pt'> </span>command<span
style='letter-spacing:.95pt'> </span>(on<span style='letter-spacing:.95pt'> </span>the
console):</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.55pt'> </span>install<span
style='letter-spacing:.55pt'> </span>-g<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>nodemo<a name="A_Simple_Web_Server_with_Node"></a><a
name="_bookmark79"></a>n</span> </span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark80"></a><span style='color:#333333'>The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>-g<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>flag
tells npm to install the package <i>globally</i>, meaning its available
globally on the system. This distinction will become clearer when we cover the <i>package.json
</i>files. For now, the rule of thumb is that JavaScript utilities (like
nodemon) will generally be installed globally, whereas packages that are
specific to your web app or project will not.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image019.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection50>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>A<span
style='letter-spacing:-.15pt'> </span>Simple<span style='letter-spacing:-.15pt'>
</span>Web<span style='letter-spacing:-.15pt'> </span>Server<span
style='letter-spacing:-.15pt'> </span>with<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.2pt'>Node</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark81"></a><span style='color:#333333'>If youve ever built a
static HTML website before or are coming from a PHP or ASP background, youre
probably used to the idea of the web server (Apache or IIS, for example)
serving your static files so that a browser can view them over the network. For
example, if you create the file <i>about.html </i>and put it in the proper
directory, you can then navigate to </span><a href="http://localhost/about.html"><i><span
style='color:#333333;text-decoration:none'>http://localhost/about.html</span></i><span
style='color:#333333;text-decoration:none'>.</span></a><span style='color:#333333'>
Depending on your web server configuration, you might even be able to omit the <i>.html</i>,
but the relationship between<span style='letter-spacing:4.0pt'> </span>URL and
filename is clear: the web server simply knows where the file is on the
computer and serves it to the browser.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;localhost, as the name implies, refers to the computer youre on. This is a common alias for the IPv4 loopback address 127.0.0.1 or the IPv6 loopback address ::1. You will often see 127.0.0.1 used instead, but I will be using localhost in this book. If youre using a remote computer (using SSH, for example), keep in mind that browsing to localhost will not connect to that computer.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Node offers a different paradigm than that of a
traditional web server: the app that you write <i>is </i>the web server. Node
simply provides the framework for you to build a web server.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>But I dont want to write a web server, you might be
saying! Its a natural response: you want to be writing an app, not a web
server.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, Node makes the business of writing this web
server a simple affair (just a few lines, even), and the control you gain over
your</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection51>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>application<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.55pt'> </span>return<span
style='letter-spacing:.55pt'> </span>is<span style='letter-spacing:.45pt'> </span>more<span
style='letter-spacing:.5pt'> </span>than<span style='letter-spacing:.5pt'> </span>worth<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.25pt'>it.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So lets get to it. Youve installed Node, youve made
friends with the terminal, and now youre ready to go.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Hello_World"></a><a name="_bookmark83"></a><span style='color:
#3F3F3F'>Hello<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>World</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark84"></a><span style='color:#333333'>Ive always found it
unfortunate that the canonical introductory programming example is the
uninspired message Hello world. However,<span style='letter-spacing:4.0pt'> </span>it
seems almost sacrilegious at this point to<span style='letter-spacing:1.3pt'> </span>fly<span
style='letter-spacing:1.3pt'> </span>in<span style='letter-spacing:1.3pt'> </span>the
face of such<span style='letter-spacing:2.0pt'> </span>ponderous tradition, so
well start there and then move on to something<span style='letter-spacing:
2.0pt'> </span>more interesting.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>In your favorite
editor, create a file called <i>helloworld.js </i>(<i>ch02/00- helloworld.js </i>in
the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const http = require('http')&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;&#13;&#10;const server = http.createServer((req, res) =&gt; { res.writeHead(200, { 'Content-Type': 'text/plain' }) res.end('Hello world!')&#13;&#10;})&#13;&#10;&#13;&#10;server.listen(port, () =&gt; console.log(`server started on port ${port}; ` + 'press Ctrl-C to terminate	'))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image022.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection52>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:5.0pt'></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Make sure you are in the same directory as <i>helloworld.js</i>,
and type </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node
helloworld.js</span><span style='color:#333333'>. Then open a browser and
navigate to<span style='letter-spacing:4.0pt'> </span><i>http://localhost:3000</i>,
and <i>voil</i>! Your first web server. This particular one doesnt serve
HTML; rather, it just displays the message Hello world! in plain text to your
browser. If you want, you can experiment with sending HTML instead: just change
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>text/plain<span
style='letter-spacing:-2.45pt'> </span></span><span style='color:#333333'>to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>text/html<span
style='letter-spacing:-2.45pt'> </span></span><span style='color:#333333'>and
change </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>'Hello
world!'<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>to a string containing valid HTML. I didnt demonstrate
that, because<span style='letter-spacing:1.5pt'> </span>I<span
style='letter-spacing:1.5pt'> </span>try<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>avoid<span style='letter-spacing:1.6pt'> </span>writing<span
style='letter-spacing:1.6pt'> </span>HTML<span style='letter-spacing:1.5pt'> </span>inside<span
style='letter-spacing:1.5pt'> </span>JavaScript<span style='letter-spacing:
1.5pt'> </span>for<span style='letter-spacing:1.5pt'> </span>reasons<span
style='letter-spacing:1.5pt'> </span>that will be discussed in more detail in </span><a
href="#_bookmark309"><span style='color:#070707'>Chapter 7</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:17.0pt'>&nbsp;</span></p>

<h3><a name="Event-Driven_Programming"></a><a name="_bookmark86"></a><span
style='color:#3F3F3F'>Event-Driven<span style='letter-spacing:-.6pt'> </span><span
style='letter-spacing:-.1pt'>Programming</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark87"></a><span style='color:#333333'>The core philosophy behind
Node is that of <i>event-driven programming</i>. What that means for you, the
programmer, is that you have to understand what events are available to you and
how to respond to them. Many people are introduced to event-driven programming
by implementing a user interface: the user clicks something, and you handle the
<i>click event</i>. Its a good<span style='letter-spacing:1.95pt'> </span>metaphor,<span
style='letter-spacing:1.95pt'> </span>because<span style='letter-spacing:1.85pt'>
</span>its<span style='letter-spacing:1.85pt'> </span>understood<span
style='letter-spacing:1.95pt'> </span>that<span style='letter-spacing:1.85pt'> </span>the<span
style='letter-spacing:1.85pt'> </span>programmer<span style='letter-spacing:
1.85pt'> </span>has<span style='letter-spacing:1.85pt'> </span>no control over
when, or if, the user is going to click something, so event- driven<span
style='letter-spacing:1.45pt'> </span>programming<span style='letter-spacing:
1.45pt'> </span>is<span style='letter-spacing:1.35pt'> </span>really<span
style='letter-spacing:1.45pt'> </span>quite<span style='letter-spacing:1.35pt'>
</span>intuitive.<span style='letter-spacing:1.45pt'> </span>It<span
style='letter-spacing:1.35pt'> </span>can<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.35pt'> </span>little<span
style='letter-spacing:1.35pt'> </span>harder<span style='letter-spacing:1.35pt'>
</span>to make the conceptual leap to responding to events on the server, but
the principle is the same.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In the previous code example, the event is implicit: the
event thats being handled is an HTTP request. <a name="_bookmark88"></a>The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http.createServer<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>method
takes a function as an argument; that function will be invoked every time an<span
style='letter-spacing:2.0pt'> </span>HTTP request is made. Our simple program
just sets the content type to plain text and sends the string Hello world!</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection53>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Serving_Static_Resources"></a><a name="_bookmark91"></a><span
style='color:#333333'>Once you start thinking in terms of event-driven
programming, you start seeing events everywhere. One such event is when a user
navigates from one page or area of your application to another. How your
application responds to that navigation event is referred to as <i>routing</i>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="_bookmark89"></a><span style='color:#3F3F3F;letter-spacing:-.1pt'>Routing</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark90"></a><span style='color:#333333'>Routing refers to the
mechanism for serving the client the content it has asked for. For web-based
client/server applications, the client specifies the desired<span
style='letter-spacing:1.75pt'> </span>content<span style='letter-spacing:1.65pt'>
</span>in<span style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:
1.65pt'> </span>URL;<span style='letter-spacing:1.65pt'> </span>specifically,<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.65pt'> </span>path<span
style='letter-spacing:1.75pt'> </span>and<span style='letter-spacing:1.75pt'> </span>querystring<span
style='letter-spacing:1.75pt'> </span>(the parts of a URL will be discussed in
more detail in </span><a href="#_bookmark223"><span style='color:#070707'>Chapter
6</span></a><span style='color:#333333'>).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;Server routing traditionally hinges on the path and the querystring, but there is other information available: headers, the domain, the IP address, and more. This allows servers to take into consideration, for example, the approximate physical location of the user or the preferred language of the user.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets expand our Hello world! example to do something
more<span style='letter-spacing:4.0pt'> </span>interesting.<span
style='letter-spacing:1.7pt'> </span>Lets<span style='letter-spacing:1.65pt'> </span>serve<span
style='letter-spacing:1.65pt'> </span>a<span style='letter-spacing:1.65pt'> </span>really<span
style='letter-spacing:1.7pt'> </span>minimal<span style='letter-spacing:1.65pt'>
</span>website<span style='letter-spacing:1.65pt'> </span>consisting<span
style='letter-spacing:1.7pt'> </span>of<span style='letter-spacing:1.65pt'> </span>a<span
style='letter-spacing:1.65pt'> </span>home page, an About page, and a Not Found
page. For now, well stick with our previous example and just serve plaintext
instead of HTML (<i>ch02/01- helloworld.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const http = require('http')&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;&#13;&#10;const server = http.createServer((req,res) =&gt; {&#13;&#10;// normalize url by removing querystring, optional&#13;&#10;// trailing slash, and making it lowercase&#13;&#10;const path = req.url.replace(/\/?(?:\?.*)?$/, '').toLowerCase()&#13;&#10;switch(path) {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection54>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image024.gif"
alt="Text Box: case '':&#13;&#10;res.writeHead(200, { 'Content-Type': 'text/plain' }) res.end('Homepage')&#13;&#10;break&#13;&#10;case '/about':&#13;&#10;res.writeHead(200, { 'Content-Type': 'text/plain' }) res.end('About')&#13;&#10;break&#13;&#10;default:&#13;&#10;res.writeHead(404, { 'Content-Type': 'text/plain' }) res.end('Not Found')&#13;&#10;break&#13;&#10;} })&#13;&#10;&#13;&#10;server.listen(port, () =&gt; console.log(`server started on port ${port}; ` + 'press Ctrl-C to terminate	'))&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>If you run this, youll
find you can now browse to the home page (<i>http://localhost:3000</i>) and the
About page (<i>http://localhost:3000/about</i>). Any querystrings will be
ignored (so <i>http://localhost:3000/?foo=bar </i>will serve the home page),
and any other URL (<i>http://localhost:3000/foo</i>) will serve the Not Found
page.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Serving<span
style='letter-spacing:-.3pt'> </span>Static<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Resources</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark92"></a><span style='color:#333333'>Now that weve got some
simple routing working, lets serve some real HTML and a logo image. These are
called <i>static </i>resources because they generally dont change (as opposed
to, for example, a stock ticker: every time you reload the page, the stock
prices may change).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;Serving static resources with Node is suitable for development and small projects, but for larger projects, you will probably want to use a proxy server such as NGINX or a CDN to serve static resources. See Chapter 17 for more information.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection55>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:72.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If<span style='letter-spacing:1.5pt'> </span>youve<span
style='letter-spacing:1.5pt'> </span>worked<span style='letter-spacing:1.55pt'>
</span>with<span style='letter-spacing:1.55pt'> </span>Apache<span
style='letter-spacing:1.5pt'> </span>or<span style='letter-spacing:1.5pt'> </span>IIS,<span
style='letter-spacing:1.55pt'> </span>youre<span style='letter-spacing:1.5pt'>
</span>probably<span style='letter-spacing:1.55pt'> </span>used<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>just
creating an HTML file, navigating to it, and having it delivered to the browser<span
style='letter-spacing:1.7pt'> </span>automatically.<span style='letter-spacing:
1.8pt'> </span>Node<span style='letter-spacing:1.7pt'> </span>doesnt<span
style='letter-spacing:1.7pt'> </span>work<span style='letter-spacing:1.8pt'> </span>like<span
style='letter-spacing:1.7pt'> </span>that:<span style='letter-spacing:1.7pt'> </span>were<span
style='letter-spacing:1.7pt'> </span>going<span style='letter-spacing:1.8pt'> </span>to<span
style='letter-spacing:1.8pt'> </span>have to do the work of opening the file,
reading it, and then sending its contents along to the browser. So lets create
a directory in our project called <i>public </i>(why<span style='letter-spacing:
1.35pt'> </span>we<span style='letter-spacing:1.3pt'> </span>dont<span
style='letter-spacing:1.3pt'> </span>call<span style='letter-spacing:1.3pt'> </span>it<span
style='letter-spacing:1.3pt'> </span><i>static<span style='letter-spacing:1.3pt'>
</span></i>will<span style='letter-spacing:1.3pt'> </span>become<span
style='letter-spacing:1.3pt'> </span>evident<span style='letter-spacing:1.3pt'>
</span>in<span style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:
1.3pt'> </span>next<span style='letter-spacing:1.3pt'> </span>chapter).<span
style='letter-spacing:1.35pt'> </span>In that<span style='letter-spacing:2.0pt'>
</span>directory,<span style='letter-spacing:2.0pt'> </span>well<span
style='letter-spacing:2.0pt'> </span>create<span style='letter-spacing:2.0pt'> </span><i>home.html</i>,<span
style='letter-spacing:2.0pt'> </span><i>about.html</i>,<span style='letter-spacing:
2.0pt'> </span><i>404.html</i>,<span style='letter-spacing:2.0pt'> </span>a
subdirectory<span style='letter-spacing:1.75pt'> </span>called<span
style='letter-spacing:1.75pt'> </span><i>img</i>,<span style='letter-spacing:
1.75pt'> </span>and<span style='letter-spacing:1.75pt'> </span>an<span
style='letter-spacing:1.75pt'> </span>image<span style='letter-spacing:1.7pt'> </span>called<span
style='letter-spacing:1.75pt'> </span><i>img/logo.png</i>.<span
style='letter-spacing:1.75pt'> </span>Ill<span style='letter-spacing:1.7pt'> </span>leave<span
style='letter-spacing:1.7pt'> </span>that up to you; if youre reading this
book, you probably know how to write an HTML file and find an image. In your
HTML files, reference the logo thusly: </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;img src=&quot;/img/logo.png&quot; alt=&quot;logo&quot;&gt;</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>&nbsp;</p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Now<span style='letter-spacing:.85pt'> </span>modify<span
style='letter-spacing:.95pt'> </span><i>helloworld.js<span style='letter-spacing:
.85pt'> </span></i>(<i>ch02/02-helloworld.js<span style='letter-spacing:.85pt'>
</span></i>in<span style='letter-spacing:.95pt'> </span>the<span
style='letter-spacing:.9pt'> </span>companion<span style='letter-spacing:.9pt'>
</span><span style='letter-spacing:-.1pt'>repo):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const http = require('http')&#13;&#10;const fs = require('fs')&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;&#13;&#10;function serveStaticFile(res, path, contentType, responseCode = 200) { fs.readFile(  dirname + path, (err, data) =&gt; {&#13;&#10;if(err) {&#13;&#10;res.writeHead(500, { 'Content-Type': 'text/plain' })&#13;&#10;return res.end('500 - Internal Error')&#13;&#10;}&#13;&#10;res.writeHead(responseCode, { 'Content-Type': contentType }) res.end(data)&#13;&#10;})&#13;&#10;}&#13;&#10;&#13;&#10;const server = http.createServer((req,res) =&gt; {&#13;&#10;// normalize url by removing querystring, optional trailing slash, and&#13;&#10;// making lowercase&#13;&#10;const path = req.url.replace(/\/?(?:\?.*)?$/, '').toLowerCase()&#13;&#10;switch(path) {&#13;&#10;case '':&#13;&#10;serveStaticFile(res, '/public/home.html', 'text/html')&#13;&#10;break&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection56>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: case '/about':&#13;&#10;serveStaticFile(res, '/public/about.html', 'text/html')&#13;&#10;break&#13;&#10;case '/img/logo.png':&#13;&#10;serveStaticFile(res, '/public/img/logo.png', 'image/png')&#13;&#10;break default:&#13;&#10;serveStaticFile(res, '/public/404.html', 'text/html', 404)&#13;&#10;break&#13;&#10;}&#13;&#10;})&#13;&#10;&#13;&#10;server.listen(port, () =&gt; console.log(`server started on port ${port}; ` + 'press Ctrl-C to terminate	'))&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;In this example, were being pretty unimaginative with our routing. If you navigate to http://localhost:3000/about, the public/about.html file is served. You could change the route to be anything you want, and change the file to be anything you want. For example, if you had a different About page for each day of the week, you could have files public/about_mon.html, public/about_tue.html, and so on, and provide logic in your routing to serve the appropriate page when the user navigates to http://localhost:3000/about.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Note weve created a helper function, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>serveStaticFile</span><span
style='color:#333333'>, thats doing the bulk of the work. </span><a
name="_bookmark94"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>fs.readFile<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>is an asynchronous method for reading<span
style='letter-spacing:2.0pt'> </span>files. There is a synchronous version of
that function, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>fs.readFileSync</span><span style='color:#333333'>,<span
style='letter-spacing:2.0pt'> </span>but the sooner you start thinking
asynchronously, the better. <a name="_bookmark93"></a>The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs.readFile<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>function
uses a pattern called <i>callbacks</i>. You provide a function called a <i>callback
function</i>, and when the work has been done, that callback function is
invoked (called back, so to speak). In this case, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs.readFile<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>reads
the contents of the specified file and executes the callback<span
style='letter-spacing:1.35pt'> </span>function<span style='letter-spacing:1.35pt'>
</span>when<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.3pt'> </span>file<span style='letter-spacing:1.3pt'> </span>has<span
style='letter-spacing:1.3pt'> </span>been<span style='letter-spacing:1.35pt'> </span>read;<span
style='letter-spacing:1.3pt'> </span>if<span style='letter-spacing:1.3pt'> </span>the<span
style='letter-spacing:1.3pt'> </span>file<span style='letter-spacing:1.3pt'> </span>didnt<span
style='letter-spacing:1.3pt'> </span>exist<span style='letter-spacing:1.3pt'> </span>or
there were permissions issues reading the file, the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>err<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>variable
is set, and the function<span style='letter-spacing:1.45pt'> </span>returns an<span
style='letter-spacing:1.45pt'> </span>HTTP status code of 500<span
style='letter-spacing:1.45pt'> </span>indicating<span style='letter-spacing:
1.45pt'> </span>a server error.</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection57>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:124.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>If the file is read successfully, the file is
sent to the client with the specified response code and content type. Response
codes will be discussed in more detail in </span><a href="#_bookmark223"><span
style='color:#070707'>Chapter 6</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: TIP&#13;&#10;  dirname will resolve to the directory the executing script resides in. So if your script resides in /home/sites/app.js,   dirname will resolve to /home/sites. Its a good idea to use this handy global whenever possible. Failing to do so can cause hard-to-diagnose errors if you run your app from a different directory.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="Onward_to_Express"></a><a
name="_bookmark97"></a><span style='color:#8E0011'>Onward<span
style='letter-spacing:-.15pt'> </span>to<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So far, Node probably doesnt seem that impressive to
you. Weve<span style='letter-spacing:4.0pt'> </span>basically replicated what
Apache or IIS do for you automatically, but now you have some insight into how
Node does things and how much control you have. We havent done anything
particularly impressive, but you can see how we could use this as a jumping-off
point to do more sophisticated things<a name="_bookmark98"></a>. If we
continued down this road, writing more and more<span style='letter-spacing:
2.0pt'> </span>sophisticated Node applications, you might very well end up with
something that resembles Express.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Fortunately, we dont have to: Express already exists,
and it saves you<span style='letter-spacing:2.0pt'> </span>from implementing a
lot of time-consuming infrastructure. So now that weve gotten a little Node
experience under our belt, were ready to jump into learning Express.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:82.0pt;margin-bottom:.0001pt;text-indent:-14.65pt;line-height:
101%'><a href="#_bookmark71"><span style='font-size:10.5pt;line-height:101%;
font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;line-height:101%;font-family:"Arial",sans-serif;
color:#070707;letter-spacing:5.1pt'> </span><a name="_bookmark99"></a><a
name="_bookmark100"></a><span style='font-size:10.5pt;line-height:101%;
color:#333333'>These days, vi is essentially synonymous with vim (vi improved).
On most systems, vi is aliased to vim, but I usually type </span><span
style='font-size:10.5pt;line-height:101%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vim<span style='letter-spacing:-1.5pt'> </span></span><span
style='font-size:10.5pt;line-height:101%;color:#333333'>to make sure Im using
vim.</span></p>

</div>

<span style='font-size:10.5pt;line-height:101%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection58>

<h1 style='margin-right:37.5pt;line-height:105%'><a name="Initial_Steps"></a><a
name="_bookmark106"></a><a name="3._Saving_Time_with_Express"></a><a
name="_bookmark101"></a>Chapter 3. Saving Time with <span style='letter-spacing:
-.1pt'>Express</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark102"></a><span style='color:#333333'>In </span><a
href="#_bookmark51"><span style='color:#070707'>Chapter 2</span></a><span
style='color:#333333'>, you learned how to create a simple web server using
only Node. In this chapter, we will re-create that server using Express. This
will provide a jumping-off point for the rest of the content of this book and
introduce you to the basics of Express.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name=Scaffolding></a><a name="_bookmark103"></a><span style='color:#8E0011;
letter-spacing:-.1pt'>Scaffolding</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:72.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark104"></a><i><span style='color:#333333'>Scaffolding </span></i><span
style='color:#333333'>is not a new idea, but many people (myself included) were
introduced to the concept by Ruby. The idea is simple: most projects<span
style='letter-spacing:4.0pt'> </span>require<span style='letter-spacing:1.55pt'>
</span>a<span style='letter-spacing:1.55pt'> </span>certain<span
style='letter-spacing:1.6pt'> </span>amount<span style='letter-spacing:1.55pt'>
</span>of<span style='letter-spacing:1.55pt'> </span>so-called<span
style='letter-spacing:1.6pt'> </span><i>boilerplate<span style='letter-spacing:
1.55pt'> </span></i>code,<span style='letter-spacing:1.6pt'> </span>and<span
style='letter-spacing:1.6pt'> </span>who<span style='letter-spacing:1.6pt'> </span>wants<span
style='letter-spacing:1.55pt'> </span>to re-create that code every time you
begin a new project? A simple way is to create<span style='letter-spacing:1.25pt'>
</span>a<span style='letter-spacing:1.25pt'> </span>rough<span
style='letter-spacing:1.35pt'> </span>skeleton<span style='letter-spacing:1.35pt'>
</span>of<span style='letter-spacing:1.25pt'> </span>a<span style='letter-spacing:
1.25pt'> </span>project,<span style='letter-spacing:1.35pt'> </span>and<span
style='letter-spacing:1.35pt'> </span>every<span style='letter-spacing:1.35pt'>
</span>time<span style='letter-spacing:1.25pt'> </span>you<span
style='letter-spacing:1.35pt'> </span>need<span style='letter-spacing:1.35pt'> </span>a<span
style='letter-spacing:1.25pt'> </span>new project, you just copy this skeleton,
or template.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark105"></a><span style='color:#333333'>Ruby on Rails took this
concept one step further by providing a program that would automatically
generate scaffolding for you. The advantage of this approach is that it could
generate a more sophisticated framework<span style='letter-spacing:2.0pt'> </span>than
just selecting from a collection of templates.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Express has taken a page from Ruby on Rails and provided
a utility to generate scaffolding to start your Express project.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While the Express scaffolding utility is useful, I think
its valuable to learn how<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.5pt'> </span>set<span style='letter-spacing:.5pt'> </span>up<span
style='letter-spacing:.5pt'> </span>Express<span style='letter-spacing:.5pt'> </span>from<span
style='letter-spacing:.45pt'> </span>scratch.<span style='letter-spacing:.5pt'>
</span>In<span style='letter-spacing:.55pt'> </span>addition<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.55pt'> </span>learning<span
style='letter-spacing:.5pt'> </span>more,<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.2pt'>have</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection59>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>more control over what gets installed and the structure
of your project. Also, the Express scaffolding utility is geared toward
server-side HTML generation and is less relevant for APIs and single-page
applications.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>While we wont be using the scaffolding utility, I
encourage you to take a look at it once youve finished the book: by then
youll be armed with everything you need to know to evaluate whether the
scaffolding it </span><a href="http://bit.ly/2CyvvLr"><span style='color:#333333;
text-decoration:none'>generates is useful for you. For more information, see
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#070707'>express-</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#070707;text-decoration:
none'> </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#070707'>generator<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#070707'>documentation</span><span
style='color:#333333;text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><a name="The_Meadowlark_Travel_Website"></a><a
name="_bookmark107"></a><span style='color:#8E0011'>The<span style='letter-spacing:
-.3pt'> </span>Meadowlark<span style='letter-spacing:-.25pt'> </span>Travel<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark108"></a><span style='color:#333333'>Throughout this book, well
be using a running example: a fictional website for Meadowlark Travel, a
company offering services for people visiting the great state of Oregon. If
youre more interested in creating an API, have no fear: the Meadowlark Travel website
will expose an API in addition to serving a functional website.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Initial<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Steps</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark109"></a><span style='color:#333333'>Start by creating a new
directory: <a name="_bookmark110"></a>this will be the root directory for your
project. In this book, whenever we refer to the project directory, app
directory, or project root, were referring to this directory.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image026.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection60>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:5.0pt'></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark111"></a><span
style='color:#333333'>npm<span style='letter-spacing:.65pt'> </span>manages<span
style='letter-spacing:.65pt'> </span>project<span style='letter-spacing:.7pt'> </span>dependenciesas<span
style='letter-spacing:.65pt'> </span>well<span style='letter-spacing:.65pt'> </span>as<span
style='letter-spacing:.7pt'> </span>metadata<span style='letter-spacing:.65pt'>
</span>about<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>project</span></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>in a file called <i>package.json</i>. The easiest way to
create this file is to run </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm<span style='letter-spacing:2.0pt'> </span>init</span><span
style='color:#333333'>:<span style='letter-spacing:1.2pt'> </span>it<span
style='letter-spacing:1.2pt'> </span>will<span style='letter-spacing:1.2pt'> </span>ask<span
style='letter-spacing:1.25pt'> </span>you<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>series<span style='letter-spacing:1.2pt'> </span>of<span
style='letter-spacing:1.2pt'> </span>questions<span style='letter-spacing:1.2pt'>
</span>and<span style='letter-spacing:1.25pt'> </span>generate<span
style='letter-spacing:1.2pt'> </span>a <i>package.json </i>file to get you
started (for the entry point question, use <i>meadowlark.js </i>for the name
of your project).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: TIP&#13;&#10;Every time you run npm, you may get warnings about a missing description or repository field. Its safe to ignore these warnings, but if you want to eliminate them, edit the package.json file and provide values for the fields npm is complaining about. For more information about the fields in this file, see the npm package.json documentation.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>first<span style='letter-spacing:.5pt'> </span>step<span
style='letter-spacing:.55pt'> </span>will<span style='letter-spacing:.5pt'> </span>be<span
style='letter-spacing:.5pt'> </span>installing<span style='letter-spacing:.55pt'>
</span>Express.<span style='letter-spacing:.55pt'> </span>Run<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.5pt'> </span>following<span
style='letter-spacing:.55pt'> </span>npm<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>command:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.65pt'> </span>install<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>express</span> </span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Running </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>will install the named package(s) in the <i>node_modules </i>directory
and update the <i>package.json </i>file. Since the <i>node_modules </i>directory
can be regenerated at any time with npm, we will not save it in our repository.
To ensure we dont accidentally add it to our repository, we create a file
called <i>.gitignore</i>:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: # ignore packages installed by npm node_modules&#13;&#10;&#13;&#10;# put any other files you don't want to check in here, such as .DS_Store # (OSX), *.bak, etc.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now create a file
called <i>meadowlark.js</i>. This will be our projects entry point. Throughout
the book, we will simply be referring to this file as the <i>app file </i>(<i>ch03/00-meadowlark.js
</i>in the companion repo):</span></p>

</div>

<span style='font-size:14.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection61>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: const express = require('express')&#13;&#10;&#13;&#10;const app = express()&#13;&#10;&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;&#13;&#10;// custom 404 page&#13;&#10;app.use((req, res) =&gt; { res.type('text/plain') res.status(404) res.send('404 - Not Found')&#13;&#10;})&#13;&#10;&#13;&#10;// custom 500 page&#13;&#10;app.use((err, req, res, next) =&gt; { console.error(err.message) res.type('text/plain') res.status(500)&#13;&#10;res.send('500 - Server Error')&#13;&#10;})&#13;&#10;&#13;&#10;app.listen(port, () =&gt; console.log(&#13;&#10;`Express started on http://localhost:${port}; ` +&#13;&#10;`press Ctrl-C to terminate.`))&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: TIP&#13;&#10;Many tutorials, as well as the Express scaffolding generator, encourage you to name your primary file app.js (or sometimes index.js or server.js). Unless youre using a hosting service or deployment system that requires your main application file to have a specific name, I dont feel theres a compelling reason to do this, and I prefer to name the primary file after the project.&#13;&#10;Anyone whos ever stared at a bunch of editor tabs that all say index.html will immediately see the wisdom of this. npm init will default to index.js; if you use a different name for your application file, make sure to update the main property in package.json.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>You now have a minimal Express server. You can start the
server (</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node
meadowlark.js</span><span style='color:#333333'>) and navigate to <i>http://localhost:3000</i>.
The result will be disappointing: you havent provided Express with any routes,
so it will</span></p>

</div>

<span style='font-size:11.0pt;line-height:126%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection62>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>simply give you a generic 404 message indicating that the
page doesnt <span style='letter-spacing:-.1pt'>exist.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;Note how we choose the port that we want our application to run on: const port = process.env.PORT || 3000. This allows us to override the port by setting an environment variable before you start the server. If your app isnt running on port 3000 when you run this example, check to see whether your PORT environment variable is set.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets add some routes for the home page and an About
page. Before the 404 handler, well add two new routes (<i>ch03/01-meadowlark.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: app.get('/', (req, res) =&gt; { res.type('text/plain') res.send('Meadowlark Travel');&#13;&#10;})&#13;&#10;&#13;&#10;app.get('/about', (req, res) =&gt; { res.type('text/plain') res.send('About Meadowlark Travel')&#13;&#10;})&#13;&#10;&#13;&#10;// custom 404 page&#13;&#10;app.use((req, res) =&gt; { res.type('text/plain') res.status(404) res.send('404 - Not Found')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><a
name="_bookmark112"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>is the method by which were adding routes. In the
Express documentation, you will see </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.METHOD</span><span style='color:#333333'>. This doesnt mean
that theres literally a method called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>METHOD</span><span style='color:#333333'>; its just a
placeholder for your (lowercased) HTTP verbs (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>get<span style='letter-spacing:-2.2pt'>
</span></span><span style='color:#333333'>and </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>post<span style='letter-spacing:-2.2pt'>
</span></span><span style='color:#333333'>being the most common). This</span></p>

</div>

<span style='font-size:11.0pt;line-height:123%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection63>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>method<span
style='letter-spacing:.5pt'> </span>takes<span style='letter-spacing:.45pt'> </span>two<span
style='letter-spacing:.5pt'> </span>parameters:<span style='letter-spacing:
.45pt'> </span>a<span style='letter-spacing:.45pt'> </span>path<span
style='letter-spacing:.55pt'> </span>and<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>function.</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:19.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The <i>path </i>is what defines the route. Note that </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.METHOD<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>does
the heavy lifting for you: by default, it doesnt care about the case or
trailing slash,<span style='letter-spacing:2.0pt'> </span>and it doesnt
consider the querystring when performing the match. So the route for the About
page will work for <i>/about</i>, <i>/About</i>, <i>/about/</i>, <i>/about?
foo=bar</i>, <i>/about/?foo=bar</i>, etc.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The <i>function </i>you provide will get invoked when the
route is matched. The parameters passed to that function are the request and
response objects, which well learn more about in </span><a href="#_bookmark223"><span
style='color:#070707'>Chapter 6</span></a><span style='color:#333333'>. For
now, were just returning plain text with a status code of 200 (Express
defaults to a status code of 200you dont have to specify it explicitly).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image029.gif"
  alt="Text Box: TIP&#13;&#10;I highly recommend getting a browser plug-in that shows you the status code of the HTTP request as well as any redirects that took place. It will make it easier to spot redirect issues in your code or incorrect status codes, which are often overlooked. For Chrome, Ayimas Redirect Path works wonderfully. In most browsers, you can see the status code in the Network section of the developer tools.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><a
name="_bookmark114"></a><span style='color:#333333'>Instead of using Nodes
low-level </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.end</span><span
style='color:#333333'>, were switching to using Expresss extension, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.send</span><span
style='color:#333333'>. We are also replacing Nodes </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.writeHead<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.set<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.status</span><span
style='color:#333333'>. Express is also providing us<span style='letter-spacing:
2.0pt'> </span>a<span style='letter-spacing:2.0pt'> </span>convenience<span
style='letter-spacing:2.0pt'> </span>method,<span style='letter-spacing:2.0pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.type</span><span
style='color:#333333'>,<span style='letter-spacing:2.0pt'> </span>which<span
style='letter-spacing:2.0pt'> </span>sets<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Content-Type </span><span style='color:#333333'>header.<span
style='letter-spacing:1.7pt'> </span>While<span style='letter-spacing:1.65pt'> </span>its<span
style='letter-spacing:1.65pt'> </span>still<span style='letter-spacing:1.65pt'>
</span>possible<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.7pt'> </span>use<span style='letter-spacing:1.65pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.writeHead<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>and<span
style='letter-spacing:1.7pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.end</span><span style='color:#333333'>,<span
style='letter-spacing:1.7pt'> </span>it isnt necessary or recommended.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:17.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Note<span
style='letter-spacing:.5pt'> </span>that<span style='letter-spacing:.5pt'> </span>our<span
style='letter-spacing:.45pt'> </span>custom<span style='letter-spacing:.5pt'> </span>404<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.55pt'> </span>500<span
style='letter-spacing:.55pt'> </span>pages<span style='letter-spacing:.5pt'> </span>must<span
style='letter-spacing:.5pt'> </span>be<span style='letter-spacing:.5pt'> </span>handled<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>slightly</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection64>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark116"></a><span style='color:#333333'>differently. <a
name="_bookmark115"></a>Instead of using </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get</span><span style='color:#333333'>, we are using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.use</span><span
style='color:#333333'>. </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.use<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>is<span style='letter-spacing:4.0pt'> </span>the method
by which Express adds <i>middleware</i>. Well be covering middleware<span
style='letter-spacing:1.3pt'> </span>in<span style='letter-spacing:1.4pt'> </span>more<span
style='letter-spacing:1.3pt'> </span>depth<span style='letter-spacing:1.4pt'> </span>in<span
style='letter-spacing:1.4pt'> </span></span><a href="#_bookmark427"><span
style='color:#070707'>Chapter<span style='letter-spacing:1.3pt'> </span>10</span></a><span
style='color:#333333'>,<span style='letter-spacing:1.4pt'> </span>but<span
style='letter-spacing:1.3pt'> </span>for<span style='letter-spacing:1.3pt'> </span>now,<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.4pt'> </span>can<span
style='letter-spacing:1.4pt'> </span>think<span style='letter-spacing:1.4pt'> </span>of
this as a catchall handler for anything that didnt get matched by a route.
This brings us to an important point: <i>in Express, the order in which routes
and middleware are added is significant</i>. If we put the 404 handler above<span
style='letter-spacing:2.0pt'> </span>the routes, the home page and About page
would stop working; instead, those URLs would result in a 404. Right now, our
routes are pretty simple, but they also support wildcards, which can lead to
problems with ordering. For example, what if we wanted to add subpages to
About, such as</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>/about/contact </span></i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>and <i>/about/directions</i>?
The following will not work as <span style='letter-spacing:-.1pt'>expected:</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: app.get('/about*', (req,res) =&gt; {&#13;&#10;// send content....&#13;&#10;}) app.get('/about/contact', (req,res) =&gt; {&#13;&#10;// send content....&#13;&#10;}) app.get('/about/directions', (req,res) =&gt; {&#13;&#10;// send content....&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:74.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
130%'><span style='color:#333333'>In this example, the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/about/contact<span
style='letter-spacing:-1.1pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/about/directions<span
style='letter-spacing:-1.1pt'> </span></span><span style='color:#333333'>handlers
will never be matched<span style='letter-spacing:.8pt'> </span>because the
first handler uses a wildcard<span style='letter-spacing:.8pt'> </span>in<span
style='letter-spacing:.8pt'> </span>its path:</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:17.05pt'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>/about*</span><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:77.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Express can distinguish between the 404 and
500 handlers by the number<span style='letter-spacing:2.0pt'> </span>of
arguments their callback functions take. Error routes will be covered in depth
in </span><a href="#_bookmark427"><span style='color:#070707'>Chapter 10</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and </span><a
href="#_bookmark499"><span style='color:#070707'>Chapter 12</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:73.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Now you can start the server again and see
that theres a functioning home page and About page.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify'><span
style='color:#333333'>So<span style='letter-spacing:.5pt'> </span>far,<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.5pt'> </span>havent<span
style='letter-spacing:.45pt'> </span>done<span style='letter-spacing:.5pt'> </span>anything<span
style='letter-spacing:.55pt'> </span>that<span style='letter-spacing:.5pt'> </span>couldnt<span
style='letter-spacing:.45pt'> </span>be<span style='letter-spacing:.5pt'> </span>done<span
style='letter-spacing:.5pt'> </span>just<span style='letter-spacing:.45pt'> </span>as<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>easily</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection65>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>without Express, but already Express is providing us some
functionality<span style='letter-spacing:4.0pt'> </span>that isnt immediately
obvious. Remember in the previous chapter how we had<span style='letter-spacing:
1.85pt'> </span>to<span style='letter-spacing:1.85pt'> </span>normalize<span
style='letter-spacing:1.8pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.url<span style='letter-spacing:-1.7pt'> </span></span><span
style='color:#333333'>to<span style='letter-spacing:1.85pt'> </span>determine<span
style='letter-spacing:1.8pt'> </span>what<span style='letter-spacing:1.8pt'> </span>resource<span
style='letter-spacing:1.8pt'> </span>was<span style='letter-spacing:1.8pt'> </span>being
requested? We had to manually strip off the querystring and the trailing slash
and convert to lowercase. Expresss router is now handling those details for us
automatically. While it may not seem like a large thing now, its only
scratching the surface of what Expresss router is capable of.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:17.0pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Views<span style='letter-spacing:-.2pt'> </span>and<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Layouts</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark118"></a><span style='color:#333333'>If youre familiar with the
model-view-controller paradigm, then the concept of a view will be no
stranger to you. Essentially, a <i>view </i>is what<span style='letter-spacing:
2.0pt'> </span>gets delivered to the user. <a name="_bookmark117"></a>In the
case of a website, that usually means HTML, though you could also deliver a PNG
or a PDF or anything that<span style='letter-spacing:4.0pt'> </span>can be
rendered by the client. For our purposes, we will consider views to be HTML.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:83.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>A view differs from a static resource (like
an image or CSS file) in that a view doesnt necessarily have to be static: the
HTML can be constructed on the fly to provide a customized page for each
request.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Express supports many different view engines that provide
different levels of abstraction. <a name="_bookmark119"></a>Express gives some
preference to a view engine called <i>Pug </i>(which<span style='letter-spacing:
1.45pt'> </span>is<span style='letter-spacing:1.4pt'> </span>no<span
style='letter-spacing:1.45pt'> </span>surprise,<span style='letter-spacing:
1.45pt'> </span>because<span style='letter-spacing:1.4pt'> </span>it<span
style='letter-spacing:1.4pt'> </span>is<span style='letter-spacing:1.4pt'> </span>also<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.4pt'> </span>brainchild<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.4pt'> </span>TJ
Holowaychuk).<span style='letter-spacing:1.9pt'> </span>The<span
style='letter-spacing:1.85pt'> </span>approach<span style='letter-spacing:1.9pt'>
</span>Pug<span style='letter-spacing:1.9pt'> </span>takes<span
style='letter-spacing:1.85pt'> </span>is<span style='letter-spacing:1.85pt'> </span>minimal:<span
style='letter-spacing:1.85pt'> </span>what<span style='letter-spacing:1.85pt'> </span>you<span
style='letter-spacing:1.9pt'> </span>write doesnt resemble HTML at all, which
certainly represents a lot less typing (no more angle brackets or closing
tags). The Pug engine then takes that<span style='letter-spacing:4.0pt'> </span>and
converts it to HTML.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image030.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection66>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.6pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Pug is appealing, but that level of abstraction comes at
a cost. If youre a frontend developer, you have to understand HTML and
understand it well, even<span style='letter-spacing:1.7pt'> </span>if youre
actually<span style='letter-spacing:1.7pt'> </span>writing<span
style='letter-spacing:1.7pt'> </span>your views in<span style='letter-spacing:
1.7pt'> </span>Pug.<span style='letter-spacing:1.7pt'> </span>Most frontend
developers<span style='letter-spacing:1.65pt'> </span>I<span style='letter-spacing:
1.65pt'> </span>know<span style='letter-spacing:1.65pt'> </span>are<span
style='letter-spacing:1.65pt'> </span>uncomfortable<span style='letter-spacing:
1.65pt'> </span>with<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>idea<span style='letter-spacing:1.65pt'> </span>of<span
style='letter-spacing:1.65pt'> </span>their<span style='letter-spacing:1.65pt'>
</span>primary markup language being abstracted away. For this reason, I am
recommending the use of another, less abstract templating framework<span
style='letter-spacing:4.0pt'> </span>called <i>Handlebars</i>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark120"></a><span style='color:#333333'>Handlebars (which is based
on the popular language-independent<span style='letter-spacing:2.0pt'> </span>templating<span
style='letter-spacing:2.0pt'> </span>language<span style='letter-spacing:2.0pt'>
</span>Mustache)<span style='letter-spacing:2.0pt'> </span>doesnt<span
style='letter-spacing:2.0pt'> </span>attempt<span style='letter-spacing:2.0pt'>
</span>to<span style='letter-spacing:2.0pt'> </span>abstract<span
style='letter-spacing:2.0pt'> </span>away<span style='letter-spacing:2.0pt'> </span>HTML
for you: you write HTML with special tags that allow Handlebars to inject <span
style='letter-spacing:-.1pt'>content.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image031.gif"
  alt="Text Box: NOTE&#13;&#10;In the years following the original release of this book, React has taken the world by storm which abstracts HTML away from frontend developers! Viewed through that lens, my prediction that frontend developers didnt want HTML abstracted away hasnt stood the test of time.&#13;&#10;However, JSX (the JavaScript language extension that most React developers use) is (almost) identical to writing HTML, so I wasnt entirely wrong.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><a
name="_bookmark121"></a><span style='color:#333333'>To provide Handlebars
support, well use Eric Ferraiuolos </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express- handlebars<span style='letter-spacing:-2.4pt'> </span></span><span
style='color:#333333'>package. In your project directory, execute the
following:</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>&nbsp;</p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:1.05pt'> </span>install<span
style='letter-spacing:1.1pt'> </span>express-<span style='letter-spacing:-.1pt'>handlebars</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.65pt'> </span>in<span
style='letter-spacing:.7pt'> </span><i>meadowlark.js</i>,<span
style='letter-spacing:.7pt'> </span>modify<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.65pt'> </span>first<span style='letter-spacing:.65pt'> </span>few<span
style='letter-spacing:.65pt'> </span>lines<span style='letter-spacing:.6pt'> </span>(<i>ch03/02-<span
style='letter-spacing:-.1pt'>meadowlark.js</span></i></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection67>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>in<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.55pt'> </span>companion<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>repo):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const express = require('express')&#13;&#10;const expressHandlebars = require('express-handlebars')&#13;&#10;&#13;&#10;const app = express()&#13;&#10;&#13;&#10;// configure Handlebars view engine&#13;&#10;app.engine('handlebars', expressHandlebars({ defaultLayout: 'main',&#13;&#10;}))&#13;&#10;app.set('view engine', 'handlebars')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:72.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark122"></a><span style='color:#333333'>This<span style='letter-spacing:
1.4pt'> </span>creates<span style='letter-spacing:1.4pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>view<span style='letter-spacing:1.4pt'> </span>engine<span
style='letter-spacing:1.4pt'> </span>and<span style='letter-spacing:1.45pt'> </span>configures<span
style='letter-spacing:1.4pt'> </span>Express<span style='letter-spacing:1.4pt'>
</span>to<span style='letter-spacing:1.45pt'> </span>use<span style='letter-spacing:
1.4pt'> </span>it<span style='letter-spacing:1.4pt'> </span>by<span
style='letter-spacing:1.45pt'> </span>default. Now<span style='letter-spacing:
1.35pt'> </span>create<span style='letter-spacing:1.35pt'> </span>a<span
style='letter-spacing:1.35pt'> </span>directory<span style='letter-spacing:
1.4pt'> </span>called<span style='letter-spacing:1.4pt'> </span><i>views<span
style='letter-spacing:1.35pt'> </span></i>that<span style='letter-spacing:1.35pt'>
</span>has<span style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:
1.35pt'> </span>subdirectory<span style='letter-spacing:1.4pt'> </span>called<span
style='letter-spacing:1.4pt'> </span><i>layouts</i>. If youre an experienced
web developer, youre probably already comfortable with the concepts of <i>layouts
</i>(sometimes called <i>master pages</i>). When you build a website, theres a
certain amount of HTML thats the sameor very close to the sameon every page.
It not only becomes tedious to rewrite all that repetitive code for every page,
but also creates a potential<span style='letter-spacing:1.9pt'> </span>maintenance<span
style='letter-spacing:1.9pt'> </span>nightmare:<span style='letter-spacing:
1.9pt'> </span>if<span style='letter-spacing:1.9pt'> </span>you<span
style='letter-spacing:1.95pt'> </span>want<span style='letter-spacing:1.9pt'> </span>to<span
style='letter-spacing:1.95pt'> </span>change<span style='letter-spacing:1.9pt'>
</span>something<span style='letter-spacing:1.95pt'> </span>on every page, you
have to change <i>all </i>the files. Layouts free you from this, providing a
common framework for all the pages on your site.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>So<span
style='letter-spacing:.4pt'> </span>lets<span style='letter-spacing:.35pt'> </span>create<span
style='letter-spacing:.35pt'> </span>a<span style='letter-spacing:.4pt'> </span>template<span
style='letter-spacing:.35pt'> </span>for<span style='letter-spacing:.35pt'> </span>our<span
style='letter-spacing:.4pt'> </span>site.<span style='letter-spacing:.4pt'> </span>Create<span
style='letter-spacing:.35pt'> </span>a<span style='letter-spacing:.4pt'> </span>file<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.1pt'>called</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>views/layouts/main.handlebars</span></i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;!doctype html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;&lt;title&gt;Meadowlark Travel&lt;/title&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;{{{body}}}&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection68>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The only thing that you probably havent seen before is
this: </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{{body}}}</span><span
style='color:#333333'>. This expression will be replaced with the HTML for each
view. When we created the Handlebars instance, note we specified the default
layout (</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>defaultLayout:
\'main'</span><span style='color:#333333'>). That means that unless you specify<span
style='letter-spacing:2.0pt'> </span>otherwise, this is the layout that will be
used for any view.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Now<span style='letter-spacing:.45pt'> </span>lets<span
style='letter-spacing:.5pt'> </span>create<span style='letter-spacing:.45pt'> </span>view<span
style='letter-spacing:.5pt'> </span>pages<span style='letter-spacing:.5pt'> </span>for<span
style='letter-spacing:.45pt'> </span>our<span style='letter-spacing:.5pt'> </span>home<span
style='letter-spacing:.5pt'> </span>page,<span style='letter-spacing:.5pt'> </span><i><span
style='letter-spacing:-.1pt'>views/home.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'>&lt;h1&gt;</span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'>Welcome<span
style='letter-spacing:.95pt'> </span>to<span style='letter-spacing:.95pt'> </span>Meadowlark<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>Travel</span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/h1&gt;</span></b><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText style='margin-top:.55pt'><b><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.6pt'> </span>our<span
style='letter-spacing:.5pt'> </span>About<span style='letter-spacing:.55pt'> </span>page,<span
style='letter-spacing:.6pt'> </span><i><span style='letter-spacing:-.1pt'>views/about.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'>&lt;h1&gt;</span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'>About<span
style='letter-spacing:1.1pt'> </span>Meadowlark<span style='letter-spacing:
1.15pt'> </span><span style='letter-spacing:-.1pt'>Travel</span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/h1&gt;</span></b><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText style='margin-top:.55pt'><b><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.55pt'> </span>our<span
style='letter-spacing:.55pt'> </span>Not<span style='letter-spacing:.5pt'> </span>Found<span
style='letter-spacing:.6pt'> </span>page,<span style='letter-spacing:.55pt'> </span><i><span
style='letter-spacing:-.1pt'>views/404.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'>&lt;h1&gt;</span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'>404<span
style='letter-spacing:.5pt'> </span>-<span style='letter-spacing:.55pt'> </span>Not<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Found</span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/h1&gt;</span></b><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText style='margin-top:.55pt'><b><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>And<span style='letter-spacing:.55pt'> </span>finally<span
style='letter-spacing:.55pt'> </span>our<span style='letter-spacing:.5pt'> </span>Server<span
style='letter-spacing:.5pt'> </span>Error<span style='letter-spacing:.5pt'> </span>page,<span
style='letter-spacing:.6pt'> </span><i><span style='letter-spacing:-.1pt'>views/500.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'>&lt;h1&gt;</span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'>500<span
style='letter-spacing:.6pt'> </span>-<span style='letter-spacing:.65pt'> </span>Server<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>Error</span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/h1&gt;</span></b><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: TIP&#13;&#10;You probably want your editor to associate .handlebars and .hbs (another common extension for Handlebars files) with HTML to enable syntax highlighting and other editor features. For vim, you can add the line au BufNewFile,BufRead *.handlebars set filetype=html to your&#13;&#10;~/.vimrc file. For other editors, consult your documentation.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:11.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have some views set up, we have to replace
our old routes with new ones that use these views (<i>ch03/02-meadowlark.js </i>in
the companion repo):</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection69>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: app.get('/', (req, res) =&gt; res.render('home')) app.get('/about', (req, res) =&gt; res.render('about'))&#13;&#10;// custom 404 page&#13;&#10;app.use((req, res) =&gt; { res.status(404) res.render('404')&#13;&#10;})&#13;&#10;&#13;&#10;// custom 500 page&#13;&#10;app.use((err, req, res, next) =&gt; { console.error(err.message) res.status(500) res.render('500')&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Note that we no longer have to specify the content type
or status code: the view engine will return a content type of </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>text/html<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>and a
status code of 200 by default. In the catchall handler, which provides our
custom 404 page, and the 500 handler, we have to set the status code
explicitly.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you start your server and check out the home or About
page, youll see that the views have been rendered. If you examine the source,
youll see that the boilerplate HTML from <i>views/layouts/main.handlebars </i>is
there.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark123"></a><span style='color:#333333'>Even though every time you
visit the home page, you get the same HTML, these routes are considered <i>dynamic
content</i>, because we could make a different<span style='letter-spacing:1.5pt'>
</span>decision<span style='letter-spacing:1.6pt'> </span>each<span
style='letter-spacing:1.6pt'> </span>time<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>route<span style='letter-spacing:1.5pt'> </span>gets<span
style='letter-spacing:1.5pt'> </span>called<span style='letter-spacing:1.6pt'> </span>(which<span
style='letter-spacing:1.6pt'> </span>well<span style='letter-spacing:1.5pt'> </span>see<span
style='letter-spacing:1.5pt'> </span>plenty of later in this book). However,
content that really never changes, in other words, static content, is common
and important, so well consider static content nex<a name="_bookmark124"></a>t<a
name="_bookmark125"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Static<span style='letter-spacing:-.25pt'> </span>Files<span
style='letter-spacing:-.25pt'> </span>and<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Views</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark126"></a><span
style='color:#333333'>Express<span style='letter-spacing:.5pt'> </span>relies<span
style='letter-spacing:.5pt'> </span>on<span style='letter-spacing:.55pt'> </span><i>middleware<span
style='letter-spacing:.55pt'> </span></i>to<span style='letter-spacing:.55pt'> </span>handle<span
style='letter-spacing:.5pt'> </span>static<span style='letter-spacing:.55pt'> </span>files<span
style='letter-spacing:.5pt'> </span>and<span style='letter-spacing:.55pt'> </span>views.<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Middleware</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection70>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Static_Files_and_Views"></a><a name="_bookmark127"></a><span
style='color:#333333'>is<span style='letter-spacing:1.2pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>concept<span style='letter-spacing:1.2pt'>
</span>that<span style='letter-spacing:1.2pt'> </span>will<span
style='letter-spacing:1.2pt'> </span>be<span style='letter-spacing:1.2pt'> </span>covered<span
style='letter-spacing:1.3pt'> </span>in<span style='letter-spacing:1.3pt'> </span>more<span
style='letter-spacing:1.2pt'> </span>detail<span style='letter-spacing:1.2pt'> </span>in<span
style='letter-spacing:1.3pt'> </span></span><a href="#_bookmark427"><span
style='color:#070707'>Chapter<span style='letter-spacing:1.2pt'> </span>10</span></a><span
style='color:#333333'>.<span style='letter-spacing:1.3pt'> </span>For<span
style='letter-spacing:1.2pt'> </span>now, its sufficient to know that
middleware provides modularization, making it easier to handle requests.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:81.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
132%'><span style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>static<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>middleware allows you to designate one or more
directories<span style='letter-spacing:2.0pt'> </span>as containing static
resources that are simply to be delivered to the client without any special
handling. This is where you would put things such as images, CSS files, and
client-side JavaScript files.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In your project directory, create a subdirectory called <i>public
</i>(we call it <i>public </i>because anything in this directory will be served
to the client without question). Then, before you declare any routes, youll
add the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static<span
style='letter-spacing:-.9pt'> </span></span><span style='color:#333333'>middleware
(<i>ch03/02-meadowlark.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.use(express.static(  dirname + '/public'))"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>static<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>middleware has the same effect as creating a route for
each static file you want to deliver that renders a file and returns it to the
client. So lets create an <i>img </i>subdirectory inside <i>public </i>and put
our <i>logo.png </i>file<span style='letter-spacing:4.0pt'> </span>in there.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Now we can simply reference <i>/img/logo.png </i>(note,
we do not specify </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>public</span><span style='color:#333333'>; that directory is
invisible to the client), and the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>static </span><span style='color:#333333'>middleware will serve
that file, setting the content type appropriately. Now lets modify our layout
so that our logo appears on every page:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;body&gt;&#13;&#10;&lt;header&gt;&#13;&#10;&lt;img src=&quot;/img/logo.png&quot; alt=&quot;Meadowlark Travel Logo&quot;&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;{{{body}}}&#13;&#10;&lt;/body&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection71>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image034.gif"></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><a name="Dynamic_Content_in_Views"></a><a
name="_bookmark128"></a><span style='color:#3F3F3F'>Dynamic<span
style='letter-spacing:-.35pt'> </span>Content<span style='letter-spacing:-.2pt'>
</span>in<span style='letter-spacing:-.15pt'> </span><span style='letter-spacing:
-.1pt'>Views</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark129"></a><span style='color:#333333'>Views arent simply a
complicated way to deliver static HTML (though<span style='letter-spacing:4.0pt'>
</span>they can certainly do that as well). The real power of views is that
they can contain dynamic information.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets say that on the About page, we want to deliver a
virtual fortune cookie. In<span style='letter-spacing:.9pt'> </span>our <i>meadowlark.js
</i>file,<span style='letter-spacing:.9pt'> </span>we define an<span
style='letter-spacing:.9pt'> </span>array<span style='letter-spacing:.9pt'> </span>of
fortune cookies:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const fortunes = [&#13;&#10;&quot;Conquer your fears or they will conquer you.&quot;, &quot;Rivers need springs.&quot;,&#13;&#10;&quot;Do not fear what you don't know.&quot;, &quot;You will have a pleasant surprise.&quot;, &quot;Whenever possible, keep it simple.&quot;,&#13;&#10;]&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Modify<span style='letter-spacing:.75pt'> </span>the<span
style='letter-spacing:.7pt'> </span>view<span style='letter-spacing:.7pt'> </span>(<i>/views/about.handlebars</i>)<span
style='letter-spacing:.7pt'> </span>to<span style='letter-spacing:.75pt'> </span>display<span
style='letter-spacing:.8pt'> </span>a<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>fortune:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;h1&gt;About Meadowlark Travel&lt;/h1&gt;&#13;&#10;{{#if fortune}}&#13;&#10;&lt;p&gt;Your fortune for the day:&lt;/p&gt;&#13;&#10;&lt;blockquote&gt;{{fortune}}&lt;/blockquote&gt;&#13;&#10;{{/if}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.55pt'> </span>modify<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.55pt'> </span>route<span style='letter-spacing:.55pt'> </span><i>/about<span
style='letter-spacing:.55pt'> </span></i>to<span style='letter-spacing:.6pt'> </span>deliver<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.55pt'> </span>random<span
style='letter-spacing:.55pt'> </span>fortune<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.1pt'>cookie:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: app.get('/about', (req, res) =&gt; {&#13;&#10;const randomFortune = fortunes[Math.floor(Math.random()*fortunes.length)]&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection72>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: res.render('about', { fortune: randomFortune })&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now if you restart the server and load the <i>/about </i>page,
youll see a random fortune, and youll get a new one every time you reload the
page.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Templating is incredibly useful, and we will be covering
it in depth in </span><a href="#_bookmark309"><span style='color:#070707'>Chapter
7</span></a><a name="_bookmark130"></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="_bookmark131"></a><span style='color:#3F3F3F;letter-spacing:-.1pt'>Conclu<a
name="_bookmark132"></a>sion</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve created a basic website with Express. Even though
its simple, it contains all the seeds we need for a full-featured website. In
the next chapter, well be crossing our <i>t</i>s and dotting our <i>i</i>s in
preparation for adding more advanced functionality<a name="_bookmark133"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection73>

<h1><a name="Best_Practices"></a><a name="_bookmark136"></a><a
name="4._Tidying_Up"></a><a name="File_and_Directory_Structure"></a><a
name="_bookmark134"></a>Chapter<span style='letter-spacing:.6pt'> </span>4.<span
style='letter-spacing:.6pt'> </span>Tidying<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>Up</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the previous two chapters, we were just experimenting:
dipping our toes into the waters, so to speak. Before we proceed to more
complex functionality, were going to do some housekeeping and build some good
habits into our work.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, well start our Meadowlark Travel
project in earnest. Before we start building the website itself, though, were
going to make sure we have the tools we need to produce a high-quality product.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;The running example in this book is not necessarily one you have to follow. If youre anxious to build your own website, you could follow the framework of the running example but modify it accordingly so that by the time you finish this book, you could have a finished website!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>File<span
style='letter-spacing:-.35pt'> </span>and<span style='letter-spacing:-.2pt'> </span>Directory<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Structure</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark135"></a><span style='color:#333333'>Structuring applications
has spawned many a religious debate, and theres no one right way to do it.
However, there are some common conventions that are helpful to know about.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its typical to try to restrict the number of files in
your project root. Typically, youll find configuration files (like <i>package.json</i>),
a <i>README.md </i>file, and a bunch of directories. Most source code goes
under a directory often called <i>src</i>. For the sake of brevity, we wont be</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection74>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Version_Control"></a><a name="_bookmark139"></a><span style='color:#333333'>using
that convention in this book (nor does the Express scaffolding application do
this, surprisingly). For real-world projects, youll probably eventually<span
style='letter-spacing:1.75pt'> </span>find<span style='letter-spacing:1.75pt'> </span>that
your project root gets cluttered<span style='letter-spacing:1.75pt'> </span>if
youre putting source code there, and youll want to collect those files under
a directory like <i>src</i>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Ive also mentioned
that I prefer to name my main application file (sometimes called the <i>entry
point</i>) after the project itself (<i>meadowlark.js</i>) as opposed to
something generic like <i>index.js</i>, <i>app.js</i>, or <i>server.js</i>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its largely up to you how to structure your application,
and I recommend providing a road map to your structure in the <i>README.md </i>file
(or a readme linked from it).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>At minimum, I recommend you always have the following two
files in your project root: <i>package.json </i>and <i>README.md</i>. The rest
is up to your <span style='letter-spacing:-.1pt'>imagination.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Best<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Practices</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark138"></a><span style='color:#333333'>The phrase <i>best
practices </i>is one you hear thrown around a lot these days, and it means that
you should do things right and not cut corners (well talk about what this
means specifically in a moment). No doubt youve heard the engineering adage
that your options are fast, cheap, and good, and you can pick any two. <a
name="_bookmark137"></a>The thing thats always bothered me about this model is
that it doesnt take into account the <i>accrual value </i>of doing things
correctly. The first time you do something correctly, it may take five times as
long<span style='letter-spacing:1.05pt'> </span>to<span style='letter-spacing:
1.05pt'> </span>do<span style='letter-spacing:1.05pt'> </span>it as it would<span
style='letter-spacing:1.05pt'> </span>have to<span style='letter-spacing:1.05pt'>
</span>do<span style='letter-spacing:1.05pt'> </span>it quick<span
style='letter-spacing:1.05pt'> </span>and<span style='letter-spacing:1.05pt'> </span>dirty.</span></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The second time, though, its going to take only three
times as long. By<span style='letter-spacing:2.0pt'> </span>the time youve
done it correctly<span style='letter-spacing:.75pt'> </span>a dozen<span
style='letter-spacing:.75pt'> </span>times,<span style='letter-spacing:.75pt'> </span>youll
be doing<span style='letter-spacing:.75pt'> </span>it almost</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection75>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a
name="How_to_Use_Git_with_This_Book"></a><a name="_bookmark143"></a><span
style='color:#333333'>as<span style='letter-spacing:.35pt'> </span>fast<span
style='letter-spacing:.35pt'> </span>as<span style='letter-spacing:.35pt'> </span>the<span
style='letter-spacing:.35pt'> </span>quick<span style='letter-spacing:.4pt'> </span>and<span
style='letter-spacing:.45pt'> </span>dirty<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.2pt'>way.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I had a fencing coach who would always remind us that
practice doesnt make<span style='letter-spacing:1.65pt'> </span>perfect;<span
style='letter-spacing:1.65pt'> </span>practice<span style='letter-spacing:1.65pt'>
</span>makes<span style='letter-spacing:1.65pt'> </span><i>permanent</i>.<span
style='letter-spacing:1.75pt'> </span>That<span style='letter-spacing:1.65pt'> </span>is,<span
style='letter-spacing:1.75pt'> </span>if<span style='letter-spacing:1.65pt'> </span>you<span
style='letter-spacing:1.75pt'> </span>do<span style='letter-spacing:1.75pt'> </span>something
over<span style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:
1.6pt'> </span>over<span style='letter-spacing:1.5pt'> </span>again,<span
style='letter-spacing:1.6pt'> </span>eventually<span style='letter-spacing:
1.6pt'> </span>it<span style='letter-spacing:1.5pt'> </span>will<span
style='letter-spacing:1.5pt'> </span>become<span style='letter-spacing:1.5pt'> </span>automatic,<span
style='letter-spacing:1.6pt'> </span>rote.<span style='letter-spacing:1.6pt'> </span>That<span
style='letter-spacing:1.5pt'> </span>is true, but it says nothing about the
quality of the thing you are practicing. If you practice bad habits, then bad
habits become rote. Instead, you should follow the rule that <i>perfect </i>practice
makes perfect.<span style='letter-spacing:1.5pt'> </span>In<span
style='letter-spacing:1.5pt'> </span>that spirit,<span style='letter-spacing:
1.5pt'> </span>I<span style='letter-spacing:2.0pt'> </span>encourage<span
style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>follow<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>rest<span style='letter-spacing:1.2pt'> </span>of<span
style='letter-spacing:1.2pt'> </span>the<span style='letter-spacing:1.2pt'> </span>examples<span
style='letter-spacing:1.2pt'> </span>in<span style='letter-spacing:1.3pt'> </span>this<span
style='letter-spacing:1.2pt'> </span>book<span style='letter-spacing:1.3pt'> </span>as<span
style='letter-spacing:1.2pt'> </span>if<span style='letter-spacing:1.2pt'> </span>you
were making a real-live website, as if your reputation and remuneration<span
style='letter-spacing:2.0pt'> </span>were depending on the quality of the
outcome. Use this book to not only learn new skills but to practice building
good habits.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>The practices we will be focusing on are
version control and QA. In this chapter, well be discussing version control,
and well discuss QA in the next chapter.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='text-align:justify'><span style='color:#8E0011'>Version<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Control</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark140"></a><span style='color:#333333'>I hope I dont have to
convince you of the value of version control (if I did, that might take a whole
book itself). Broadly speaking, version control offers these benefits:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Documentation</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark141"></a><span style='color:#333333'>Being able to go back
through the history of a project to see the decisions that were made and the
order in which components were developed can be valuable documentation. Having
a technical history of your project can be quite useful.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Attribution</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark142"></a><span
style='color:#333333'>If<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.55pt'> </span>work<span style='letter-spacing:.5pt'> </span>on<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.5pt'> </span>team,<span
style='letter-spacing:.5pt'> </span>attribution<span style='letter-spacing:
.55pt'> </span>can<span style='letter-spacing:.5pt'> </span>be<span
style='letter-spacing:.5pt'> </span>hugely<span style='letter-spacing:.55pt'> </span>important.<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Whenever</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection76>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>you find something in code that is opaque or
questionable, knowing who made that change can save you many hours. It could be
that the comments associated with the change are sufficient to answer your
questions, and if not, youll know who to talk to.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Experimentation</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>A<span style='letter-spacing:1.85pt'> </span>good<span
style='letter-spacing:1.95pt'> </span>version<span style='letter-spacing:1.95pt'>
</span>control<span style='letter-spacing:1.85pt'> </span>system<span
style='letter-spacing:1.85pt'> </span>enables<span style='letter-spacing:1.85pt'>
</span>experimentation.<span style='letter-spacing:1.95pt'> </span>You<span
style='letter-spacing:1.95pt'> </span>can<span style='letter-spacing:1.95pt'> </span>go
off on a tangent, trying something new, without fear of affecting the stability
of your project. If the experiment is successful, you can fold it back into the
project, and if it is not successful, you can abandon it.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark144"></a><span style='color:#333333'>Years ago, I made the
switch to distributed version control systems (DVCSs).<span style='letter-spacing:
1.6pt'> </span>I<span style='letter-spacing:1.5pt'> </span>narrowed<span
style='letter-spacing:1.6pt'> </span>my<span style='letter-spacing:1.6pt'> </span>choices<span
style='letter-spacing:1.5pt'> </span>down<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>Git<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.6pt'> </span>Mercurial<span style='letter-spacing:1.5pt'>
</span>and<span style='letter-spacing:1.6pt'> </span>went with Git, because of
its ubiquity and flexibility. Both are excellent and free version control
systems, and I recommend you use one of them. In this<span style='letter-spacing:
4.0pt'> </span>book,<span style='letter-spacing:1.5pt'> </span>we<span
style='letter-spacing:1.4pt'> </span>will<span style='letter-spacing:1.4pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>using<span style='letter-spacing:1.5pt'> </span>Git,<span
style='letter-spacing:1.5pt'> </span>but<span style='letter-spacing:1.4pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>are<span style='letter-spacing:1.4pt'> </span>welcome<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.5pt'> </span>substitute<span
style='letter-spacing:1.4pt'> </span>Mercurial (or another version control system
altogether).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you are unfamiliar with Git, I recommend Jon
Loeligers excellent </span><a href="http://bit.ly/Version_Ctrl_Git"><i><span
style='color:#070707'>Version Control with Git</span></i></a><i><span
style='color:#070707'> </span></i><span style='color:#333333'>(OReilly). Also,
GitHub has a good listing of </span><a href="https://try.github.io/"><span
style='color:#070707'>Git learning resources</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>How<span
style='letter-spacing:-.25pt'> </span>to<span style='letter-spacing:-.1pt'> </span>Use<span
style='letter-spacing:-.1pt'> </span>Git<span style='letter-spacing:-.1pt'> </span>with<span
style='letter-spacing:-.1pt'> </span>This<span style='letter-spacing:-.1pt'> </span><span
style='letter-spacing:-.2pt'>Book</span></span></h2>

<p class=MsoBodyText style='margin-top:12.7pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark145"></a><span style='color:#333333'>First, make sure you have
Git. Type </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git
--version</span><span style='color:#333333'>. If it doesnt respond </span><a
href="https://git-scm.com/"><span style='color:#333333;text-decoration:none'>with
a version number, youll need to install Git. See the </span><span
style='color:#070707'>Git</span><span style='color:#070707;letter-spacing:4.0pt;
text-decoration:none'> </span><span style='color:#070707'>documentation</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#333333;
text-decoration:none'>for installation instructions.</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There are two ways to follow along with the examples in
this book. One is to<span style='letter-spacing:1.55pt'> </span>type<span
style='letter-spacing:1.45pt'> </span>out<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>examples<span style='letter-spacing:1.45pt'>
</span>yourself<span style='letter-spacing:1.45pt'> </span>and<span
style='letter-spacing:1.55pt'> </span>follow<span style='letter-spacing:1.45pt'>
</span>along<span style='letter-spacing:1.55pt'> </span>with<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.45pt'> </span>Git
commands. The other is to clone the companion repository I am using for<span
style='letter-spacing:2.0pt'> </span>all of the examples and check out the
associated files for each example.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection77>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Some people learn better by typing out examples, while
some prefer to just see and run the changes without having to type it all in.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="If_Youre_Following_Along_by_Doing_It_Yo"></a><a
name="_bookmark146"></a><span style='color:#3F3F3F'>If<span style='letter-spacing:
-.3pt'> </span>Youre<span style='letter-spacing:-.2pt'> </span>Following<span
style='letter-spacing:-.15pt'> </span>Along<span style='letter-spacing:-.15pt'>
</span>by<span style='letter-spacing:-.2pt'> </span>Doing<span
style='letter-spacing:-.15pt'> </span>It<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Yourself</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We already have a very rough framework for our project:
some views, a layout, a logo, a main application file, and a <i>package.json </i>file.
Lets go ahead and create a Git repository and add all those files.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>First,<span
style='letter-spacing:.5pt'> </span>we<span style='letter-spacing:.4pt'> </span>go<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.4pt'> </span>project<span style='letter-spacing:.45pt'> </span>directory<span
style='letter-spacing:.5pt'> </span>and<span style='letter-spacing:.5pt'> </span>initialize<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.45pt'> </span>Git<span
style='letter-spacing:.45pt'> </span>repository<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.1pt'>there:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>git<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>init</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Now before we add all the files, well create a <i>.gitignore
</i>file to help<span style='letter-spacing:2.0pt'> </span>prevent us from
accidentally adding things we dont want to add. Create a text file called <i>.gitignore
</i>in your project directory in which you can add<span style='letter-spacing:
4.0pt'> </span>any files or directories you want Git to ignore by default (one
per line). It also supports wildcards. For example, if your editor creates
backup files with a tilde at the end (like <i>meadowlark.js~</i>), you might
put </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>*~<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>in the</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.9pt'><i><span
style='color:#333333'>.gitignore<span style='letter-spacing:.45pt'> </span></span></i><span
style='color:#333333'>file.<span style='letter-spacing:.5pt'> </span>If<span
style='letter-spacing:.45pt'> </span>youre<span style='letter-spacing:.45pt'> </span>on<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.45pt'> </span>Mac,<span
style='letter-spacing:.55pt'> </span>youll<span style='letter-spacing:.45pt'> </span>want<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.5pt'> </span>put<span
style='letter-spacing:.45pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>.DS_Store<span style='letter-spacing:-3.05pt'> </span></span><span
style='color:#333333'>in<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>there.</span></span></p>

<p class=MsoBodyText style='margin-top:4.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Youll also want to put </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>node_modules<span style='letter-spacing:
-2.75pt'> </span></span><span style='color:#333333'>in there (for reasons that
will be discussed soon). So for now, the file might look like this:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: node_modules&#13;&#10;*~&#13;&#10;.DS_Store&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;Entries in the .gitignore file also apply to subdirectories. So if you put *~ in the .gitignore in the project root, all such backup files will be ignored even if they are in subdirectories.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection78>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:77.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Now<span style='letter-spacing:1.15pt'> </span>we<span
style='letter-spacing:1.15pt'> </span>can<span style='letter-spacing:1.2pt'> </span>add<span
style='letter-spacing:1.2pt'> </span>all<span style='letter-spacing:1.15pt'> </span>of<span
style='letter-spacing:1.15pt'> </span>our<span style='letter-spacing:1.15pt'> </span>existing<span
style='letter-spacing:1.2pt'> </span>files.<span style='letter-spacing:1.2pt'> </span>There<span
style='letter-spacing:1.15pt'> </span>are<span style='letter-spacing:1.15pt'> </span>many<span
style='letter-spacing:1.2pt'> </span>ways<span style='letter-spacing:1.15pt'> </span>to<span
style='letter-spacing:1.2pt'> </span>do<span style='letter-spacing:1.2pt'> </span>this
in<span style='letter-spacing:1.1pt'> </span>Git.<span style='letter-spacing:
1.1pt'> </span>I<span style='letter-spacing:1.05pt'> </span>generally<span
style='letter-spacing:1.1pt'> </span>favor<span style='letter-spacing:1.05pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git<span
style='letter-spacing:2.0pt'> </span>add<span style='letter-spacing:2.0pt'> </span>-A</span><span
style='color:#333333'>,<span style='letter-spacing:1.1pt'> </span>which<span
style='letter-spacing:1.1pt'> </span>is<span style='letter-spacing:1.05pt'> </span>the<span
style='letter-spacing:1.05pt'> </span>most<span style='letter-spacing:1.05pt'> </span>sweeping<span
style='letter-spacing:1.1pt'> </span>of<span style='letter-spacing:1.05pt'> </span>all
the<span style='letter-spacing:1.2pt'> </span>variants.<span style='letter-spacing:
1.25pt'> </span>If<span style='letter-spacing:1.2pt'> </span>you<span
style='letter-spacing:1.25pt'> </span>are<span style='letter-spacing:1.2pt'> </span>new<span
style='letter-spacing:1.2pt'> </span>to<span style='letter-spacing:1.25pt'> </span>Git,<span
style='letter-spacing:1.25pt'> </span>I<span style='letter-spacing:1.2pt'> </span>recommend<span
style='letter-spacing:1.25pt'> </span>you<span style='letter-spacing:1.25pt'> </span>either<span
style='letter-spacing:1.2pt'> </span>add<span style='letter-spacing:1.25pt'> </span>files<span
style='letter-spacing:1.2pt'> </span>one by one (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>git add meadowlark.js</span><span
style='color:#333333'>, for example) if you want to commit<span
style='letter-spacing:2.0pt'> </span>only one or two files, or add all of your
changes (including any files you might have deleted) using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git add -A</span><span
style='color:#333333'>. Since we want to add all the work weve already done,
well use the following:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>&nbsp;</p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>git<span style='letter-spacing:.5pt'> </span>add<span
style='letter-spacing:.5pt'> </span>-<span style='letter-spacing:-.5pt'>A</span> </span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: TIP&#13;&#10;Newcomers to Git are commonly confused by the git add command; it adds changes, not files. So if youve modified meadowlark.js, and then you type git add meadowlark.js ,what youre really doing is adding the changes youve made.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Git has a staging area, where changes go when you run </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git add</span><span
style='color:#333333'>. So the changes weve added havent actually been
committed yet, but theyre ready to go. To commit the changes, use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git commit</span><span
style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>git<span style='letter-spacing:.6pt'> </span>commit<span
style='letter-spacing:.65pt'> </span>-m<span style='letter-spacing:.65pt'> </span>&quot;Initial<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>commit.&quot;</span> </span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>-m &quot;Initial commit.&quot;<span style='letter-spacing:-2.15pt'>
</span></span><span style='color:#333333'>allows you to write a message
associated with this commit. Git wont even let you make a commit without a
message, and for good reason. Always strive to make meaningful commit messages;
they should briefly but concisely describe the work youve<span
style='letter-spacing:4.0pt'> </span><span style='letter-spacing:-.1pt'>done.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-right:85.3pt;line-height:101%'><span style='color:#3F3F3F'>If<span
style='letter-spacing:-.15pt'> </span>Youre<span style='letter-spacing:-.2pt'>
</span>Following<span style='letter-spacing:-.15pt'> </span>Along<span
style='letter-spacing:-.15pt'> </span>by<span style='letter-spacing:-.2pt'> </span>Using<span
style='letter-spacing:-.15pt'> </span>the<span style='letter-spacing:-.2pt'> </span>Official
<span style='letter-spacing:-.1pt'>Repository</span></span></h3>

</div>

<span style='font-size:11.0pt;line-height:101%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection79>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="npm_Packages"></a><a
name="_bookmark149"></a><a name="If_Youre_Following_Along_by_Using_the_O"></a><a
name="_bookmark148"></a><span style='color:#333333'>To<span style='letter-spacing:
.45pt'> </span>get<span style='letter-spacing:.4pt'> </span>the<span
style='letter-spacing:.45pt'> </span>official<span style='letter-spacing:.4pt'>
</span>repository<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.45pt'> </span>this<span style='letter-spacing:.4pt'> </span>book,<span
style='letter-spacing:.45pt'> </span>run<span style='letter-spacing:.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>clone</span></span><span
style='color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: git clone https://github.com/EthanRBrown/web-development-with-node-and- express-2e"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>This<span style='letter-spacing:1.6pt'> </span>repository<span
style='letter-spacing:1.7pt'> </span>has<span style='letter-spacing:1.6pt'> </span>a<span
style='letter-spacing:1.6pt'> </span>directory<span style='letter-spacing:1.7pt'>
</span>for<span style='letter-spacing:1.6pt'> </span>each<span
style='letter-spacing:1.7pt'> </span>chapter<span style='letter-spacing:1.6pt'>
</span>that<span style='letter-spacing:1.6pt'> </span>contains<span
style='letter-spacing:1.6pt'> </span>code samples. For example, the source code
for this chapter can be found in the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>ch04<span style='letter-spacing:-2.35pt'> </span></span><span
style='color:#333333'>directory. The code samples in each chapter are generally
numbered for ease of reference. Throughout the repository, I have liberally
added <i>README.md </i>files containing additional notes about the samples.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;In the first version of this book, I took a different approach with the repository, with a linear history as if you were developing an increasingly sophisticated project. While this approach pleasantly mirrored the way a project in the real world might develop, it caused a lot of headache, both for me and for my readers. As npm packages changed, the code samples would change, and short of rewriting the entire history of the repo, there was no good way to update the repository or note the changes in the text. While the chapter-per-directory approach is more artificial, it allows the text to be synced more closely with the repository and also enables easier community contribution.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>As this book is updated and improved, the repository will
also be updated, and<span style='letter-spacing:1.05pt'> </span>when<span
style='letter-spacing:1.05pt'> </span>it<span style='letter-spacing:1.0pt'> </span>is,<span
style='letter-spacing:1.05pt'> </span>I<span style='letter-spacing:1.0pt'> </span>will<span
style='letter-spacing:1.0pt'> </span>add<span style='letter-spacing:1.05pt'> </span>a<span
style='letter-spacing:1.0pt'> </span>version<span style='letter-spacing:1.05pt'>
</span>tag<span style='letter-spacing:1.05pt'> </span>so<span style='letter-spacing:
1.05pt'> </span>you<span style='letter-spacing:1.05pt'> </span>can<span
style='letter-spacing:1.05pt'> </span>check<span style='letter-spacing:1.05pt'>
</span>out<span style='letter-spacing:1.0pt'> </span>a<span style='letter-spacing:
1.0pt'> </span>version<span style='letter-spacing:1.05pt'> </span>of the
repository that corresponds to the version of the book youre reading now. The
current version of the repository is 2.0.0. I am roughly following <i>semantic
versioning </i>principles here (more on this later in this chapter); the PATCH
increment (the last number) represents minor changes that<span
style='letter-spacing:2.0pt'> </span>shouldnt impact your ability to follow
along with the book. That is, if the repo<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.4pt'> </span>at<span style='letter-spacing:1.4pt'> </span>version<span
style='letter-spacing:1.5pt'> </span>2.0.15,<span style='letter-spacing:1.5pt'>
</span>that<span style='letter-spacing:1.4pt'> </span>should<span
style='letter-spacing:1.5pt'> </span>still<span style='letter-spacing:1.4pt'> </span>correspond<span
style='letter-spacing:1.5pt'> </span>with<span style='letter-spacing:1.5pt'> </span>this<span
style='letter-spacing:1.4pt'> </span>version<span style='letter-spacing:1.5pt'>
</span>of the book. However, if the MINOR increment (the second number) is
different (2.1.0),<span style='letter-spacing:1.05pt'> </span>that indicates
that the content in<span style='letter-spacing:1.05pt'> </span>the companion<span
style='letter-spacing:1.05pt'> </span>repo<span style='letter-spacing:1.05pt'> </span>may</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection80>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>have diverged from what youre reading, and you may want
to check out a tag starting with 2.0.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The companion repo liberally makes use of <i>README.md </i>files
to add additional explanation to the code samples.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;If at any point you want to experiment, keep in mind that the tag you have checked out puts you in what Git calls a detached HEAD state. While you are free to edit any files, it is unsafe to commit anything you do without creating a branch first. So if you do want to base an experimental branch off of a tag, simply create a new branch and check it out, which you can do with one command: git checkout -b experiment (where experiment is the name of your branch; you can use whatever you want). Then you can safely edit and commit on that branch as much as you want.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>npm<span
style='letter-spacing:-.1pt'> Pac<a name="_bookmark150"></a>kages</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark151"></a><span style='color:#333333'>The npm packages that your
project relies on reside in a directory called <i>node_modules</i>. (Its
unfortunate that this is called <i>node_modules </i>and not <i>npm_packages</i>,
as Node modules are a related but different concept.) Feel free to explore that
directory to satisfy your curiosity or to debug your program, but you should
never modify any code in this directory. In addition to that being bad
practice, all of your changes could easily be undone by npm.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you need to make a modification to a package your
project depends on, the correct course of action would be to create your own
fork of the<span style='letter-spacing:2.0pt'> </span>package. If you do go
this route and feel that your improvements would be useful to others,
congratulations: youre now involved in an open source project! You can submit
your changes, and if they meet the project</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection81>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>standards, theyll be included in the official package.
Contributing to existing packages and creating customized builds is beyond the
scope of<span style='letter-spacing:2.0pt'> </span>this book, but there is a
vibrant community of developers out there to help you if you want to contribute
to existing packages.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark152"></a><span style='color:#333333'>Two of the main purposes of
the <i>package.json </i>file are to describe your project and to list its
dependencies. Go ahead and look at your<span style='letter-spacing:4.0pt'> </span><i>package.json
</i>file now. You should see something like this (the exact version numbers
will probably be different, as these packages get updated <span
style='letter-spacing:-.1pt'>often):</span></span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: {&#13;&#10;&quot;dependencies&quot;: {&#13;&#10;&quot;express&quot;: &quot;^4.16.4&quot;,&#13;&#10;&quot;express-handlebars&quot;: &quot;^3.0.0&quot;&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Right now, our <i>package.json </i>file contains only
information about dependencies. The caret (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>^</span><span style='color:#333333'>)
in front of the package versions indicates that any version that starts with
the specified version numberup to the next major version numberwill work. For
example, this <i>package.json<span style='letter-spacing:2.0pt'> </span></i>indicates
that any version of Express that starts with 4.0.0 will work, so</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>4.0.1 and 4.9.9 would both work, but 3.4.7 would not, nor
would 5.0.0.<span style='letter-spacing:4.0pt'> </span>This is the default
version specificity when you use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install</span><span style='color:#333333'>, and is generally
a pretty safe bet. The consequence of this approach is that if you want<span
style='letter-spacing:1.1pt'> </span>to<span style='letter-spacing:1.15pt'> </span>move<span
style='letter-spacing:1.1pt'> </span>up<span style='letter-spacing:1.15pt'> </span>to<span
style='letter-spacing:1.15pt'> </span>a<span style='letter-spacing:1.1pt'> </span>newer<span
style='letter-spacing:1.1pt'> </span>version,<span style='letter-spacing:1.15pt'>
</span>you<span style='letter-spacing:1.15pt'> </span>will<span
style='letter-spacing:1.1pt'> </span>have<span style='letter-spacing:1.1pt'> </span>to<span
style='letter-spacing:1.15pt'> </span>edit<span style='letter-spacing:1.1pt'> </span>the<span
style='letter-spacing:1.1pt'> </span>file<span style='letter-spacing:1.1pt'> </span>to
specify the new version. Generally, thats a good thing because it prevents
changes<span style='letter-spacing:2.0pt'> </span>in<span style='letter-spacing:
2.0pt'> </span>dependencies<span style='letter-spacing:2.0pt'> </span>from<span
style='letter-spacing:2.0pt'> </span>breaking<span style='letter-spacing:2.0pt'>
</span>your<span style='letter-spacing:2.0pt'> </span>project<span
style='letter-spacing:2.0pt'> </span>without<span style='letter-spacing:2.0pt'>
</span>your knowing about it. <a name="_bookmark153"></a>Version numbers in npm
are parsed by a component called <i>semver </i>(for semantic versioning). If
you want more information about versioning in npm, consult the </span><a
href="http://try.github.io/"><span style='color:#070707'>Semantic Versioning
Specification</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection82>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Node_Modules"></a><a
name="_bookmark155"></a><span style='color:#333333'>and<span style='letter-spacing:
.45pt'> </span></span><a href="http://bit.ly/34Vr3lX"><span style='color:#070707'>this<span
style='letter-spacing:.45pt'> </span>article<span style='letter-spacing:.4pt'> </span>by<span
style='letter-spacing:.5pt'> </span>Tamas<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>Piros</span></span></a><span style='color:#333333;
letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;The Semantic Versioning Specification states that software using semantic versioning must declare a public API. Ive always found this wording to be confusing; what they really mean is someone must care about interfacing with your software. If you consider this in the broadest sense, it could really be construed to mean anything. So dont get hung up on that part of the specification; the important details are in the format.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Since the <i>package.json </i>file lists all the
dependencies, the <i>node_modules </i>directory<span style='letter-spacing:
1.2pt'> </span>is<span style='letter-spacing:1.15pt'> </span>really<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.15pt'> </span>derived<span
style='letter-spacing:1.2pt'> </span>artifact.<span style='letter-spacing:1.2pt'>
</span>That<span style='letter-spacing:1.15pt'> </span>is,<span
style='letter-spacing:1.2pt'> </span>if<span style='letter-spacing:1.15pt'> </span>you<span
style='letter-spacing:1.2pt'> </span>were<span style='letter-spacing:1.15pt'> </span>to<span
style='letter-spacing:1.2pt'> </span>delete<span style='letter-spacing:1.15pt'>
</span>it,<span style='letter-spacing:1.2pt'> </span>all you would have to do
to get the project working again would be to run </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>npm install</span><span
style='color:#333333'>, which will re-create the directory and put all the
necessary dependencies in it. It is for this reason that I recommend putting </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node_modules<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>in<span
style='letter-spacing:1.7pt'> </span>your<span style='letter-spacing:1.65pt'> </span><i>.gitignore<span
style='letter-spacing:1.65pt'> </span></i>file<span style='letter-spacing:1.65pt'>
</span>and<span style='letter-spacing:1.7pt'> </span>not<span style='letter-spacing:
1.65pt'> </span>including<span style='letter-spacing:1.7pt'> </span>it<span
style='letter-spacing:1.65pt'> </span>in<span style='letter-spacing:1.7pt'> </span>source
control. However, some people feel that your repository should contain
everything<span style='letter-spacing:1.75pt'> </span>necessary<span
style='letter-spacing:1.75pt'> </span>to<span style='letter-spacing:1.75pt'> </span>run<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.7pt'> </span>project<span
style='letter-spacing:1.7pt'> </span>and<span style='letter-spacing:1.75pt'> </span>prefer<span
style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:1.75pt'> </span>keep<span
style='letter-spacing:1.75pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>node_modules </span><span style='color:#333333'>in<span
style='letter-spacing:1.25pt'> </span>source<span style='letter-spacing:1.2pt'>
</span>control.<span style='letter-spacing:1.25pt'> </span>I<span
style='letter-spacing:1.2pt'> </span>find<span style='letter-spacing:1.25pt'> </span>that<span
style='letter-spacing:1.2pt'> </span>this<span style='letter-spacing:1.2pt'> </span>is<span
style='letter-spacing:1.2pt'> </span>noise<span style='letter-spacing:1.2pt'>
</span>in<span style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:
1.2pt'> </span>repository,<span style='letter-spacing:1.25pt'> </span>and<span
style='letter-spacing:1.25pt'> </span>I<span style='letter-spacing:1.2pt'> </span>prefer
to omit it.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;As of version of 5 of npm, an additional file, package-lock.json, will be created. Whereas package.json can be loose in its specification of dependency versions (with the ^ and ~ version modifiers), package-lock.json records the exact versions that were installed, which can be helpful if you need to re-create the exact dependency versions in your project. I recommend you check this file into source control and dont modify it by hand. See the package-lock.json documentation for more information.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Project<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Metadata</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection83>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="Project_Metadata"></a><a name="_bookmark156"></a><a name="_bookmark157"></a><span
style='color:#333333'>The<span style='letter-spacing:1.55pt'> </span>other<span
style='letter-spacing:1.55pt'> </span>purpose<span style='letter-spacing:1.55pt'>
</span>of<span style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:
1.55pt'> </span><i>package.json<span style='letter-spacing:1.6pt'> </span></i>file<span
style='letter-spacing:1.55pt'> </span>is<span style='letter-spacing:1.55pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>store<span style='letter-spacing:1.55pt'> </span>project<span
style='letter-spacing:1.55pt'> </span>metadata, such as the name of the
project, authors, license information, and so on. If you<span style='letter-spacing:
1.4pt'> </span>use<span style='letter-spacing:1.35pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm<span
style='letter-spacing:2.0pt'> </span>init<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>to<span style='letter-spacing:1.4pt'> </span>initially<span
style='letter-spacing:1.4pt'> </span>create<span style='letter-spacing:1.35pt'>
</span>your<span style='letter-spacing:1.35pt'> </span><i>package.json<span
style='letter-spacing:1.4pt'> </span></i>file,<span style='letter-spacing:1.4pt'>
</span>it<span style='letter-spacing:1.35pt'> </span>will populate<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>file<span
style='letter-spacing:1.4pt'> </span>with<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>necessary<span style='letter-spacing:1.45pt'>
</span>fields<span style='letter-spacing:1.4pt'> </span>for<span
style='letter-spacing:1.4pt'> </span>you,<span style='letter-spacing:1.45pt'> </span>and<span
style='letter-spacing:1.45pt'> </span>you<span style='letter-spacing:1.45pt'> </span>can<span
style='letter-spacing:1.45pt'> </span>update them at any time. If you intend to
make your project available on npm or GitHub,<span style='letter-spacing:1.85pt'>
</span>this<span style='letter-spacing:1.75pt'> </span>metadata<span
style='letter-spacing:1.75pt'> </span>becomes<span style='letter-spacing:1.75pt'>
</span>critical.<span style='letter-spacing:1.85pt'> </span>If<span
style='letter-spacing:1.75pt'> </span>you<span style='letter-spacing:1.85pt'> </span>would<span
style='letter-spacing:1.85pt'> </span>like<span style='letter-spacing:1.75pt'> </span>more
</span><a href="http://bit.ly/2X7GVPs"><span style='color:#333333;text-decoration:
none'>information about the fields in <i>package.json</i>, see the </span><i><span
style='color:#070707'>package.json</span></i><i><span style='color:#070707;
text-decoration:none'> </span></i><span style='color:#070707'>documentation</span><span
style='color:#333333;text-decoration:none'>. The other important piece of
metadata is the <i>REA</i></span></a><i><span style='color:#333333'>DME.md </span></i><span
style='color:#333333'>file.<span style='letter-spacing:1.35pt'> </span>This<span
style='letter-spacing:1.3pt'> </span>file<span style='letter-spacing:1.3pt'> </span>can<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>handy<span style='letter-spacing:1.35pt'> </span>place<span
style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:1.35pt'> </span>describe<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.3pt'> </span>overall<span
style='letter-spacing:1.3pt'> </span>architecture<span style='letter-spacing:
1.3pt'> </span>of the website, as well as any critical information that someone
new to the project might need. It is in a text-based wiki format called
Markdown.</span></p>

<p class=MsoBodyText style='margin-top:.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Refer<span
style='letter-spacing:.6pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.65pt'> </span></span><a href="http://bit.ly/2q7BQur"><span
style='color:#070707'>Markdown<span style='letter-spacing:.65pt'> </span>documentation</span></a><span
style='color:#070707;letter-spacing:.65pt'> </span><span style='color:#333333'>for<span
style='letter-spacing:.65pt'> </span>more<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>information.</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:13.85pt'><span style='color:#8E0011'>Node<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Modules</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark158"></a><span style='color:#333333'>As mentioned earlier, Node
modules and npm packages are related but different concepts. <i>Node modules</i>,
as the name implies, offer a mechanism for modularization and encapsulation. <i>npm
packages </i>provide a<span style='letter-spacing:4.0pt'> </span>standardized
scheme for storing, versioning, and referencing projects<span style='letter-spacing:
2.0pt'> </span>(which are not restricted to modules). For example, we import
Express<span style='letter-spacing:4.0pt'> </span>itself as a module in our
main application file:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.6pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>express<span style='letter-spacing:.6pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.6pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'express'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.25pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark159"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>require<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>is a Node function for importing a module. By default,
Node<span style='letter-spacing:4.0pt'> </span>looks for modules in the
directory <i>node_modules </i>(it should be no surprise, then, that theres an <i>express
</i>directory inside of <i>node_modules</i>). However, Node also provides a
mechanism for creating your own modules (you should<span style='letter-spacing:
1.35pt'> </span>never create your own<span style='letter-spacing:1.35pt'> </span>modules
in<span style='letter-spacing:1.35pt'> </span>the <i>node_modules </i>directory).<span
style='letter-spacing:1.35pt'> </span>In</span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection84>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>addition to modules installed into <i>node_modules </i>via
a package manager, there are more than 30 core modules provided by Node, such
as </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs</span><span
style='color:#333333'>, </span><a href="http://bit.ly/2NDIkKH"><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>http</span><span style='color:#333333;text-decoration:none'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>os</span><span style='color:#333333;text-decoration:none'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>path</span><span style='color:#333333;text-decoration:none'>. To see the
whole list, </span><span style='color:#070707'>see this illuminating Stack</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>Overflow
question</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>and refer to the</span></a><span
style='color:#333333'> </span><a href="https://nodejs.org/en/docs/"><span
style='color:#070707'>official Node documentation</span></a><a
href="http://bit.ly/2NDIkKH"><span style='color:#333333;text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets see how we can modularize the fortune cookie
functionality we implemented in the previous chapter.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>First lets create a directory to store our modules. You
can call it whatever you want, but <i>lib </i>(short for library) is a common
choice. In that folder, create a file called <i>fortune.js </i>(<i>ch04/lib/fortune.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const fortuneCookies = [&#13;&#10;&quot;Conquer your fears or they will conquer you.&quot;, &quot;Rivers need springs.&quot;,&#13;&#10;&quot;Do not fear what you don't know.&quot;, &quot;You will have a pleasant surprise.&quot;, &quot;Whenever possible, keep it simple.&quot;,&#13;&#10;]&#13;&#10;&#13;&#10;exports.getFortune = () =&gt; {&#13;&#10;const idx = Math.floor(Math.random()*fortuneCookies.length)&#13;&#10;return fortuneCookies[idx]&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:71.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="_bookmark160"></a><span style='color:#333333'>The important thing to note
here is the use of the global variable </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>exports</span><span style='color:#333333'>.<span
style='letter-spacing:4.0pt'> </span>If you want something to be visible
outside of the module, you have to add<span style='letter-spacing:4.0pt'> </span>it
to </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>exports</span><span
style='color:#333333'>. In this example, the function </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>getFortune<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>will
be available from<span style='letter-spacing:1.8pt'> </span>outside<span
style='letter-spacing:1.8pt'> </span>this<span style='letter-spacing:1.8pt'> </span>module,<span
style='letter-spacing:1.85pt'> </span>but<span style='letter-spacing:1.8pt'> </span>our<span
style='letter-spacing:1.8pt'> </span>array<span style='letter-spacing:1.85pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fortuneCookies<span
style='letter-spacing:-1.7pt'> </span></span><span style='color:#333333'>will<span
style='letter-spacing:1.8pt'> </span>be <i>completely<span style='letter-spacing:
1.7pt'> </span>hidden</i>.<span style='letter-spacing:1.75pt'> </span>This<span
style='letter-spacing:1.7pt'> </span>is<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>good<span style='letter-spacing:1.75pt'> </span>thing:<span
style='letter-spacing:1.7pt'> </span>encapsulation<span style='letter-spacing:
1.75pt'> </span>allows<span style='letter-spacing:1.7pt'> </span>for<span
style='letter-spacing:1.7pt'> </span>less error-prone and fragile code.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image036.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection85>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image037.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:9.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Now in <i>meadowlark.js</i>, we can remove the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fortuneCookies<span
style='letter-spacing:-1.45pt'> </span></span><span style='color:#333333'>array<span
style='letter-spacing:4.0pt'> </span>(though there would be no harm in leaving
it; it cant conflict in any way with the array of the same name defined in <i>lib/fortune.js</i>).
It is traditional (but not required) to specify imports at the top of the file,
so at the top of the <i>meadowlark.js </i>file, add the following line (<i>ch04/meadowlark.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.6pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>fortune<span style='letter-spacing:.6pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.6pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'./lib/fortune'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Note that we prefix our module name with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>./</span><span
style='color:#333333'>. This signals to Node that it should not look for the
module in the <i>node_modules </i>directory; if we omitted that prefix, this
would fail.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.5pt'> </span>our<span
style='letter-spacing:.4pt'> </span>route<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.45pt'> </span>About<span
style='letter-spacing:.4pt'> </span>page,<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.45pt'> </span>can<span style='letter-spacing:.45pt'> </span>utilize<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.4pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>getFortune</span></p>

<p class=MsoBodyText style='margin-top:5.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>method<span
style='letter-spacing:.6pt'> </span>from<span style='letter-spacing:.55pt'> </span>our<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>module:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.get('/about', (req, res) =&gt; {&#13;&#10;res.render('about', { fortune: fortune.getFortune() } )&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>If<span
style='letter-spacing:.55pt'> </span>youre<span style='letter-spacing:.55pt'> </span>following<span
style='letter-spacing:.65pt'> </span>along,<span style='letter-spacing:.6pt'> </span>lets<span
style='letter-spacing:.55pt'> </span>commit<span style='letter-spacing:.6pt'> </span>those<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>changes:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>git<span style='letter-spacing:.6pt'> </span>add<span
style='letter-spacing:.6pt'> </span>-A<span style='letter-spacing:.6pt'> </span>git<span
style='letter-spacing:.6pt'> </span>commit<span style='letter-spacing:.65pt'> </span>-m<span
style='letter-spacing:.6pt'> </span>&quot;Moved<span style='letter-spacing:
.6pt'> </span>'fortune<span style='letter-spacing:.6pt'> </span>cookie'<span
style='letter-spacing:.65pt'> </span>into<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>module.&quot;</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You will find modules to be a powerful and easy way to
encapsulate functionality, which will improve the overall design and
maintainability of </span><a href="https://nodejs.org/api/modules.html"><span
style='color:#333333;text-decoration:none'>your project, as well as make
testing easier. Refer to the </span><span style='color:#070707'>official Node</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>module
documentation</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>for more information.</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection86>

<p class=MsoBodyText style='margin-left:54.95pt'><span style='font-size:10.0pt'><img
width=579 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image038.gif"
alt="Text Box: NOTE&#13;&#10;Node modules are sometimes called CommonJS (CJS) modules, in reference to an older specification that Node took inspiration from. The JavaScript language is adopting an official packaging mechanism, called ECMAScript Modules (ESM). If youve been writing JavaScript in React or another progressive frontend language, you may already be familiar with ESM, which uses import and export (instead of exports, module.exports, and require). For more information, see Dr. Axel Rauschmayers blog post ECMAScript 6 modules: the final syntax.&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="_bookmark163"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:84.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Now that were armed with some more
information about Git, npm, and modules, were ready to discuss how we can
produce a better product by employing good quality assurance (QA) practices in
our coding.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify'><span
style='color:#333333'>I<span style='letter-spacing:.45pt'> </span>encourage<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span>keep<span style='letter-spacing:.55pt'> </span>in<span
style='letter-spacing:.55pt'> </span>mind<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span>following<span style='letter-spacing:.55pt'>
</span>lessons<span style='letter-spacing:.45pt'> </span>from<span
style='letter-spacing:.5pt'> </span>this<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>chapter:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.6pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15767040'><span style='left:0px;position:absolute;
left:169px;top:-40428px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Version<span style='letter-spacing:2.0pt'> </span>control<span
style='letter-spacing:2.0pt'> </span>makes<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>software<span style='letter-spacing:2.0pt'>
</span>development<span style='letter-spacing:2.0pt'> </span>process<span
style='letter-spacing:2.0pt'> </span>safer and more predictable, and I
encourage you to use it even for sm<a name="_bookmark164"></a>all projects; it
builds good habits!</span></p>

<p class=MsoBodyText style='margin-top:9.25pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15767552'><span style='left:0px;position:absolute;
left:169px;top:-40515px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Modularization is an important technique for managing the
complexity of software. In addition to providing a rich ecosystem of modules
others have developed through npm, you can package your own code in modules to
better organize your project.</span></p>

<p class=MsoBodyText style='margin-top:9.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15768064'><span style='left:0px;position:absolute;
left:169px;top:-40649px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Node modules (also called CJS) use a different syntax
than ECMAScript modules (ESM), and you may have to switch between the two
syntaxes when you go between frontend and backend code. Its a good idea to be
familiar with both.</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection87>

<h1><a name="5._Quality_Assurance"></a><a name="_bookmark165"></a>Chapter<span
style='letter-spacing:.55pt'> </span>5.<span style='letter-spacing:.6pt'> </span>Quality<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Assurance</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark166"></a><i><span style='color:#333333'>Quality assurance </span></i><span
style='color:#333333'>is a phrase that is prone to send shivers down the spines
of developerswhich is unfortunate. After all, dont you want to make quality
software? Of course you do. So its not the end goal thats the sticking point;
its the politics of the matter. Ive found that two common situations arise in
web development:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Large<span style='letter-spacing:.6pt'> </span>or<span
style='letter-spacing:.65pt'> </span>well-funded<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>organizations</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Theres usually a QA department, and, unfortunately, an
adversarial relationship<span style='letter-spacing:1.9pt'> </span>springs<span
style='letter-spacing:1.8pt'> </span>up<span style='letter-spacing:1.9pt'> </span>between<span
style='letter-spacing:1.9pt'> </span>QA<span style='letter-spacing:1.8pt'> </span>and<span
style='letter-spacing:1.9pt'> </span>development.<span style='letter-spacing:
1.9pt'> </span>This<span style='letter-spacing:1.8pt'> </span>is<span
style='letter-spacing:1.8pt'> </span>the worst thing that can happen. Both
departments are playing on the same team, for the same goal, but QA often
defines success as finding more bugs,<span style='letter-spacing:2.0pt'> </span>while<span
style='letter-spacing:2.0pt'> </span>development<span style='letter-spacing:
2.0pt'> </span>defines<span style='letter-spacing:2.0pt'> </span>success<span
style='letter-spacing:2.0pt'> </span>as<span style='letter-spacing:2.0pt'> </span>generating<span
style='letter-spacing:2.0pt'> </span>fewer<span style='letter-spacing:2.0pt'> </span>bugs,
and that serves as the basis for conflict and competition.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Small<span style='letter-spacing:.7pt'> </span>organizations<span
style='letter-spacing:.7pt'> </span>and<span style='letter-spacing:.75pt'> </span>organizations<span
style='letter-spacing:.7pt'> </span>on<span style='letter-spacing:.75pt'> </span>a<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>budget</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:71.9pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><span style='color:#333333'>Often, there is no QA department; the
development staff is expected to serve the dual role of establishing QA and
developing software. This is not a ridiculous stretch of the imagination or a
conflict of interest.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.15pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>However, QA is a very different discipline than
development, and it attracts different personalities and talents. This is not
an impossible situation, and certainly there are developers out there who have
the QA mind-set, but when deadlines loom, its usually QA that gets the short
shrift, to the projects detriment.</span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>With most real-world endeavors, multiple skills are
required, and increasingly, its harder to be an expert in all of those skills.
However, some competency in the areas for which you are not directly
responsible will make you more valuable to the team and make the team function</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection88>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>more effectively. A developer acquiring QA skills offers
a great example: these two disciplines are so tightly intertwined that
cross-disciplinary understanding is extremely valuable.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It is also common to shift activities traditionally done
by QA to development, making developers responsible for QA. In this paradigm,
software engineers who specialize in QA act almost as consultants to
developers, helping them build QA into their development workflow.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whether QA roles are divided or integrated, it is clear
that understanding QA is beneficial to developers.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This book is not for QA professionals; it is aimed at
developers. So my<span style='letter-spacing:4.0pt'> </span>goal is not to make
you a QA expert but to give you some experience in<span style='letter-spacing:
4.0pt'> </span>that area. If your organization has a dedicated QA staff, it
will make it easier for you to communicate and collaborate with them. If you do
not, it will give you a starting point to establishing a comprehensive QA plan
for your project.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>In<span
style='letter-spacing:.45pt'> </span>this<span style='letter-spacing:.45pt'> </span>chapter,<span
style='letter-spacing:.5pt'> </span>youll<span style='letter-spacing:.45pt'> </span>learn<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>following:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.55pt;margin-right:205.55pt;
margin-bottom:0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:15769088'><span style='left:0px;position:absolute;
left:169px;top:-42262px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:15769600'><span style='left:0px;position:absolute;
left:169px;top:-42262px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:15770112'><span style='left:0px;position:absolute;
left:169px;top:-42262px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Quality fundamentals and effective habits The types of
tests (unit and integration) How to write unit tests with Jest</span></p>

<p class=MsoBodyText style='margin-left:105.35pt;line-height:16.1pt'><span
style='position:relative;z-index:15770624'><span style='left:0px;position:absolute;
left:169px;top:-42424px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>How<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.5pt'> </span>write<span style='letter-spacing:.5pt'> </span>integration<span
style='letter-spacing:.5pt'> </span>tests<span style='letter-spacing:.5pt'> </span>with<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Puppeteer</span></span></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15771136'><span style='left:0px;position:absolute;left:169px;
top:-42446px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>How<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.6pt'> </span>configure<span style='letter-spacing:.6pt'>
</span>ESLint<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.65pt'> </span>help<span style='letter-spacing:.6pt'> </span>prevent<span
style='letter-spacing:.6pt'> </span>common<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>errors</span></span></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15771648'><span style='left:0px;position:absolute;left:169px;
top:-42482px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>What<span style='letter-spacing:.55pt'> </span>continuous<span
style='letter-spacing:.55pt'> </span>integration<span style='letter-spacing:
.6pt'> </span>is<span style='letter-spacing:.6pt'> </span>and<span
style='letter-spacing:.6pt'> </span>where<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.65pt'> </span>start<span style='letter-spacing:.55pt'> </span>learning<span
style='letter-spacing:.6pt'> </span>about<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>it</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>The<span
style='letter-spacing:-.2pt'> </span>QA<span style='letter-spacing:-.05pt'> </span><span
style='letter-spacing:-.2pt'>Plan</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection89>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="QA:_Is_It_Worth_It?"></a><a name="_bookmark169"></a><a name="The_QA_Plan"></a><a
name="_bookmark167"></a><a name="_bookmark168"></a><span style='color:#333333'>Development
is, by and large, a creative process: envisioning something and then
translating it into reality. QA, in contrast, lives more in the realm of
validation and order. As such, a large part of QA is simply a matter of <i>knowing
what needs to be done </i>and <i>making sure it gets done</i>. It is a
discipline well-suited for checklists, procedures, and documentation. I would
go so far as to say the primary activity of QA is not the testing of software
itself but the <i>creation of a comprehensive, repeatable QA plan</i>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I recommend the creation of a QA plan for every project,
no matter how big or small (yes, even your weekend fun project!). The QA plan<span
style='letter-spacing:4.0pt'> </span>doesnt have to be big or elaborate; you
can put it in a text file or a word processing document or a wiki. The objective
of the QA plan is to record all of the steps youll take to ensure that your
product is functioning as <span style='letter-spacing:-.1pt'>intended.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In whatever form it takes, the QA plan is a living
document. You will update it in response to the following:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15772160'><span style='left:0px;position:absolute;left:169px;
top:-43128px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>New<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>features</span></span></p>

<p class=MsoBodyText style='margin-top:11.3pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:15772672'><span style='left:0px;position:absolute;
left:169px;top:-43157px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='position:relative;z-index:15773184'><span style='left:0px;position:absolute;
left:169px;top:-43157px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Changes in existing features Removed features</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:185.9pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:15773696'><span style='left:0px;position:absolute;
left:169px;top:-43283px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='position:relative;z-index:15774208'><span style='left:0px;position:absolute;
left:169px;top:-43283px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Changes in testing technologies or techniques Defects
that were missed by the QA plan</span></p>

<p class=MsoBodyText style='margin-top:2.85pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>That<span style='letter-spacing:1.55pt'> </span>last<span
style='letter-spacing:1.55pt'> </span>point<span style='letter-spacing:1.55pt'>
</span>deserves<span style='letter-spacing:1.55pt'> </span>special<span
style='letter-spacing:1.55pt'> </span>mention.<span style='letter-spacing:1.65pt'>
</span>No<span style='letter-spacing:1.65pt'> </span>matter<span
style='letter-spacing:1.55pt'> </span>how<span style='letter-spacing:1.55pt'> </span>robust<span
style='letter-spacing:1.55pt'> </span>your<span style='letter-spacing:1.55pt'> </span>QA
is, defects will happen. And when they do, you should ask yourself, How could
we have prevented this? When you answer that question, you can modify<span
style='letter-spacing:1.6pt'> </span>your<span style='letter-spacing:1.5pt'> </span>QA<span
style='letter-spacing:1.5pt'> </span>plan<span style='letter-spacing:1.6pt'> </span>accordingly<span
style='letter-spacing:1.6pt'> </span>to<span style='letter-spacing:1.6pt'> </span>prevent<span
style='letter-spacing:1.5pt'> </span>future<span style='letter-spacing:1.5pt'> </span>instances<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.5pt'> </span>this<span
style='letter-spacing:1.5pt'> </span>type of defect.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection90>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>By<span style='letter-spacing:1.45pt'> </span>now<span
style='letter-spacing:1.35pt'> </span>you<span style='letter-spacing:1.45pt'> </span>might<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.35pt'> </span>getting<span
style='letter-spacing:1.45pt'> </span>a<span style='letter-spacing:1.35pt'> </span>feel<span
style='letter-spacing:1.35pt'> </span>for<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>not<span style='letter-spacing:1.35pt'> </span>insignificant<span
style='letter-spacing:1.35pt'> </span>effort involved in QA, and you might be
reasonably wondering how much effort you want to put into it.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>QA:<span
style='letter-spacing:-.1pt'> </span>Is<span style='letter-spacing:-.1pt'> </span>It<span
style='letter-spacing:-.1pt'> </span>Worth<span style='letter-spacing:-.1pt'> </span><span
style='letter-spacing:-.25pt'>It?</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:72.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark170"></a><span style='color:#333333'>QA can be
expensivesometimes <i>very </i>expensive. So is it worth it? Its a
complicated formula with complicated inputs. Most organizations operate<span
style='letter-spacing:2.0pt'> </span>on some kind of return on investment
model. If you spend money, you must expect to receive at least as much money in
return (preferably more). With QA, though, the relationship can be muddy. A
well-established and well-regarded product, for example, may be able to get by
with quality issues<span style='letter-spacing:1.55pt'> </span>for<span
style='letter-spacing:1.55pt'> </span>longer<span style='letter-spacing:1.55pt'>
</span>than<span style='letter-spacing:1.65pt'> </span>a<span style='letter-spacing:
1.55pt'> </span>new<span style='letter-spacing:1.55pt'> </span>and<span
style='letter-spacing:1.65pt'> </span>unknown<span style='letter-spacing:1.6pt'>
</span>project.<span style='letter-spacing:1.65pt'> </span>Obviously,<span
style='letter-spacing:1.6pt'> </span>no<span style='letter-spacing:1.65pt'> </span>one
<i>wants<span style='letter-spacing:1.75pt'> </span></i>to<span
style='letter-spacing:1.8pt'> </span>produce<span style='letter-spacing:1.75pt'>
</span>a<span style='letter-spacing:1.7pt'> </span>low-quality<span
style='letter-spacing:1.8pt'> </span>product,<span style='letter-spacing:1.8pt'>
</span>but<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.7pt'> </span>pressures<span style='letter-spacing:1.75pt'>
</span>in<span style='letter-spacing:1.8pt'> </span>technology are high.
Time-to-market can be critical, and sometimes its better to come to market
with something thats less than perfect than to come to market with the perfect
product months later.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>In<span
style='letter-spacing:.55pt'> </span>web<span style='letter-spacing:.6pt'> </span>development,<span
style='letter-spacing:.6pt'> </span>quality<span style='letter-spacing:.6pt'> </span>can<span
style='letter-spacing:.6pt'> </span>be<span style='letter-spacing:.5pt'> </span>broken<span
style='letter-spacing:.6pt'> </span>down<span style='letter-spacing:.6pt'> </span>into<span
style='letter-spacing:.6pt'> </span>four<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>dimensions:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Reach</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark171"></a><span style='color:#333333'>Reach refers to the market
penetration of your product: the number of people viewing your website or using
your service. Theres a direct correlation between reach and profitability: the
more people who visit the website, the more people who buy the product or
service. From a development perspective, search engine optimization (SEO) will
have the biggest impact on reach, which is why we will be including SEO in our
QA plan.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Functionality</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark172"></a><span
style='color:#333333'>Once<span style='letter-spacing:.45pt'> </span>people<span
style='letter-spacing:.5pt'> </span>are<span style='letter-spacing:.5pt'> </span>visiting<span
style='letter-spacing:.6pt'> </span>your<span style='letter-spacing:.45pt'> </span>site<span
style='letter-spacing:.5pt'> </span>or<span style='letter-spacing:.5pt'> </span>using<span
style='letter-spacing:.6pt'> </span>your<span style='letter-spacing:.45pt'> </span>service,<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.5pt'> </span>quality<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.25pt'>of</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection91>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>your sites functionality will have a large impact on
user retention; a site that works as advertised is more likely to drive return
visits than one that isnt. Functionality offers the most opportunity for test <span
style='letter-spacing:-.1pt'>automation.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Usability</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark173"></a><span style='color:#333333'>Where functionality is
concerned with functional correctness, usability evaluates human-computer
interaction (HCI). The fundamental<span style='letter-spacing:4.0pt'> </span>question
is, Is the functionality delivered in a way that is useful to the target<span
style='letter-spacing:1.45pt'> </span>audience?<span style='letter-spacing:
1.45pt'> </span>This<span style='letter-spacing:1.45pt'> </span>often<span
style='letter-spacing:1.55pt'> </span>translates<span style='letter-spacing:
1.45pt'> </span>to<span style='letter-spacing:1.55pt'> </span>Is<span
style='letter-spacing:1.45pt'> </span>it<span style='letter-spacing:1.45pt'> </span>easy<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>use?<span
style='letter-spacing:1.45pt'> </span>though the pursuit of ease can often
oppose flexibility or power; what seems easy to a programmer might be different
from what seems easy to a nontechnical consumer. In other words, you must
consider your target audience when assessing usability. Since a fundamental
input to a usability measurement is a user, usability is not usually something
that can<span style='letter-spacing:1.75pt'> </span>be<span style='letter-spacing:
1.65pt'> </span>automated.<span style='letter-spacing:1.75pt'> </span>However,<span
style='letter-spacing:1.75pt'> </span>user<span style='letter-spacing:1.65pt'> </span>testing<span
style='letter-spacing:1.75pt'> </span>should<span style='letter-spacing:1.75pt'>
</span>be<span style='letter-spacing:1.65pt'> </span>included<span
style='letter-spacing:1.75pt'> </span>in<span style='letter-spacing:1.75pt'> </span>your
QA plan.</span></p>

<p class=MsoNormal style='margin-top:10.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Aesthetics</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark174"></a><span style='color:#333333'>Aesthetics<span
style='letter-spacing:1.6pt'> </span>is<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.6pt'> </span>most<span style='letter-spacing:1.6pt'> </span>subjective<span
style='letter-spacing:1.6pt'> </span>of<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.6pt'> </span>four<span style='letter-spacing:1.6pt'> </span>dimensions<span
style='letter-spacing:1.6pt'> </span>and<span style='letter-spacing:1.65pt'> </span>is
therefore the least relevant to development. While there are few development
concerns when it comes to your sites aesthetics, routine reviews of your
sites aesthetics should be part of your QA plan. Show your site to a
representative sample audience, and find out if it feels dated or does not
invoke the desired response. Keep in mind that aesthetics is time sensitive
(aesthetic standards shift over time) and audience specific (what appeals to
one audience may be completely uninteresting to another).</span></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:131.15pt;
margin-bottom:0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;
line-height:133%'><span style='color:#333333'>While all four dimensions should
be addressed in your QA plan, functionality testing and SEO can be tested
automatically during development, so that will be the focus of this chapter.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='text-align:justify'><span style='color:#8E0011'>Logic<span
style='letter-spacing:-.25pt'> </span>Versus<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Presentation</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection92>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:71.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Logic_Versus_Presentation"></a><a name="_bookmark175"></a><a
name="_bookmark176"></a><span style='color:#333333'>Broadly speaking, in your
website, there are two realms: <i>logic </i>(often called <i>business logic</i>,
a term I eschew because of its bias toward<span style='letter-spacing:4.0pt'> </span>commercial
endeavor) and <i>presentation</i>. You can think of your websites logic
existing in kind of a pure intellectual domain. For example, in our Meadowlark
Travel scenario, there might be a rule that a customer must possess a valid
drivers license before renting a scooter. This is a simple data-based<span
style='letter-spacing:1.7pt'> </span>rule:<span style='letter-spacing:1.65pt'> </span>for<span
style='letter-spacing:1.65pt'> </span>every<span style='letter-spacing:1.7pt'> </span>scooter<span
style='letter-spacing:1.65pt'> </span>reservation,<span style='letter-spacing:
1.7pt'> </span>the<span style='letter-spacing:1.65pt'> </span>user<span
style='letter-spacing:1.65pt'> </span>needs<span style='letter-spacing:1.65pt'>
</span>a<span style='letter-spacing:1.65pt'> </span>valid drivers<span
style='letter-spacing:1.6pt'> </span>license.<span style='letter-spacing:1.7pt'>
</span>The<span style='letter-spacing:1.6pt'> </span><i>presentation<span
style='letter-spacing:1.7pt'> </span></i>of<span style='letter-spacing:1.6pt'> </span>this<span
style='letter-spacing:1.6pt'> </span>is<span style='letter-spacing:1.6pt'> </span>disconnected.<span
style='letter-spacing:1.7pt'> </span>Perhaps<span style='letter-spacing:1.6pt'>
</span>its<span style='letter-spacing:1.6pt'> </span>just a<span
style='letter-spacing:1.35pt'> </span>checkbox<span style='letter-spacing:1.4pt'>
</span>on<span style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:
1.35pt'> </span>final<span style='letter-spacing:1.35pt'> </span>form<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>order<span style='letter-spacing:1.35pt'>
</span>page,<span style='letter-spacing:1.4pt'> </span>or<span
style='letter-spacing:1.35pt'> </span>perhaps<span style='letter-spacing:1.35pt'>
</span>the<span style='letter-spacing:1.35pt'> </span>customer has to provide a
valid drivers license number, which is validated by Meadowlark<span
style='letter-spacing:2.0pt'> </span>Travel.<span style='letter-spacing:2.0pt'>
</span>Its<span style='letter-spacing:2.0pt'> </span>an<span style='letter-spacing:
2.0pt'> </span>important<span style='letter-spacing:2.0pt'> </span>distinction,<span
style='letter-spacing:2.0pt'> </span>because<span style='letter-spacing:2.0pt'>
</span>things<span style='letter-spacing:2.0pt'> </span>should be as clear and
simple as possible in the logic domain, whereas the presentation can be as
complicated or as simple as it needs to be. The presentation is also subject to
usability and aesthetic concerns, whereas the business domain is not.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whenever possible, you should seek a clear delineation
between your<span style='letter-spacing:2.0pt'> </span>logic and presentation.
There are many ways to do that, and in this book, we will be focusing on
encapsulating logic in JavaScript modules.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Presentation, on the other hand, will be a combination of
HTML, CSS, multimedia, JavaScript, and frontend frameworks like React, Vue, or <span
style='letter-spacing:-.1pt'>Angular.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><a name="The_Types_of_Tests"></a><a
name="_bookmark177"></a><span style='color:#8E0011'>The<span style='letter-spacing:
-.25pt'> </span>Types<span style='letter-spacing:-.1pt'> </span>of<span
style='letter-spacing:-.1pt'> Tests</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark178"></a><span style='color:#333333'>The type of testing we will
be considering in this book falls into two broad categories: unit testing and
integration testing (I am considering system testing to be a type of
integration testing). Unit testing is very fine-grained, testing single
components to make sure they function properly, whereas integration testing
tests the interaction between multiple components or</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection93>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>even<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span>whole<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>system.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In general, unit testing is more useful and appropriate
for logic testing. Integration testing is useful in both realms.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Overview_of_QA_Techniques"></a><a name="_bookmark179"></a><span
style='color:#8E0011'>Overview<span style='letter-spacing:-.15pt'> </span>of<span
style='letter-spacing:-.15pt'> </span>QA<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Techniques</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark180"></a><span style='color:#333333'>In this book, we will be
using the following techniques and software to accomplish thorough testing:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Unit<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>tests</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark181"></a><span style='color:#333333'>Unit tests cover the
smallest units of functionality in your application, usually a single function.
They are almost always written by<span style='letter-spacing:4.0pt'> </span>developers,
not QA (though QA should be empowered to assess the quality and coverage of
unit tests). In this book, well be using Jest for unit tests.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Integration<span style='letter-spacing:1.05pt'> </span><span
style='letter-spacing:-.1pt'>tests</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark182"></a><span style='color:#333333'>Integration tests cover
larger units of functionality, usually involving multiple parts of your
application (functions, modules, subsystems, etc.). Since we are building web
applications, the ultimate integration test is to render the application in a
browser, manipulate that browser, and verify that the application behaves as
expected.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>These tests are typically more complicated to set up and
maintain, and since the focus of this book isnt QA, well have only one simple
example of this, using Puppeteer and Jest.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Linting</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark183"></a><span style='color:#333333'>Linting isnt about finding
errors but <i>potential </i>errors. The general concept of linting is that it
identifies areas that could represent possible errors, or fragile constructs
that could lead to errors in the future. We<span style='letter-spacing:2.0pt'> </span>will
be using ESLint for linting.</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection94>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets start with Jest, our test framework (which will run
both unit and integration tests).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Installing_and_Configuring_Jest"></a><a name="_bookmark184"></a><span
style='color:#8E0011'>Installing<span style='letter-spacing:-.35pt'> </span>and<span
style='letter-spacing:-.35pt'> </span>Configuring<span style='letter-spacing:
-.35pt'> </span><span style='letter-spacing:-.2pt'>Jest</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark185"></a><span style='color:#333333'>I struggled somewhat to
decide which testing framework to use in this<span style='letter-spacing:4.0pt'>
</span>book. Jest began its life as a framework to test React applications (and
it is still the obvious choice for that), but Jest is not React-specific and is
an excellent<span style='letter-spacing:2.0pt'> </span>general-purpose<span
style='letter-spacing:2.0pt'> </span>testing<span style='letter-spacing:2.0pt'>
</span>framework.<span style='letter-spacing:2.0pt'> </span>Its<span
style='letter-spacing:2.0pt'> </span>certainly<span style='letter-spacing:2.0pt'>
</span>not<span style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:
2.0pt'> </span>only one: </span><a href="https://mochajs.org/"><span
style='color:#070707'>Mocha</span></a><span style='color:#333333'>, </span><a
href="https://jasmine.github.io/"><span style='color:#070707'>Jasmine</span></a><span
style='color:#333333'>, </span><a href="https://github.com/avajs/ava"><span
style='color:#070707'>Ava</span></a><span style='color:#333333'>, and </span><a
href="https://github.com/substack/tape"><span style='color:#070707'>Tape</span></a><span
style='color:#070707'> </span><span style='color:#333333'>are also excellent
choices.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the end, I chose Jest because I feel it offers the
best overall experience </span><a href="http://bit.ly/33ErHUE"><span
style='color:#333333;text-decoration:none'>(an opinion backed by Jests
excellent scores in the </span><span style='color:#070707'>State of JavaScript</span><span
style='color:#070707;letter-spacing:2.0pt;text-decoration:none'> </span><span
style='color:#070707'>2018</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#333333;text-decoration:none'>survey). That
said, there are a lot of similarities among the testin</span></a><span
style='color:#333333'>g frameworks mentioned here, so you should be able to
take what you learn and apply it to your favorite test framework.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>To<span
style='letter-spacing:.5pt'> </span>install<span style='letter-spacing:.5pt'> </span>Jest,<span
style='letter-spacing:.55pt'> </span>run<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.5pt'> </span>following<span style='letter-spacing:.55pt'>
</span>from<span style='letter-spacing:.45pt'> </span>your<span
style='letter-spacing:.5pt'> </span>project<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>root:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.85pt'> </span>install<span
style='letter-spacing:.85pt'> </span>--save-dev<span style='letter-spacing:
.85pt'> </span><span style='letter-spacing:-.2pt'>jes<a name="Unit_Testing"></a><a
name=Mocking></a><a name="_bookmark186"></a>t</span> </span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>(Note that we use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>--save-dev<span style='letter-spacing:-2.2pt'> </span></span><span
style='color:#333333'>here; this tells npm that this is a development
dependency and is not needed for the application itself to function; it will be
listed in the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>devDependencies<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>section of the <i>package.json </i>file instead of the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>dependencies<span
style='letter-spacing:-1.0pt'> </span></span><span style='color:#333333'>section.)</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Before we move on, we need a way to run Jest (which will
run any tests in our project). The conventional way to do that is to add a
script to <i>package.json</i>. Edit <i>package.json </i>(<i>ch05/package.json </i>in
the companion<span style='letter-spacing:2.0pt'> </span>repo), and modify the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>scripts<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>property
(or add it if it doesnt exist):</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;color:#3F3F3F;letter-spacing:3.05pt;background:#FBFBFB'>
</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#3F3F3F;background:#FBFBFB'>&quot;scripts&quot;:<span style='letter-spacing:
.55pt'> </span><span style='letter-spacing:-.5pt'>{</span> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection95>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt;
font-family:"BIZ UDGothic",sans-serif'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: &quot;test&quot;: &quot;jest&quot;&#13;&#10;},&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:11.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.4pt'> </span>you<span style='letter-spacing:.5pt'> </span>can<span
style='letter-spacing:.5pt'> </span>run<span style='letter-spacing:.45pt'> </span>all<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.45pt'> </span>tests<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.45pt'> </span>project<span style='letter-spacing:.4pt'> </span>simply<span
style='letter-spacing:.5pt'> </span>by<span style='letter-spacing:.5pt'> </span>typing<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>that:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>tes<a
name="Refactoring_the_Application_for_Testabil"></a><a name="_bookmark187"></a>t</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you try that now, youll probably get an error that
there arent any tests configuredbecause we havent added any yet. So lets
write some unit <span style='letter-spacing:-.1pt'>tests!</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;Normally, if you add a script to your package.json file, you would run it with npm run. For example, if you added a script foo, you would type npm run foo to run it. The test script is so common, however, that npm knows to run it if you simply type npm test.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Unit<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Testing</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark189"></a><span style='color:#333333'>Now well turn our
attention to unit testing. Since the focus of unit testing<span
style='letter-spacing:2.0pt'> </span>is on isolating a single function or
component, well first need to learn about mocking, an important technique for
achieving that isolation.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Mocking</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:90.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark190"></a><span style='color:#333333'>One of the
challenges youll frequently face is how to write code that is testable. In
general, code that tries to do too much or assumes a lot of dependencies is
harder to test than focused code that assumes few or no <span style='letter-spacing:
-.1pt'>dependencies.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify'><span
style='color:#333333'>Whenever<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.65pt'> </span>have<span style='letter-spacing:.6pt'> </span>a<span
style='letter-spacing:.6pt'> </span>dependency,<span style='letter-spacing:
.65pt'> </span>you<span style='letter-spacing:.65pt'> </span>have<span
style='letter-spacing:.6pt'> </span>something<span style='letter-spacing:.65pt'>
</span>that<span style='letter-spacing:.6pt'> </span>needs<span
style='letter-spacing:.6pt'> </span>to<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.25pt'>be</span></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify'><i><span
style='color:#333333'>mocked<span style='letter-spacing:.65pt'> </span></span></i><span
style='color:#333333'>(simulated)<span style='letter-spacing:.6pt'> </span>for<span
style='letter-spacing:.6pt'> </span>effective<span style='letter-spacing:.6pt'>
</span>testing.<span style='letter-spacing:.7pt'> </span>For<span
style='letter-spacing:.6pt'> </span>example,<span style='letter-spacing:.65pt'>
</span>our<span style='letter-spacing:.6pt'> </span><span style='letter-spacing:
-.1pt'>primary</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection96>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Writing_Our_First_Test"></a><a name="_bookmark192"></a><span
style='color:#333333'>dependency is Express, which is already thoroughly
tested, so we dont need or want to test Express itself, just <i>how we use it</i>.
The only way we can determine if were using Express correctly is to simulate
Express <span style='letter-spacing:-.1pt'>itself.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>The routes we currently have (the home page, About page,
404 page, and 500 page) are pretty difficult to test because they assume three<span
style='letter-spacing:4.0pt'> </span>dependencies on Express: they assume we
have an Express app (so we can have </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get</span><span style='color:#333333'>), as well as request
and response objects. Fortunately, its pretty easy to eliminate the dependence
on the Express app itself (the<span style='letter-spacing:2.0pt'> </span>request
and response objects are hardermore on that later). Fortunately, were not
using very much functionality from the response object (were using<span
style='letter-spacing:1.25pt'> </span>only<span style='letter-spacing:1.25pt'> </span>the<span
style='letter-spacing:1.2pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>render<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>method),<span style='letter-spacing:1.25pt'> </span>so<span
style='letter-spacing:1.25pt'> </span>it<span style='letter-spacing:1.2pt'> </span>will<span
style='letter-spacing:1.2pt'> </span>be<span style='letter-spacing:1.2pt'> </span>easy<span
style='letter-spacing:1.25pt'> </span>to<span style='letter-spacing:1.25pt'> </span>mock<span
style='letter-spacing:1.25pt'> </span>it,<span style='letter-spacing:1.25pt'> </span>which<span
style='letter-spacing:1.25pt'> </span>we will see shortly.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Refactoring<span style='letter-spacing:-.3pt'> </span>the<span
style='letter-spacing:-.3pt'> </span>Application<span style='letter-spacing:
-.3pt'> </span>for<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Testability</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark191"></a><span style='color:#333333'>We dont really have a lot
of code in our application to test yet. To date, weve currently added only a
handful of route handlers and the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>getFortune<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>function.</span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>To make our app more
testable, were going to <i>extract </i>the actual route handlers to their own
library. Create a file <i>lib/handlers.js </i>(<i>ch05/lib/handlers.js </i>in
the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const fortune = require('./fortune') exports.home = (req, res) =&gt; res.render('home')&#13;&#10;exports.about = (req, res) =&gt;&#13;&#10;res.render('about', { fortune: fortune.getFortune() }) exports.notFound = (req, res) =&gt; res.render('404')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection97>

<p class=MsoNormal align=center style='margin-top:2.0pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>exports</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>.</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>serverError<span style='letter-spacing:.65pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;background:#FBFBFB'>err</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>,<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>next</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'500'</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now we can rewrite our <i>meadowloark.js
</i>application file to use these handlers (<i>ch05/meadowlark.js </i>in the
companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: // typically at the top of the file&#13;&#10;const handlers = require('./lib/handlers') app.get('/', handlers.home) app.get('/about', handlers.about)&#13;&#10;// custom 404 page&#13;&#10;app.use(handlers.notFound)&#13;&#10;&#13;&#10;// custom 500 page&#13;&#10;app.use(handlers.serverError)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its easier now to test those handlers: they are just
functions that take request and response objects, and we need to verify that
were using those objects correctly.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Writing<span style='letter-spacing:-.25pt'> </span>Our<span
style='letter-spacing:-.2pt'> </span>First<span style='letter-spacing:-.2pt'>
Test</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark193"></a><span style='color:#333333'>There<span
style='letter-spacing:1.4pt'> </span>are<span style='letter-spacing:1.4pt'> </span>multiple<span
style='letter-spacing:1.4pt'> </span>ways<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>identify<span style='letter-spacing:1.45pt'>
</span>tests<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>Jest.<span style='letter-spacing:1.45pt'>
</span>The<span style='letter-spacing:1.4pt'> </span>two<span style='letter-spacing:
1.45pt'> </span>most<span style='letter-spacing:1.4pt'> </span>common are to
put tests in subdirectories named <u> </u><i><span style='letter-spacing:-.2pt'>test</span></i><u> </u>(two
underscores before and after <i>test</i>) and to name files with the extension <i>.test.js</i>.
I personally like to combine the two techniques because they both serve a
purpose in my mind. Putting tests in <u> </u><i><span style='letter-spacing:
-.2pt'>test</span></i><u> </u>directories keeps my test from cluttering up
my source directories (otherwise, everything will look doubled in your source
directoryyoull have a <i>foo.test.js </i>for every file <i>foo.js</i>), and
having the <i>.test.js </i>extension means that if Im looking at a bunch of
tabs in my editor, I can see at a glance what is a test and what is source
code.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>So<span style='letter-spacing:.35pt'> </span>lets<span
style='letter-spacing:.35pt'> </span>create<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.3pt'> </span>file<span style='letter-spacing:.35pt'> </span>called<span
style='letter-spacing:.4pt'> </span><i><span style='letter-spacing:-.2pt'>lib/</span></i><u> </u><i><span
style='letter-spacing:-.1pt'>tests</span></i><u> </u><i><span
style='letter-spacing:-.1pt'>/handlers.test.js</span></i></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection98>

<p class=MsoNormal style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>(<i>ch05/lib/</i></span><u><span
style='font-size:14.0pt;color:#333333'> </span></u><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>tests</span></i><u><span
style='font-size:14.0pt;color:#333333'> </span></u><i><span
style='font-size:14.0pt;color:#333333'>/handlers.test.js<span style='letter-spacing:
.7pt'> </span></span></i><span style='font-size:14.0pt;color:#333333'>in<span
style='letter-spacing:.8pt'> </span>the<span style='letter-spacing:.75pt'> </span>companion<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>repo):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const handlers = require('../handlers')&#13;&#10;&#13;&#10;test('home page renders', () =&gt; {&#13;&#10;const req = {}&#13;&#10;const res = { render: jest.fn() } handlers.home(req, res) expect(res.render.mock.calls[0][0]).toBe('home')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre new to testing, this will probably look pretty
weird, so lets break<span style='letter-spacing:4.0pt'> </span>it down.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>First, we import the code were trying to test (in this
case, the route handlers). Then each test has a description; were trying to
describe whats being tested. In this case, we want to make sure that the home
page gets <span style='letter-spacing:-.1pt'>rendered.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark194"></a><span style='color:#333333'>To invoke our render, we
need request and response objects. Wed be writing code all week if we wanted
to simulate the whole request and response objects, but fortunately we dont
actually need much from them. We know that we dont need anything at all from
the request object in this case (so we just use an empty object), and the only
thing we need from the response object is a render method. Note how we construct
the render function: we just call a Jest method called <i>jest.fn()</i>. This
creates a generic mock function that keeps track of how its called.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark195"></a><span style='color:#333333'>Finally, we get to the
important part of the test: assertions. Weve gone to all the trouble to invoke
the code were testing, but how do we assert that<span style='letter-spacing:
4.0pt'> </span>it did what it should? In this case, what the code should do is
call the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>render<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>method
of the response object with the string </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>home</span><span style='color:#333333'>. Jests mock function
keeps track of all the times it got called, so all we have to do is</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection99>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>verify it got called exactly once (it would probably be a
problem if it got called twice), which is what the first </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>expect<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>does,
and that it gets called with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>home<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>as its first argument (the first array index specifies
which invocation, and the second one specifies which argument).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image042.gif"
  alt="Text Box: TIP&#13;&#10;It can get tedious to constantly be rerunning your tests every time you make a change to your code. Fortunately, most test frameworks have a watch mode that constantly monitors your code and tests for changes and reruns them automatically. To run your tests in watch mode, type npm test -- --watch (the extra double-dash is necessary to let npm know to pass the --watch argument to Jest).&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:81.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Go<span style='letter-spacing:1.65pt'> </span>ahead<span
style='letter-spacing:1.65pt'> </span>and<span style='letter-spacing:1.65pt'> </span>change<span
style='letter-spacing:1.55pt'> </span>your<span style='letter-spacing:1.55pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>home<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>handler<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.65pt'> </span>render<span
style='letter-spacing:1.55pt'> </span>something<span style='letter-spacing:
1.65pt'> </span>other<span style='letter-spacing:1.55pt'> </span>than the home
view; youll notice that your test has now failed, and you caught<span
style='letter-spacing:4.0pt'> </span>a bug!</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>We<span
style='letter-spacing:.4pt'> </span>can<span style='letter-spacing:.45pt'> </span>now<span
style='letter-spacing:.4pt'> </span>add<span style='letter-spacing:.45pt'> </span>tests<span
style='letter-spacing:.45pt'> </span>for<span style='letter-spacing:.4pt'> </span>our<span
style='letter-spacing:.4pt'> </span>other<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>routes:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: test('about page renders with fortune', () =&gt; {&#13;&#10;const req = {}&#13;&#10;const res = { render: jest.fn() } handlers.about(req, res) expect(res.render.mock.calls.length).toBe(1) expect(res.render.mock.calls[0][0]).toBe('about') expect(res.render.mock.calls[0][1])&#13;&#10;.toEqual(expect.objectContaining({ fortune: expect.stringMatching(/\W/),&#13;&#10;}))&#13;&#10;})&#13;&#10;&#13;&#10;test('404 handler renders', () =&gt; {&#13;&#10;const req = {}&#13;&#10;const res = { render: jest.fn() } handlers.notFound(req, res)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection100>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Code_Coverage"></a><a
name="_bookmark199"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: expect(res.render.mock.calls.length).toBe(1) expect(res.render.mock.calls[0][0]).toBe('404')&#13;&#10;})&#13;&#10;&#13;&#10;test('500 handler renders', () =&gt; { const err = new Error('some error') const req = {}&#13;&#10;const res = { render: jest.fn() }&#13;&#10;const next = jest.fn() handlers.serverError(err, req, res, next) expect(res.render.mock.calls.length).toBe(1) expect(res.render.mock.calls[0][0]).toBe('500')&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Note some extra functionality in the about and server
error tests. The about render function gets called with a fortune, so weve
added an expectation that it will get a fortune that is a string that contains
at least one character. Its beyond the scope of this book to describe all of
the functionality that is available to you through Jest and its </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>expect<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>method,
but you<span style='letter-spacing:1.8pt'> </span>can<span style='letter-spacing:
1.8pt'> </span>find<span style='letter-spacing:1.8pt'> </span>comprehensive
documentation<span style='letter-spacing:1.8pt'> </span>on<span
style='letter-spacing:1.8pt'> </span>the </span><a href="https://jestjs.io/"><span
style='color:#070707'>Jest home page</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Note that the server error handler takes four arguments,
not two, so we have to provide additional mocks<a name="_bookmark196"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><a name="Test_Maintenance"></a><a
name="_bookmark197"></a><span style='color:#3F3F3F'>Test<span style='letter-spacing:
-.25pt'> </span><span style='letter-spacing:-.1pt'>Maintenance</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark198"></a><span style='color:#333333'>You might be realizing that
tests are not a set it and forget it affair. For example, if we renamed our
home view for legitimate reasons, our test would fail, and then we would have
to fix the test in addition to fixing the <span style='letter-spacing:-.1pt'>code.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For this reason, teams put a lot of effort into setting
realistic expectations about what should be tests and how specific the tests
should be. For example, we didnt have to check to see if the about handler
was being called<span style='letter-spacing:.5pt'> </span>with<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.45pt'> </span>fortunewhich<span
style='letter-spacing:.55pt'> </span>would<span style='letter-spacing:.55pt'> </span>save<span
style='letter-spacing:.45pt'> </span>us<span style='letter-spacing:.5pt'> </span>from<span
style='letter-spacing:.45pt'> </span>having<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.5pt'> </span>fix<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.5pt'> </span>test<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.25pt'>if</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection101>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>we<span
style='letter-spacing:.35pt'> </span>ditch<span style='letter-spacing:.45pt'> </span>that<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>feature.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Furthermore, I cant offer much advice about how
thoroughly you should test your code. I would expect you to have very different
standards for testing code for avionics or medical equipment than for testing
the code behind a marketing website.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:84.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>What I can offer you is a way to answer the
question, How much of my code is tested? The answer to that is called <i>code
coverage</i>, which well discuss next.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt;text-align:justify'><span style='color:#3F3F3F'>Code<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Coverage</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:81.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark200"></a><span style='color:#333333'>Code coverage
offers a quantitative answer to how much of your code is tested,<span
style='letter-spacing:.55pt'> </span>but<span style='letter-spacing:.5pt'> </span>like<span
style='letter-spacing:.5pt'> </span>most<span style='letter-spacing:.5pt'> </span>topics<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.6pt'> </span>programming,<span
style='letter-spacing:.55pt'> </span>there<span style='letter-spacing:.5pt'> </span>are<span
style='letter-spacing:.5pt'> </span>no<span style='letter-spacing:.55pt'> </span>simple<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>answers.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Jest helpfully provides some automated code coverage
analysis. To see how much of your code is tested, run the following:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.5pt'> </span>test<span
style='letter-spacing:.55pt'> </span>--<span style='letter-spacing:.55pt'> </span>--<span
style='letter-spacing:-.1pt'>coverage</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youve been following along, you should see a bunch of
reassuringly green 100% coverage numbers for the files in <i>lib</i>. Jest
will report on the coverage percentage of statements (Stmts), branches,
functions (Funcs),<span style='letter-spacing:2.0pt'> </span>and lines.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Statements are referring to JavaScript statements, such
as every<span style='letter-spacing:4.0pt'> </span>expression, control flow
statement, etc. Note that you could have 100%<span style='letter-spacing:2.0pt'>
</span>line coverage but not 100% statement coverage because you can put
multiple statements on a single line in JavaScript. Branch coverage refers to control
flow statements, such as </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>if-else</span><span style='color:#333333'>. If you have an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>if-else </span><span
style='color:#333333'>statement and your test exercises only the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>if<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>part,
you will have 50%</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection102>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Integration_Testing"></a><a
name="_bookmark203"></a><span style='color:#333333'>branch<span
style='letter-spacing:.6pt'> </span>coverage<span style='letter-spacing:.55pt'>
</span>for<span style='letter-spacing:.55pt'> </span>that<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>statement.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You<span style='letter-spacing:1.65pt'> </span>may<span
style='letter-spacing:1.65pt'> </span>note<span style='letter-spacing:1.6pt'> </span>that<span
style='letter-spacing:1.6pt'> </span><i>meadowlark.js<span style='letter-spacing:
1.6pt'> </span></i>does<span style='letter-spacing:1.6pt'> </span>not<span
style='letter-spacing:1.6pt'> </span>have<span style='letter-spacing:1.6pt'> </span>100%<span
style='letter-spacing:1.6pt'> </span>coverage.<span style='letter-spacing:1.65pt'>
</span>This<span style='letter-spacing:1.6pt'> </span>is not necessarily a
problem; if you look at our refactored <i>meadowlark.js </i>file, youll see
that most of whats in there now is simply configurationwere just gluing
things together. Were configuring Express with the relevant middleware and
starting the server. Not only would it be hard to meaningfully test this code,
but its a reasonable argument that you<span style='letter-spacing:2.0pt'> </span>shouldnt
have to since its merely assembling well-tested code.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You could even make the argument that the tests weve
written so far are not particularly useful; theyre also just verifying that
were configuring Express correctly.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once again, I have no easy answers. At the end of the
day, the type of application youre building, your level of experience, and the
size and configuration of your team will have a large impact on how far down
the test rabbit hole you go. I encourage you to err on the side of <i>too much </i>testing
than <i>not enough</i>, but with experience, youll find the just right sweet
spot.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=111 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=595 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image043.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:9.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection103>

<h2 style='margin-top:3.95pt'><span style='position:relative;z-index:-1667329024'><span
style='left:0px;position:absolute;left:111px;top:-55301px;width:595px;
height:1px'><img width=595 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image044.gif"></span></span><span
style='color:#8E0011'>Integration<span style='letter-spacing:-.5pt'> </span><span
style='letter-spacing:-.1pt'>Testing</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark204"></a><span style='color:#333333'>Theres currently<span
style='letter-spacing:1.75pt'> </span>nothing<span style='letter-spacing:1.75pt'>
</span>interesting<span style='letter-spacing:1.75pt'> </span>to<span
style='letter-spacing:1.75pt'> </span>test in<span style='letter-spacing:1.75pt'>
</span>our application; we just have a couple of pages and theres no
interaction. So before we write an integration<span style='letter-spacing:1.5pt'>
</span>test,<span style='letter-spacing:1.5pt'> </span>lets<span
style='letter-spacing:1.45pt'> </span>add<span style='letter-spacing:1.5pt'> </span>some<span
style='letter-spacing:1.45pt'> </span>functionality<span style='letter-spacing:
1.5pt'> </span>that<span style='letter-spacing:1.45pt'> </span>we<span
style='letter-spacing:1.45pt'> </span>can<span style='letter-spacing:1.5pt'> </span>test.<span
style='letter-spacing:1.5pt'> </span>In<span style='letter-spacing:1.5pt'> </span>the
interest of keeping things simple, well let that functionality be a link that
allows you to get from the home page to the About page. It doesnt get much
simpler than that! And yet, as simple as that would appear to a user,<span
style='letter-spacing:4.0pt'> </span>it is a true integration test because its
exercising not only two Express<span style='letter-spacing:2.0pt'> </span>route
handlers, but also the HTML and the DOM interaction (the user clicking the link
and the resulting page navigation). Lets add a link to <i><span
style='letter-spacing:-.1pt'>views/home.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;p&gt;Questions?  Checkout out our&#13;&#10;&lt;a href=&quot;/about&quot; data-test-id=&quot;about&quot;&gt;About Us&lt;/a&gt; page!&lt;/p&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>You might be wondering about the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>data-test-id<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>attribute.
To make testing, we need some way to identify the link so we can (virtually)
click<span style='letter-spacing:4.0pt'> </span>it. We could have used a CSS
class for this, but I prefer to reserve classes for styling and use data
attributes for automation. We also could have searched for the text <i>About Us</i>,
but that would be a fragile and expensive DOM search. We also could have
queried against the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>href<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>parameter, which would make sense (but then it would be
harder to make this test<span style='letter-spacing:4.0pt'> </span>fail, which
we want to do for educational purposes).</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We can go ahead and run our application and verify with
our clumsy human hands that the functionality works as intended before we move
on to something more automated.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Before we jump into installing Puppeteer and writing an
integration test, we<span style='letter-spacing:.4pt'> </span>need<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.45pt'> </span>modify<span
style='letter-spacing:.45pt'> </span>our<span style='letter-spacing:.4pt'> </span>application<span
style='letter-spacing:.45pt'> </span>so<span style='letter-spacing:.45pt'> </span>that<span
style='letter-spacing:.4pt'> </span>it<span style='letter-spacing:.4pt'> </span>can<span
style='letter-spacing:.5pt'> </span>be<span style='letter-spacing:.4pt'> </span>required<span
style='letter-spacing:.45pt'> </span>as<span style='letter-spacing:.4pt'> </span>a<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>module</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection104>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>(right now it is designed only to be run directly). The
way to do that in Node is a little opaque: at the bottom of <i>meadowlark.js</i>,
replace the call to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.listen<span style='letter-spacing:-.6pt'> </span></span><span
style='color:#333333'>with the following:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: if(require.main === module) { app.listen(port, () =&gt; {&#13;&#10;console.log( `Express started on http://localhost:${port}` + '; press Ctrl-C to terminate.' )&#13;&#10;})&#13;&#10;} else { module.exports = app&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Ill<span style='letter-spacing:1.35pt'> </span>skip<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.35pt'> </span>technical<span
style='letter-spacing:1.35pt'> </span>explanation<span style='letter-spacing:
1.45pt'> </span>for<span style='letter-spacing:1.35pt'> </span>this<span
style='letter-spacing:1.35pt'> </span>as<span style='letter-spacing:1.35pt'> </span>its<span
style='letter-spacing:1.35pt'> </span>rather<span style='letter-spacing:1.35pt'>
</span>tedious,<span style='letter-spacing:1.45pt'> </span>but<span
style='letter-spacing:1.35pt'> </span>if youre curious, a careful reading of </span><a
href="http://bit.ly/32BDO3H"><span style='color:#070707'>Nodes module
documentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>will make it clear. Whats important to know is that if
you run a JavaScript file directly<span style='letter-spacing:2.0pt'> </span>with<span
style='letter-spacing:2.0pt'> </span>node,<span style='letter-spacing:2.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>require.main<span
style='letter-spacing:-1.5pt'> </span></span><span style='color:#333333'>will<span
style='letter-spacing:2.0pt'> </span>equal<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>global<span style='letter-spacing:2.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>module</span><span
style='color:#333333'>; otherwise, its being imported from another module.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark205"></a><span style='color:#333333'>Now that weve got that out
of the way, we can install Puppeteer. Puppeteer is essentially a controllable,
headless version of Chrome. (<i>Headless </i>simply means that the browser is
capable of running without actually rendering a UI on-screen.) To install
Puppeteer:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.85pt'> </span>install<span
style='letter-spacing:.85pt'> </span>--save-dev<span style='letter-spacing:
.85pt'> </span><span style='letter-spacing:-.1pt'>puppeteer</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Well also install a small utility to find an open port
so that we dont get a lot of test errors because our app cant start on the
port we requested:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.85pt'> </span>install<span
style='letter-spacing:.85pt'> </span>--save-dev<span style='letter-spacing:
.85pt'> </span><span style='letter-spacing:-.1pt'>portfinder</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.4pt'> </span>we<span style='letter-spacing:.45pt'> </span>can<span
style='letter-spacing:.5pt'> </span>write<span style='letter-spacing:.45pt'> </span>an<span
style='letter-spacing:.5pt'> </span>integration<span style='letter-spacing:
.5pt'> </span>that<span style='letter-spacing:.45pt'> </span>does<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>following:</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:19.0pt'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:0cm;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Starts<span style='letter-spacing:.55pt'> </span>our<span
style='letter-spacing:.6pt'> </span>application<span style='letter-spacing:
.6pt'> </span>server<span style='letter-spacing:.6pt'> </span>on<span
style='letter-spacing:.65pt'> </span>an<span style='letter-spacing:.6pt'> </span>unoccupied<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>port</span></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection105>

<p class=MsoListParagraph style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><a name=Linting></a><a
name="_bookmark206"></a><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Launches<span style='letter-spacing:.55pt'>
</span>a<span style='letter-spacing:.6pt'> </span>headless<span
style='letter-spacing:.55pt'> </span>Chrome<span style='letter-spacing:.6pt'> </span>browser<span
style='letter-spacing:.55pt'> </span>and<span style='letter-spacing:.65pt'> </span>opens<span
style='letter-spacing:.6pt'> </span>a<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.2pt'>page</span></span></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Navigates<span style='letter-spacing:.6pt'>
</span>to<span style='letter-spacing:.7pt'> </span>our<span style='letter-spacing:
.65pt'> </span>applications<span style='letter-spacing:.65pt'> </span>home<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>page</span></span></p>

<p class=MsoListParagraph style='margin-top:10.35pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Finds<span style='letter-spacing:.6pt'> </span>a<span
style='letter-spacing:.6pt'> </span>link<span style='letter-spacing:.7pt'> </span>with<span
style='letter-spacing:.65pt'> </span></span><span style='font-size:14.0pt;
font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:none'>data-test-id=&quot;about&quot;<span
style='letter-spacing:-2.9pt'> </span></span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>and<span
style='letter-spacing:.7pt'> </span>clicks<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>it</span></span></p>

<p class=MsoListParagraph style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Waits<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.5pt'> </span>navigation<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>happen</span></span></p>

<p class=MsoListParagraph style='margin-top:11.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Verifies<span style='letter-spacing:.4pt'> </span>that<span
style='letter-spacing:.4pt'> </span>we<span style='letter-spacing:.45pt'> </span>are<span
style='letter-spacing:.4pt'> </span>on<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.45pt'> </span><i>/about<span style='letter-spacing:.4pt'>
</span></i><span style='letter-spacing:-.2pt'>page</span></span></p>

<p class=MsoNormal style='margin-top:14.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Create a directory
called <i>integration-tests </i>(youre welcome to call it something else if
you like) and a file in that directory called <i>basic- navigation.test.js </i>(<i>ch05/integration-tests/basic-navigation.test.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const portfinder = require('portfinder')&#13;&#10;const puppeteer = require('puppeteer')&#13;&#10;&#13;&#10;const app = require('../meadowlark.js')&#13;&#10;&#13;&#10;let server = null let port = null&#13;&#10;&#13;&#10;beforeEach(async () =&gt; {&#13;&#10;port = await portfinder.getPortPromise() server = app.listen(port)&#13;&#10;})&#13;&#10;&#13;&#10;afterEach(() =&gt; { server.close()&#13;&#10;})&#13;&#10;&#13;&#10;test('home page links to about page', async () =&gt; {&#13;&#10;const browser = await puppeteer.launch()&#13;&#10;const page = await browser.newPage()&#13;&#10;await page.goto(`http://localhost:${port}`) await Promise.all([&#13;&#10;page.waitForNavigation(), page.click('[data-test-id=&quot;about&quot;]'),&#13;&#10;])&#13;&#10;expect(page.url()).toBe(`http://localhost:${port}/about`)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection106>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: await browser.close()&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>We are using Jests </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>beforeEach<span style='letter-spacing:-2.65pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>afterEach<span style='letter-spacing:-2.65pt'> </span></span><span
style='color:#333333'>hooks to start our server before each test and stop it
after each test (right now we have only one<span style='letter-spacing:4.0pt'> </span>test,
so this will really be meaningful when we add more tests). We could instead use
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>beforeAll<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>afterAll<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>so
were not starting and tearing down our server for every test, which may speed
up your tests, but at the cost of not having a clean environment for each
test. That is, if one of your tests makes changes that affect the outcome of
future tests, youre introducing hard-to-maintain dependencies.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Our actual test uses Puppeteers API, which gives us a
lot of DOM query functionality. Note that almost everything here is
asynchronous, and were using<span style='letter-spacing:1.35pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>await<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>liberally<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.35pt'> </span>make<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.25pt'> </span>test<span
style='letter-spacing:1.25pt'> </span>easier<span style='letter-spacing:1.25pt'>
</span>to<span style='letter-spacing:1.35pt'> </span>read<span
style='letter-spacing:1.35pt'> </span>and<span style='letter-spacing:1.35pt'> </span>write<span
style='letter-spacing:1.25pt'> </span>(almost<span style='letter-spacing:1.25pt'>
</span>all of the Puppeteer API calls return a promise)<a name="_bookmark207"></a>.</span><a
href="#_bookmark222"><sup><span style='font-family:"Arial",sans-serif;
color:#070707'>1</span></sup></a><span style='font-family:"Arial",sans-serif;
color:#070707'> </span><span style='color:#333333'>We wrap the navigation and
the click together in a call to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Promise.all<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>to prevent race conditions per<span style='letter-spacing:
2.0pt'> </span>the Puppeteer documentation.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Theres far more functionality in the Puppeteer API than
I could hope to cover in this book. Fortunately, it has </span><a
href="http://bit.ly/2KctokI"><span style='color:#070707'>excellent
documentation</span></a><a name="_bookmark208"></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Testing is a vital backstop in ensuring the quality of
your product, but its not the only tool at your disposal. Linting helps you
prevent common<span style='letter-spacing:2.0pt'> </span>errors in the first
place<a name="_bookmark209"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>Linting</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark212"></a><span style='color:#333333'>A<span style='letter-spacing:
1.15pt'> </span>good<span style='letter-spacing:1.2pt'> </span>linter<span
style='letter-spacing:1.15pt'> </span>is<span style='letter-spacing:1.15pt'> </span>like<span
style='letter-spacing:1.15pt'> </span>having<span style='letter-spacing:1.2pt'>
</span>a<span style='letter-spacing:1.15pt'> </span>second<span
style='letter-spacing:1.2pt'> </span>set<span style='letter-spacing:1.15pt'> </span>of<span
style='letter-spacing:1.15pt'> </span>eyes:<span style='letter-spacing:1.15pt'>
</span>it<span style='letter-spacing:1.15pt'> </span>will<span
style='letter-spacing:1.15pt'> </span>spot<span style='letter-spacing:1.15pt'> </span>things<span
style='letter-spacing:1.15pt'> </span>that will slide right past our human
brains. <a name="_bookmark210"></a>The original JavaScript linter is Douglas
Crockfords JSLint.<span style='letter-spacing:1.1pt'> </span><a
name="_bookmark211"></a>In<span style='letter-spacing:1.1pt'> </span>2011,<span
style='letter-spacing:1.1pt'> </span>Anton<span style='letter-spacing:1.1pt'> </span>Kovalyov<span
style='letter-spacing:1.1pt'> </span>forked<span style='letter-spacing:1.1pt'> </span>JSLint,<span
style='letter-spacing:1.1pt'> </span>and</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection107>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>JSHint was born. Kovalyov found that JSLint was becoming
too opinionated, and he wanted to create a more customizable, community-
developed JavaScript linter. <a name="_bookmark214"></a>After <a
name="_bookmark213"></a>JSHint came Nicholas Zakas </span><a
href="https://eslint.org/"><span style='color:#070707'>ESLint</span></a><span
style='color:#333333'>, which has become the most popular choice (it won by a
landslide in the </span><a href="http://bit.ly/2Q7w32O"><span style='color:
#070707'>2017 State of JavaScript survey</span></a><span style='color:#333333'>).
In addition to its ubiquity, ESLint appears to be the most actively maintained
linter, and I prefer its flexible configuration over JSHint, and it is what I
am recommending.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>ESLint can be installed on a per project basis or
globally. To avoid inadvertently breaking things, I try to avoid global
installations (for example, if I install ESLint globally and update it
frequently, old projects may no longer lint successfully because of breaking
changes, and now I have to do the extra work of updating my project).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>To<span
style='letter-spacing:.45pt'> </span>install<span style='letter-spacing:.45pt'>
</span>ESLint<span style='letter-spacing:.45pt'> </span>in<span
style='letter-spacing:.5pt'> </span>your<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>project:</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.85pt'> </span>install<span
style='letter-spacing:.85pt'> </span>--save-dev<span style='letter-spacing:
.85pt'> </span><span style='letter-spacing:-.1pt'>eslint</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>ESLint requires a configuration file to tell it which
rules to apply. Doing this from scratch would be a time-consuming task, so
fortunately ESLint provides a utility for creating one for you. From your
project root, run the <span style='letter-spacing:-.1pt'>following:</span></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>./node_modules/.bin/eslint<span style='letter-spacing:3.05pt'>
</span>--<span style='letter-spacing:-.2pt'>init</span> </span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;If we installed ESLint globally, we could just use eslint --init. The awkward&#13;&#10;./node_modules/.bin path is required to directly run locally installed utilities. Well see soon that we dont have to do that if we add utilities to the scripts section of our package.json file, which is recommended for things we do frequently. However, creating an ESLint configuration is something we have to do only once per project.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection108>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>ESLint will ask you some questions. For most of them,
its safe to choose the defaults, but a couple deserve note:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>What<span style='letter-spacing:.5pt'> </span>type<span
style='letter-spacing:.55pt'> </span>of<span style='letter-spacing:.55pt'> </span>modules<span
style='letter-spacing:.55pt'> </span>does<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.55pt'> </span>project<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.2pt'>use?</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Since were using Node (as opposed to code that will run
in the browser), youll want to choose CommonJS (require/exports). You may
have client-side JavaScript in your project too, in which case you may want a
separate lint configuration. The easiest way to do this is to have two separate
projects, but it is possible to have multiple ESLint configurations in the same
project. Consult the </span><a href="https://eslint.org/"><span
style='color:#070707'>ESLint documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>for more information.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Which<span style='letter-spacing:.7pt'> </span>framework<span
style='letter-spacing:.65pt'> </span>does<span style='letter-spacing:.65pt'> </span>your<span
style='letter-spacing:.65pt'> </span>project<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.2pt'>use?</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Unless you see Express on there (I dont at the time of
this writing), choose None of these.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Where<span style='letter-spacing:.5pt'> </span>does<span
style='letter-spacing:.55pt'> </span>your<span style='letter-spacing:.55pt'> </span>code<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>run?</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt'><span style='color:#333333'>Choose<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.2pt'>Node.</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Now that ESLint is set up, we need a convenient way of
running it. Add the following to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>scripts<span style='letter-spacing:-1.55pt'> </span></span><span
style='color:#333333'>section of your <i>package.json</i>:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.45pt;text-align:center'><span
style='font-size:10.5pt;color:#3F3F3F;letter-spacing:3.3pt;background:#FBFBFB'>
</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#3F3F3F;background:#FBFBFB'>&quot;lint&quot;:<span style='letter-spacing:
.7pt'> </span>&quot;eslint<span style='letter-spacing:.7pt'> </span>meadowlark.js<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.2pt'>lib&quot;</span> </span></p>

<p class=MsoBodyText style='margin-top:.6pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:90.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Note that we have to explicitly tell ESLint
what files and directories we want to lint. This is an argument for collecting
all of your source under one directory (usually <i>src</i>).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>brace<span style='letter-spacing:.5pt'> </span>yourself<span
style='letter-spacing:.5pt'> </span>and<span style='letter-spacing:.55pt'> </span>run<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>following:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.45pt'> </span>run<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>lint</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Youll probably see a lot of unpleasant-looking
errorsthats usually what happens when you first run ESLint. However, if
youve been</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection109>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>following along with the Jest test, there will be some
spurious errors related to Jest, which look like this:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:69.75pt;border-collapse:collapse'>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph style='margin-left:16.15pt;line-height:12.0pt'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.25pt'>3:1</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center;
  line-height:12.0pt'><span style='font-size:10.5pt;color:#3F3F3F;letter-spacing:
  -.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph style='line-height:12.0pt'><span style='font-size:
  10.5pt;color:#3F3F3F'>'test'<span style='letter-spacing:.5pt'> </span>is<span
  style='letter-spacing:.55pt'> </span>not<span style='letter-spacing:.55pt'> </span><span
  style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph style='line-height:12.0pt'><span style='font-size:
  10.5pt;color:#3F3F3F'>no-<span style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=right style='margin-top:0cm;margin-right:5.3pt;
  margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:right'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.2pt'>5:25</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>'jest'<span
  style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.55pt'> </span>not<span
  style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>no-<span
  style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph style='margin-left:16.15pt'><span style='font-size:
  10.5pt;color:#3F3F3F;letter-spacing:-.25pt'>7:3</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>'expect'<span
  style='letter-spacing:.6pt'> </span>is<span style='letter-spacing:.6pt'> </span>not<span
  style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>no-<span
  style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph style='margin-left:16.15pt'><span style='font-size:
  10.5pt;color:#3F3F3F;letter-spacing:-.25pt'>8:3</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>'expect'<span
  style='letter-spacing:.6pt'> </span>is<span style='letter-spacing:.6pt'> </span>not<span
  style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>no-<span
  style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph style='margin-left:10.75pt'><span style='font-size:
  10.5pt;color:#3F3F3F;letter-spacing:-.2pt'>11:1</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>'test'<span
  style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.55pt'> </span>not<span
  style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>no-<span
  style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.95pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=right style='margin-top:0cm;margin-right:5.3pt;
  margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:right'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>13:25</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.95pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>'jest'<span
  style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.55pt'> </span>not<span
  style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.95pt'>
  <p class=TableParagraph><span style='font-size:10.5pt;color:#3F3F3F'>no-<span
  style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
 <tr style='height:12.9pt'>
  <td width=58 valign=top style='width:43.2pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.9pt'>
  <p class=TableParagraph style='margin-left:10.75pt;line-height:11.9pt'><span
  style='font-size:10.5pt;color:#3F3F3F;letter-spacing:-.2pt'>15:3</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FBFBFB;padding:0cm 0cm 0cm 0cm;
  height:12.9pt'>
  <p class=TableParagraph align=center style='margin-top:0cm;margin-right:5.0pt;
  margin-bottom:0cm;margin-left:5.0pt;margin-bottom:.0001pt;text-align:center;
  line-height:11.9pt'><span style='font-size:10.5pt;color:#3F3F3F;letter-spacing:
  -.1pt'>error</span></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.9pt'>
  <p class=TableParagraph style='line-height:11.9pt'><span style='font-size:
  10.5pt;color:#3F3F3F'>'expect'<span style='letter-spacing:.6pt'> </span>is<span
  style='letter-spacing:.6pt'> </span>not<span style='letter-spacing:.6pt'> </span><span
  style='letter-spacing:-.1pt'>defined</span></span></p>
  </td>
  <td width=269 valign=top style='width:201.6pt;background:#FBFBFB;padding:
  0cm 0cm 0cm 0cm;height:12.9pt'>
  <p class=TableParagraph style='line-height:11.9pt'><span style='font-size:
  10.5pt;color:#3F3F3F'>no-<span style='letter-spacing:-.1pt'>undef</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:77.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><span style='color:#333333'>ESLint (quite sensibly) doesnt appreciate
unrecognized global variables. Jest injects global variables (notably </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>test</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>describe</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>jest</span><span
style='color:#333333'>, and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>expect</span><span style='color:#333333'>). Fortunately,<span
style='letter-spacing:1.35pt'> </span>this is an<span style='letter-spacing:
1.35pt'> </span>easy<span style='letter-spacing:1.35pt'> </span>problem to<span
style='letter-spacing:1.35pt'> </span>fix.<span style='letter-spacing:1.35pt'> </span>In<span
style='letter-spacing:1.35pt'> </span>your project root,<span style='letter-spacing:
1.35pt'> </span>open<span style='letter-spacing:1.35pt'> </span>the</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:88.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
130%'><i><span style='color:#333333'>.eslintrc.js<span style='letter-spacing:
-.1pt'> </span></span></i><span style='color:#333333'>file (this is the ESLint
configuration). In the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>env<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>section, add the following:</span></p>

<p class=MsoBodyText>&nbsp;</p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>&quot;jest&quot;:<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>true,</span> </span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify'><span
style='color:#333333'>Now<span style='letter-spacing:.35pt'> </span>if<span
style='letter-spacing:.35pt'> </span>you<span style='letter-spacing:.4pt'> </span>run<span
style='letter-spacing:.4pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm<span style='letter-spacing:.75pt'> </span>run<span
style='letter-spacing:.8pt'> </span>lint<span style='letter-spacing:-3.15pt'> </span></span><span
style='color:#333333'>again,<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.4pt'> </span>should<span style='letter-spacing:.45pt'> </span>see<span
style='letter-spacing:.35pt'> </span>a<span style='letter-spacing:.35pt'> </span>lot<span
style='letter-spacing:.4pt'> </span>fewer<span style='letter-spacing:.35pt'> </span><span
style='letter-spacing:-.1pt'>errors.</span></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So<span style='letter-spacing:1.4pt'> </span>what<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.4pt'> </span>do<span
style='letter-spacing:1.4pt'> </span>about<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>remaining<span style='letter-spacing:
1.4pt'> </span>errors?<span style='letter-spacing:1.35pt'> </span>Heres<span
style='letter-spacing:1.35pt'> </span>where<span style='letter-spacing:1.35pt'>
</span>I<span style='letter-spacing:1.35pt'> </span>can<span style='letter-spacing:
1.4pt'> </span>offer wisdom but no specific guidance. Broadly speaking, a
linting error has one of three causes:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15782400'><span style='left:0px;position:absolute;
left:169px;top:-61378px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><span
style='color:#333333'>Its a legitimate problem, and you should fix it. It may
not always be obvious, in which case you may need to refer to the ESLint
documentation for the particular error.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15782912'><span style='left:0px;position:absolute;
left:169px;top:-61458px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><span
style='color:#333333'>Its a rule you dont agree with, and you can simply
disable it. Many of the rules in ESLint are a matter of opinion. Ill
demonstrate disabling a rule in a moment.</span></p>

<p class=MsoBodyText style='margin-top:9.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15783424'><span style='left:0px;position:absolute;
left:169px;top:-61543px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><span
style='color:#333333'>You agree with the rule, but theres an instance where
its infeasible or costly to fix in some specific circumstance. For<span
style='letter-spacing:2.0pt'> </span>those situations, you can disable rules
for only specific lines in a file, which well also see an example of.</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection110>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youve been following along, you should currently see
the following <span style='letter-spacing:-.1pt'>errors:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: /Users/ethan/wdne2e-companion/ch05/meadowlark.js&#13;&#10;27:5 error Unexpected console statement no-console&#13;&#10;&#13;&#10;/Users/ethan/wdne2e-companion/ch05/lib/handlers.js&#13;&#10;10:39 error 'next' is defined but never used no-unused-vars&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>ESLint complains about console logging because its not
necessarily a good way to provide output for your application; it can be noisy
and inconsistent, and, depending on how you run it, the output can get swept
under the rug. However, for our use, lets say it doesnt bother us and we want
to disable that rule. Open your <i>.eslintrc </i>file, find the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>rules<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>section<span
style='letter-spacing:2.0pt'> </span>(if there isnt a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>rules<span
style='letter-spacing:-2.45pt'> </span></span><span style='color:#333333'>section,
create one at the top level of the exported object), and add the following
rule:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &quot;rules&quot;: {&#13;&#10;&quot;no-console&quot;: &quot;off&quot;,&#13;&#10;},&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Now if we run </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm run lint<span style='letter-spacing:-3.0pt'> </span></span><span
style='color:#333333'>again, well see that error is no more! The next one is a
little trickier.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Open<span style='letter-spacing:.55pt'> </span><i>lib/handlers.js<span
style='letter-spacing:.6pt'> </span></i>and<span style='letter-spacing:.6pt'> </span>consider<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.55pt'> </span>line<span
style='letter-spacing:.55pt'> </span>in<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>question:</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:19.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>exports</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>.</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>serverError<span style='letter-spacing:.65pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;background:#FBFBFB'>err</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>,<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>next</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'500'</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>ESLint is correct; were providing </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>as an
argument but not doing anything with it (were also not doing anything with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>err<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req</span><span
style='color:#333333'>, but because of the way JavaScript treats function
arguments, we have to put <i>something </i>there so we can get at </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res</span><span
style='color:#333333'>, which we <i>are </i>using).</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection111>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>You may be tempted to just remove the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>argument.
Whats the<span style='letter-spacing:4.0pt'> </span>harm? you may think. And
indeed, there would be no runtime errors, and your linter would be happybut a
hard-to-see harm would be done: your custom error handler would stop working!
(If you want to see for yourself, throw an exception from one of your routes
and try visiting it, and then remove the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next<span style='letter-spacing:-1.25pt'> </span></span><span
style='color:#333333'>argument from the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>serverError<span style='letter-spacing:-1.25pt'> </span></span><span
style='color:#333333'>handler.)</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Express is doing something subtle here: its using the
number of actual arguments you pass to it to recognize that its supposed to be
an error handler. Without that </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next<span style='letter-spacing:-2.45pt'> </span></span><span
style='color:#333333'>argumentwhether you use it or notExpress no longer
recognizes it as an error handler.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: NOTE&#13;&#10;What the Express team has done with the error handler is undeniably clever, but clever code can often be confusing, easy to break, or inscrutable. As much as I love Express, this is one choice I think the team got wrong: I think it should have found a less idiosyncratic and more explicit way to specify an error handler.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We cant change our handler code, and we need our error
handler, but we like this rule and dont want to disable it. We could just live
with the error, but the errors will accumulate and be a constant irritation,
and they will eventually<span style='letter-spacing:1.6pt'> </span>corrode<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>very<span
style='letter-spacing:1.6pt'> </span>point<span style='letter-spacing:1.55pt'> </span>of<span
style='letter-spacing:1.55pt'> </span>having<span style='letter-spacing:1.6pt'>
</span>a<span style='letter-spacing:1.55pt'> </span>linter.<span
style='letter-spacing:1.6pt'> </span>Fortunately,<span style='letter-spacing:
1.6pt'> </span>we<span style='letter-spacing:1.55pt'> </span>can fix it by
disabling that rule for that single line. Edit <i>lib/handlers.js </i>and add
the following around your error handler:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: // Express recognizes the error handler by way of its four&#13;&#10;// arguments, so we have to disable ESLint's no-unused-vars rule&#13;&#10;/* eslint-disable no-unused-vars */&#13;&#10;exports.serverError = (err, req, res, next) =&gt; res.render('500')&#13;&#10;/* eslint-enable no-unused-vars */&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection112>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Linting can be a little frustrating at firstit may feel
like its constantly tripping you up. And certainly you should feel free to
disable rules that dont suit you. Eventually, you will find it less and less
frustrating as you learn to avoid the common mistakes that linting is designed
to catch.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Testing and linting are undeniably useful, but any tool
is worthless i<a name="_bookmark215"></a>f you never use it! It may seem crazy
that you would go to the time and trouble to write unit tests and set up
linting, but Ive seen it happen, especially when the pressure is on.
Fortunately, there is a way to ensure that these helpful tools dont get
forgotten: continuous integration.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Continuous_Integration"></a><a name="_bookmark216"></a><span
style='color:#8E0011'>Continuous<span style='letter-spacing:-.45pt'> </span><span
style='letter-spacing:-.1pt'>Integration</span></span></h2>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark217"></a><span style='color:#333333'>Ill leave you with another
extremely useful QA concep<a name="_bookmark218"></a>t: continuous integration
(CI). Its especially important if youre working on a team, but even<span
style='letter-spacing:1.55pt'> </span>if<span style='letter-spacing:1.5pt'> </span>youre<span
style='letter-spacing:1.5pt'> </span>working<span style='letter-spacing:1.55pt'>
</span>on<span style='letter-spacing:1.55pt'> </span>your<span
style='letter-spacing:1.5pt'> </span>own,<span style='letter-spacing:1.55pt'> </span>it<span
style='letter-spacing:1.5pt'> </span>can<span style='letter-spacing:1.55pt'> </span>provide<span
style='letter-spacing:1.5pt'> </span>some<span style='letter-spacing:1.5pt'> </span>helpful
<span style='letter-spacing:-.1pt'>discipline.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Basically, CI runs some or all of your tests every time
you contribute code to a source code repository (you can control which branches
this applies<span style='letter-spacing:4.0pt'> </span>to). If all of the tests
pass, nothing usually happens (you may get an email saying good job,
depending on how your CI is configured).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If, on the other hand, there are failures, the
consequences are usually morepublic. Again, it depends on how you configure
your CI, but usually the entire team gets an email saying that you broke the
build. If your integration master is really sadistic, sometimes your boss is
also on that email list! Ive even known teams that set up lights and sirens
when someone broke the build, and in one particularly creative office, a tiny
robotic foam missile launcher fired soft projectiles at the offending</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection113>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>developer! Its a powerful incentive to run your QA
toolchain before <span style='letter-spacing:-.1pt'>committing.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its beyond the scope of this book to cover installing
and configuring a CI server,<span style='letter-spacing:1.4pt'> </span>but a
chapter on<span style='letter-spacing:1.4pt'> </span>QA wouldnt be complete
without mentioning<span style='letter-spacing:1.4pt'> </span>it.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark219"></a><span style='color:#333333'>Currently, the most popular
CI server for Node projects is </span><a href="https://travis-ci.org/"><span
style='color:#070707'>Travis CI</span></a><span style='color:#333333'>. Travis
CI is a hosted solution, which can be appealing (it saves you from having to
set up your own CI server). If youre using GitHub, it offers excellent
integration support. </span><a href="https://circleci.com/"><span
style='color:#070707'>CircleCI</span></a><span style='color:#070707'> </span><span
style='color:#333333'>is another option.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre working on a project on your own, you may not
get much benefit from<span style='letter-spacing:1.2pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>CI<span style='letter-spacing:1.2pt'> </span>server,<span
style='letter-spacing:1.25pt'> </span>but<span style='letter-spacing:1.2pt'> </span>if<span
style='letter-spacing:1.2pt'> </span>youre<span style='letter-spacing:1.2pt'> </span>working<span
style='letter-spacing:1.25pt'> </span>on<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>team<span style='letter-spacing:1.2pt'> </span>or<span
style='letter-spacing:1.2pt'> </span>an<span style='letter-spacing:1.25pt'> </span>open<span
style='letter-spacing:1.25pt'> </span>source project,<span style='letter-spacing:
1.6pt'> </span>I highly<span style='letter-spacing:1.6pt'> </span>recommend<span
style='letter-spacing:1.6pt'> </span>looking<span style='letter-spacing:1.6pt'>
</span>into<span style='letter-spacing:1.6pt'> </span>setting<span
style='letter-spacing:1.6pt'> </span>up<span style='letter-spacing:1.6pt'> </span>CI
for your project<a name="_bookmark220"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><a name="_bookmark221"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This chapter covered a lot of ground, but I consider
these essential real- world skills in any development framework. The JavaScript
ecosystem is dizzyingly large, and if youre new to it, it can be hard to know
where to start. I hope this chapter pointed you in the right direction.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have some experience with these tools, well
turn our<span style='letter-spacing:4.0pt'> </span>attention to some
fundamentals of the Node and Express objects that<span style='letter-spacing:
2.0pt'> </span>bracket everything that happens in an Express application: the
request and response objects.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:7.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:67.35pt;margin-bottom:.0001pt'><a href="#_bookmark207"><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707;
letter-spacing:4.35pt'> </span><a name="_bookmark222"></a><span
style='font-size:10.5pt;color:#333333'>If<span style='letter-spacing:.3pt'> </span>you<span
style='letter-spacing:.3pt'> </span>are<span style='letter-spacing:.3pt'> </span>unfamiliar<span
style='letter-spacing:.3pt'> </span>with<span style='letter-spacing:.3pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#333333'>await</span><span
style='font-size:10.5pt;color:#333333'>,<span style='letter-spacing:.3pt'> </span>I<span
style='letter-spacing:.3pt'> </span>recommend<span style='letter-spacing:.35pt'>
</span></span><a href="http://bit.ly/2rEXU0d"><span style='font-size:10.5pt;
color:#070707'>this<span style='letter-spacing:.3pt'> </span>article</span></a><span
style='font-size:10.5pt;color:#070707;letter-spacing:.3pt'> </span><span
style='font-size:10.5pt;color:#333333'>by<span style='letter-spacing:.3pt'> </span>Tamas<span
style='letter-spacing:.3pt'> </span><span style='letter-spacing:-.1pt'>Piros.</span></span></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection114>

<h1 style='margin-right:37.5pt;line-height:105%'><a
name="6._The_Request_and_Response_Objects"></a><a name="The_Parts_of_a_URL"></a><a
name="_bookmark223"></a>Chapter 6. The Request and Response Objects</h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In<span style='letter-spacing:1.55pt'> </span>this<span
style='letter-spacing:1.45pt'> </span>chapter,<span style='letter-spacing:1.55pt'>
</span>well<span style='letter-spacing:1.45pt'> </span>learn<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.45pt'> </span>important<span
style='letter-spacing:1.45pt'> </span>details<span style='letter-spacing:1.45pt'>
</span>of<span style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:
1.45pt'> </span>request<span style='letter-spacing:1.45pt'> </span>and response
objectswhich are very much the beginning and end of<span style='letter-spacing:
4.0pt'> </span>everything that happens in an Express application. When youre
building a web<span style='letter-spacing:1.45pt'> </span>server<span
style='letter-spacing:1.35pt'> </span>with<span style='letter-spacing:1.45pt'> </span>Express,<span
style='letter-spacing:1.45pt'> </span>most<span style='letter-spacing:1.35pt'> </span>of<span
style='letter-spacing:1.35pt'> </span>what<span style='letter-spacing:1.35pt'> </span>youll<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.35pt'> </span>doing<span
style='letter-spacing:1.45pt'> </span>starts<span style='letter-spacing:1.35pt'>
</span>with<span style='letter-spacing:1.45pt'> </span>a request object and
ends with a response object.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>These two objects originate in Node and are extended by
Express. Before we delve into what these objects offer us, lets establish a
little<span style='letter-spacing:4.0pt'> </span>background on how a client (a
browser, usually) requests a page from a server and how that page is returned.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>The<span
style='letter-spacing:-.1pt'> </span>Parts<span style='letter-spacing:-.1pt'> </span>of<span
style='letter-spacing:-.1pt'> </span>a<span style='letter-spacing:-.05pt'> </span><span
style='letter-spacing:-.25pt'>URL</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark224"></a><span style='color:#333333'>We see URLs all the time,
but we dont often stop to think about their component parts. Lets consider
three URLs and examine their component <span style='letter-spacing:-.1pt'>parts:</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection115>

<p class=MsoBodyText style='margin-left:65.8pt'><span style='font-size:10.0pt'><img
border=0 width=547 height=400 id=image12.jpeg
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image046.jpg"></span></p>

<p class=MsoBodyText><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Protocol</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark225"></a><span style='color:#333333'>The protocol determines how
the request will be transmitted. We will be dealing exclusively with <i>http </i>and
<i>https</i>. Other common protocols include <i>file </i>and <i>ftp</i>.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.2pt'>Host</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark226"></a><span style='color:#333333'>The host identifies the
server. Servers on your computer (localhost) or<span style='letter-spacing:
4.0pt'> </span>a local network may be identified simply be one word or by a
numeric IP address. On the internet, the host will end in a top-level domain
(TLD)<span style='letter-spacing:1.8pt'> </span>like<span style='letter-spacing:
1.8pt'> </span><i>.com<span style='letter-spacing:1.8pt'> </span></i>or<span
style='letter-spacing:1.8pt'> </span><i>.net</i>.<span style='letter-spacing:
1.9pt'> </span><a name="_bookmark227"></a>Additionally,<span style='letter-spacing:
1.9pt'> </span>there<span style='letter-spacing:1.8pt'> </span>may<span
style='letter-spacing:1.9pt'> </span>be<span style='letter-spacing:1.8pt'> </span><i>subdomains</i>,
which prefix the hostname. <i>www </i>is a common subdomain, though it<span
style='letter-spacing:4.0pt'> </span>can be anything. Subdomains are optional.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.2pt'>Port</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:84.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><a name="_bookmark229"></a><span style='color:#333333'>Each server has a
collection of numbered ports. Some port numbers are special, like 80 and 443. <a
name="_bookmark228"></a>If you omit the port, port 80 is assumed for<span
style='letter-spacing:.45pt'> </span>HTTP<span style='letter-spacing:.45pt'> </span>and<span
style='letter-spacing:.5pt'> </span>443<span style='letter-spacing:.5pt'> </span>for<span
style='letter-spacing:.45pt'> </span>HTTPS.<span style='letter-spacing:.5pt'> </span>In<span
style='letter-spacing:.5pt'> </span>general,<span style='letter-spacing:.55pt'>
</span>if<span style='letter-spacing:.45pt'> </span>you<span style='letter-spacing:
.5pt'> </span>arent<span style='letter-spacing:.45pt'> </span>using<span
style='letter-spacing:.5pt'> </span>port<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.25pt'>80</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

</div>

<span style='font-size:10.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection116>

<p class=MsoBodyText style='margin-top:5.55pt;margin-right:75.45pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><a name="Request_Headers"></a><a name="_bookmark235"></a><span
style='color:#333333'>or 443, you should use a port number greater than 1023<a
name="_bookmark230"></a>.</span><a href="#_bookmark308"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>1</span></sup></a><span
style='font-family:"Arial",sans-serif;color:#070707'> </span><span
style='color:#333333'>Its common to use easy-to-remember port numbers like
3000, 8080, and 8088.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:81.9pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><span style='color:#333333'>Only one server can be associated with a
given port, and even though there are plenty of numbers to choose from, you may
have to change the port number if youre using a commonly used port number.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.2pt'>Path</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark231"></a><span style='color:#333333'>The path is generally the
first part of the URL that your app cares about (it is possible to make
decisions based on protocol, host, and port, but its not good practice). The
path should be used to uniquely identify pages or other resources in your app.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Querystring</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark232"></a><span style='color:#333333'>The querystring is an
optional collection of name/value pairs. The querystring starts with a question
mark (<i>?</i>), and name/value pairs are separated by ampersands (<i>&amp;</i>).
Both names and values should be <i>URL encoded</i>. JavaScript provides a
built-in function to do that: </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>encodeURIComponent</span><span style='color:#333333'>. For
example, spaces will be replaced with plus signs (<i>+</i>). Other special
characters will be replaced with numeric character references. Sometimes the
querystring will be referred to as the <i>search string </i>or simply the <i>search</i>.</span></p>

<p class=MsoNormal style='margin-top:10.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Fragment</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="_bookmark233"></a><span style='color:#333333'>The fragment (or <i>hash</i>)
is not passed to the server at all; it is strictly<span style='letter-spacing:
4.0pt'> </span>for use by the browser. Some single-page applications use the<span
style='letter-spacing:4.0pt'> </span>fragment to control application
navigation. Originally, the fragments sole purpose was to cause the browser to
display a specific part of the document, marked by an anchor tag (for example: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;a <span
style='letter-spacing:-.1pt'>id=&quot;chapter06&quot;&gt;</span></span><span
style='color:#333333;letter-spacing:-.1pt'>).</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:9.7pt'><span style='color:#8E0011'>HTTP<span
style='letter-spacing:-.35pt'> </span>Request<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Methods</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark234"></a><span style='color:#333333'>The HTTP protocol defines a
collection of <i>request methods </i>(often referred to<span style='letter-spacing:
.45pt'> </span>as<span style='letter-spacing:.4pt'> </span><i>HTTP<span
style='letter-spacing:.45pt'> </span>verbs</i>)<span style='letter-spacing:
.4pt'> </span>that<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.4pt'> </span>client<span style='letter-spacing:.4pt'> </span>uses<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.45pt'> </span>communicate<span
style='letter-spacing:.45pt'> </span>with<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.45pt'> </span>server.<span style='letter-spacing:.45pt'>
</span>Far<span style='letter-spacing:.45pt'> </span><span style='letter-spacing:
-.25pt'>and</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection117>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Response_Headers"></a><a
name="_bookmark240"></a><a name="HTTP_Request_Methods"></a><a
name="_bookmark236"></a><span style='color:#333333'>away,<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.55pt'> </span>most<span
style='letter-spacing:.5pt'> </span>common<span style='letter-spacing:.55pt'> </span>methods<span
style='letter-spacing:.55pt'> </span>are<span style='letter-spacing:.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.95pt'> </span></span><span style='color:#333333'>and<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>POST</span><span style='color:#333333;
letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark237"></a><span style='color:#333333'>When you type a URL into a
browser (or click a link), the browser issues an HTTP </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>request
to the server. The important information passed to the server is the URL path
and querystring. The combination of method, path,<span style='letter-spacing:
.85pt'> </span>and<span style='letter-spacing:.85pt'> </span>querystring<span
style='letter-spacing:.85pt'> </span>is what your app<span style='letter-spacing:
.85pt'> </span>uses to<span style='letter-spacing:.85pt'> </span>determine how
to<span style='letter-spacing:.85pt'> </span>respond.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>For a website, most of your pages will respond to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>requests.
</span><a name="_bookmark238"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST </span><span style='color:#333333'>requests are usually
reserved for sending information back to the server (form processing, for
example). Its quite common for </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>requests to respond with the same HTML as the
corresponding </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>request after the server has processed any information
included in the request (like a form). Browsers will primarily use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>methods
when communicating with your server. The Ajax requests your application<span
style='letter-spacing:2.0pt'> </span>makes, however, may use any HTTP verb. For
example, theres an HTTP method called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>DELETE<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>that is useful for, well, an API call that deletes<span
style='letter-spacing:2.0pt'> </span><span style='letter-spacing:-.1pt'>things.</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:103.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>With Node and Express, you are fully in
charge of what methods you respond to. In Express, youll usually be writing
handlers for specific <span style='letter-spacing:-.1pt'>methods.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='text-align:justify'><span style='color:#8E0011'>Request<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Headers</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark239"></a><span style='color:#333333'>The<span style='letter-spacing:
1.35pt'> </span>URL<span style='letter-spacing:1.35pt'> </span>isnt<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.35pt'> </span>only<span
style='letter-spacing:1.4pt'> </span>thing<span style='letter-spacing:1.4pt'> </span>thats<span
style='letter-spacing:1.35pt'> </span>passed<span style='letter-spacing:1.4pt'>
</span>to<span style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:
1.35pt'> </span>server<span style='letter-spacing:1.35pt'> </span>when<span
style='letter-spacing:1.4pt'> </span>you navigate<span style='letter-spacing:
1.45pt'> </span>to<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.45pt'> </span>page.<span style='letter-spacing:1.5pt'> </span>Your<span
style='letter-spacing:1.45pt'> </span>browser<span style='letter-spacing:1.45pt'>
</span>is<span style='letter-spacing:1.45pt'> </span>sending<span
style='letter-spacing:1.5pt'> </span>a<span style='letter-spacing:1.45pt'> </span>lot<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>invisible
information every time you visit a website. Im not talking about spooky
personal information (though if your browser is infected by malware, that can
happen). The browser will tell the server what language it prefers to receive
the page in<span style='letter-spacing:.75pt'> </span>(for example,<span
style='letter-spacing:.75pt'> </span>if you<span style='letter-spacing:.75pt'> </span>download<span
style='letter-spacing:.75pt'> </span>Chrome in<span style='letter-spacing:.75pt'>
</span>Spain,<span style='letter-spacing:.75pt'> </span>it will</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection118>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>request the Spanish version of pages you visit, if they
exist). It will also send information about the <i>user agent </i>(the browser,
operating system, and hardware) and other bits of information. All this
information is sent as a request<span style='letter-spacing:1.65pt'> </span>header,<span
style='letter-spacing:1.7pt'> </span>which<span style='letter-spacing:1.7pt'> </span>is<span
style='letter-spacing:1.65pt'> </span>made<span style='letter-spacing:1.65pt'> </span>available<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.7pt'> </span>you<span
style='letter-spacing:1.7pt'> </span>through<span style='letter-spacing:1.7pt'>
</span>the<span style='letter-spacing:1.65pt'> </span>request objects </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>headers<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>property.
If youre curious to see the information your browser is sending, you can
create a simple Express route to display that information (<i>ch06/00-echo-headers.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/headers', (req, res) =&gt; { res.type('text/plain')&#13;&#10;const headers = Object.entries(req.headers)&#13;&#10;.map(([key, value]) =&gt; `${key}: ${value}`) res.send(headers.join('\n'))&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Response<span
style='letter-spacing:-.35pt'> </span><span style='letter-spacing:-.1pt'>Headers</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark242"></a><span style='color:#333333'>Just as your browser sends
hidden information to the server in the form of request headers, when the
server responds, it also sends information back that is not necessarily
rendered or displayed by the browser. The<span style='letter-spacing:2.0pt'> </span>information
typically included in response headers is metadata and server information.<span
style='letter-spacing:2.0pt'> </span><a name="_bookmark241"></a>Weve<span
style='letter-spacing:2.0pt'> </span>already<span style='letter-spacing:2.0pt'>
</span>seen<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Content-Type<span style='letter-spacing:-1.4pt'> </span></span><span
style='color:#333333'>header,<span style='letter-spacing:2.0pt'> </span>which<span
style='letter-spacing:2.0pt'> </span>tells the browser what kind of content is
being transmitted (HTML, an image, CSS, JavaScript, etc.). Note that the
browser will respect the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Content- Type<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>header<span style='letter-spacing:1.35pt'> </span>regardless<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>what<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.35pt'> </span>URL<span
style='letter-spacing:1.35pt'> </span>path<span style='letter-spacing:1.45pt'> </span>is.<span
style='letter-spacing:1.45pt'> </span>So<span style='letter-spacing:1.45pt'> </span>you<span
style='letter-spacing:1.45pt'> </span>could<span style='letter-spacing:1.45pt'>
</span>serve HTML from a path of <i>/image.jpg </i>or an image from a path of <i>/text.html</i>.
(Theres no legitimate reason to do this; its just important to understand<span
style='letter-spacing:2.0pt'> </span>that paths are abstract, and the browser
uses </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Content-Type<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>to
determine how to render content.) In addition to </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>Content-Type</span><span
style='color:#333333'>, headers can indicate whether the response is compressed
and what kind of encoding its using. Response headers can<span
style='letter-spacing:1.05pt'> </span>also<span style='letter-spacing:1.05pt'> </span>contain<span
style='letter-spacing:1.05pt'> </span>hints for the browser about how long<span
style='letter-spacing:1.05pt'> </span>it</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection119>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>can cache the resource. This is an important
consideration for optimizing your website, and well be discussing that in
detail in </span><a href="#_bookmark721"><span style='color:#070707'>Chapter 17</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>It is also common for response headers to contain some
information about the server, indicating what type of server it is and
sometimes even details about the operating system. The downside about returning
server information is that it gives hackers a starting point to compromise your<span
style='letter-spacing:4.0pt'> </span>site. Extremely security-conscious servers
often omit this information or even provide false information. Disabling
Expresss default </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>X-Powered-<span style='letter-spacing:2.0pt'> </span>By<span
style='letter-spacing:-1.1pt'> </span></span><span style='color:#333333'>header
is easy (<i>ch06/01-disable-x-powered-by.js </i>in the companion<span
style='letter-spacing:2.0pt'> </span><span style='letter-spacing:-.1pt'>repo):</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>disable</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'x-powered-<span style='letter-spacing:-.2pt'>by'</span></span><a
name="The_Request_Object"></a><a name="_bookmark243"></a><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.2pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you want to see the response headers, they can be
found in your browsers developer tools. <a name="_bookmark244"></a>To see the
response headers in Chrome, for <span style='letter-spacing:-.1pt'>example:</span></span></p>

<p class=MsoBodyText><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:0cm;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Open<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.6pt'> </span>JavaScript<span style='letter-spacing:.6pt'>
</span><span style='letter-spacing:-.1pt'>console.</span></span></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Click<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.55pt'> </span>Network<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.2pt'>tab.</span></span></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Reload<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.2pt'>page.</span></span></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Pick<span style='letter-spacing:.4pt'> </span>the<span
style='letter-spacing:.4pt'> </span>HTML<span style='letter-spacing:.4pt'> </span>from<span
style='letter-spacing:.35pt'> </span>the<span style='letter-spacing:.4pt'> </span>list<span
style='letter-spacing:.4pt'> </span>of<span style='letter-spacing:.35pt'> </span>requests<span
style='letter-spacing:.4pt'> </span>(it<span style='letter-spacing:.4pt'> </span>will<span
style='letter-spacing:.4pt'> </span>be<span style='letter-spacing:.35pt'> </span>the<span
style='letter-spacing:.4pt'> </span>first<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>one).</span></span></p>

<p class=MsoListParagraph style='margin-top:11.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Click<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.45pt'> </span>Headers<span style='letter-spacing:.45pt'>
</span>tab;<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.5pt'> </span>will<span style='letter-spacing:.45pt'> </span>see<span
style='letter-spacing:.45pt'> </span>all<span style='letter-spacing:.45pt'> </span>response<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>headers.</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:11.65pt'><span style='color:#8E0011'>Internet<span
style='letter-spacing:-.3pt'> </span>Media<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Types</span></span></h2>

<p class=MsoBodyText style='margin-top:12.7pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><a
name="_bookmark245"></a><span style='color:#333333'>The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Content-Type<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>header
is critically important; without it, the client would have to painfully guess
how to render the content. The format of the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>Content-Type<span style='letter-spacing:
-1.95pt'> </span></span><span style='color:#333333'>header is an <i>internet
media type</i>, which consists of a type, subtype, and optional parameters. For
example, </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>text/html;</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection120>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="Internet_Media_Types"></a><a name="_bookmark246"></a><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>charset=UTF-8<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>specifies
a type of text, a subtype of html, and a character encoding of UTF-8. The
Internet Assigned Numbers Authority maintains an </span><a
href="https://www.iana.org/assignments/media-types/media-types.xhtml"><span
style='color:#070707'>official list of internet media types</span></a><span
style='color:#333333'>. Often, you will hear content type, Internet media
type, and MIME type used interchangeably. MIME (Multipurpose Internet Mail
Extensions) was a precursor of internet media types and, for the most part, is
equivalent.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2><a name="Request_Body"></a><a name="_bookmark247"></a><span
style='color:#8E0011'>Request<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.2pt'>Body</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><a
name="_bookmark249"></a><span style='color:#333333'>In addition to the request
headers, a request can have a <i>body </i>(just like the body of a response is
the actual content thats being returned). <a name="_bookmark248"></a>Normal </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET </span><span
style='color:#333333'>requests dont have bodies,<span style='letter-spacing:
1.75pt'> </span>but </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>requests usually<span style='letter-spacing:1.75pt'> </span>do.<span
style='letter-spacing:1.75pt'> </span>The most common media type for </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-1.15pt'> </span></span><span style='color:#333333'>bodies
is </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>application/x-www-form-
urlencoded</span><span style='color:#333333'>, which is simply encoded
name/value pairs separated by ampersands<span style='letter-spacing:1.65pt'> </span>(essentially<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.65pt'> </span>same<span
style='letter-spacing:1.65pt'> </span>format<span style='letter-spacing:1.65pt'>
</span>as<span style='letter-spacing:1.65pt'> </span>a<span style='letter-spacing:
1.65pt'> </span>querystring).<span style='letter-spacing:1.75pt'> </span>If<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.65pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST </span><span
style='color:#333333'>needs to support file uploads, the media type is </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>multipart/form-data</span><span
style='color:#333333'>, which is a more complicated format. Lastly, Ajax
requests can use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>application/json<span style='letter-spacing:-2.55pt'> </span></span><span
style='color:#333333'>for the body. Well learn more about request bodies in </span><a
href="#_bookmark355"><span style='color:#070707'>Chapter 8</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:10.35pt'><span style='color:#8E0011'>The<span
style='letter-spacing:-.2pt'> </span>Request<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Object</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark250"></a><span style='color:#333333'>The <i>request object </i>(which
is passed as the first parameter of a request handler, meaning you can name it
whatever you want; it is common to name it </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>req<span style='letter-spacing:-2.2pt'>
</span></span><span style='color:#333333'>or </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>request</span><span style='color:#333333'>)
starts its life as an instance of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>http.IncomingMessage</span><span style='color:#333333'>, a core
Node object. Express adds further functionality. Lets look at the most useful
properties and methods of the request object (all of these methods are added by
Express, except for </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.headers<span style='letter-spacing:-1.05pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.url</span><span style='color:#333333'>, which originate in
Node):</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection121>

<p class=MsoNormal style='margin-top:3.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="The_Response_Object"></a><a
name="_bookmark258"></a><i><span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.15pt'>r</span></i><i><span style='font-size:
14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>e</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>q</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>.</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>p</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>a</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>a</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>s</span></i></p>

<p class=MsoNormal style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark251"></a><span style='font-size:14.0pt;line-height:111%;
color:#333333'>An array containing the <i>named route parameters</i>. Well
learn more about this in </span><a href="#_bookmark603"><span style='font-size:
14.0pt;line-height:111%;color:#070707'>Chapter 14</span></a><span
style='font-size:14.0pt;line-height:111%;color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.query</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark252"></a><span
style='color:#333333'>An<span style='letter-spacing:.8pt'> </span>object<span
style='letter-spacing:.7pt'> </span>containing<span style='letter-spacing:.8pt'>
</span>querystring<span style='letter-spacing:.8pt'> </span>parameters<span
style='letter-spacing:.75pt'> </span>(sometimes<span style='letter-spacing:
.75pt'> </span>called<span style='letter-spacing:.8pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.25pt'>GET</span></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>parameters)<span
style='letter-spacing:.7pt'> </span>as<span style='letter-spacing:.75pt'> </span>name/value<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>pairs.</span></span></p>

<p class=MsoNormal style='margin-top:12.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.body</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="_bookmark253"></a><span style='color:#333333'>An object containing </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>parameters.
It is so named because </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST </span><span style='color:#333333'>parameters are passed in
the body of the request, not in the URL as querystring parameters are. To make </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.body<span
style='letter-spacing:-2.4pt'> </span></span><span style='color:#333333'>available,
youll need middleware that can parse the body content type, which we will
learn about in </span><a href="#_bookmark427"><span style='color:#070707'>Chapter
10</span></a><span style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:11.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.route</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark254"></a><span style='color:#333333'>Information about the
currently matched route. This is primarily useful for route debugging.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.cookies</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>/</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>req.signedCookies</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark255"></a><span style='color:#333333'>Objects containing cookie
values passed from the client. See </span><a href="#_bookmark393"><span
style='color:#070707'>Chapter 9</span></a><span style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.headers</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark256"></a><span style='color:#333333'>The request headers
received from the client. This is an object whose keys are the header names and
whose values are the header values.</span></p>

<p class=MsoBodyText style='margin-left:76.55pt;line-height:16.35pt'><span
style='color:#333333'>Note<span style='letter-spacing:.5pt'> </span>that<span
style='letter-spacing:.55pt'> </span>this<span style='letter-spacing:.5pt'> </span>comes<span
style='letter-spacing:.55pt'> </span>from<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.5pt'> </span>underlying<span style='letter-spacing:.6pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333;
letter-spacing:-.1pt'>http.IncomingMessage</span></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>object,<span
style='letter-spacing:.45pt'> </span>so<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.5pt'> </span>wont<span style='letter-spacing:.4pt'> </span>find<span
style='letter-spacing:.45pt'> </span>it<span style='letter-spacing:.45pt'> </span>listed<span
style='letter-spacing:.45pt'> </span>in<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.4pt'> </span>Express<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>documentation.</span></span></p>

<p class=MsoNormal style='margin-top:12.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.accepts(types)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="_bookmark257"></a><span style='color:#333333'>A convenience method to
determine whether the client accepts a given type or types (optional </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>types<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>can
be a single MIME type, such as </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>application/json</span><span style='color:#333333'>, a
comma-delimited list, or an array). This method<span style='letter-spacing:
2.0pt'> </span>is of primary interest to those writing public APIs; it is
assumed that browsers will always accept HTML by default.</span></p>

</div>

<span style='font-size:11.0pt;line-height:107%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection122>

<p class=MsoNormal style='margin-top:3.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.ip</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark259"></a><span
style='color:#333333'>The<span style='letter-spacing:.4pt'> </span>IP<span
style='letter-spacing:.4pt'> </span>address<span style='letter-spacing:.4pt'> </span>of<span
style='letter-spacing:.35pt'> </span>the<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>client.</span></span></p>

<p class=MsoNormal style='margin-top:12.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.path</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark260"></a><span
style='color:#333333'>The<span style='letter-spacing:.5pt'> </span>request<span
style='letter-spacing:.55pt'> </span>path<span style='letter-spacing:.65pt'> </span>(without<span
style='letter-spacing:.55pt'> </span>protocol,<span style='letter-spacing:.6pt'>
</span>host,<span style='letter-spacing:.6pt'> </span>port,<span
style='letter-spacing:.6pt'> </span>or<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>querystring).</span></span></p>

<p class=MsoNormal style='margin-top:12.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>q</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>.</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>h</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>s</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>n</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>e</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark261"></a><span style='color:#333333'>A convenience method that
returns the hostname reported by the client. This information can be spoofed
and should not be used for security purposes.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.xhr</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="_bookmark262"></a><span style='color:#333333'>A convenience property that
returns </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>true<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>if the
request originated from an Ajax call.</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.protocol</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark263"></a><span style='color:#333333'>The protocol used in making
this request (for our purposes, it will be either </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http<span
style='letter-spacing:-.6pt'> </span></span><span style='color:#333333'>or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>https</span><span
style='color:#333333'>).</span></p>

<p class=MsoNormal style='margin-top:11.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>req.secure</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:103%'><a
name="_bookmark264"></a><span style='color:#333333'>A convenience property that
returns </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>true<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>if
the connection is secure. This is equivalent to </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>req.protocol === 'https'</span><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:11.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>q</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>.</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>u</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>l</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.15pt'>/</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>e</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>q</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>.</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>g</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>n</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>l</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>U</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>l</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark265"></a><span style='color:#333333'>A bit of a misnomer, these
properties return the path and querystring (they do not include protocol, host,
or port). </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.url<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>can be
rewritten for internal routing purposes, but </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>req.originalUrl<span style='letter-spacing:
-1.45pt'> </span></span><span style='color:#333333'>is designed to remain the
original request and querystring.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:10.8pt'><span style='color:#8E0011'>The<span
style='letter-spacing:-.25pt'> </span>Response<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Object</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark267"></a><span style='color:#333333'>The <a name="_bookmark266"></a><i>response
object </i>(which is passed as the second parameter of a request handler,
meaning you can name it whatever you want; it is common to<span
style='letter-spacing:2.0pt'> </span>name it </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>res</span><span style='color:#333333'>,
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>resp</span><span
style='color:#333333'>, or </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>response</span><span style='color:#333333'>) starts its life as
an instance of</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection123>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http.ServerResponse</span><span
style='color:#333333'>, a core Node object. Express adds further functionality.
Lets look at the most useful properties and methods of the response object
(all of these are added by Express):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.status(code)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:106%'><a
name="_bookmark268"></a><span style='color:#333333'>Sets the HTTP status code.
Express defaults to 200 (OK), so you will have to use this method to return a
status of 404 (Not Found) or 500 (Server Error), or any other status code you
want to use. For redirects (status codes 301, 302, 303, and 307), there is a
method </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>redirect</span><span
style='color:#333333'>, which is preferable. Note that </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.status<span
style='letter-spacing:-2.5pt'> </span></span><span style='color:#333333'>returns
the response object, meaning<span style='letter-spacing:2.0pt'> </span>you<span
style='letter-spacing:2.0pt'> </span>can<span style='letter-spacing:2.0pt'> </span>chain<span
style='letter-spacing:2.0pt'> </span>calls:<span style='letter-spacing:2.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.status(404).send('Not
<span style='letter-spacing:-.1pt'>found')</span></span><span style='color:
#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>.</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>(</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>n</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333'>,</span></i><i><span style='font-size:
14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:2.5pt'>
</span></i><i><span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.1pt'>value)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark269"></a><span style='color:#333333'>Sets a response header.
This is not something you will normally be doing manually. You can also set
multiple headers at once by passing<span style='letter-spacing:4.0pt'> </span>a
single object argument whose keys are the header names and whose values are the
header values.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:110%'><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>r</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>.</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>c</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>oo</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>kie(name</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333'>,</span></i><i><span style='font-size:14.0pt;line-height:110%;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:2.0pt'> </span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333'>value,<span style='letter-spacing:2.0pt'> </span>[options])</span></i><i><span
style='font-size:14.0pt;line-height:110%;color:#333333'>, </span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>r</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>.</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>c</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>l</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>e</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>r</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>C</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>oo</span></i><i><span style='font-size:14.0pt;
line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>k</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>i</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>e</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>(</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>n</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>a</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>m</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333'>,</span></i><i><span style='font-size:14.0pt;line-height:110%;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'> </span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.1pt'>[options])</span></i></p>

<p class=MsoBodyText style='margin-top:7.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark270"></a><span style='color:#333333'>Sets or clears cookies that
will be stored on the client. This requires some middleware support; see </span><a
href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>res.redirect([status],</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:3.35pt'> </span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.2pt'>url)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark271"></a><span style='color:#333333'>Redirects the browser. The
default redirect code is 302 (Found). In general, you should minimize
redirection unless you are permanently moving a page, in which case you should
use the code 301 (Moved <span style='letter-spacing:-.1pt'>Permanently).</span></span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.send(body)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark272"></a><span style='color:#333333'>Sends a response to the
client. Express defaults to a content type of </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>text/html</span><span
style='color:#333333'>, so if you want to change it to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>text/plain<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>(for
example), youll have to call </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.type('text/plain)<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>before calling</span></p>

</div>

<span style='font-size:11.0pt;line-height:105%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection124>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.send</span><span
style='color:#333333'>. If </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>body<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>is an object or an array, the response is sent as JSON
(with the content type being set appropriately), though if you want to send
JSON, I recommend doing so explicitly by calling </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>res.json<span style='letter-spacing:
-1.95pt'> </span></span><span style='color:#333333'>instead.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.json(json)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark273"></a><span
style='color:#333333'>Sends<span style='letter-spacing:.4pt'> </span>JSON<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>client.</span></span></p>

<p class=MsoNormal style='margin-top:12.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.jsonp(json)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark274"></a><span
style='color:#333333'>Sends<span style='letter-spacing:.45pt'> </span>JSONP<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>client.</span></span></p>

<p class=MsoNormal style='margin-top:12.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.end()</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="_bookmark275"></a><span style='color:#333333'>Ends the connection without
sending a response. To learn more about </span><a
href="https://blog.fullstacktraining.com/res-json-vs-res-send-vs-res-end-in-express/"><span
style='color:#333333;text-decoration:none'>the differences between </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>res.send</span><span style='color:#333333;text-decoration:none'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>res.json</span><span style='color:#333333;text-decoration:none'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;text-decoration:
none'>res.end</span><span style='color:#333333;text-decoration:none'>, see </span><span
style='color:#070707'>this</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>article</span><span style='color:
#070707;text-decoration:none'> </span><span style='color:#333333;text-decoration:
none'>by Tamas Piros.</span></a></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.type(type)</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="_bookmark276"></a><span style='color:#333333'>A convenience method to set
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Content-Type<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>header.
This is essentially equivalent to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.set(\'Content-Type ', type)</span><span style='color:#333333'>,
except that it will also attempt to map file extensions to an internet media
type<span style='letter-spacing:2.0pt'> </span>if you provide a string without
a slash in it. For example, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.type(\'txt ')<span style='letter-spacing:-1.7pt'> </span></span><span
style='color:#333333'>will result in a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Content-Type<span style='letter-spacing:-1.7pt'> </span></span><span
style='color:#333333'>of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>text/plain</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><span style='color:#333333'>There are areas where this functionality
could be useful (for example, automatically serving disparate multimedia
files), but in general, you should avoid it in favor of explicitly setting the
correct internet media <span style='letter-spacing:-.1pt'>type.</span></span></p>

<p class=MsoNormal style='margin-top:10.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>s</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>.</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>f</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>a</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>(</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>b</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>j</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>e</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>c</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark277"></a><span style='color:#333333'>This method allows you to
send different content depending on the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Accept<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>request header. This is of primary use in APIs, and we
will discuss this more in </span><a href="#_bookmark634"><span
style='color:#070707'>Chapter 15</span></a><span style='color:#333333'>. Heres
a simple example: </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.format({'text/plain': 'hi there', 'text/html': '&lt;b&gt;hi <span
style='letter-spacing:-.1pt'>there&lt;/b&gt;'})</span></span><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoNormal style='margin-top:11.35pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:110%'><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>r</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>.</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>tt</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>a</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>c</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>h</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>m</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>n</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>t</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>([</span></i><i><span style='font-size:14.0pt;
line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>f</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>i</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>l</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>n</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>a</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>m</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>])</span></i><i><span style='font-size:
14.0pt;line-height:110%;color:#333333'>,</span></i><i><span style='font-size:
14.0pt;line-height:110%;color:#333333;letter-spacing:-.95pt'> </span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>r</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>e</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>s</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>.</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>d</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>o</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>w</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>nload(path</span></i><i><span style='font-size:14.0pt;
line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333'>,</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.25pt'> </span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>[</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>f</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>i</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>l</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>n</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>m</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'>e</span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>]</span></i><i><span style='font-size:14.0pt;line-height:
110%;font-family:"Trebuchet MS",sans-serif;color:#333333'>,</span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.05pt'> </span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>[callback])</span></i></p>

</div>

<span style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection125>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark278"></a><span style='color:#333333'>Both of these methods set a
response header called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Content- Disposition<span style='letter-spacing:-1.55pt'> </span></span><span
style='color:#333333'>to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>attachment</span><span style='color:#333333'>; this will prompt
the browser to download the content instead of displaying it in a browser. You
may specify </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>filename<span style='letter-spacing:-2.65pt'> </span></span><span
style='color:#333333'>as a hint to the browser. With </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.download</span><span
style='color:#333333'>, you can specify the file to download, whereas </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.attachment<span
style='letter-spacing:-2.3pt'> </span></span><span style='color:#333333'>just
sets the header; you still have to send content to the client.</span></p>

<p class=MsoNormal style='margin-top:11.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>res.sendFile(path,<span
style='letter-spacing:.1pt'> </span>[options],<span style='letter-spacing:.1pt'>
</span><span style='letter-spacing:-.1pt'>[callback])</span></span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark279"></a><span style='color:#333333'>This method will read a
file specified by </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>path<span style='letter-spacing:-2.4pt'> </span></span><span
style='color:#333333'>and send its contents to the client. There should be
little need for this method; its easier to use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>middleware
and put files you want available to the client in the <i>public </i>directory.
However, if you want to have a different resource served from the same URL
depending on some condition, this method could come in handy.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>res.links(links)</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="_bookmark280"></a><span style='color:#333333'>Sets the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Links<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>response
header. This is a specialized header that has little use in most applications.</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>res.locals</span></i><i><span
style='font-size:14.0pt;color:#333333'>,<span style='letter-spacing:-1.05pt'> </span></span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>s</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>.</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>nder(view</span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>,</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.4pt'> </span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333'>[locals],<span style='letter-spacing:
-.4pt'> </span><span style='letter-spacing:-.1pt'>callback)</span></span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark281"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.locals<span style='letter-spacing:-1.5pt'> </span></span><span
style='color:#333333'>is<span style='letter-spacing:2.0pt'> </span>an<span
style='letter-spacing:2.0pt'> </span>object<span style='letter-spacing:2.0pt'> </span>containing<span
style='letter-spacing:2.0pt'> </span><i>default<span style='letter-spacing:
2.0pt'> </span></i>context<span style='letter-spacing:2.0pt'> </span>for<span
style='letter-spacing:2.0pt'> </span>rendering views. </span><a
name="_bookmark282"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.render<span style='letter-spacing:-2.5pt'> </span></span><span
style='color:#333333'>will render a view using the configured templating engine
(the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>locals<span
style='letter-spacing:-1.4pt'> </span></span><span style='color:#333333'>parameter
to </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.render<span
style='letter-spacing:-1.4pt'> </span></span><span style='color:#333333'>shouldnt
be confused with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.locals</span><span style='color:#333333'>: it will override
the context in </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.locals</span><span style='color:#333333'>, but context not
overridden will still be available). Note that </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>res.render </span><span
style='color:#333333'>will default to a response code of 200; use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.status<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>to
specify a different response code. Rendering views will be covered in depth in </span><a
href="#_bookmark309"><span style='color:#070707'>Chapter 7</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:10.1pt'><span style='color:#8E0011'>Getting<span
style='letter-spacing:-.35pt'> </span><a name="_bookmark283"></a>More<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Information</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Because of JavaScripts prototypal inheritance, knowing
exactly what youre dealing with can sometimes be challenging. Node provides
you with<span style='letter-spacing:.55pt'> </span>objects<span
style='letter-spacing:.55pt'> </span>that<span style='letter-spacing:.5pt'> </span>Express<span
style='letter-spacing:.55pt'> </span>extends,<span style='letter-spacing:.6pt'>
</span>and<span style='letter-spacing:.6pt'> </span>packages<span
style='letter-spacing:.5pt'> </span>that<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.6pt'> </span>add<span style='letter-spacing:.55pt'> </span>may<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.2pt'>also</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection126>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Boiling_It_Down"></a><a name="Rendering_Content"></a><a
name="_bookmark290"></a><a name="Getting_More_Information"></a><a
name="_bookmark284"></a><span style='color:#333333'>extend those. Figuring out
exactly whats available to you can be challenging sometimes. In general, I
recommend working backward: if </span><a href="http://expressjs.com/api.html"><span
style='color:#333333;text-decoration:none'>youre looking for some
functionality, first check the </span><span style='color:#070707'>Express API</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>documentation</span><span
style='color:#333333;text-decoration:none'>. The Express API is pretty
complete, and chances</span></a><span style='color:#333333'> are, youll find
what youre looking for there.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you need information that isnt documented, sometimes
you have to<span style='letter-spacing:2.0pt'> </span>dive into the </span><a
href="https://github.com/expressjs/express"><span style='color:#070707'>Express
source</span></a><span style='color:#333333'>. I encourage you to do this!
Youll probably find that its a lot less intimidating than you might think.
Heres a quick roadmap to where youll find things in the Express source:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/application.js</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark285"></a><span style='color:#333333'>The main Express interface.
If you want to understand how<span style='letter-spacing:4.0pt'> </span>middleware
is linked in or how views are rendered, this is the place to <span
style='letter-spacing:-.1pt'>look.</span></span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/express.js</span></i></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark286"></a><span style='color:#333333'>A relatively short file
that primarily provides the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>createApplication </span><span style='color:#333333'>function
(the default export of this file), which creates an Express application
instance.</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/request.js</span></i></p>

<p class=MsoBodyText style='margin-top:8.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark287"></a><span style='color:#333333'>Extends Nodes </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http.IncomingMessage<span
style='letter-spacing:-1.15pt'> </span></span><span style='color:#333333'>object
to provide a robust request object. For information about all the request
object properties and methods, this is where to look.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/response.js</span></i></p>

<p class=MsoBodyText style='margin-top:8.15pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark288"></a><span style='color:#333333'>Extends Nodes </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http.ServerResponse<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>object
to provide the response object. For information about response object
properties and methods, this is where to look.</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/router/route.js</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark289"></a><span
style='color:#333333'>Provides<span style='letter-spacing:.55pt'> </span>basic<span
style='letter-spacing:.55pt'> </span>routing<span style='letter-spacing:.6pt'> </span>support.<span
style='letter-spacing:.65pt'> </span>While<span style='letter-spacing:.55pt'> </span>routing<span
style='letter-spacing:.6pt'> </span>is<span style='letter-spacing:.6pt'> </span>central<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.6pt'> </span>your<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>app,</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection127>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>this file is less than 230 lines long; youll find that
its quite simple and <span style='letter-spacing:-.1pt'>elegant.</span></span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>As you dig into the Express source code, youll probably
want to refer to the </span><a href="https://nodejs.org/en/docs/"><span
style='color:#070707'>Node documentation</span></a><span style='color:#333333'>,
especially the section on the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>HTTP<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>module.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Boiling<span
style='letter-spacing:-.2pt'> </span>It<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.2pt'>Down</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This chapter has provided an overview of the request and
response objects, which are the meat and potatoes of an Express application.
However, the chances are that you will be using a small subset of this
functionality most<span style='letter-spacing:4.0pt'> </span>of the time. So
lets break it down by functionality youll be using most <span
style='letter-spacing:-.1pt'>frequently.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Rendering<span style='letter-spacing:-.35pt'> </span><span
style='letter-spacing:-.1pt'>Content</span></span></h3>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark291"></a><span style='color:#333333'>When youre rendering content,
youll be using </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.render<span style='letter-spacing:-2.5pt'> </span></span><span
style='color:#333333'>most often, which renders views within layouts, providing
maximum value.</span></p>

<p class=MsoBodyText style='margin-top:.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>Occasionally, you may want to write a quick test page, so
you might use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.send<span style='letter-spacing:-2.2pt'> </span></span><span
style='color:#333333'>if you just want a test page. <a name="_bookmark292"></a>You
may use </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.query<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>to get
querystring values, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.session<span style='letter-spacing:-1.35pt'> </span></span><span
style='color:#333333'>to get session values, or </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>req.cookie</span><span
style='color:#333333'>/</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.signedCookies<span style='letter-spacing:-.85pt'> </span></span><span
style='color:#333333'>to get cookies. </span><a href="#_bookmark293"><span
style='color:#070707'>Example 6-1</span></a><span style='color:#070707'> </span><span
style='color:#333333'>to </span><a href="#_bookmark294"><span style='color:
#070707'>Example 6-8</span></a><span style='color:#070707'> </span><span
style='color:#333333'>demonstrate common content rendering tasks.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image047.gif"></td>
 </tr>
</table>

<br clear=ALL>
<a name="_bookmark293"></a><i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span
style='letter-spacing:.95pt'> </span>6-1.<span style='letter-spacing:1.0pt'> </span>Basic<span
style='letter-spacing:.95pt'> </span>usage<span style='letter-spacing:.95pt'> </span>(ch06/02-basic-<span
style='letter-spacing:-.1pt'>rendering.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><i><span style='font-size:14.0pt;
line-height:106%;color:#3F3F3F'>Example 6-2. Response codes other than 200
(ch06/03-different-response- <span style='letter-spacing:-.1pt'>codes.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image048.gif"
  alt="Text Box: app.get('/error', (req, res) =&gt; { res.status(500)"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:1.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection128>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image049.gif"
alt="Text Box: res.render('error')&#13;&#10;})&#13;&#10;&#13;&#10;// or on one line...&#13;&#10;&#13;&#10;app.get('/error', (req, res) =&gt; res.status(500).render('error'))&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><i><span style='font-size:3.5pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><i><span style='font-size:14.0pt;
line-height:106%;color:#3F3F3F'>Example 6-3. Passing a context to a view,
including querystring, cookie, and session values
(ch06/04-view-with-content.js)</span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image050.gif"
  alt="Text Box: app.get('/greeting', (req, res) =&gt; { res.render('greeting', {&#13;&#10;message: 'Hello esteemed programmer!', style: req.query.style,&#13;&#10;userid: req.cookies.userid, username: req.session.username&#13;&#10;})&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><i><span style='font-size:14.0pt;
line-height:106%;color:#3F3F3F'>Example 6-4. Rendering a view without a layout
(ch06/05-view-without- <span style='letter-spacing:-.1pt'>layout.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image047.gif"
  alt="Text Box: // the following layout doesn't have a layout file, so&#13;&#10;// views/no-layout.handlebars must include all necessary HTML&#13;&#10;app.get('/no-layout', (req, res) =&gt; res.render('no-layout', { layout: null })&#13;&#10;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><i><span style='font-size:14.0pt;
line-height:106%;color:#3F3F3F'>Example 6-5. Rendering a view with a custom
layout (ch06/06-custom- <span style='letter-spacing:-.1pt'>layout.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image051.gif"
  alt="Text Box: // the layout file views/layouts/custom.handlebars will be used&#13;&#10;app.get('/custom-layout', (req, res) =&gt; res.render('custom-layout', { layout: 'custom' })&#13;&#10;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image047.gif"></td>
 </tr>
</table>

<br clear=ALL>
<i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span style='letter-spacing:
.85pt'> </span>6-6.<span style='letter-spacing:.95pt'> </span>Rendering<span
style='letter-spacing:1.0pt'> </span>plain<span style='letter-spacing:.95pt'> </span>text<span
style='letter-spacing:.9pt'> </span>output<span style='letter-spacing:.85pt'> </span>(ch06/07-plaintext-<span
style='letter-spacing:-.1pt'>output.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image051.gif"></td>
 </tr>
</table>

<br clear=ALL>
<i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span style='letter-spacing:
.8pt'> </span>6-7.<span style='letter-spacing:.9pt'> </span>Adding<span
style='letter-spacing:.9pt'> </span>an<span style='letter-spacing:.85pt'> </span>error<span
style='letter-spacing:.85pt'> </span>handler<span style='letter-spacing:.8pt'> </span>(ch06/08-error-<span
style='letter-spacing:-.1pt'>handler.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

</div>

<span style='font-size:2.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection129>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="Providing_an_API"></a><a
name="_bookmark299"></a><span style='font-size:10.0pt'><img width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image052.gif"
alt="Text Box: // note that even if you don't need the &quot;next&quot; function, it must be&#13;&#10;// included for Express to recognize this as an error handler&#13;&#10;app.use((err, req, res, next) =&gt; { console.error('** SERVER ERROR: ' + err.message) res.status(500).render('08-error',&#13;&#10;{ message: &quot;you shouldn't have clicked that!&quot; })&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><i><span style='font-size:3.5pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image048.gif"></td>
 </tr>
</table>

<br clear=ALL>
<a name="_bookmark294"></a><i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span
style='letter-spacing:.8pt'> </span>6-8.<span style='letter-spacing:.9pt'> </span>Adding<span
style='letter-spacing:.9pt'> </span>a<span style='letter-spacing:.9pt'> </span>404<span
style='letter-spacing:.9pt'> </span>handler<span style='letter-spacing:.8pt'> </span>(ch06/09-custom-<span
style='letter-spacing:-.1pt'>404.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.05pt'><i><span style='font-size:14.5pt'>&nbsp;</span></i></p>

<h3 style='margin-top:4.5pt'><a name="Processing_Forms"></a><a
name="_bookmark295"></a><span style='color:#3F3F3F'>Processing<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Forms</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark296"></a><span style='color:#333333'>When youre processing
forms, the information from the forms will<span style='letter-spacing:2.0pt'> </span>usually
be in </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.body<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>(or
occasionally in </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.query</span><span style='color:#333333'>). <a
name="_bookmark297"></a>You may use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.xhr<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>to determine whether the request was an Ajax request or a
browser<span style='letter-spacing:1.45pt'> </span>request<span
style='letter-spacing:1.45pt'> </span>(this<span style='letter-spacing:1.45pt'>
</span>will<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.45pt'> </span>covered<span style='letter-spacing:1.5pt'>
</span>in<span style='letter-spacing:1.5pt'> </span>depth<span
style='letter-spacing:1.5pt'> </span>in<span style='letter-spacing:1.45pt'> </span></span><a
href="#_bookmark355"><span style='color:#070707'>Chapter<span style='letter-spacing:
1.45pt'> </span>8</span></a><span style='color:#333333'>).<span
style='letter-spacing:1.5pt'> </span>See </span><a href="#_bookmark298"><span
style='color:#070707'>Example 6-9</span></a><span style='color:#070707'> </span><span
style='color:#333333'>and </span><a href="#_bookmark300"><span
style='color:#070707'>Example 6-10</span></a><span style='color:#333333'>. For
the following examples, youll need to have body parser middleware linked in:</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const bodyParser = require('body-parser') app.use(bodyParser.urlencoded({ extended: false }))"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Well<span
style='letter-spacing:.55pt'> </span>learn<span style='letter-spacing:.65pt'> </span>more<span
style='letter-spacing:.55pt'> </span>about<span style='letter-spacing:.55pt'> </span>body<span
style='letter-spacing:.65pt'> </span>parser<span style='letter-spacing:.55pt'> </span>middleware<span
style='letter-spacing:.6pt'> </span>in<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark355"><span style='color:#070707'>Chapter<span style='letter-spacing:
.6pt'> </span><span style='letter-spacing:-.25pt'>8</span></span></a><span
style='color:#333333;letter-spacing:-.25pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:18.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image050.gif"></td>
 </tr>
</table>

<br clear=ALL>
<a name="_bookmark298"></a><i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span
style='letter-spacing:1.0pt'> </span>6-9.<span style='letter-spacing:1.05pt'> </span>Basic<span
style='letter-spacing:1.0pt'> </span>form<span style='letter-spacing:1.0pt'> </span>processing<span
style='letter-spacing:1.05pt'> </span>(ch06/10-basic-form-<span
style='letter-spacing:-.1pt'>processing.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.15pt'><i><span style='font-size:5.0pt'>&nbsp;</span></i></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:37.5pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><i><span style='font-size:14.0pt;
line-height:106%;color:#3F3F3F'>Example 6-10. More robust form processing
(ch06/11-more-robust-form- <span style='letter-spacing:-.1pt'>processing.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image051.gif"
  alt="Text Box: app.post('/process-contact', (req, res) =&gt; {"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:1.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection130>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image049.gif"
alt="Text Box: try {&#13;&#10;// here's where we would try to save contact to database or other&#13;&#10;// persistence mechanism...for now, we'll just simulate an error if(req.body.simulateError) throw new Error(&quot;error saving contact!&quot;) console.log(`contact from ${req.body.name} &lt;${req.body.email}&gt;`) res.format({&#13;&#10;'text/html': () =&gt; res.redirect(303, '/thank-you'), 'application/json': () =&gt; res.json({ success: true }),&#13;&#10;})&#13;&#10;} catch(err) {&#13;&#10;// here's where we would handle any persistence failures&#13;&#10;console.error(`error processing contact from ${req.body.name} ` +&#13;&#10;`&lt;${req.body.email}&gt;`) res.format({&#13;&#10;'text/html': () =&gt; res.redirect(303, '/contact-error'), 'application/json': () =&gt; res.status(500).json({&#13;&#10;error: 'error saving contact information' }),&#13;&#10;})&#13;&#10;}&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><i><span style='font-size:13.5pt'>&nbsp;</span></i></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Providing<span
style='letter-spacing:-.25pt'> </span>an<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark301"></a><span style='color:#333333'>When youre providing an
API, much like processing forms, the<span style='letter-spacing:4.0pt'> </span>parameters
will usually be in </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.query</span><span style='color:#333333'>, though you can
also use </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.body</span><span
style='color:#333333'>. Whats different about APIs is that youll usually be
returning JSON, XML, or even plain text, instead of HTML, and youll often be<span
style='letter-spacing:2.0pt'> </span>using less common HTTP methods like </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>PUT</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST</span><span style='color:#333333'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>DELETE</span><span
style='color:#333333'>. Providing an<span style='letter-spacing:1.5pt'> </span>API<span
style='letter-spacing:1.4pt'> </span>will<span style='letter-spacing:1.4pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>covered<span style='letter-spacing:1.5pt'>
</span>in<span style='letter-spacing:1.5pt'> </span></span><a
href="#_bookmark634"><span style='color:#070707'>Chapter<span style='letter-spacing:
1.4pt'> </span>15</span></a><span style='color:#333333'>.<span
style='letter-spacing:1.5pt'> </span></span><a href="#_bookmark302"><span
style='color:#070707'>Example<span style='letter-spacing:1.4pt'> </span>6-11</span></a><span
style='color:#070707;letter-spacing:1.4pt'> </span><span style='color:#333333'>and<span
style='letter-spacing:1.5pt'> </span></span><a href="#_bookmark304"><span
style='color:#070707'>Example<span style='letter-spacing:1.4pt'> </span>6-12</span></a><span
style='color:#070707'> </span><span style='color:#333333'>use the following
products array (which would normally be retrieved<span style='letter-spacing:
2.0pt'> </span>from a database):</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const tours = [&#13;&#10;{ id: 0, name: 'Hood River', price: 99.99 },&#13;&#10;{ id: 1, name: 'Oregon Coast', price: 149.95 },&#13;&#10;]&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection131>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><a name="_bookmark302"></a><i><span
style='font-size:14.0pt;line-height:106%;color:#3F3F3F'>Example 6-11. Simple
GET endpoint returning only JSON (ch06/12- <span style='letter-spacing:-.1pt'>api.get.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image051.gif"
  alt="Text Box: app.get('/api/tours', (req, res) =&gt; res.json(tours))"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><i><span style='font-size:7.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark303"></a><a href="#_bookmark304"><span style='color:#070707'>Example
6-12</span></a><span style='color:#070707'> </span><span style='color:#333333'>uses
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.format<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>method
in Express to respond according to the preferences of the client.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>&nbsp;</p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:85.9pt;margin-bottom:
.2pt;margin-left:55.0pt;line-height:106%'><a name="_bookmark304"></a><i><span
style='font-size:14.0pt;line-height:106%;color:#3F3F3F'>Example 6-12. GET
endpoint that returns JSON, XML, or text (ch06/13- <span style='letter-spacing:
-.1pt'>api-json-xml-text.js)</span></span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image050.gif"
  alt="Text Box: app.get('/api/tours', (req, res) =&gt; {&#13;&#10;const toursXml = '&lt;?xml version=&quot;1.0&quot;?&gt;&lt;tours&gt;' + tours.map(p =&gt;&#13;&#10;`&lt;tour price=&quot;${p.price}&quot; id=&quot;${p.id}&quot;&gt;${p.name}&lt;/tour&gt;`&#13;&#10;).join('') + '&lt;/tours&gt;'&#13;&#10;const toursText = tours.map(p =&gt;&#13;&#10;`${p.id}: ${p.name} (${p.price})`&#13;&#10;).join('\n') res.format({&#13;&#10;'application/json': () =&gt; res.json(tours),&#13;&#10;'application/xml': () =&gt; res.type('application/xml').send(toursXml), 'text/xml': () =&gt; res.type('text/xml').send(toursXml),&#13;&#10;'text/plain': () =&gt; res.type('text/plain').send(toursXml),&#13;&#10;})&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><i><span style='font-size:7.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:78.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
125%'><span style='color:#333333'>In </span><a href="#_bookmark305"><span
style='color:#070707'>Example 6-13</span></a><span style='color:#333333'>, the
PUT endpoint updates a product and returns JSON. Parameters<span
style='letter-spacing:-.35pt'> </span>are passed in the request body (the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>:id<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>in
the route string tells Express to add an </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>id<span style='letter-spacing:-1.55pt'> </span></span><span
style='color:#333333'>property to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.params</span><span style='color:#333333'>).</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>&nbsp;</p>

<p class=MsoNormal style='margin-left:55.0pt;text-align:justify'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image050.gif"></td>
 </tr>
</table>

<br clear=ALL>
<i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span style='letter-spacing:
.85pt'> </span>6-13.<span style='letter-spacing:.9pt'> </span>PUT<span
style='letter-spacing:.9pt'> </span>endpoint<span style='letter-spacing:.85pt'>
</span>for<span style='letter-spacing:.9pt'> </span>updating<span
style='letter-spacing:.95pt'> </span>(ch06/14-api-<span style='letter-spacing:
-.1pt'>put.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

</div>

<span style='font-size:2.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection132>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image049.gif"
alt="Text Box: if(!p) return res.status(404).json({ error: 'No such tour exists' })&#13;&#10;if(req.body.name) p.name = req.body.name if(req.body.price) p.price = req.body.price res.json({ success: true })&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:6.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Finally,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark306"><span
style='color:#070707'>Example<span style='letter-spacing:.6pt'> </span>6-14</span></a><span
style='color:#070707;letter-spacing:.7pt'> </span><span style='color:#333333'>shows<span
style='letter-spacing:.6pt'> </span>a<span style='letter-spacing:.6pt'> </span>DELETE<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>endpoint.</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:18.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image051.gif"></td>
 </tr>
</table>

<br clear=ALL>
<a name="_bookmark306"></a><i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span
style='letter-spacing:.9pt'> </span>6-14.<span style='letter-spacing:.9pt'> </span>DELETE<span
style='letter-spacing:.9pt'> </span>endpoint<span style='letter-spacing:.9pt'> </span>for<span
style='letter-spacing:.9pt'> </span>deleting<span style='letter-spacing:.95pt'>
</span>(ch06/15-api-<span style='letter-spacing:-.1pt'>del.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:2.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText><i><span style='font-size:10.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.1pt'><i><span style='font-size:11.0pt'>&nbsp;</span></i></p>

<h2 style='margin-top:4.5pt'><a name="_bookmark307"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:86.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>I hope the micro-examples in this chapter
gave you a feel for the kind of functionality that is common in an Express
application. These examples are intended to be a quick reference you can
revisit in the future.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the next chapter, well dig deeper into templating,
which we touched on in the rendering examples in this chapter.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:67.35pt;margin-bottom:.0001pt'><a href="#_bookmark230"><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707;
letter-spacing:4.55pt'> </span><a name="_bookmark308"></a><span
style='font-size:10.5pt;color:#333333'>Ports<span style='letter-spacing:.4pt'> </span>01023<span
style='letter-spacing:.35pt'> </span>are<span style='letter-spacing:.35pt'> </span>well-known<span
style='letter-spacing:.4pt'> </span>ports<span style='letter-spacing:.35pt'> </span>reserved<span
style='letter-spacing:.35pt'> </span>for<span style='letter-spacing:.4pt'> </span></span><a
href="http://bit.ly/33InJu7"><span style='font-size:10.5pt;color:#070707'>common<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.1pt'>services</span></span></a><span
style='font-size:10.5pt;color:#333333;letter-spacing:-.1pt'>.</span></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection133>

<h1 style='margin-right:37.5pt;line-height:105%'><a
name="7._Templating_with_Handlebars"></a><a name="_bookmark309"></a>Chapter 7.
Templating with <span style='letter-spacing:-.1pt'>Handlebars</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark310"></a><span style='color:#333333'>In this chapter, well
cover <i>templating</i>, which is a technique for<span style='letter-spacing:
4.0pt'> </span>constructing and formating your content to display to the user. <a
name="_bookmark311"></a>You can think of templating as an evolution of the form
letter: Dear [Name]: we regret to inform you nobody uses [Outdated Technology]
anymore, but templating is alive and well! To send that letter to a bunch of
people, you just have to replace [Name] and [Outdated Technology].</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;This process of replacing fields is sometimes called interpolation, which is just a fancy word for supplying missing information in this context.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While server-side templating is being fast supplanted by
frontend frameworks like React, Angular, and Vue, it still has applications,
like creating HTML email. Also, Angular and Vue both use a template-like
approach to writing HTML, so what you learn about server-side templating will
transfer to those frontend frameworks.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre coming from a PHP background, you may wonder
what the fuss<span style='letter-spacing:2.0pt'> </span>is all about: PHP is
one of the first languages that could really be called a templating language.
Almost all major languages that have been adapted for the web have included
some kind of templating support. What is different today<span style='letter-spacing:
1.6pt'> </span>is that the <i>templating<span style='letter-spacing:1.6pt'> </span>engine
</i>is being<span style='letter-spacing:1.6pt'> </span>decoupled<span
style='letter-spacing:1.6pt'> </span>from the</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection134>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>language.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:98.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>So what does templating look like? Lets
start with what templating is replacing by considering the most obvious and
straightforward way to generate one language from another (specifically, well
generate some HTML with JavaScript):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: document.write('&lt;h1&gt;Please Don\'t Do This&lt;/h1&gt;')&#13;&#10;document.write('&lt;p&gt;&lt;span class=&quot;code&quot;&gt;document.write&lt;/span&gt; is naughty,\n') document.write('and should be avoided at all costs.&lt;/p&gt;') document.write('&lt;p&gt;Today\'s date is ' + new Date() + '.&lt;/p&gt;')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Perhaps the only reason this seems obvious is that its
the way programming has always been taught:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#9999FF;
background:#FBFBFB'>10<span style='letter-spacing:.6pt'> </span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>PRINT<span style='letter-spacing:.6pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
background:#FBFBFB'>&quot;Hello<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>world!<a
name="There_Are_No_Absolute_Rules_Except_This_"></a><a name="_bookmark312"></a>&quot;</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>In imperative languages, were used to saying, Do this,
then do that, then do<span style='letter-spacing:1.6pt'> </span>something<span
style='letter-spacing:1.6pt'> </span>else.<span style='letter-spacing:1.55pt'>
</span>For<span style='letter-spacing:1.55pt'> </span>some<span
style='letter-spacing:1.55pt'> </span>things,<span style='letter-spacing:1.6pt'>
</span>this<span style='letter-spacing:1.55pt'> </span>approach<span
style='letter-spacing:1.6pt'> </span>works<span style='letter-spacing:1.55pt'> </span>fine.<span
style='letter-spacing:1.6pt'> </span>If<span style='letter-spacing:1.55pt'> </span>you
have 500 lines of JavaScript to perform a complicated calculation that results
in a single number, and every step is dependent on the previous<span
style='letter-spacing:4.0pt'> </span>step, theres no harm in it. What if its
the other way around, though? You have 500 lines of HTML and 3 lines of
JavaScript. Does it make sense to write </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>document.write<span style='letter-spacing:-1.25pt'> </span></span><span
style='color:#333333'>500 times? Not at all.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark313"></a><span style='color:#333333'>Really,<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.6pt'> </span>problem<span
style='letter-spacing:1.6pt'> </span>boils<span style='letter-spacing:1.6pt'> </span>down<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.65pt'> </span>this:<span
style='letter-spacing:1.6pt'> </span>switching<span style='letter-spacing:1.65pt'>
</span>context<span style='letter-spacing:1.6pt'> </span>is<span
style='letter-spacing:1.6pt'> </span>problematic. If youre writing lots of
JavaScript, its inconvenient and confusing to be mixing in HTML. The other way
isnt so bad. Were quite used to writing JavaScript in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;script&gt;<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>blocks,
but I hope you see the difference: theres still a context switch, and either
youre writing HTML or youre in a</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:16.5pt'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;script&gt;<span
style='letter-spacing:-2.85pt'> </span></span><span style='color:#333333'>block<span
style='letter-spacing:.75pt'> </span>writing<span style='letter-spacing:.75pt'>
</span>JavaScript.<span style='letter-spacing:.75pt'> </span>Having<span
style='letter-spacing:.75pt'> </span>JavaScript<span style='letter-spacing:
.7pt'> </span>emit<span style='letter-spacing:.7pt'> </span>HTML<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.25pt'>is</span></span></p>

<p class=MsoBodyText style='margin-top:5.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>fraught<span
style='letter-spacing:.55pt'> </span>with<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>problems:</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection135>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15809536'><span style='left:0px;position:absolute;
left:169px;top:-83532px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>You have to constantly worry about what characters need
to be escaped and how to do that.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15810048'><span style='left:0px;position:absolute;
left:169px;top:-83585px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Using JavaScript to generate HTML that itself includes
JavaScript quickly leads to madness.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:95.45pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15810560'><span style='left:0px;position:absolute;
left:169px;top:-83646px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>You usually lose the nice syntax highlighting and other
handy language-specific features your editor has.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:15811072'><span style='left:0px;position:absolute;
left:169px;top:-83707px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='position:relative;z-index:15811584'><span style='left:0px;position:absolute;
left:169px;top:-83707px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>It can be much harder to spot malformed HTML. Your code
is hard to visually parse.</span></p>

<p class=MsoBodyText style='margin-left:105.35pt;line-height:16.1pt'><span
style='position:relative;z-index:15812096'><span style='left:0px;position:absolute;
left:169px;top:-83794px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>It<span style='letter-spacing:.45pt'> </span>can<span
style='letter-spacing:.5pt'> </span>make<span style='letter-spacing:.5pt'> </span>it<span
style='letter-spacing:.45pt'> </span>harder<span style='letter-spacing:.5pt'> </span>for<span
style='letter-spacing:.45pt'> </span>other<span style='letter-spacing:.5pt'> </span>people<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.5pt'> </span>understand<span
style='letter-spacing:.55pt'> </span>your<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>code.</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Templating solves the problem by allowing you to write in
the target language, while at the same time providing the ability to insert
dynamic data. Consider the previous example rewritten as a Mustache template:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;h1&gt;Much Better&lt;/h1&gt;&#13;&#10;&lt;p&gt;No &lt;span class=&quot;code&quot;&gt;document.write&lt;/span&gt; here!&lt;/p&gt;&#13;&#10;&lt;p&gt;Today's date is {{today}}.&lt;/p&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Now all we have to do is provide a value for </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{today}}</span><span
style='color:#333333'>, and thats at the heart of templating languages.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2 style='margin-right:85.3pt;line-height:102%'><span style='color:#8E0011'>There
Are No Absolute Rules Except This <span style='letter-spacing:-.2pt'>One</span></span></h2>

<p class=MsoBodyText style='margin-top:13.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark314"></a><span style='color:#333333'>Im not suggesting that you
should <i>never </i>write HTML in JavaScript, only that you should avoid it
whenever possible. In particular, its slightly more palatable in frontend
code, especially if youre using a robust frontend framework. For example, this
would pass with little comment from me:</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: document.querySelector('#error').innerHTML = 'Something &lt;b&gt;very bad&lt;/b&gt; happened!'"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection136>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a
name="Pug:_A_Different_Approach"></a><a name="_bookmark317"></a><span
style='color:#333333'>However,<span style='letter-spacing:.65pt'> </span>say<span
style='letter-spacing:.65pt'> </span>that<span style='letter-spacing:.55pt'> </span>eventually<span
style='letter-spacing:.65pt'> </span>mutated<span style='letter-spacing:.65pt'>
</span>into<span style='letter-spacing:.65pt'> </span><span style='letter-spacing:
-.1pt'>this:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: document.querySelector('#error').innerHTML = '&lt;div class=&quot;error&quot;&gt;&lt;h3&gt;Error&lt;/h3&gt;' +&#13;&#10;'&lt;p&gt;Something &lt;b&gt;&lt;a href=&quot;/error-detail/' + errorNumber +&#13;&#10;'&quot;&gt;very bad&lt;/a&gt;&lt;/b&gt; ' +&#13;&#10;'happened. &lt;a href=&quot;/try-again&quot;&gt;Try again&lt;a&gt;, or ' + '&lt;a href=&quot;/contact&quot;&gt;contact support&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;'&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Then<span style='letter-spacing:1.3pt'> </span>I<span
style='letter-spacing:1.25pt'> </span>might<span style='letter-spacing:1.25pt'>
</span>suggest<span style='letter-spacing:1.25pt'> </span>its<span
style='letter-spacing:1.25pt'> </span>time<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>employ<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.25pt'> </span>template.<span style='letter-spacing:
1.3pt'> </span>The<span style='letter-spacing:1.25pt'> </span>point<span
style='letter-spacing:1.25pt'> </span>is,<span style='letter-spacing:1.3pt'> </span>I
suggest you develop good judgment when deciding where to draw the line between
HTML in strings and using templates. I would err on the side of templates,
however, and avoid generating HTML with JavaScript except<span
style='letter-spacing:4.0pt'> </span>for the simplest cases.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Choosing_a_Template_Engine"></a><a name="_bookmark315"></a><span
style='color:#8E0011'>Choosing<span style='letter-spacing:-.35pt'> </span>a<span
style='letter-spacing:-.25pt'> </span>Template<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Engine</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:77.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark316"></a><span style='color:#333333'>In the Node world,
you have many templating engines to choose from, so how to pick? Its a
complicated question, and very much depends on your needs. Here are some
criteria to consider, though:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Performance</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Clearly, you want your templating engine to be as fast as
possible. Its not something you want slowing down your website.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Client,<span style='letter-spacing:.5pt'> </span>server,<span
style='letter-spacing:.5pt'> </span>or<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>both?</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Most, but not all, templating engines are available on
both the server and client sides. If you need to use templates in both realms
(and you will), I recommend you pick something that is equally capable in<span
style='letter-spacing:2.0pt'> </span>either capacity.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Abstraction</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Do you want something familiar (like normal HTML with
curly brackets thrown in, for example), or do you secretly hate HTML and</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection137>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>would love something that saves you from all those angle
brackets? Templating (especially server-side templating) gives you some choices
<span style='letter-spacing:-.1pt'>here.</span></span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>These<span style='letter-spacing:1.45pt'> </span>are<span
style='letter-spacing:1.45pt'> </span>just<span style='letter-spacing:1.45pt'> </span>some<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>more<span style='letter-spacing:1.45pt'> </span>prominent<span
style='letter-spacing:1.45pt'> </span>criteria<span style='letter-spacing:1.45pt'>
</span>in<span style='letter-spacing:1.5pt'> </span>selecting<span
style='letter-spacing:1.5pt'> </span>a templating language. Templating options
are pretty mature at this point, so you probably cant go too wrong with
whatever you pick.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:94.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Express allows you to use any templating engine you wish,
so if Handlebars is not to your liking, youll find its easy to switch it out.
If you want to explore your options, you can use the fun and useful </span><a
href="http://bit.ly/2CExtK0"><span style='color:#070707'>Template-Engine-Chooser</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(its still useful
even though its no longer being updated).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets take a look at a particularly abstract templating
engine before we get to our discussion of Handlebars.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Pug:<span style='letter-spacing:-.2pt'> </span>A<span
style='letter-spacing:-.2pt'> </span>Different<span style='letter-spacing:-.15pt'>
</span><span style='letter-spacing:-.1pt'>Approach</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark319"></a><span style='color:#333333'>Whereas most templating
engines take an HTML-centric approach, Pug stands out by abstracting the
details of HTML away from you. <a name="_bookmark318"></a>It is also worth
noting that Pug is the brainchild of TJ Holowaychuk, the same person who
brought us Express. It should come as no surprise, then, that Pug integration
with Express is very good. The approach that Pug takes is noble: at its core is
the assertion that HTML is a fussy and tedious<span style='letter-spacing:4.0pt'>
</span>language to write by hand. Lets take a look at what a Pug template
looks </span><a href="https://pugjs.org/"><span style='color:#333333;
text-decoration:none'>like, along with the HTML it will output (originally
taken from the </span><span style='color:#070707'>Pug</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>home
page</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>and modified slightly to fit the
book format):</span></a></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=398 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=559 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image053.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection138>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Handlebars_Basics"></a><a
name="_bookmark320"></a><span style='font-size:10.0pt'><img width=556 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image054.gif"></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Pug certainly represents a lot less typing (no more angle
brackets or closing tags). Instead, it relies on indentation and some
commonsense rules, making it easier to say what you mean. Pug has an additional
advantage: theoretically, when HTML itself changes, you can simply get Pug to
retarget the newest version of HTML, allowing you to future proof your
content.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>As much as I admire the Pug philosophy and the elegance
of its execution, Ive<span style='letter-spacing:1.4pt'> </span>found<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.4pt'> </span>I<span
style='letter-spacing:1.4pt'> </span>dont<span style='letter-spacing:1.4pt'> </span>want<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>details<span
style='letter-spacing:1.4pt'> </span>of<span style='letter-spacing:1.4pt'> </span>HTML<span
style='letter-spacing:1.4pt'> </span>abstracted<span style='letter-spacing:
1.5pt'> </span>away<span style='letter-spacing:1.5pt'> </span>from me.<span
style='letter-spacing:1.2pt'> </span>As<span style='letter-spacing:1.15pt'> </span>a<span
style='letter-spacing:1.15pt'> </span>web<span style='letter-spacing:1.2pt'> </span>developer,<span
style='letter-spacing:1.2pt'> </span>HTML<span style='letter-spacing:1.15pt'> </span>is<span
style='letter-spacing:1.15pt'> </span>at<span style='letter-spacing:1.15pt'> </span>the<span
style='letter-spacing:1.15pt'> </span>heart<span style='letter-spacing:1.15pt'>
</span>of<span style='letter-spacing:1.15pt'> </span>everything<span
style='letter-spacing:1.2pt'> </span>I<span style='letter-spacing:1.15pt'> </span>do,<span
style='letter-spacing:1.2pt'> </span>and<span style='letter-spacing:1.2pt'> </span>if
the price is wearing out the angle bracket keys on my keyboard, then so be it.
A lot of frontend developers I talk to feel the same, so maybe the world just
isnt ready for Pug.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Heres where well part ways with Pug; you wont be seeing
it in this book.<span style='letter-spacing:.85pt'> </span>However,<span
style='letter-spacing:.85pt'> </span>if the abstraction<span style='letter-spacing:
.85pt'> </span>appeals to<span style='letter-spacing:.85pt'> </span>you,<span
style='letter-spacing:.85pt'> </span>you<span style='letter-spacing:.85pt'> </span>will
certainly<span style='letter-spacing:.85pt'> </span>have</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection139>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>no problems using Pug with Express, and there are plenty
of resources to help you do so.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Handlebars<span style='letter-spacing:-.45pt'> </span><span
style='letter-spacing:-.1pt'>Basics</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark321"></a><i><span style='color:#333333'>Handlebars </span></i><span
style='color:#333333'>is an extension of Mustache, another popular templating<span
style='letter-spacing:4.0pt'> </span>engine. I recommend Handlebars for its
easy JavaScript integration (both frontend and backend) and familiar syntax.
For me, it strikes all the right balances and is what well be focusing on in
this book. The concepts were discussing are broadly applicable to other
templating engines, though, so<span style='letter-spacing:2.0pt'> </span>you
will be well prepared to try different templating engines if Handlebars doesnt
strike your fancy.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark323"></a><span style='color:#333333'>The key to understanding
templating is understanding the concept of <i>context</i>. <a
name="_bookmark322"></a>When you render a template, you pass the templating
engine an object called the <i>context object</i>, and this is what allows
replacements to <span style='letter-spacing:-.2pt'>work.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>For<span
style='letter-spacing:.5pt'> </span>example,<span style='letter-spacing:.55pt'>
</span>if<span style='letter-spacing:.5pt'> </span>my<span style='letter-spacing:
.55pt'> </span>context<span style='letter-spacing:.5pt'> </span>object<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>is</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:19.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>{<span style='letter-spacing:.7pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>name</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454;background:#FBFBFB'>:<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
background:#FBFBFB'>'Buttercup'<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.5pt;background:#FBFBFB'>}</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>and<span
style='letter-spacing:.5pt'> </span>my<span style='letter-spacing:.55pt'> </span>template<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>is</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'>&lt;p&gt;</span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'>Hello,<span
style='letter-spacing:1.05pt'> </span><span style='letter-spacing:-.1pt'>{{name}}!</span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/p&gt;</span></b><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText style='margin-top:.25pt'><b><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>then </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{name}}<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>will be replaced with </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>Buttercup</span><span
style='color:#333333'>. What if you want to pass HTML to the template? For
example, if our context was instead</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>{<span style='letter-spacing:.95pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>name</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454;background:#FBFBFB'>:<span style='letter-spacing:1.0pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
background:#FBFBFB'>'&lt;b&gt;Buttercup&lt;/b&gt;'<span style='letter-spacing:
1.0pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.5pt;background:#FBFBFB'>}</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>then<span
style='letter-spacing:.5pt'> </span>using<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.5pt'> </span>previous<span style='letter-spacing:.5pt'> </span>template<span
style='letter-spacing:.5pt'> </span>will<span style='letter-spacing:.45pt'> </span>result<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.55pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>&lt;p&gt;Hello,</span></p>

</div>

<span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection140>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&amp;lt;b&amp;gt;Buttercup&amp;lt;b&amp;gt;&lt;/p&gt;</span><span
style='color:#333333'>, which is probably not what youre looking for. To solve
this problem, simply use three curly brackets instead of two: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{{name}}}</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;While weve already established that we should avoid writing HTML in JavaScript, the ability to turn off HTML escaping with triple curly brackets has some important uses. For example, if you were building a content management system (CMS) with what you see is what you get (WYSIWYG) editors, you would probably want to be able to pass HTML to your views. Also, the ability to render properties from the context without HTML escaping is important for layouts and sections, which well learn about shortly.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In </span><a href="#_bookmark324"><span style='color:
#070707'>Figure 7-1</span></a><span style='color:#333333'>, we see how the
Handlebars engine uses the context (represented by an oval) combined with the
template to render HTML.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection141>

<p class=MsoBodyText style='margin-left:65.8pt'><a name=Blocks></a><a
name="_bookmark328"></a><span style='font-size:10.0pt'><img border=0 width=547
height=504 id=image13.jpeg
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image055.jpg"></span></p>

<p class=MsoNormal align=center style='margin-top:3.15pt;margin-right:15.85pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><a
name="_bookmark324"></a><i><span style='font-size:10.5pt'>Figure<span
style='letter-spacing:.4pt'> </span>7-1.<span style='letter-spacing:.45pt'> </span>Rendering<span
style='letter-spacing:.45pt'> </span>HTML<span style='letter-spacing:.45pt'> </span>with<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Handlebars</span></span></i></p>

<p class=MsoBodyText><i><span style='font-size:12.0pt'>&nbsp;</span></i></p>

<h3 style='margin-top:8.05pt'><a name=Comments></a><a name="_bookmark325"></a><span
style='color:#3F3F3F;letter-spacing:-.1pt'>Comments</span></h3>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark327"></a><i><span style='color:#333333'>Comments </span></i><a
name="_bookmark326"></a><span style='color:#333333'>in Handlebars look like </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{! comment goes
here }}</span><span style='color:#333333'>. Its important to understand the
distinction between Handlebars comments and HTML comments. Consider the
following template:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: {{! super-secret comment }}&#13;&#10;&lt;!-- not-so-secret comment --&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Assuming this is a server-side template, the super-secret
comment will never be sent to the browser, whereas the not-so-secret comment
will be visible if the user inspects the HTML source. You should prefer</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection142>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Handlebars comments for anything that exposes
implementation details, or anything else you dont want exposed.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Blocks</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:91.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark329"></a><span style='color:#333333'>Things start to
get more complicated when you consider <i>blocks</i>. Blocks provide flow
control, conditional execution, and extensibility. Consider the following
context object:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: {&#13;&#10;currency: {&#13;&#10;name: 'United States dollars', abbrev: 'USD',&#13;&#10;},&#13;&#10;tours: [&#13;&#10;{ name: 'Hood River', price: '$99.95' },&#13;&#10;{ name: 'Oregon Coast', price: '$159.95' },&#13;&#10;],&#13;&#10;specialsUrl: '/january-specials', currencies: [ 'USD', 'GBP', 'BTC' ],&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>lets<span style='letter-spacing:.5pt'> </span>examine<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.45pt'> </span>template<span
style='letter-spacing:.5pt'> </span>we<span style='letter-spacing:.45pt'> </span>can<span
style='letter-spacing:.55pt'> </span>pass<span style='letter-spacing:.5pt'> </span>that<span
style='letter-spacing:.45pt'> </span>context<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>to:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: &lt;ul&gt;&#13;&#10;{{#each tours}}&#13;&#10;{{! I'm in a new block...and the context has changed }}&#13;&#10;&lt;li&gt;&#13;&#10;{{name}} - {{price}}&#13;&#10;{{#if ../currencies}} ({{../currency.abbrev}})&#13;&#10;{{/if}}&#13;&#10;&lt;/li&gt;&#13;&#10;{{/each}}&#13;&#10;&lt;/ul&gt;&#13;&#10;{{#unless currencies}}&#13;&#10;&lt;p&gt;All prices in {{currency.name}}.&lt;/p&gt;&#13;&#10;{{/unless}}&#13;&#10;{{#if specialsUrl}}&#13;&#10;{{! I'm in a new block...but the context hasn't changed (sortof) }}&#13;&#10;&lt;p&gt;Check out our &lt;a href=&quot;{{specialsUrl}}&quot;&gt;specials!&lt;/p&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection143>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image024.gif"
alt="Text Box: {{else}}&#13;&#10;&lt;p&gt;Please check back often for specials.&lt;/p&gt;&#13;&#10;{{/if}}&#13;&#10;&lt;p&gt;&#13;&#10;{{#each currencies}}&#13;&#10;&lt;a href=&quot;#&quot; class=&quot;currency&quot;&gt;{{.}}&lt;/a&gt;&#13;&#10;{{else}}&#13;&#10;Unfortunately, we currently only accept {{currency.name}}.&#13;&#10;{{/each}}&#13;&#10;&lt;/p&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>A lot is going on in this template, so lets break it
down. It starts off with<span style='letter-spacing:4.0pt'> </span>the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>each<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>helper,
which allows us to iterate over an array. Whats important to<span
style='letter-spacing:1.6pt'> </span>understand<span style='letter-spacing:
1.6pt'> </span>is that between<span style='letter-spacing:1.6pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{#each<span
style='letter-spacing:2.0pt'> </span>tours}}<span style='letter-spacing:-2.0pt'>
</span></span><span style='color:#333333'>and<span style='letter-spacing:1.6pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{/each<span
style='letter-spacing:2.0pt'> </span>tours}}</span><span style='color:#333333'>,
the context changes. On the first pass, it changes to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{ name: 'Hood
River', price: '$99.95' }</span><span style='color:#333333'>, and on the second
pass, the context is </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{ name:<span style='letter-spacing:2.0pt'> </span>'Oregon<span
style='letter-spacing:2.0pt'> </span>Coast',<span style='letter-spacing:2.0pt'>
</span>price:<span style='letter-spacing:2.0pt'> </span>'$159.95'<span
style='letter-spacing:2.0pt'> </span>}</span><span style='color:#333333'>.<span
style='letter-spacing:1.25pt'> </span>So<span style='letter-spacing:1.25pt'> </span>within<span
style='letter-spacing:1.25pt'> </span>that<span style='letter-spacing:1.15pt'> </span>block,
we can refer to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{name}}<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{price}}</span><span style='color:#333333'>. However, if we
want to access<span style='letter-spacing:2.0pt'> </span>the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>currency<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>object,
we have to use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>../<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>to access the <i>parent </i>context.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>If a property of the context is itself an object, we can
access its properties as normal with a period, such as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{currency.name}}</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Both </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>if<span style='letter-spacing:-2.85pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>each<span style='letter-spacing:-2.85pt'> </span></span><span
style='color:#333333'>have an optional </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>else<span style='letter-spacing:-2.85pt'> </span></span><span
style='color:#333333'>block (with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>each</span><span style='color:#333333'>, if there are no
elements in the array, the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>else<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>block will execute). Weve also used the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>unless<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>helper,
which is essentially the opposite of the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>if<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>helper: it executes only if the argument is false.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify'><span
style='color:#333333'>The<span style='letter-spacing:.35pt'> </span>last<span
style='letter-spacing:.4pt'> </span>thing<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.45pt'> </span>note<span style='letter-spacing:.4pt'> </span>about<span
style='letter-spacing:.4pt'> </span>this<span style='letter-spacing:.35pt'> </span>template<span
style='letter-spacing:.4pt'> </span>is<span style='letter-spacing:.4pt'> </span>the<span
style='letter-spacing:.4pt'> </span>use<span style='letter-spacing:.4pt'> </span>of<span
style='letter-spacing:.4pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{.}}<span style='letter-spacing:-3.1pt'> </span></span><span
style='color:#333333'>in<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.25pt'>the</span></span></p>

<p class=MsoBodyText style='margin-top:4.2pt;margin-right:72.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
131%'><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{#each
currencies}}<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>block. </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{.}}<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>refers to the current context; in this case, the current
context is simply a string in an array that we want to print <span
style='letter-spacing:-.2pt'>out.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image036.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection144>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<h3 style='margin-top:4.55pt'><a name="Server-Side_Templates"></a><a
name="_bookmark332"></a><span style='color:#3F3F3F'>Server-Side<span
style='letter-spacing:-.55pt'> </span><span style='letter-spacing:-.1pt'>Templates</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark333"></a><i><span style='color:#333333'>Server-side templates </span></i><span
style='color:#333333'>allow you to render HTML <i>before </i>its sent to the
client. Unlike client-side templating, where the templates are available for
the curious user who<span style='letter-spacing:1.5pt'> </span>knows how to<span
style='letter-spacing:1.5pt'> </span>view the HTML source,<span
style='letter-spacing:1.5pt'> </span>your users<span style='letter-spacing:
2.0pt'> </span>will never see your server-side template or the context objects
used to generate the final HTML.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark334"></a><span style='color:#333333'>Server-side templates, in
addition to hiding your implementation details, support template <i>caching</i>,
which is important for performance. The templating engine will cache compiled
templates (recompiling and recaching only when the template itself changes),
which will improve the performance of templated views. By default, view caching
is disabled in development mode and enabled in production mode. If you want to
explicitly enable view caching, you can do so thusly:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>set</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'view<span style='letter-spacing:1.2pt'> </span>cache'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:1.2pt'> </span></span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
letter-spacing:-.1pt;background:#FBFBFB'>true</span></b><a
name="Views_and_Layouts"></a><a name="_bookmark335"></a><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>)</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Out of the box, Express supports Pug, EJS, and JSHTML.
Weve already discussed Pug, and I find little to recommend EJS or JSHTML
(neither go far enough, syntactically, for my taste). <a name="_bookmark336"></a>So
well need to add a Node package that provides Handlebars support for Express:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:1.05pt'> </span>install<span
style='letter-spacing:1.1pt'> </span>express-<span style='letter-spacing:-.1pt'>handlebars</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.65pt'> </span>well<span
style='letter-spacing:.55pt'> </span>link<span style='letter-spacing:.7pt'> </span>it<span
style='letter-spacing:.55pt'> </span>into<span style='letter-spacing:.65pt'> </span>Express<span
style='letter-spacing:.6pt'> </span>(<i>ch07/00/meadowlark.js<span
style='letter-spacing:.6pt'> </span></i>in<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>companion</span></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection145>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>repo):</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const expressHandlebars = require('express-handlebars') app.engine('handlebars', expressHandlebars({&#13;&#10;defaultLayout: 'main',&#13;&#10;})&#13;&#10;app.set('view engine', 'handlebars')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;express-handlebars expects Handlebars templates to have the .handlebars extension. Ive grown used to this, but if its too wordy for you, you can change the extension to the also common .hbs when you create the express-handlebars instance: app.engine('handlebars', expressHandlebars({ extname: '.hbs' })).&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Views<span
style='letter-spacing:-.2pt'> </span>and<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark337"></a><span style='color:#333333'>A <i>view </i>usually
represents an individual page on your website (though it could represent an
Ajax-loaded portion of a page, an email, or anything else for that matter). By
default, Express looks for views in the <i>views </i>subdirectory. <a
name="_bookmark338"></a>A <i>layout </i>is a special kind of viewessentially,
a template<span style='letter-spacing:2.0pt'> </span>for templates. Layouts are
essential because most (if not all) of the pages on your site will have an
almost identical layout. For example, they must have an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;html&gt;<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>element
and a </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;title&gt;<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>element,
they usually all load the same CSS files, and so on. You dont want to have to
duplicate that code for every single page, which is where layouts come in.
Lets look at a<span style='letter-spacing:4.0pt'> </span>bare-bones layout
file:</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;!doctype html&gt;&#13;&#10;&lt;html&gt;&#13;&#10;&lt;head&gt;&#13;&#10;&lt;title&gt;Meadowlark Travel&lt;/title&gt;&#13;&#10;&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/main.css&quot;&gt;&#13;&#10;&lt;/head&gt;&#13;&#10;&lt;body&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection146>

<p class=MsoBodyText style='margin-left:69.4pt'><a
name="Using_Layouts_(or_Not)_in_Express"></a><a name="_bookmark339"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: {{{body}}}&#13;&#10;&lt;/body&gt;&#13;&#10;&lt;/html&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Notice the text inside the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>&lt;body&gt;<span style='letter-spacing:
-2.0pt'> </span></span><span style='color:#333333'>tag: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{{body}}}</span><span
style='color:#333333'>. Thats so the view engine knows where to render the
content of your view. Its important to<span style='letter-spacing:4.0pt'> </span>use
three curly brackets instead of two: our view is most likely to contain HTML,<span
style='letter-spacing:1.55pt'> </span>and<span style='letter-spacing:1.55pt'> </span>we<span
style='letter-spacing:1.5pt'> </span>dont<span style='letter-spacing:1.5pt'> </span>want<span
style='letter-spacing:1.5pt'> </span>Handlebars<span style='letter-spacing:
1.5pt'> </span>trying<span style='letter-spacing:1.55pt'> </span>to<span
style='letter-spacing:1.55pt'> </span>escape<span style='letter-spacing:1.5pt'>
</span>it.<span style='letter-spacing:1.55pt'> </span>Note<span
style='letter-spacing:1.5pt'> </span>that theres no restriction on where you
place the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{{body}}}<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>field.
For example, if you were building a responsive layout in Bootstrap, you would
probably want to put your view inside a container </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;div&gt;</span><span
style='color:#333333'>. Also, common page elements like headers and footers
usually live in the layout, not the view. Heres an example:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;!-- ... --&gt;&#13;&#10;&lt;body&gt;&#13;&#10;&lt;div class=&quot;container&quot;&gt;&#13;&#10;&lt;header&gt;&#13;&#10;&lt;div class=&quot;container&quot;&gt;&#13;&#10;&lt;h1&gt;Meadowlark Travel&lt;/h1&gt;&#13;&#10;&lt;img src=&quot;/img/logo.png&quot; alt=&quot;Meadowlark Travel Logo&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;&lt;div class=&quot;container&quot;&gt;&#13;&#10;{{{body}}}&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;footer&gt;&amp;copy; 2019 Meadowlark Travel&lt;/footer&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/body&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In </span><a href="#_bookmark340"><span style='color:
#070707'>Figure 7-2</span></a><span style='color:#333333'>, we see how the
template engine combines the view, layout, and context. The important thing
that this diagram makes clear is the order of operations. The <i>view is
rendered first</i>, before the layout. At first, this<span style='letter-spacing:
4.0pt'> </span>may seem counterintuitive: the view is being rendered <i>inside </i>the
layout, so shouldnt the layout be rendered first? While it could technically
be done this way, there are advantages to doing it in reverse. Particularly, it
allows the view itself to further customize the layout, which will come in
handy</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection147>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>when<span
style='letter-spacing:.5pt'> </span>we<span style='letter-spacing:.45pt'> </span>discuss<span
style='letter-spacing:.45pt'> </span><i>sections<span style='letter-spacing:
.45pt'> </span></i>later<span style='letter-spacing:.45pt'> </span>in<span
style='letter-spacing:.5pt'> </span>this<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>chapter.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image056.gif"
  alt="Text Box: NOTE&#13;&#10;Because of the order of operations, you can pass a property called body into the view, and it will render correctly in the view. However, when the layout is rendered, the value of body will be overwritten by the rendered view.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Using<span
style='letter-spacing:-.15pt'> </span>Layouts<span style='letter-spacing:-.2pt'>
</span>(or<span style='letter-spacing:-.2pt'> </span>Not)<span
style='letter-spacing:-.15pt'> </span>in<span style='letter-spacing:-.1pt'>
Express</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Chances are, most (if not all) of your pages will use the
same layout, so it doesnt make sense to keep specifying the layout every time
we render a view. Youll notice that when we created the view engine, we
specified<span style='letter-spacing:4.0pt'> </span>the name of the default
layout:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.engine('handlebars', expressHandlebars({ defaultLayout: 'main',&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>By default, Express
looks for views in the <i>views </i>subdirectory, and layouts in <i>views/layouts</i>.
So if you have a view <i>views/foo.handlebars</i>, you can render it this way:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/foo'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.8pt'> </span>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.8pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'foo'</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>))</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:79.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
130%'><span style='color:#333333'>It will use <i>views/layouts/main.handlebars </i>as
the layout. If you dont want to use a layout at all (meaning youll have to
have all of the boilerplate in the view), you can specify </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>layout: null<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>in
the context object:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/foo'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.85pt'> </span>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.9pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'foo'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.9pt'> </span>{<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>layout</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:#545454;background:#FBFBFB'>:<span
style='letter-spacing:.9pt'> </span></span><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699;background:#FBFBFB'>null<span
style='letter-spacing:.85pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.25pt;
background:#FBFBFB'>}))</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection148>

<p class=MsoNormal align=center style='margin-top:3.75pt;margin-right:43.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><a
name=Sections></a><a name="_bookmark341"></a><a name="_bookmark340"></a><b><span
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:#111111'>STEP<span
style='letter-spacing:-.6pt'> </span>1:Render</span></b><b><span
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:#111111;
letter-spacing:-.5pt'> </span></b><b><span style='font-size:10.0pt;font-family:
"Arial",sans-serif;color:#111111;letter-spacing:-.2pt'>View</span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.15pt'><b><span style='font-size:10.5pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-top:4.7pt;margin-right:0cm;margin-bottom:0cm;
margin-left:332.6pt;margin-bottom:.0001pt'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=135 height=0></td>
  <td width=336></td>
  <td width=6></td>
  <td width=207></td>
 </tr>
 <tr>
  <td height=4></td>
  <td align=left valign=top><img width=336 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image057.gif"></td>
  <td></td>
  <td align=left valign=top><img width=207 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image058.gif"></td>
 </tr>
</table>

<br clear=ALL>
<span style='position:relative;z-index:15822336'><span style='left:0px;
position:absolute;left:138px;top:-94602px;width:296px;height:6px'><img
width=296 height=6
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image059.gif"></span></span><span
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:#111111;
letter-spacing:-.1pt'>c</span><span style='font-size:10.0pt;font-family:"Arial",sans-serif;
color:#2A2B2B;letter-spacing:-.1pt'>o</span><span style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:#111111;letter-spacing:-.1pt'>mpil</span><span
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:#2A2B2B;
letter-spacing:-.1pt'>e</span><span style='font-size:10.0pt;font-family:"Arial",sans-serif;
color:#111111;letter-spacing:-.1pt'>dHT</span><span style='font-size:10.0pt;
font-family:"Arial",sans-serif;color:#2A2B2B;letter-spacing:-.1pt'>M</span><span
style='font-size:10.0pt;font-family:"Arial",sans-serif;color:#111111;
letter-spacing:-.1pt'>L</span></p>

</div>

<span style='font-size:10.0pt;font-family:"Arial",sans-serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection149>

<p class=MsoNormal align=center style='margin-top:4.15pt;margin-right:15.9pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><i><span
style='font-size:10.5pt'>Figure<span style='letter-spacing:.3pt'> </span>7-2.<span
style='letter-spacing:.35pt'> </span>Rendering<span style='letter-spacing:.35pt'>
</span>a<span style='letter-spacing:.3pt'> </span>view<span style='letter-spacing:
.35pt'> </span>with<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.3pt'> </span><span style='letter-spacing:-.1pt'>layout</span></span></i></p>

<p class=MsoBodyText style='margin-top:.2pt'><i><span style='font-size:11.5pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Or, if we want to use a different template, we can
specify the template <span style='letter-spacing:-.1pt'>name:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/foo'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.95pt'> </span>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.95pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.95pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:1.0pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'foo'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.95pt'> </span>{<span style='letter-spacing:.95pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>layout</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:#545454;background:#FBFBFB'>:<span
style='letter-spacing:.95pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;background:#FBFBFB'>'microsite'<span
style='letter-spacing:1.0pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.25pt;
background:#FBFBFB'>}))</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:8.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>This<span style='letter-spacing:.45pt'> </span>will<span
style='letter-spacing:.45pt'> </span>render<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.45pt'> </span>view<span style='letter-spacing:.45pt'> </span>with<span
style='letter-spacing:.55pt'> </span>layout<span style='letter-spacing:.45pt'> </span><i><span
style='letter-spacing:-.1pt'>views/layouts/microsite.handlebars</span></i><span
style='letter-spacing:-.1pt'>.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Keep in mind that the more templates you have, the more
basic HTML layout you have to maintain. On the other hand, if you have pages
that are substantially different in layout, it may be worth it; you have to
find a balance that works for your projects.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Sections</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark342"></a><span style='color:#333333'>One technique Im borrowing
from Microsofts excellent <i>Razor </i>template engine is the idea of <i>sections</i>.
Layouts work well if all of your view fits neatly within a single element in
your layout, but what happens when your view needs to inject itself into
different parts of your layout? A common example of this is a view needing to
add something to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;head&gt;<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>element<span style='letter-spacing:2.0pt'> </span>or to
insert a </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;script&gt;</span><span
style='color:#333333'>, which is sometimes the very last thing in the<span
style='letter-spacing:4.0pt'> </span>layout, for performance reasons.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Neither Handlebars nor </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>express-handlebars<span
style='letter-spacing:-2.55pt'> </span></span><span style='color:#333333'>has a
built-in way to do this. Fortunately, Handlebars helpers make this really easy.
When we instantiate the Handlebars object, well add a helper called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>section </span><span
style='color:#333333'>(<i>ch07/01/meadowlark.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: app.engine('handlebars', expressHandlebars({ defaultLayout: 'main',&#13;&#10;helpers: {&#13;&#10;section: function(name, options) {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection150>

<p class=MsoBodyText style='margin-left:69.4pt'><a name=Partials></a><a
name="_bookmark343"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: if(!this._sections) this._sections = {} this._sections[name] = options.fn(this) return null&#13;&#10;},&#13;&#10;},&#13;&#10;}))&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:3.85pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='font-size:14.0pt;line-height:126%;color:#333333'>Now we can use the </span><span
style='font-size:14.0pt;line-height:126%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>section<span style='letter-spacing:-2.3pt'> </span></span><span
style='font-size:14.0pt;line-height:126%;color:#333333'>helper in a view. Lets
add a view (<i>views/section-test.handlebars</i>) to add something to the </span><span
style='font-size:14.0pt;line-height:126%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;head&gt;<span style='letter-spacing:-2.45pt'> </span></span><span
style='font-size:14.0pt;line-height:126%;color:#333333'>and a <span
style='letter-spacing:-.1pt'>script:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: {{#section 'head'}}&#13;&#10;&lt;!-- we want Google to ignore this page --&gt;&#13;&#10;&lt;meta name=&quot;robots&quot; content=&quot;noindex&quot;&gt;&#13;&#10;{{/section}}&#13;&#10;&#13;&#10;&lt;h1&gt;Test Page&lt;/h1&gt;&#13;&#10;&lt;p&gt;We're testing some script stuff.&lt;/p&gt;&#13;&#10;&#13;&#10;{{#section 'scripts'}}&#13;&#10;&lt;script&gt;&#13;&#10;document.querySelector('body')&#13;&#10;.insertAdjacentHTML('beforeEnd', '&lt;small&gt;(scripting works!)&lt;/small&gt;')&#13;&#10;&lt;/script&gt;&#13;&#10;{{/section}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.45pt'> </span>our<span
style='letter-spacing:.45pt'> </span>layout,<span style='letter-spacing:.45pt'>
</span>we<span style='letter-spacing:.45pt'> </span>can<span style='letter-spacing:
.45pt'> </span>place<span style='letter-spacing:.4pt'> </span>the<span
style='letter-spacing:.45pt'> </span>sections<span style='letter-spacing:.4pt'>
</span>just<span style='letter-spacing:.45pt'> </span>as<span style='letter-spacing:
.4pt'> </span>we<span style='letter-spacing:.4pt'> </span>place<span
style='letter-spacing:.45pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>{{{body}}}</span><span style='color:#333333;
letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: {{#section 'head'}}&#13;&#10;&lt;!-- we want Google to ignore this page --&gt;&#13;&#10;&lt;meta name=&quot;robots&quot; content=&quot;noindex&quot;&gt;&#13;&#10;{{/section}}&#13;&#10;&#13;&#10;&lt;h1&gt;Test Page&lt;/h1&gt;&#13;&#10;&lt;p&gt;We're testing some script stuff.&lt;/p&gt;&#13;&#10;&#13;&#10;{{#section 'scripts'}}&#13;&#10;&lt;script&gt;&#13;&#10;const div = document.createElement('div') div.appendChild(document.createTextNode('(scripting works!)')) document.querySelector('body').appendChild(div)&#13;&#10;&lt;/script&gt;&#13;&#10;{{/section}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection151>

<h3 style='margin-top:3.65pt'><span style='color:#3F3F3F;letter-spacing:-.1pt'>Partials</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:77.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark344"></a><span style='color:#333333'>Very often, youll have <a
name="_bookmark345"></a>components that you want to reuse on different pages
(sometimes called <i>widgets </i>in frontend circles). One way to achieve that<span
style='letter-spacing:1.0pt'> </span>with<span style='letter-spacing:1.05pt'> </span>templates<span
style='letter-spacing:1.0pt'> </span>is<span style='letter-spacing:1.0pt'> </span>to<span
style='letter-spacing:1.05pt'> </span>use<span style='letter-spacing:1.0pt'> </span><i>partials<span
style='letter-spacing:1.05pt'> </span></i>(so<span style='letter-spacing:1.05pt'>
</span>named<span style='letter-spacing:1.05pt'> </span>because<span
style='letter-spacing:1.0pt'> </span>they<span style='letter-spacing:1.05pt'> </span>dont<span
style='letter-spacing:1.0pt'> </span>render a whole view or a whole page).
Lets imagine we want a Current Weather component that displays the current
weather conditions in Portland, Bend, and Manzanita. We want this component to
be reusable so we can easily<span style='letter-spacing:2.0pt'> </span>put it
on whatever page we want, so well use a partial. First, we create a partial
file, <i>views/partials/weather.handlebars</i>:</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;div class=&quot;weatherWidget&quot;&gt;&#13;&#10;{{#each partials.weatherContext}}&#13;&#10;&lt;div class=&quot;location&quot;&gt;&#13;&#10;&lt;h3&gt;{{location.name}}&lt;/h3&gt;&#13;&#10;&lt;a href=&quot;{{location.forecastUrl}}&quot;&gt;&#13;&#10;&lt;img src=&quot;{{iconUrl}}&quot; alt=&quot;{{weather}}&quot;&gt;&#13;&#10;{{weather}}, {{temp}}&#13;&#10;&lt;/a&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;{{/each}}&#13;&#10;&lt;small&gt;Source: &lt;a href=&quot;https://www.weather.gov/documentation/services-web- api&quot;&gt;&#13;&#10;National Weather Service&lt;/a&gt;&lt;/small&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Note that we namespace our context by starting with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>partials.weatherContext</span><span
style='color:#333333'>.<span style='letter-spacing:1.75pt'> </span>Since<span
style='letter-spacing:1.65pt'> </span>we<span style='letter-spacing:1.65pt'> </span>want<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.75pt'> </span>be<span
style='letter-spacing:1.65pt'> </span>able<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.75pt'> </span>use<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>partial on any page, its not practical
to pass the context in for every view, so instead<span style='letter-spacing:
1.7pt'> </span>we<span style='letter-spacing:1.6pt'> </span>use<span
style='letter-spacing:1.6pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.locals<span style='letter-spacing:-1.9pt'> </span></span><span
style='color:#333333'>(which<span style='letter-spacing:1.7pt'> </span>is<span
style='letter-spacing:1.6pt'> </span>available<span style='letter-spacing:1.6pt'>
</span>to<span style='letter-spacing:1.7pt'> </span>every<span
style='letter-spacing:1.7pt'> </span>view).<span style='letter-spacing:1.7pt'> </span>But
because we dont want to interfere with the context specified by individual
views, we put all partial context in the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>partials<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>object.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image060.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection152>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image061.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>In </span><a href="#_bookmark828"><span style='color:
#070707'>Chapter 19</span></a><span style='color:#333333'>, well see how to
get current weather information from the free National Weather Service API. For
now, were just going to use dummy data returned from a function well call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>getWeatherData</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In this example, we want this weather data to be
available to any view, and the<span style='letter-spacing:1.55pt'> </span>best<span
style='letter-spacing:1.55pt'> </span>mechanism<span style='letter-spacing:
1.55pt'> </span>for<span style='letter-spacing:1.55pt'> </span>that<span
style='letter-spacing:1.55pt'> </span>is<span style='letter-spacing:1.55pt'> </span>middleware<span
style='letter-spacing:1.55pt'> </span>(which<span style='letter-spacing:1.65pt'>
</span>well<span style='letter-spacing:1.55pt'> </span>learn<span
style='letter-spacing:1.65pt'> </span>more<span style='letter-spacing:1.55pt'> </span>about
in </span><a href="#_bookmark427"><span style='color:#070707'>Chapter 10</span></a><span
style='color:#333333'>). Our middleware will inject the weather data into the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.locals.partials<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>object,
which will make it available as the context for our partial.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>To make our middleware
more testable, well put it in its own file, <i>lib/middleware/weather.js </i>(<i>ch07/01/lib/middleware/weather.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const getWeatherData = () =&gt; Promise.resolve([&#13;&#10;{&#13;&#10;location: {&#13;&#10;name: 'Portland',&#13;&#10;coordinates: { lat: 45.5154586, lng: -122.6793461 },&#13;&#10;},&#13;&#10;forecastUrl: 'https://api.weather.gov/gridpoints/PQR/112,103/forecast', iconUrl: 'https://api.weather.gov/icons/land/day/tsra,40?size=medium', weather: 'Chance Showers And Thunderstorms',&#13;&#10;temp: '59 F',&#13;&#10;},&#13;&#10;{&#13;&#10;location: { name: 'Bend',&#13;&#10;coordinates: { lat: 44.0581728, lng: -121.3153096 },&#13;&#10;},&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection153>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: forecastUrl: 'https://api.weather.gov/gridpoints/PDT/34,40/forecast', iconUrl: 'https://api.weather.gov/icons/land/day/tsra_sct,50?&#13;&#10;size=medium',&#13;&#10;weather: 'Scattered Showers And Thunderstorms', temp: '51 F',&#13;&#10;},&#13;&#10;{&#13;&#10;location: {&#13;&#10;name: 'Manzanita',&#13;&#10;coordinates: { lat: 45.7184398, lng: -123.9351354 },&#13;&#10;},&#13;&#10;forecastUrl: 'https://api.weather.gov/gridpoints/PQR/73,120/forecast', iconUrl: 'https://api.weather.gov/icons/land/day/tsra,90?size=medium', weather: 'Showers And Thunderstorms',&#13;&#10;temp: '55 F',&#13;&#10;},&#13;&#10;])&#13;&#10;&#13;&#10;const weatherMiddleware = async (req, res, next) =&gt; { if(!res.locals.partials) res.locals.partials = {} res.locals.partials.weatherContext = await getWeatherData() next()&#13;&#10;}&#13;&#10;&#13;&#10;module.exports = weatherMiddleware&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that everything is set up, all we have to do is use
the partial in a view. For example, to put our widget on the home page, edit <i><span
style='letter-spacing:-.1pt'>views/home.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: &lt;h2&gt;Home&lt;/h2&gt;&#13;&#10;{{&gt; weather}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:3.85pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='font-size:14.0pt;line-height:126%;color:#333333'>The </span><span
style='font-size:14.0pt;line-height:126%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{{&gt; partial_name}}<span style='letter-spacing:-2.45pt'> </span></span><span
style='font-size:14.0pt;line-height:126%;color:#333333'>syntax is how you
include a partial in a view: </span><span style='font-size:14.0pt;line-height:
126%;font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-handlebars<span
style='letter-spacing:-1.65pt'> </span></span><span style='font-size:14.0pt;
line-height:126%;color:#333333'>will know to look in <i>views/partials </i>for
a view<span style='letter-spacing:4.0pt'> </span>called<span style='letter-spacing:
1.65pt'> </span><i>partial_name.handlebars </i>(or <i>weather.handlebars</i>,<span
style='letter-spacing:1.65pt'> </span>in<span style='letter-spacing:1.65pt'> </span>our
example).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image036.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection154>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<h3 style='margin-top:4.55pt'><a name="Perfecting_Your_Templates"></a><a
name="_bookmark348"></a><span style='color:#3F3F3F'>Perfecting<span
style='letter-spacing:-.35pt'> </span>Yo<a name="_bookmark349"></a>ur<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Templates</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:72.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark351"></a><span style='color:#333333'>Your templates are at the
heart of your website. A good template structure will save you development
time, promote consistency across your website, and reduce the number of places
that layout quirks can hide. To achieve these benefits, though, you must spend
some time crafting your templates carefully. Deciding how many templates you
should have is an art; generally, fewer is better, but there is a point of
diminishing returns, depending on the uniformity of your pages. Your templates
are also your first line of defense against cross-browser compatibility issues
and valid HTML.<span style='letter-spacing:1.5pt'> </span>They<span
style='letter-spacing:1.5pt'> </span>should<span style='letter-spacing:1.5pt'> </span>be<span
style='letter-spacing:1.45pt'> </span>lovingly<span style='letter-spacing:1.5pt'>
</span>crafted<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>maintained<span style='letter-spacing:
1.5pt'> </span>by<span style='letter-spacing:1.5pt'> </span>someone<span
style='letter-spacing:1.45pt'> </span>who is<span style='letter-spacing:1.65pt'>
</span>well<span style='letter-spacing:1.65pt'> </span>versed<span
style='letter-spacing:1.7pt'> </span>in<span style='letter-spacing:1.7pt'> </span>frontend<span
style='letter-spacing:1.7pt'> </span>development.<span style='letter-spacing:
1.7pt'> </span><a name="_bookmark350"></a>A<span style='letter-spacing:1.65pt'>
</span>great<span style='letter-spacing:1.65pt'> </span>place<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.7pt'> </span>startespecially
if youre newis </span><a href="http://html5boilerplate.com/"><span
style='color:#070707'>HTML5 Boilerplate</span></a><span style='color:#333333'>.
In the previous examples, weve been using a minimal HTML5 template to fit the
book format, but for our actual project, well be using HTML5 Boilerplate.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Another popular place to start with your template are
third-party themes. Sites like </span><a href="http://bit.ly/34Tdkfj"><span
style='color:#070707'>Themeforest</span></a><span style='color:#070707'> </span><span
style='color:#333333'>and </span><a href="https://wrapbootstrap.com/"><span
style='color:#070707'>WrapBootstrap</span></a><span style='color:#070707'> </span><span
style='color:#333333'>have hundreds of ready-to-use HTML5 themes that you can
use as a starting place for your template.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Using a third-party theme starts with taking the primary
file (usually <i>index.html</i>), renaming it to <i>main.handlebars </i>(or
whatever you choose to<span style='letter-spacing:4.0pt'> </span>call your
layout file), and placing any resources (CSS, JavaScript, images) in the <i>public
</i>directory you use for static files. Then youll have to edit the template
file and figure out where you want to put the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>{{{body}}} </span><span
style='color:#333333;letter-spacing:-.1pt'>expression.</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection155>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Depending on the elements of your template, you may want
to move some<span style='letter-spacing:2.0pt'> </span>of them into partials. A
great example is a <i>hero </i>(a tall banner designed to grab<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.4pt'> </span>users<span
style='letter-spacing:1.4pt'> </span>attention.<span style='letter-spacing:
1.45pt'> </span>If<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>hero<span style='letter-spacing:1.45pt'> </span>appears<span
style='letter-spacing:1.4pt'> </span>on<span style='letter-spacing:1.45pt'> </span>every<span
style='letter-spacing:1.45pt'> </span>page<span style='letter-spacing:1.4pt'> </span>(probably<span
style='letter-spacing:1.45pt'> </span>a poor choice), you would leave the hero
in the template file. If it appears on only one page (usually the home page),
then it would go only in that view.<span style='letter-spacing:4.0pt'> </span>If
it appears on severalbut not allpages, then you might consider<span
style='letter-spacing:4.0pt'> </span>putting it in a partial. The choice is
yours, and herein lies the artistry of making a unique, captivating website<a
name="_bookmark352"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark353"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve seen how templating can make our code easier to
write, read, and maintain. Thanks to templates, we dont have to painfully
cobble together HTML from JavaScript strings; we can write HTML in our favorite
editor and use a compact and easy-to-read templating language to make it <span
style='letter-spacing:-.1pt'>dynamic.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now tha<a name="_bookmark354"></a>t weve seen how to
format our content for display, well turn our attention to how to get data <i>into
</i>our system with HTML forms.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection156>

<h1><a name="8._Form_Handling"></a><a name="_bookmark355"></a>Chapter<span
style='letter-spacing:.55pt'> </span>8.<span style='letter-spacing:.55pt'> </span>Form<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Handling</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark356"></a><span style='color:#333333'>The usual way you collect
information from your users is to use HTML <i>forms</i>.<span style='letter-spacing:
1.65pt'> </span>Whether<span style='letter-spacing:1.55pt'> </span>you<span
style='letter-spacing:1.65pt'> </span>let<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>browser<span style='letter-spacing:1.55pt'>
</span>submit<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>form<span style='letter-spacing:1.55pt'> </span>normally,<span
style='letter-spacing:1.65pt'> </span>use<span style='letter-spacing:1.55pt'> </span>Ajax,
or employ fancy frontend controls, the underlying mechanism is generally still<span
style='letter-spacing:1.5pt'> </span>an<span style='letter-spacing:1.6pt'> </span>HTML<span
style='letter-spacing:1.5pt'> </span>form.<span style='letter-spacing:1.6pt'> </span>In<span
style='letter-spacing:1.6pt'> </span>this<span style='letter-spacing:1.5pt'> </span>chapter,<span
style='letter-spacing:1.6pt'> </span>well<span style='letter-spacing:1.5pt'> </span>discuss<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>different<span
style='letter-spacing:1.5pt'> </span>methods for handling forms, form
validation, and file uploads.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Sending_Client_Data_to_the_Server"></a><a name="_bookmark357"></a><span
style='color:#8E0011'>Sending<span style='letter-spacing:-.3pt'> </span>Client<span
style='letter-spacing:-.15pt'> </span>Data<span style='letter-spacing:-.2pt'> </span>to<span
style='letter-spacing:-.15pt'> </span>the<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark358"></a><span style='color:#333333'>Broadly speaking, your two
options for sending client data to the server<span style='letter-spacing:2.0pt'>
</span>are the querystring and the request body. <a name="_bookmark359"></a>Normally,
if youre using the querystring, youre making a </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>GET<span style='letter-spacing:-2.7pt'>
</span></span><span style='color:#333333'>request, and if youre using <a
name="_bookmark360"></a>the request body, youre using a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>request.
(The HTTP protocol doesnt prevent you from doing it the other way around, but
theres no point to it: best to stick to standard practice here.)</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>It is a common misperception that </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>is
secure and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-2.7pt'> </span></span><span
style='color:#333333'>is not: in reality, both are secure if you use HTTPS, and
neither is secure if you dont. If youre not using HTTPS, an intruder can look
at the body data for a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST </span><span style='color:#333333'>just as easily as the
querystring of a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-2.45pt'> </span></span><span
style='color:#333333'>request. However, if youre using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.55pt'> </span></span><span style='color:#333333'>requests,
your users will see all of their input (including hidden fields)<span
style='letter-spacing:2.0pt'> </span>in the querystring, which is ugly and
messy. Also, browsers often place limits on querystring length (there is no
such restriction for body length).<span style='letter-spacing:2.0pt'> </span>For
these reasons,<span style='letter-spacing:1.0pt'> </span>I generally<span
style='letter-spacing:1.0pt'> </span>recommend<span style='letter-spacing:1.0pt'>
</span>using<span style='letter-spacing:1.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-2.55pt'> </span></span><span style='color:#333333'>for
form submission.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>HTML<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Forms</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection157>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Different_Approaches_to_Form_Handling"></a><a name="_bookmark363"></a><a
name="HTML_Forms"></a><a name="_bookmark361"></a><a name="_bookmark362"></a><span
style='color:#333333'>This book is focusing on the server side, but its
important to understand some basics about constructing HTML forms. Heres a
simple example:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;form action=&quot;/process&quot; method=&quot;POST&quot;&gt;&#13;&#10;&lt;input type=&quot;hidden&quot; name=&quot;hush&quot; val=&quot;hidden, but not secret!&quot;&gt;&#13;&#10;&lt;div&gt;&#13;&#10;&lt;label for=&quot;fieldColor&quot;&gt;Your favorite color: &lt;/label&gt;&#13;&#10;&lt;input type=&quot;text&quot; id=&quot;fieldColor&quot; name=&quot;color&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div&gt;&#13;&#10;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Notice the method is specified explicitly as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>in the
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;form&gt;<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>tag;
if you dont do this, it defaults to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET</span><span style='color:#333333'>. The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>action<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>attribute
specifies the URL<span style='letter-spacing:2.0pt'> </span>that will receive
the form when its posted. If you omit this field, the form will be submitted
to the same URL the form was loaded from. I<span style='letter-spacing:4.0pt'> </span>recommend
that you always provide a valid </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>action</span><span style='color:#333333'>, even if youre using
Ajax (this is to prevent you from losing data; see </span><a
href="#_bookmark952"><span style='color:#070707'>Chapter 22</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for more <span
style='letter-spacing:-.1pt'>information).</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>From the servers perspective, the important attributes
in the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;input&gt;
</span><span style='color:#333333'>fields are the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>name<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>attributes:
thats how the server identifies the field. Its important to understand that
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>name<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>attribute
is distinct from the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>id </span><span style='color:#333333'>attribute, which should be
used for styling and frontend functionality only (it is not passed to the
server).</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Note the hidden field: this will not render
in the users browser. However, you should not use it for secret or sensitive
information; all the user has to do is examine the page source, and the hidden
field will be exposed.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>HTML does not restrict you from having multiple
forms on the same page (this was an unfortunate restriction of some early
server frameworks; ASP,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection158>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:77.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Im looking at you). I recommend keeping your forms
logically consistent;<span style='letter-spacing:4.0pt'> </span>a form should
contain all the fields you would like submitted at once (optional/empty fields
are OK) and none that you dont. If you have two different actions on a page,
use two different forms. An example of this would<span style='letter-spacing:
1.2pt'> </span>be<span style='letter-spacing:1.15pt'> </span>to<span
style='letter-spacing:1.2pt'> </span>have<span style='letter-spacing:1.15pt'> </span>a<span
style='letter-spacing:1.15pt'> </span>form<span style='letter-spacing:1.15pt'> </span>for<span
style='letter-spacing:1.15pt'> </span>a<span style='letter-spacing:1.15pt'> </span>site<span
style='letter-spacing:1.15pt'> </span>search<span style='letter-spacing:1.2pt'>
</span>and<span style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:
1.15pt'> </span>separate<span style='letter-spacing:1.15pt'> </span>form<span
style='letter-spacing:1.15pt'> </span>for<span style='letter-spacing:1.15pt'> </span>signing
up<span style='letter-spacing:1.25pt'> </span>for an<span style='letter-spacing:
1.25pt'> </span>email newsletter.<span style='letter-spacing:1.25pt'> </span>It
is possible to<span style='letter-spacing:1.25pt'> </span>use one large form
and<span style='letter-spacing:1.25pt'> </span>figure out what action to take
based on what button a person clicked, but it is a headache and often not
friendly for people with disabilities (because of the way accessibility
browsers render forms).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When the user submits the form in this example, the <i>/process
</i>URL will be invoked,<span style='letter-spacing:1.4pt'> </span>and<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.35pt'> </span>field<span
style='letter-spacing:1.4pt'> </span>values<span style='letter-spacing:1.35pt'>
</span>will<span style='letter-spacing:1.35pt'> </span>be<span
style='letter-spacing:1.35pt'> </span>transmitted<span style='letter-spacing:
1.4pt'> </span>to<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>server<span style='letter-spacing:1.35pt'>
</span>in<span style='letter-spacing:1.4pt'> </span>the request body.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name=Encoding></a><a name="_bookmark364"></a><span style='color:#8E0011;
letter-spacing:-.1pt'>Encoding</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark365"></a><span style='color:#333333'>When the form is submitted
(either by the browser or via Ajax), it must be encoded somehow. If you dont
explicitly specify an encoding, it defaults<span style='letter-spacing:4.0pt'> </span>to
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>application/x-www-form-urlencoded<span
style='letter-spacing:-1.1pt'> </span></span><span style='color:#333333'>(this
is just a lengthy media type for URL encoded). This is a basic, easy-to-use
encoding thats supported by Express out of the box.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>If you need to upload files, things get more complicated.
Theres no easy way to send files using URL encoding, so youre forced to use
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>multipart/form-data<span
style='letter-spacing:-1.55pt'> </span></span><span style='color:#333333'>encoding
type, which is not handled directly by <span style='letter-spacing:-.1pt'>Express.</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Different<span style='letter-spacing:-.3pt'> </span>Approaches<span
style='letter-spacing:-.25pt'> </span>to<span style='letter-spacing:-.25pt'> </span>Form<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Handling</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark366"></a><span
style='color:#333333'>If<span style='letter-spacing:.45pt'> </span>youre<span
style='letter-spacing:.45pt'> </span>not<span style='letter-spacing:.45pt'> </span>using<span
style='letter-spacing:.5pt'> </span>Ajax,<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.5pt'> </span>only<span style='letter-spacing:.5pt'> </span>option<span
style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>submit<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.45pt'> </span>form<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>through</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection159>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>the browser, which will reload the page. However, <i>how </i>the
page is reloaded is up to you. There are two things to consider when processing
forms: what path handles the form (the action) and what response is sent to the
browser.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>If your form uses </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>method=&quot;POST&quot;<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>(which is recommended), it is quite common to use the
same path for displaying the form and processing the form: these can be
distinguished because the former is a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>request, and the latter is a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-2.3pt'> </span></span><span style='color:#333333'>request.
If you take this approach, you can omit the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>action<span style='letter-spacing:
-.6pt'> </span></span><span style='color:#333333'>attribute on the form.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>The other option is to use a separate path to process the
form. For example, if your contact page uses the path <i>/contact</i>, you
might use the path <i>/process-contact </i>to process the form (by specifying </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>action=&quot;/process-contact&quot;</span><span
style='color:#333333'>). If you use this approach, you have the option of submitting
the form via </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-2.1pt'> </span></span><span
style='color:#333333'>(which I do not recommend; it needlessly exposes your
form fields on the URL). Using a separate endpoint for form submission might be
preferred if you have multiple URLs that use the same submission mechanism (for
example, you might have an email sign-up box on multiple pages on the site).</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whatever path you use to process the form, you have to
decide what response to send back to the browser. Here are your options:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Direct<span style='letter-spacing:.55pt'> </span>HTML<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>response</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>After processing the form, you can send HTML directly
back to the browser (a view, for example). This approach will produce a warning<span
style='letter-spacing:2.0pt'> </span>if the user attempts to reload the page
and can interfere with bookmarking and the Back button, and for these reasons,
it is not <span style='letter-spacing:-.1pt'>recommended.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>302<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>redirect</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection160>

<p class=MsoBodyText style='margin-top:4.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="Form_Handling_with_Express"></a><a name="_bookmark369"></a><a
name="_bookmark367"></a><span style='color:#333333'>While this is a common
approach, it is a misuse of the original meaning of the 302 (Found) response
code. HTTP 1.1 added the 303 (See Other) response code, which is preferable.
Unless you have reason to target browsers made before 1996, you should use 303 <span
style='letter-spacing:-.1pt'>instead.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>303<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>redirect</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark368"></a><span style='color:#333333'>The 303 (See Other)
response code was added in HTTP 1.1 to address the misuse of the 302 redirect.
The HTTP specification specifically indicates that the browser should use a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>request
when following a 303 redirect, regardless of the original method. This is the
recommended method for responding to a form submission request.</span></p>

<p class=MsoBodyText style='margin-top:12.3pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Since the recommendation is that you respond to a form
submission with a 303 redirect, the next question is, Where does the
redirection point to?<span style='letter-spacing:2.0pt'> </span>The answer to<span
style='letter-spacing:1.4pt'> </span>that is up<span style='letter-spacing:
1.4pt'> </span>to<span style='letter-spacing:1.4pt'> </span>you.<span
style='letter-spacing:1.4pt'> </span>Here are the most common<span
style='letter-spacing:1.4pt'> </span>approaches:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Redirect<span style='letter-spacing:.7pt'> </span>to<span
style='letter-spacing:.8pt'> </span>dedicated<span style='letter-spacing:.8pt'>
</span>success/failure<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>pages</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><span style='color:#333333'>This method requires that you dedicate URLs
for appropriate success<span style='letter-spacing:2.0pt'> </span>or failure
messages. For example, if the user signs up for promotional emails but there
was a database error, you might want to redirect to</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><i><span
style='font-size:14.0pt;line-height:111%;color:#333333'>/error/database</span></i><span
style='font-size:14.0pt;line-height:111%;color:#333333'>. If a users email
address were invalid, you could redirect to <i>/error/invalid-email</i>, and if
everything was successful, you could redirect to <i>/promo-email/thank-you</i>.
One of the advantages of<span style='letter-spacing:2.0pt'> </span>this<span
style='letter-spacing:.45pt'> </span>method<span style='letter-spacing:.5pt'> </span>is<span
style='letter-spacing:.45pt'> </span>that<span style='letter-spacing:.45pt'> </span>its<span
style='letter-spacing:.45pt'> </span>analytics<span style='letter-spacing:.5pt'>
</span>friendly:<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.45pt'> </span>number<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.45pt'> </span>visits<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>your</span></span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><i><span
style='color:#333333'>/promo-email/thank-you<span style='letter-spacing:2.0pt'>
</span></span></i><span style='color:#333333'>page<span style='letter-spacing:
2.0pt'> </span>should<span style='letter-spacing:2.0pt'> </span>roughly<span
style='letter-spacing:2.0pt'> </span>correlate<span style='letter-spacing:2.0pt'>
</span>to<span style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:
2.0pt'> </span>number of people signing up for your promotional email. It is
also straightforward to implement. It has some downsides, however. It does mean
you have to allocate URLs to every possibility, which means<span
style='letter-spacing:2.0pt'> </span>pages to design, write copy for, and
maintain. Another disadvantage is that<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>user<span style='letter-spacing:1.5pt'> </span>experience<span
style='letter-spacing:1.5pt'> </span>can<span style='letter-spacing:1.6pt'> </span>be<span
style='letter-spacing:1.5pt'> </span>suboptimal:<span style='letter-spacing:
1.5pt'> </span>users<span style='letter-spacing:1.5pt'> </span>like<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.6pt'> </span>be<span
style='letter-spacing:1.5pt'> </span>thanked, but then they have to navigate
back to where they were or where they want to go next. This is the approach
well be using for now: well switch to using flash messages (not to be
confused with Adobe Flash)</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection161>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>in<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark393"><span
style='color:#070707'>Chapter<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>9</span></span></a><span style='color:#333333;
letter-spacing:-.25pt'>.</span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Redirect<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.45pt'> </span>original<span
style='letter-spacing:.5pt'> </span>location<span style='letter-spacing:.5pt'> </span>with<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.55pt'> </span>flash<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>message</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:81.5pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>For small forms that are scattered throughout your site
(like an email sign-up, for example), the best user experience is not to
interrupt the users navigation flow. That is, provide a way to submit an email
address without leaving the page. One way to do this, of course, is Ajax, but
if you dont want to use Ajax (or you want your fallback mechanism to provide a
good user experience), you can redirect back to the page the user was
originally on. The easiest way to do this is to use a hidden field in the form
thats populated with the current URL. Since you want there to be some feedback
that the users submission was received, you can use flash messages.</span></p>

<p class=MsoNormal style='margin-top:10.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Redirect<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.5pt'> </span>new<span
style='letter-spacing:.4pt'> </span>location<span style='letter-spacing:.45pt'>
</span>with<span style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:
.45pt'> </span>flash<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>message</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Large forms generally have their own page, and it doesnt
make sense<span style='letter-spacing:4.0pt'> </span>to stay on that page once
youve submitted the form. In this situation, you have to make an intelligent
guess about where the user might want to go next and redirect accordingly. For
example, if youre building an admin<span style='letter-spacing:1.5pt'> </span>interface,<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.5pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>have<span style='letter-spacing:1.4pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>form<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>create<span style='letter-spacing:1.4pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>new<span style='letter-spacing:1.4pt'> </span>vacation
package, you might reasonably expect your user to want to go to the admin page
that lists all vacation packages after submitting the form.</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>However, you should still employ a flash message to give
the user feedback about the result of the submission.</span></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you are using Ajax, I recommend a dedicated URL. Its
tempting to start Ajax<span style='letter-spacing:1.75pt'> </span>handlers<span
style='letter-spacing:1.7pt'> </span>with<span style='letter-spacing:1.75pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>prefix<span style='letter-spacing:1.75pt'>
</span>(for<span style='letter-spacing:1.7pt'> </span>example,<span
style='letter-spacing:1.75pt'> </span><i>/ajax/enter</i>),<span
style='letter-spacing:1.75pt'> </span>but<span style='letter-spacing:1.7pt'> </span>I<span
style='letter-spacing:1.65pt'> </span>discourage this<span style='letter-spacing:
1.65pt'> </span>approach:<span style='letter-spacing:1.65pt'> </span>its<span
style='letter-spacing:1.65pt'> </span>attaching<span style='letter-spacing:
1.7pt'> </span>implementation<span style='letter-spacing:1.7pt'> </span>details<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.65pt'> </span>URL.<span style='letter-spacing:1.7pt'> </span>Also,<span
style='letter-spacing:1.7pt'> </span>as well see shortly, your Ajax handler
should handle regular browser submissions as a fail-safe<a name="_bookmark370"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Form<span style='letter-spacing:-.35pt'> </span>Handling<span
style='letter-spacing:-.2pt'> </span>with<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark371"></a><span
style='color:#333333'>If<span style='letter-spacing:.45pt'> </span><a
name="_bookmark372"></a>youre<span style='letter-spacing:.5pt'> </span>using<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-3.05pt'> </span></span><span
style='color:#333333'>for<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.5pt'> </span>form<span style='letter-spacing:.45pt'> </span>handling,<span
style='letter-spacing:.55pt'> </span>your<span style='letter-spacing:.5pt'> </span>fields<span
style='letter-spacing:.45pt'> </span>will<span style='letter-spacing:.5pt'> </span>be<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>available</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection162>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>on the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.query<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>object. For example, if you have an HTML input field with
a name attribute of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>email</span><span style='color:#333333'>, its value will be
passed to the handler as </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.query.email</span><span style='color:#333333'>. Theres
really not much more that needs to be said about this approach; its just that
simple.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>If youre using </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>(which I recommend), youll have to link in middleware to
parse the URL-encoded body. <a name="_bookmark373"></a>First, install the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>body- parser<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>middleware
(</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm
install body-parser</span><span style='color:#333333'>); then, link it in (<i>ch08/meadowlark.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const bodyParser = require('body-parser') app.use(bodyParser.urlencoded({ extended: true }))"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Once youve linked in </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>body-parser</span><span
style='color:#333333'>, youll find that </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.body<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>now becomes available for you, and thats where all of
your form fields will be made available. Note that </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.body<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>doesnt
prevent you from using the querystring. Lets go ahead and add a form to
Meadowlark Travel that lets the user sign up for a mailing list. For
demonstrations sake, well use the querystring, a hidden field, and visible
fields in <i>/views/newsletter- <span style='letter-spacing:-.1pt'>signup.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;h2&gt;Sign up for our newsletter to receive news and specials!&lt;/h2&gt;&#13;&#10;&lt;form class=&quot;form-horizontal&quot; role=&quot;form&quot;&#13;&#10;action=&quot;/newsletter-signup/process?form=newsletter&quot; method=&quot;POST&quot;&gt;&#13;&#10;&lt;input type=&quot;hidden&quot; name=&quot;_csrf&quot; value=&quot;{{csrf}}&quot;&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldName&quot; class=&quot;col-sm-2 control-label&quot;&gt;Name&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;fieldName&quot; name=&quot;name&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldEmail&quot; class=&quot;col-sm-2 control-label&quot;&gt;Email&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;email&quot; class=&quot;form-control&quot; required id=&quot;fieldEmail&quot; name=&quot;email&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection163>

<p class=MsoBodyText style='margin-left:69.4pt'><a
name="Using_Fetch_to_Send_Form_Data"></a><a name="_bookmark375"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: &lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;div class=&quot;col-sm-offset-2 col-sm-4&quot;&gt;&#13;&#10;&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Register&lt;/button&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:88.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark374"></a><span style='color:#333333'>Note we are using
Bootstrap styles, as we will be throughout the rest of the book. If you are
unfamiliar with Bootstrap, you may want to refer to the </span><a
href="http://getbootstrap.com/"><span style='color:#070707'>Bootstrap
documentation</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:79.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Weve already linked in our body parser, so
now we need to add handlers for our newsletter sign-up page, processing
function, and thank-you page (<i>ch08/lib/handlers.js </i>in the companion
repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: exports.newsletterSignup = (req, res) =&gt; {&#13;&#10;// we will learn about CSRF later...for now, we just&#13;&#10;// provide a dummy value&#13;&#10;res.render('newsletter-signup', { csrf: 'CSRF token goes here' })&#13;&#10;}&#13;&#10;exports.newsletterSignupProcess = (req, res) =&gt; { console.log('Form (from querystring): ' + req.query.form)&#13;&#10;console.log('CSRF token (from hidden form field): ' + req.body._csrf) console.log('Name (from visible form field): ' + req.body.name) console.log('Email (from visible form field): ' + req.body.email) res.redirect(303, '/newsletter-signup/thank-you')&#13;&#10;}&#13;&#10;exports.newsletterSignupThankYou = (req, res) =&gt; res.render('newsletter-signup-thank-you')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>(If you havent
already, create a <i>views/newsletter-signup-thank- you.handlebars </i>file.)</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, well link our handlers into our application (<i>ch08/meadowlark.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/newsletter-signup', handlers.newsletterSignup)"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection164>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: app.post('/newsletter-signup/process', handlers.newsletterSignupProcess) app.get('/newsletter-signup/thank-you', handlers.newsletterSignupThankYou)"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Thats all there is to it. Note that in our handler,
were redirecting to a thank you view. We could render a view here, but if we
did, the URL field in the visitors browser would remain <i>/process</i>, which
could be confusing. Issuing a redirect solves that problem.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;Its important that you use a 303 (or 302) redirect, not a 301 redirect in this instance. 301 redirects are permanent, meaning your browser may cache the redirection destination. If you use a 301 redirect and try to submit the form a second time, your browser may bypass the&#13;&#10;/process handler altogether and go directly to /thank-you since it correctly believes the redirect to be permanent. The 303 redirect, on the other hand, tells your browser, Yes, your request is valid, and you can find your response here, and does not cache the redirect destination.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>With most frontend frameworks, it is more common to see
form data sent in JSON form with the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>fetch<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>API, which well be looking at next.</span></p>

<p class=MsoBodyText style='margin-top:.35pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, its still good to understand how browsers
handle form submission by default, as you will still find forms implemented
this way.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Lets<span
style='letter-spacing:.5pt'> </span>turn<span style='letter-spacing:.55pt'> </span>our<span
style='letter-spacing:.5pt'> </span>attention<span style='letter-spacing:.55pt'>
</span>to<span style='letter-spacing:.6pt'> </span>form<span style='letter-spacing:
.5pt'> </span>submission<span style='letter-spacing:.55pt'> </span>with<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>fetch</span><a name="_bookmark377"></a><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:13.5pt'><span style='color:#8E0011'>Using<span
style='letter-spacing:-.15pt'> </span>Fetch<span style='letter-spacing:-.15pt'>
</span>to<span style='letter-spacing:-.15pt'> </span>Send<span
style='letter-spacing:-.15pt'> </span>Form<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.2pt'>Data</span></span></h2>

<p class=MsoBodyText style='margin-top:12.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark378"></a><span style='color:#333333'>Using the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fetch<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>API to
send JSON-encoded form data is a much more modern approach that gives you more
control over the client/server communication and allows you to have fewer page
refreshes.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Since<span
style='letter-spacing:.45pt'> </span>we<span style='letter-spacing:.45pt'> </span>are<span
style='letter-spacing:.5pt'> </span>not<span style='letter-spacing:.45pt'> </span>making<span
style='letter-spacing:.55pt'> </span>round-trip<span style='letter-spacing:
.55pt'> </span>requests<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.45pt'> </span>server,<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.45pt'> </span>no<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>longer</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection165>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>have to worry about redirects and multiple user URLs
(well still have a separate URL for the form processing itself), and for that
reason, well just consolidate our entire newsletter signup experience under
a single URL called <i>/newsletter</i>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Lets start with the frontend code. The contents of the
HTML form itself dont need to be changed (the fields and layout are all the
same), but we dont need to specify an </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>action<span style='letter-spacing:-2.85pt'> </span></span><span
style='color:#333333'>or </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>method</span><span style='color:#333333'>, and well wrap our
form in a container </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;div&gt;<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>element that will make it easier to display our thank
you message:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;div id=&quot;newsletterSignupFormContainer&quot;&gt;&#13;&#10;&lt;form class=&quot;form-horizontal role=&quot;form&quot; id=&quot;newsletterSignupForm&quot;&gt;&#13;&#10;&lt;!-- the rest of the form contents are the same... --&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Then well have a script that intercepts the form submit
event and cancels<span style='letter-spacing:4.0pt'> </span>it (using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Event#preventDefault</span><span
style='color:#333333'>) so we can handle the form processing ourselves (<i>ch08/views/newsletter.handlebars
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;script&gt; document.getElementById('newsletterSignupForm')&#13;&#10;.addEventListener('submit', evt =&gt; { evt.preventDefault()&#13;&#10;const form = evt.target&#13;&#10;const body = JSON.stringify({&#13;&#10;_csrf: form.elements._csrf.value, name: form.elements.name.value, email: form.elements.email.value,&#13;&#10;})&#13;&#10;const headers = { 'Content-Type': 'application/json' }&#13;&#10;const container = document.getElementById('newsletterSignupFormContainer')&#13;&#10;fetch('/api/newsletter-signup', { method: 'post', body, headers })&#13;&#10;.then(resp =&gt; {&#13;&#10;if(resp.status &lt; 200 || resp.status &gt;= 300)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection166>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="File_Uploads"></a><a
name="_bookmark379"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: throw new Error(`Request failed with status ${resp.status}`)&#13;&#10;return resp.json()&#13;&#10;})&#13;&#10;.then(json =&gt; {&#13;&#10;container.innerHTML = '&lt;b&gt;Thank you for signing up!&lt;/b&gt;'&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;container.innerHTML = `&lt;b&gt;We're sorry, we had a problem ` +&#13;&#10;`signing you up. Please &lt;a href=&quot;/newsletter&quot;&gt;try again&lt;/a&gt;`&#13;&#10;})&#13;&#10;})&#13;&#10;&lt;/script&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:115.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Now in our server file (<i>meadowlark.js</i>),
make sure were linking in middleware that can parse JSON bodies, before we
specify our two <span style='letter-spacing:-.1pt'>endpoints:</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.use(bodyParser.json())&#13;&#10;&#13;&#10;//...&#13;&#10;&#13;&#10;app.get('/newsletter', handlers.newsletter) app.post('/api/newsletter-signup', handlers.api.newsletterSignup)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Note that were putting our form-processing endpoint at a
URL starting with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>api</span><span style='color:#333333'>; this is a common
technique to distinguish between user<span style='letter-spacing:2.0pt'> </span>(browser)
endpoints and<span style='letter-spacing:1.0pt'> </span>API endpoints meant to<span
style='letter-spacing:1.0pt'> </span>be accessed<span style='letter-spacing:
1.0pt'> </span>with<span style='letter-spacing:1.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fetch</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Now<span style='letter-spacing:.55pt'> </span>well<span
style='letter-spacing:.6pt'> </span>add<span style='letter-spacing:.7pt'> </span>those<span
style='letter-spacing:.6pt'> </span>endpoints<span style='letter-spacing:.6pt'>
</span>to<span style='letter-spacing:.65pt'> </span>our<span style='letter-spacing:
.6pt'> </span><i>lib/handlers.js<span style='letter-spacing:.6pt'> </span></i><span
style='letter-spacing:-.1pt'>file:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: exports.newsletter = (req, res) =&gt; {&#13;&#10;// we will learn about CSRF later...for now, we just&#13;&#10;// provide a dummy value&#13;&#10;res.render('newsletter', { csrf: 'CSRF token goes here' })&#13;&#10;}&#13;&#10;exports.api = {&#13;&#10;newsletterSignup: (req, res) =&gt; {&#13;&#10;console.log('CSRF token (from hidden form field): ' + req.body._csrf)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection167>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: console.log('Name (from visible form field): ' + req.body.name) console.log('Email (from visible form field): ' + req.body.email) res.send({ result: 'success' })&#13;&#10;},&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>We can do whatever processing we need in the form
processing handler; usually we would be saving the data to the database. If
there are problems, we send back a JSON object with an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>err<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>property
(instead of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>result: </span><i><span style='font-family:"Courier New";
color:#333333;letter-spacing:-.1pt'>success</span></i><span style='color:#333333;
letter-spacing:-.1pt'>).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: TIP&#13;&#10;In this example, were assuming all Ajax requests are looking for JSON, but theres no requirement that Ajax must use JSON for communication (as a matter of fact, Ajax used to be an acronym in which the X stood for XML). This approach is very JavaScript-friendly, as JavaScript is adept in handling JSON. If youre making your Ajax endpoints generally available or if you know your Ajax requests might be using something other than JSON, you should return an appropriate response exclusively based on the Accepts header, which we can conveniently access through the req.accepts helper method. If youre responding based only on the Accepts header, you might want to also look at res.format, which is a handy convenience method that makes it easy to respond appropriately depending on what the client expects. If you do that, youll have to make sure to set the dataType or accepts property when making Ajax requests with JavaScript.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt;text-align:justify'><span style='color:#8E0011'>File<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Upload<a
name="_bookmark381"></a>s</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:86.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark382"></a><span style='color:#333333'>Weve already
mentioned that file uploads bring a raft of complications. Fortunately, there
are some great projects that help make file handling a <span style='letter-spacing:
-.2pt'>snap.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>There are four popular and robust options for
multipart form processing: busboy, multiparty, formidable, and multer. <a
name="_bookmark383"></a>I have used all four, and</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection168>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>theyre all good, but I feel multiparty is the best
maintained, and so well use it here.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Lets create a file
upload form for a Meadowlark Travel vacation photo contest (<i>views/contest/vacation-photo.handlebars</i>):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;h2&gt;Vacation Photo Contest&lt;/h2&gt;&#13;&#10;&#13;&#10;&lt;form class=&quot;form-horizontal&quot; role=&quot;form&quot; enctype=&quot;multipart/form-data&quot; method=&quot;POST&quot; action=&quot;/contest/vacation-photo/{{year}}/{{month}}&quot;&gt;&#13;&#10;&lt;input type=&quot;hidden&quot; name=&quot;_csrf&quot; value=&quot;{{csrf}}&quot;&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldName&quot; class=&quot;col-sm-2 control-label&quot;&gt;Name&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;fieldName&quot; name=&quot;name&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldEmail&quot; class=&quot;col-sm-2 control-label&quot;&gt;Email&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;email&quot; class=&quot;form-control&quot; required id=&quot;fieldEmail&quot; name=&quot;email&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldPhoto&quot; class=&quot;col-sm-2 control-label&quot;&gt;Vacation photo&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;file&quot; class=&quot;form-control&quot; required accept=&quot;image/*&quot; id=&quot;fieldPhoto&quot; name=&quot;photo&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;div class=&quot;col-sm-offset-2 col-sm-4&quot;&gt;&#13;&#10;&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Register&lt;/button&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:84.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><span style='color:#333333'>Note that we must specify </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>enctype=&quot;multipart/form-data&quot;<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>to
enable file uploads. Were also restricting the type of files that can be
uploaded by using the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>accept<span style='letter-spacing:-1.5pt'> </span></span><span
style='color:#333333'>attribute (which is optional).</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection169>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="File_Uploads_with_Fetch"></a><a name="_bookmark384"></a><span
style='color:#333333'>Now we need to create route handlers, but we have something
of a<span style='letter-spacing:4.0pt'> </span>dilemma. We want to maintain our
ability to easily test our route handlers, which will be complicated by
multipart form processing (in the same way<span style='letter-spacing:2.0pt'> </span>we<span
style='letter-spacing:1.55pt'> </span>use<span style='letter-spacing:1.55pt'> </span>middleware<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.65pt'> </span>process<span
style='letter-spacing:1.55pt'> </span>other<span style='letter-spacing:1.55pt'>
</span>types<span style='letter-spacing:1.55pt'> </span>of<span
style='letter-spacing:1.55pt'> </span>body<span style='letter-spacing:1.65pt'> </span>encoding<span
style='letter-spacing:1.65pt'> </span>before<span style='letter-spacing:1.55pt'>
</span>we even get to our handlers). Since we dont want to test multipart form
decoding ourselves (we can assume this is done thoroughly by multiparty), well
keep our handlers pure by passing them the already-processed information.
Since we dont know what that looks like yet, well start with the Express
plumbing in <i>meadowlark.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const multiparty = require('multiparty')&#13;&#10;&#13;&#10;app.post('/contest/vacation-photo/:year/:month', (req, res) =&gt; {&#13;&#10;const form = new multiparty.Form() form.parse(req, (err, fields, files) =&gt; {&#13;&#10;if(err) return res.status(500).send({ error: err.message }) handlers.vacationPhotoContestProcess(req, res, fields, files)&#13;&#10;})&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Were using multipartys </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>parse<span style='letter-spacing:-2.3pt'>
</span></span><span style='color:#333333'>method to parse the request data into
the data fields and the files. This method will store the files in a temporary
directory on the server, and that information will be returned in the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>files </span><span
style='color:#333333'>array passed back.</span></p>

<p class=MsoBodyText><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>So now we have extra information to pass to our
(testable) route handler: the fields (which wont be in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.body<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>as in
previous examples since were using a different body parser) and information
about the file(s) that were collected. Now that we know what that looks like,
we can write our route handler:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: exports.vacationPhotoContestProcess = (req, res, fields, files) =&gt; { console.log('field data: ', fields)&#13;&#10;console.log('files: ', files)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection170>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image024.gif"
alt="Text Box: res.redirect(303, '/contest/vacation-photo-thank-you')&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>(Year and month are being specified as <i>route
parameters</i>, which youll<span style='letter-spacing:4.0pt'> </span>learn
about in </span><a href="#_bookmark603"><span style='color:#070707'>Chapter 14</span></a><span
style='color:#333333'>.) Go ahead and run this and examine the console log.
Youll see that your form fields come across as you would expect: as<span
style='letter-spacing:4.0pt'> </span>an object with properties corresponding to
your field names. The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>files </span><span style='color:#333333'>object contains more
data, but its relatively straightforward. For each file uploaded, youll see
there are properties for size, the path it was uploaded<span style='letter-spacing:
4.0pt'> </span>to<span style='letter-spacing:1.6pt'> </span>(usually<span
style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:1.5pt'> </span>random<span
style='letter-spacing:1.5pt'> </span>name<span style='letter-spacing:1.5pt'> </span>in<span
style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:1.5pt'> </span>temporary<span
style='letter-spacing:1.6pt'> </span>directory),<span style='letter-spacing:
1.6pt'> </span>and<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>original name of the file that the user
uploaded (just the filename, not the whole<span style='letter-spacing:2.0pt'> </span>path,
for security and privacy reasons)<a name="_bookmark385"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>What you do with this file is now up to you: you can
store it in a database, copy it to a more permanent location, or upload it to a
cloud-based file storage<span style='letter-spacing:1.65pt'> </span>system.<span
style='letter-spacing:1.7pt'> </span>Remember<span style='letter-spacing:1.65pt'>
</span>that<span style='letter-spacing:1.65pt'> </span>if<span
style='letter-spacing:1.65pt'> </span>youre<span style='letter-spacing:1.65pt'>
</span>relying<span style='letter-spacing:1.7pt'> </span>on<span
style='letter-spacing:1.7pt'> </span>local<span style='letter-spacing:1.65pt'> </span>storage<span
style='letter-spacing:1.65pt'> </span>for saving files, your application wont scale
well, making this a poor choice<span style='letter-spacing:2.0pt'> </span>for
cloud-based<span style='letter-spacing:1.0pt'> </span>hosting.<span
style='letter-spacing:1.0pt'> </span>We will be revisiting<span
style='letter-spacing:1.0pt'> </span>this example in<span style='letter-spacing:
1.0pt'> </span></span><a href="#_bookmark542"><span style='color:#070707'>Chapter
13</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>File<span style='letter-spacing:-.25pt'> </span>Uploads<span
style='letter-spacing:-.25pt'> </span>with<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Fetch</span></span></h3>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark386"></a><span style='color:#333333'>Happily, using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fetch<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>for
file uploads is nearly identical to letting the browser handle it. The hard
work of file uploads is really in the encoding, which is being handled for us
with middleware.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Consider<span
style='letter-spacing:.55pt'> </span>this<span style='letter-spacing:.55pt'> </span>JavaScript<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.6pt'> </span>send<span
style='letter-spacing:.6pt'> </span>our<span style='letter-spacing:.55pt'> </span>form<span
style='letter-spacing:.6pt'> </span>contents<span style='letter-spacing:.55pt'>
</span>using<span style='letter-spacing:.6pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>fetch</span><span
style='color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: &lt;script&gt; document.getElementById('vacationPhotoContestForm')&#13;&#10;.addEventListener('submit', evt =&gt; { evt.preventDefault()&#13;&#10;const body = new FormData(evt.target)&#13;&#10;const container =&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection171>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: document.getElementById('vacationPhotoContestFormContainer') const url = '/api/vacation-photo-contest/{{year}}/{{month}}' fetch(url, { method: 'post', body })&#13;&#10;.then(resp =&gt; {&#13;&#10;if(resp.status &lt; 200 || resp.status &gt;= 300)&#13;&#10;throw new Error(`Request failed with status ${resp.status}`)&#13;&#10;return resp.json()&#13;&#10;})&#13;&#10;.then(json =&gt; {&#13;&#10;container.innerHTML = '&lt;b&gt;Thank you for submitting your photo!&lt;/b&gt;'&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;container.innerHTML = `&lt;b&gt;We're sorry, we had a problem processing&#13;&#10;` +&#13;&#10;`your submission.  Please &lt;a href=&quot;/newsletter&quot;&gt;try again&lt;/a&gt;`&#13;&#10;})&#13;&#10;})&#13;&#10;&lt;/script&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark387"></a><span
style='color:#333333'>The<span style='letter-spacing:.4pt'> </span>important<span
style='letter-spacing:.45pt'> </span>detail<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>note<span style='letter-spacing:.4pt'> </span>here<span
style='letter-spacing:.45pt'> </span>is<span style='letter-spacing:.45pt'> </span>that<span
style='letter-spacing:.45pt'> </span>we<span style='letter-spacing:.45pt'> </span>convert<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.45pt'> </span>form<span
style='letter-spacing:.45pt'> </span>element<span style='letter-spacing:.45pt'>
</span>to<span style='letter-spacing:.5pt'> </span><span style='letter-spacing:
-.5pt'>a</span></span></p>

<p class=MsoBodyText style='margin-top:4.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
href="https://mzl.la/2CErVzb"><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707'>FormData</span></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707;letter-spacing:-1.85pt'> </span><span style='color:#333333'>object,
which </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fetch<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>can
accept directly as the request body. Thats all there is to it! Because the
encoding is exactly the same as it was when we let the browser handle it, our
handler is almost exactly the same. We just want to return a JSON response
instead of a redirect:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: exports.api.vacationPhotoContest = (req, res, fields, files) =&gt; { console.log('field data: ', fields)&#13;&#10;console.log('files: ', files) res.send({ result: 'success' })&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Improving<span
style='letter-spacing:-.3pt'> </span>File<span style='letter-spacing:-.25pt'> </span>Upload<span
style='letter-spacing:-.25pt'> UI</span></span></h2>

<p class=MsoBodyText style='margin-top:12.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark388"></a><span style='color:#333333'>The browsers built-in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;input&gt;<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>control
for file uploads is, shall we say, a bit lacking from a UI perspective. Youve
probably seen drag-and-drop interfaces and file upload buttons that are styled
more attractively.</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection172>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Improving_File_Upload_UI"></a><a name="_bookmark389"></a><span
style='color:#333333'>The good news is that the techniques youve learned here
will apply to almost all of the popular fancy file upload components. At the
end of the day, most of them are putting a pretty face on the same form upload <span
style='letter-spacing:-.1pt'>mechanism.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Some<span
style='letter-spacing:.45pt'> </span>of<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span>most<span style='letter-spacing:.5pt'> </span>popular<span
style='letter-spacing:.5pt'> </span>file<span style='letter-spacing:.5pt'> </span>upload<span
style='letter-spacing:.55pt'> </span>frontends<span style='letter-spacing:.45pt'>
</span>are<span style='letter-spacing:.5pt'> </span>as<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.1pt'>follows:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15840768'><span style='left:0px;position:absolute;left:169px;
top:-115509px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><a
href="http://bit.ly/2Qbcd6I"><span style='color:#070707'>jQuery<span
style='letter-spacing:.5pt'> </span>File<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Upload</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15841280'><span style='left:0px;position:absolute;
left:169px;top:-115545px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><a
href="http://bit.ly/2rEFWeb"><span style='color:#070707'>Uppy</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(this one has the
benefit of offering support for many popular upload targets)</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:108%'><span
style='position:relative;z-index:15841792'><span style='left:0px;position:absolute;
left:169px;top:-115608px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><a
href="http://bit.ly/2X5fS7F"><span style='color:#070707'>file-upload-with-preview</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(this one gives you
full control; you have access to an array of file objects that you can use to
construct a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>FormData<span style='letter-spacing:-1.55pt'> </span></span><span
style='color:#333333'>object to use with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>fetch</span><a name="_bookmark390"></a><span style='color:#333333'>)</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:10.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="_bookmark391"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>In this chapter, you learned the various techniques to
use for processing forms. We explored the traditional way forms are handled by
browsers (letting the browser issue a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>request to the server with the form contents and
rendering the response from the server, usually a redirect) as well as the
increasingly ubiquitous approach of preventing the browser from submitting the
form and handling it ourselves with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>fetch</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>We<span
style='letter-spacing:.5pt'> </span>learned<span style='letter-spacing:.6pt'> </span>about<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.55pt'> </span>common<span
style='letter-spacing:.55pt'> </span>ways<span style='letter-spacing:.55pt'> </span>forms<span
style='letter-spacing:.55pt'> </span>are<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>encoded:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>application/x-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>www</span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>f</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>-</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>urlencoded</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Default and easy-to-use encoding typically associated
with traditional form processing</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>application/json</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Common<span
style='letter-spacing:.6pt'> </span>for<span style='letter-spacing:.5pt'> </span>(nonfile)<span
style='letter-spacing:.55pt'> </span>data<span style='letter-spacing:.55pt'> </span>sent<span
style='letter-spacing:.55pt'> </span>with<span style='letter-spacing:.55pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>fetch</span></p>

</div>

<span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection173>

<p class=MsoNormal style='margin-top:3.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>u</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>l</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>p</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>a</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>/</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>f</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.2pt'>data</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>encoding<span style='letter-spacing:.5pt'>
</span>to<span style='letter-spacing:.55pt'> </span>use<span style='letter-spacing:
.45pt'> </span>when<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.55pt'> </span>need<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span>transfer<span style='letter-spacing:.45pt'>
</span><span style='letter-spacing:-.1pt'>files</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that weve covered how to get user data into our
server, lets turn our attention to <i>cookies </i>and <i>sessions</i>, which
also help synchronize the server<span style='letter-spacing:2.0pt'> </span>and
the client<a name="_bookmark392"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection174>

<h1 style='margin-right:85.3pt;line-height:105%'><a
name="9._Cookies_and_Sessions"></a><a name="_bookmark393"></a>Chapter 9.
Cookies and <span style='letter-spacing:-.1pt'>Sessions</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark394"></a><span style='color:#333333'>In this chapter, youll
learn how to use cookies and sessions to provide a better experience to your
users by remembering their preferences from page to page, and even between
browser sessions.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark395"></a><span style='font-size:14.0pt;line-height:133%;
color:#333333'>HTTP is a <i>stateless </i>protocol. That means that when you
load a page in<span style='letter-spacing:2.0pt'> </span>your browser and then
you navigate to another page on the same website, neither the server nor the
browser has any intrinsic way of knowing that<span style='letter-spacing:2.0pt'>
</span>its the same browser visiting the same site. Another way of saying this
is that the way the web works is that <i>every HTTP request contains all the
information necessary for the server to satisfy the request</i>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This is a problem, though: if the story ended there, we
could never log in to anything. Streaming media wouldnt work. Websites
wouldnt be able to remember your preferences from one page to the next. So
there needs<span style='letter-spacing:2.0pt'> </span>be a way to build state
on top of HTTP, and thats where cookies and sessions enter the picture.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Cookies, unfortunately, have gotten a bad name thanks to
the nefarious things that people have done with them. This is unfortunate
because cookies are really quite essential to the functioning of the modern
web (although HTML5 has introduced some new features, like local storage, that
could be used for the same purpose).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>The<span
style='letter-spacing:.4pt'> </span>idea<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>cookie<span
style='letter-spacing:.45pt'> </span>is<span style='letter-spacing:.45pt'> </span>simple:<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.4pt'> </span>server<span
style='letter-spacing:.45pt'> </span>sends<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.4pt'> </span>bit<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.45pt'> </span>information,<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.25pt'>and</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection175>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Externalizing_Credentials"></a><a name="_bookmark397"></a><span
style='color:#333333'>the browser stores it for some configurable period of
time. Its really up to the server what the particular bit of information is.
Often its just a unique ID<span style='letter-spacing:1.4pt'> </span>number<span
style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:1.4pt'> </span>identifies<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>specific<span
style='letter-spacing:1.4pt'> </span>browser<span style='letter-spacing:1.4pt'>
</span>so<span style='letter-spacing:1.45pt'> </span>that<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>illusion<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.4pt'> </span>state
can be maintained.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>There<span
style='letter-spacing:.5pt'> </span>are<span style='letter-spacing:.55pt'> </span>some<span
style='letter-spacing:.55pt'> </span>important<span style='letter-spacing:.5pt'>
</span>things<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.6pt'> </span>need<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.6pt'> </span>know<span style='letter-spacing:.5pt'> </span>about<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>cookies:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Cookies<span style='letter-spacing:.45pt'> </span>are<span
style='letter-spacing:.45pt'> </span>not<span style='letter-spacing:.5pt'> </span>secret<span
style='letter-spacing:.45pt'> </span>from<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>user</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>All cookies that the server sends to the client are
available for the client to look at. Theres no reason you cant send something
encrypted to protect its contents, but theres seldom any need for this (at
least if youre not doing anything nefarious!). <i>Signed </i>cookies, which
well discuss in a bit, can obfuscate the contents of the cookie, but this is
in no way cryptographically secure from prying eyes.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>The<span style='letter-spacing:.45pt'> </span>user<span
style='letter-spacing:.5pt'> </span>can<span style='letter-spacing:.5pt'> </span>delete<span
style='letter-spacing:.5pt'> </span>or<span style='letter-spacing:.45pt'> </span>disallow<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>cookies</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Users have full control over cookies, and browsers make
it possible to delete cookies in bulk or individually. Unless youre up to no
good, theres no real reason for users to do this, but it is useful during
testing. Users can also disallow cookies, which is more problematic because<span
style='letter-spacing:2.0pt'> </span>only the simplest web applications can
make do without cookies.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Regular<span style='letter-spacing:.6pt'> </span>cookies<span
style='letter-spacing:.6pt'> </span>can<span style='letter-spacing:.65pt'> </span>be<span
style='letter-spacing:.6pt'> </span>tampered<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.2pt'>with</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Whenever a browser makes a request of your server that
has an associated cookie and you blindly trust the contents of that cookie, you
are opening yourself up for attack. The height of foolishness, for example,
would be to execute code contained in a cookie. To ensure cookies arent
tampered with, use signed cookies.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Cookies<span style='letter-spacing:.45pt'> </span>can<span
style='letter-spacing:.5pt'> </span>be<span style='letter-spacing:.45pt'> </span>used<span
style='letter-spacing:.5pt'> </span>for<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>attacks</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark396"></a><span style='color:#333333'>A category of attacks
called <i>cross-site scripting </i>(XSS) attacks has sprung up in recent years.
One technique of XSS attacks involves malicious JavaScript modifying the
contents of cookies. This is an additional reason not to trust the contents of
cookies that come back to</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection176>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>your server. Using signed cookies helps (tampering will
be evident in a signed<span style='letter-spacing:1.9pt'> </span>cookie<span
style='letter-spacing:1.85pt'> </span>whether<span style='letter-spacing:1.85pt'>
</span>the<span style='letter-spacing:1.85pt'> </span>user<span
style='letter-spacing:1.85pt'> </span>or<span style='letter-spacing:1.85pt'> </span>malicious<span
style='letter-spacing:1.85pt'> </span>JavaScript<span style='letter-spacing:
1.85pt'> </span>modified<span style='letter-spacing:1.9pt'> </span>it), and
theres also a setting that specifies that cookies are to be modified only by
the server. These cookies can be limited in usefulness, but they are certainly
safer.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Users<span style='letter-spacing:.4pt'> </span>will<span
style='letter-spacing:.45pt'> </span>notice<span style='letter-spacing:.45pt'> </span>if<span
style='letter-spacing:.4pt'> </span>you<span style='letter-spacing:.5pt'> </span>abuse<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>cookies</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If you set a lot of cookies on your users computers or
store a lot of data, it will irritate your users, which is something you should
avoid. Try to keep your use of cookies to a minimum.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Prefer<span style='letter-spacing:.55pt'> </span>sessions<span
style='letter-spacing:.55pt'> </span>over<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>cookies</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark398"></a><span style='color:#333333'>For the most part, you can
use <i>sessions </i>to maintain state, and its generally wise to do so. Its
easier, you dont have to worry about abusing your users storage, and it can
be more secure. Sessions rely on cookies, of course, but with sessions, Express
will be doing the heavy lifting for you.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;Cookies are not magic: when the server wants the client to store a cookie, it sends a header called Set-Cookie containing name/value pairs, and when a client sends a request to a server for which it has cookies, it sends multiple Cookie request headers containing the value of the cookies.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Externalizing<span
style='letter-spacing:-.55pt'> </span><span style='letter-spacing:-.1pt'>Credentials</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark400"></a><span style='color:#333333'>To make cookies secure, a <i>cookie
secret </i>is necessary. The cookie secret is<span style='letter-spacing:4.0pt'>
</span>a string thats known to the server and used to encrypt secure cookies<span
style='letter-spacing:2.0pt'> </span>before theyre sent to the client. Its
not a password that has to be </span><a href="http://bit.ly/2QcjuDb"><span
style='color:#333333;text-decoration:none'>remembered, so it can just be a
random string. I usually use </span><span style='color:#070707'>a random</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>password
generator inspired by xkcd</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#333333;text-decoration:none'>to generate the
cookie secret or</span></a><span style='color:#333333;letter-spacing:4.0pt'> </span><span
style='color:#333333'>simply a random number.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection177>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its a common practice to externalize third-party
credentials, such as the cookie secret, database passwords, and API tokens
(Twitter, Facebook, etc.). This not only eases maintenance (by making it easy
to locate and update credentials), but also allows you to omit the credentials
file from your version control system. This is especially critical for open
source repositories hosted on GitHub or other public source control
repositories.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>To that end, were
going to externalize our credentials in a JSON file. Create a file called <i>.credentials.development.json</i>:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: {&#13;&#10;&quot;cookieSecret&quot;: &quot;...your cookie secret goes here&quot;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This will be the credentials file for our development
work. In this way, you could have different credentials files for production,
test, or other environments, which will come in handy.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:81.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Were going to add a layer of abstraction on
top of this credentials file to make it easier to manage our dependencies as
our application grows. Our version will be very simple. Create a file called <i>config.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const env = process.env.NODE_ENV || 'development' const credentials = require(`./.credentials.${env}`) module.exports = { credentials }"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now, to make sure we dont accidentally add credentials
to our repository, add <i>.credentials.* </i>to your <i>.gitignore </i>file. To
import your credentials into your application, all you need to do is this:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.5pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>{<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>credentials<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>}<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'./config'</span><a
name="Cookies_in_Express"></a><a name="_bookmark401"></a><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Well<span
style='letter-spacing:.4pt'> </span>be<span style='letter-spacing:.45pt'> </span>using<span
style='letter-spacing:.45pt'> </span>this<span style='letter-spacing:.45pt'> </span>same<span
style='letter-spacing:.45pt'> </span>file<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.5pt'> </span>store<span style='letter-spacing:.45pt'> </span>other<span
style='letter-spacing:.4pt'> </span>credentials<span style='letter-spacing:
.45pt'> </span>later,<span style='letter-spacing:.5pt'> </span>but<span
style='letter-spacing:.4pt'> </span>for<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>now,</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection178>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>all<span
style='letter-spacing:.35pt'> </span>we<span style='letter-spacing:.4pt'> </span>need<span
style='letter-spacing:.45pt'> </span>is<span style='letter-spacing:.4pt'> </span>our<span
style='letter-spacing:.4pt'> </span>cookie<span style='letter-spacing:.35pt'> </span><span
style='letter-spacing:-.1pt'>secret.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;If youre following along by using the companion repository, youll have to create your own credentials file, as it is not included in the repository.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Cookies<span
style='letter-spacing:-.2pt'> </span>in<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:86.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><a
name="_bookmark402"></a><span style='color:#333333'>Before you start setting
and accessing cookies in your app, you need to include the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>cookie-parser<span
style='letter-spacing:-1.5pt'> </span></span><span style='color:#333333'>middleware.
First, use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install cookie-parser</span><span style='color:#333333'>,
and then (<i>ch09/meadowlark.js </i>in the companion repo):</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const cookieParser = require('cookie-parser') app.use(cookieParser(credentials.cookieSecret))"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once youve done this, you can set a cookie or a signed
cookie anywhere you have access to a response object:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: res.cookie('monster', 'nom nom') res.cookie('signed_monster', 'nom nom', { signed: true })"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image056.gif"
  alt="Text Box: NOTE&#13;&#10;Signed cookies take precedence over unsigned cookies. If you name your signed cookie signed_monster, you cannot have an unsigned cookie with the same name (it will come back as undefined).&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><a
name="_bookmark403"></a><span style='color:#333333'>To retrieve the value of a
cookie (if any) sent from the client, just access the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>cookie<span
style='letter-spacing:-1.55pt'> </span></span><span style='color:#333333'>or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>signedCookie<span
style='letter-spacing:-1.55pt'> </span></span><span style='color:#333333'>properties
of the request object:</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection179>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: const monster = req.cookies.monster&#13;&#10;const signedMonster = req.signedCookies.signed_monster&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;You can use any string you want for a cookie name. For example, we could have used \'signed monster' instead of \'signed_monster', but then we would have to use the bracket notation to retrieve the cookie: req.signedCookies[\'signed monster']. For this reason, I recommend using cookie names without special characters.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark404"></a><span
style='color:#333333'>To<span style='letter-spacing:.45pt'> </span>delete<span
style='letter-spacing:.4pt'> </span>a<span style='letter-spacing:.45pt'> </span>cookie,<span
style='letter-spacing:.45pt'> </span>use<span style='letter-spacing:.4pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>req.clearCookie</span><span
style='color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:19.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>clearCookie</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'monster'</span><a name=Sessions></a><a name="_bookmark405"></a><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>When<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span>set<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.5pt'> </span>cookie,<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span>can<span
style='letter-spacing:.55pt'> </span>specify<span style='letter-spacing:.55pt'>
</span>the<span style='letter-spacing:.45pt'> </span>following<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>options:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>d</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>n</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Controls the domains the cookie is associated with; this
allows you to assign cookies to specific subdomains. Note that you cannot set a
cookie for a different domain than the server is running on; it will simply do
nothing.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.2pt'>path</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Controls<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>path<span style='letter-spacing:1.55pt'> </span>this<span
style='letter-spacing:1.45pt'> </span>cookie<span style='letter-spacing:1.45pt'>
</span>applies<span style='letter-spacing:1.45pt'> </span>to.<span
style='letter-spacing:1.55pt'> </span>Note<span style='letter-spacing:1.45pt'> </span>that<span
style='letter-spacing:1.45pt'> </span>paths<span style='letter-spacing:1.45pt'>
</span>have<span style='letter-spacing:1.45pt'> </span>an implicit wildcard
after them; if you use a path of <i>/ </i>(the default), it will apply to all
pages on your site. If you use a path of <i>/foo</i>, it will apply to the
paths <i>/foo</i>, <i>/foo/bar</i>, etc.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>maxAge</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>Specifies how long the client should keep the cookie
before deleting it, in milliseconds. If you omit this, the cookie will be
deleted when you close<span style='letter-spacing:1.5pt'> </span>your<span
style='letter-spacing:1.5pt'> </span>browser.<span style='letter-spacing:1.55pt'>
</span>(You<span style='letter-spacing:1.55pt'> </span>can<span
style='letter-spacing:1.55pt'> </span>also<span style='letter-spacing:1.55pt'> </span>specify<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.5pt'> </span>date<span
style='letter-spacing:1.5pt'> </span>for<span style='letter-spacing:1.5pt'> </span>expiration<span
style='letter-spacing:1.55pt'> </span>with the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>expires<span style='letter-spacing:
-1.85pt'> </span></span><span style='color:#333333'>option, but the syntax is
frustrating. I recommend using</span></p>

</div>

<span style='font-size:11.0pt;line-height:110%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection180>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>maxAge</span><span style='color:#333333;
letter-spacing:-.1pt'>.)</span></p>

<p class=MsoNormal style='margin-top:12.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>secure</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Specifies that this cookie will be sent only over a
secure (HTTPS) <span style='letter-spacing:-.1pt'>connection.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>h</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>tt</span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>p</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>O</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>n</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>l</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>y</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>Setting this to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>true<span style='letter-spacing:-2.8pt'> </span></span><span
style='color:#333333'>specifies the cookie will be modified only by the server.
That is, client-side JavaScript cannot modify it. This helps prevent XSS
attacks.</span></p>

<p class=MsoNormal style='margin-top:11.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>signed</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><span
style='color:#333333'>Setting this to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>true<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>signs this cookie, making it available in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.signedCookies<span
style='letter-spacing:-.8pt'> </span></span><span style='color:#333333'>instead
of </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.cookies</span><span
style='color:#333333'>. Signed cookies that<span style='letter-spacing:2.0pt'> </span>have
been tampered with will be rejected by the server, and the cookie value will be
reset to its original value.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:10.4pt'><a name="Examining_Cookies"></a><a
name="_bookmark406"></a><span style='color:#8E0011'>Examining<span
style='letter-spacing:-.4pt'> </span><span style='letter-spacing:-.1pt'>Cookies</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark408"></a><span style='color:#333333'>As part of your testing,
youll probably want a way to examine the cookies on your system. Most browsers
have a way to view individual cookies and the values they store. In <a
name="_bookmark407"></a>Chrome, open the developer tools, and select the
Application<span style='letter-spacing:1.45pt'> </span>tab.<span
style='letter-spacing:1.45pt'> </span>In<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>tree<span style='letter-spacing:1.4pt'> </span>on<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.4pt'> </span>left,<span
style='letter-spacing:1.45pt'> </span>youll<span style='letter-spacing:1.4pt'>
</span>see<span style='letter-spacing:1.4pt'> </span>Cookies.<span
style='letter-spacing:1.45pt'> </span>Expand<span style='letter-spacing:1.45pt'>
</span>that, and youll see the site youre currently visiting listed. Click
that, and you will<span style='letter-spacing:1.35pt'> </span>see<span
style='letter-spacing:1.35pt'> </span>all<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>cookies<span style='letter-spacing:1.35pt'>
</span>associated<span style='letter-spacing:1.45pt'> </span>with<span
style='letter-spacing:1.45pt'> </span>this<span style='letter-spacing:1.35pt'> </span>site.<span
style='letter-spacing:1.45pt'> </span>You<span style='letter-spacing:1.45pt'> </span>can<span
style='letter-spacing:1.45pt'> </span>also<span style='letter-spacing:1.45pt'> </span>right-click
the<span style='letter-spacing:1.5pt'> </span>domain<span style='letter-spacing:
1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>clear<span
style='letter-spacing:1.5pt'> </span>all<span style='letter-spacing:1.5pt'> </span>cookies<span
style='letter-spacing:1.5pt'> </span>or<span style='letter-spacing:1.5pt'> </span>right-click<span
style='letter-spacing:1.55pt'> </span>an<span style='letter-spacing:1.55pt'> </span>individual<span
style='letter-spacing:1.5pt'> </span>cookie<span style='letter-spacing:1.5pt'> </span>to
remove it specifically.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>Sessions</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark410"></a><i><span style='color:#333333'>Sessions </span></i><span
style='color:#333333'>are really jus<a name="_bookmark409"></a>t a more
convenient way to maintain state. To implement sessions, <i>something </i>has
to be stored on the client; otherwise,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection181>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>the server wouldnt be able to identify the client from
one request to the next. The usual method of doing this is a cookie that
contains a unique identifier. The server then uses that identifier to retrieve
the appropriate session information.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Cookies arent the only way to accomplish this: during
the height of the cookie scare (when cookie abuse was rampant), many users
were simply turning off cookies, and other ways to maintain state were devised,
such as decorating URLs with session information. These techniques were messy,
difficult,<span style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:
1.5pt'> </span>inefficient,<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>they<span style='letter-spacing:1.5pt'> </span>are<span
style='letter-spacing:1.45pt'> </span>best<span style='letter-spacing:1.45pt'> </span>left<span
style='letter-spacing:1.45pt'> </span>in<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>past.<span style='letter-spacing:1.5pt'> </span>HTML5
provides another option for sessions called <a name="_bookmark411"></a><i>local
storage</i>, which offers an </span><a href="https://mzl.la/2CDrGo4"><span
style='color:#333333;text-decoration:none'>advantage over cookies if you need
to store larger amounts of data. See </span><span style='color:#070707'>the</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>MDN
documentation for </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707'>Window.localStorage</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707;letter-spacing:-.65pt;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>for more information</span></a><span
style='color:#333333'> about this option.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark412"></a><span style='color:#333333'>Broadly speaking, there are
two ways to implement sessions: store everything in the cookie or store only a
unique identifier in the cookie and everything else on the server. The former
are called <i>cookie-based sessions </i>and merely represent a convenience over
using cookies. However, it still means that everything you add to the session
will be stored on the clients browser, which is an approach I dont recommend.
I recommend this approach only if you know that you will be storing just a
small amount of information,<span style='letter-spacing:1.65pt'> </span>that<span
style='letter-spacing:1.6pt'> </span>you<span style='letter-spacing:1.65pt'> </span>dont<span
style='letter-spacing:1.6pt'> </span>mind<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.6pt'> </span>user<span style='letter-spacing:1.6pt'> </span>having<span
style='letter-spacing:1.65pt'> </span>access<span style='letter-spacing:1.6pt'>
</span>to<span style='letter-spacing:1.65pt'> </span>the information, and that
it wont be growing out of control over time. If you want to take this
approach, see the </span><a href="http://bit.ly/2qNv9h6"><span
style='font-family:"BIZ UDGothic",sans-serif;color:#070707'>cookie-session<span
style='letter-spacing:-1.5pt'> </span></span><span style='color:#070707'>middleware</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Memory<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Stores</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark413"></a><span style='color:#333333'>If you would rather store
session information on the server, which I recommend, you have to have
somewhere to store it. The entry-level</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection182>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Memory_Stores"></a><a name="_bookmark414"></a><span style='color:#333333'>option
is memory sessions. They are easy to set up, but they have a huge downside:
when you restart the server (which you will be doing a lot of over the course
of this book!), your session information disappears. Even worse, if you scale
out by having multiple servers (see </span><a href="#_bookmark499"><span
style='color:#070707'>Chapter 12</span></a><span style='color:#333333'>), a
different server could service a request every time; session data would
sometimes be there, and sometimes not. This is clearly an unacceptable user
experience. However, for our development and testing needs, it will suffice.
Well see how to permanently store session information in<span
style='letter-spacing:4.0pt'> </span></span><a href="#_bookmark542"><span
style='color:#070707'>Chapter 13</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><a
name="_bookmark415"></a><span style='color:#333333'>First, install </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-session<span
style='letter-spacing:-2.4pt'> </span></span><span style='color:#333333'>(</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm install express-session</span><span
style='color:#333333'>); then, after linking in the cookie parser, link in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-session </span><span
style='color:#333333'>(<i>ch09/meadowalrk.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const expressSession = require('express-session')&#13;&#10;// make sure you've linked in cookie middleware before&#13;&#10;// session middleware!&#13;&#10;app.use(expressSession({ resave: false, saveUninitialized: false,&#13;&#10;secret: credentials.cookieSecret,&#13;&#10;}))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express-session<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>middleware accepts a configuration object with the
following options:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:21.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>resave</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:81.2pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><span
style='color:#333333'>Forces the session to be saved back to the store even if
the request wasnt modified. Setting this to </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>false<span style='letter-spacing:-2.65pt'>
</span></span><span style='color:#333333'>is generally preferable; see the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-session<span
style='letter-spacing:-.45pt'> </span></span><span style='color:#333333'>documentation
for more information.</span></p>

<p class=MsoNormal style='margin-top:11.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>s</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>v</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>U</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>n</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>n</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>l</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>z</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>d</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Setting<span
style='letter-spacing:.55pt'> </span>this<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>true<span style='letter-spacing:-3.0pt'> </span></span><span
style='color:#333333'>causes<span style='letter-spacing:.5pt'> </span>new<span
style='letter-spacing:.55pt'> </span>(uninitialized)<span style='letter-spacing:
.5pt'> </span>sessions<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span>be<span style='letter-spacing:.5pt'> </span>saved<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.25pt'>to</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection183>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="Using_Sessions_to_Implement_Flash_Messag"></a><a name="_bookmark418"></a><span
style='color:#333333'>the store, even if they havent been modified. Setting
this to </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>false<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>is
generally preferable and is required when you need to get the users permission
before setting a cookie. See the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express-session </span><span style='color:#333333'>documentation
for more information.</span></p>

<p class=MsoNormal style='margin-top:11.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>secret</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><span
style='color:#333333'>The key (or keys) used to sign the session ID cookie.
This can be the same key used for </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>cookie-parser</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:6.5pt'>&nbsp;</span></p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection184>

<p class=MsoNormal align=right style='margin-top:3.8pt;text-align:right'><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.25pt'>key</span></i></p>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all>
</span>

<p class=MsoNormal></p>

<p class=MsoBodyText style='margin-top:10.5pt;margin-right:57.85pt;margin-bottom:
0cm;margin-left:-2.0pt;margin-bottom:.0001pt;line-height:105%'><span
style='color:#333333'>The name of the cookie that will store the unique session
identifier. Defaults to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>connect.sid</span><span style='color:#333333'>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:105%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection185>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:6.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:3.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.2pt'>store</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><span
style='color:#333333'>An<span style='letter-spacing:1.55pt'> </span>instance<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.5pt'> </span>session<span style='letter-spacing:1.55pt'>
</span>store.<span style='letter-spacing:1.55pt'> </span>Defaults<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.55pt'> </span>an<span
style='letter-spacing:1.55pt'> </span>instance<span style='letter-spacing:1.5pt'>
</span>of </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>MemoryStore</span><span
style='color:#333333'>, which is fine for our current purposes. Well see how
to use a database store in </span><a href="#_bookmark542"><span
style='color:#070707'>Chapter 13</span></a><span style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>cookie</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><span
style='color:#333333'>Cookie settings for the session cookie (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>path</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>domain</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>secure</span><span
style='color:#333333'>, etc.). Regular cookie defaults apply.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<h3><a name="Using_Sessions"></a><a name="_bookmark416"></a><span
style='color:#3F3F3F'>Using<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Sessions</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><a
name="_bookmark417"></a><span style='color:#333333'>Once youve set up
sessions, using them couldnt be simpler; just use properties of the request
objects </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>session<span
style='letter-spacing:-1.1pt'> </span></span><span style='color:#333333'>variable:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: req.session.userName = 'Anonymous'&#13;&#10;const colorScheme = req.session.colorScheme || 'dark'&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Note that with sessions, we dont have to use the request
object for retrieving the value and the response object for setting the value;
its all performed on the request object. (The response object does not have a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>session<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>property.)
To delete a session, you can use JavaScripts </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>delete</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection186>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>operator:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=384 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=559 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image062.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt;margin-right:85.3pt;margin-bottom:0cm;margin-left:
55.0pt;margin-bottom:.0001pt;line-height:102%'><span style='color:#8E0011'>Using
Sessions to Implement Flash <span style='letter-spacing:-.1pt'>Messages</span></span></h2>

<p class=MsoBodyText style='margin-top:13.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark420"></a><i><span style='color:#333333'>Flash<span
style='letter-spacing:1.5pt'> </span></span></i><span style='color:#333333'>messages<span
style='letter-spacing:1.4pt'> </span>(not<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>be<span style='letter-spacing:1.4pt'> </span>confused<span
style='letter-spacing:1.5pt'> </span>with<span style='letter-spacing:1.5pt'> </span>Adobe<span
style='letter-spacing:1.4pt'> </span>Flash)<span style='letter-spacing:1.4pt'> </span>are<span
style='letter-spacing:1.4pt'> </span>simply<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>way to provide feedback to users in a way
thats not disruptive to their navigation. The easiest way to implement flash
messages is to use sessions (you can also use the querystring, but in addition
to those having uglier URLs, the flash messages will be included in a bookmark,
which is<span style='letter-spacing:4.0pt'> </span>probably not what you want).
Lets set up our HTML first. <a name="_bookmark419"></a>Well be using
Bootstraps<span style='letter-spacing:1.65pt'> </span>alert<span
style='letter-spacing:1.65pt'> </span>messages<span style='letter-spacing:1.65pt'>
</span>to<span style='letter-spacing:1.75pt'> </span>display<span
style='letter-spacing:1.75pt'> </span>our<span style='letter-spacing:1.65pt'> </span>flash<span
style='letter-spacing:1.75pt'> </span>messages,<span style='letter-spacing:
1.75pt'> </span>so<span style='letter-spacing:1.75pt'> </span>make<span
style='letter-spacing:1.65pt'> </span>sure you have Bootstrap linked in (see
Bootstraps </span><a href="http://bit.ly/36YxeYf"><span style='color:#070707'>getting
started</span></a><span style='color:#070707'> </span><span style='color:#333333'>documentation;
you can link in the Bootstrap CSS and JavaScript files in your main
templatethere is an example in the companion repo). In your template file,
somewhere prominent (usually directly below your sites header), add the
following:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: {{#if flash}}&#13;&#10;&lt;div class=&quot;alert alert-dismissible alert-{{flash.type}}&quot;&gt;&#13;&#10;&lt;button type=&quot;button&quot; class=&quot;close&quot;&#13;&#10;data-dismiss=&quot;alert&quot; aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/button&gt;&#13;&#10;&lt;strong&gt;{{flash.intro}}&lt;/strong&gt; {{{flash.message}}}&#13;&#10;&lt;/div&gt;&#13;&#10;{{/if}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Note that we use three curly brackets for </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>flash.message</span><span
style='color:#333333'>; this will allow<span style='letter-spacing:2.0pt'> </span>us
to provide some simple HTML in our messages (we might want to emphasize words
or include hyperlinks).<span style='letter-spacing:1.1pt'> </span>Now lets add<span
style='letter-spacing:1.1pt'> </span>some middleware</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection187>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>to add the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>flash<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>object to the context if theres one in the session.
After weve displayed a flash message once, we want to remove it from the
session so it isnt displayed on the next request. Well create some middleware
to check the session to see whether theres a flash message<span
style='letter-spacing:4.0pt'> </span>and, if there is, transfer it to the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.locals<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>object,
making it available to the<span style='letter-spacing:1.6pt'> </span>views.<span
style='letter-spacing:1.65pt'> </span>Well<span style='letter-spacing:1.6pt'> </span>put<span
style='letter-spacing:1.6pt'> </span>our<span style='letter-spacing:1.6pt'> </span>middleware<span
style='letter-spacing:1.6pt'> </span>in<span style='letter-spacing:1.65pt'> </span>a<span
style='letter-spacing:1.6pt'> </span>file<span style='letter-spacing:1.6pt'> </span>called
<i><span style='letter-spacing:-.1pt'>lib/middleware/flash.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = (req, res, next) =&gt; {&#13;&#10;// if there's a flash message, transfer&#13;&#10;// it to the context, then clear it res.locals.flash = req.session.flash delete req.session.flash&#13;&#10;next()&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>And in our <i>meadowalrk.js </i>file, well link in the
flash message middleware, before any of our view routes:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const flashMiddleware = require('./lib/middleware/flash') app.use(flashMiddleware)"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now lets see how to actually use the flash message.
Imagine were<span style='letter-spacing:4.0pt'> </span>signing up users for a
newsletter and we want to redirect them to the newsletter archive after they
sign up. This is what our form handler might look like:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: // slightly modified version of the official W3C HTML5 email regex:&#13;&#10;//  https://html.spec.whatwg.org/multipage/forms.html#valid-e-mail-address&#13;&#10;const VALID_EMAIL_REGEX = new RegExp('^[a-zA-Z0-9.!#$%&amp;\'*+\/=?^_`{|}~-]+@' + '[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?' +&#13;&#10;'(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$')&#13;&#10;&#13;&#10;app.post('/newsletter', function(req, res){&#13;&#10;const name = req.body.name || '', email = req.body.email || ''&#13;&#10;// input validation&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection188>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: if(VALID_EMAIL_REGEX.test(email)) { req.session.flash = {&#13;&#10;type: 'danger',&#13;&#10;intro: 'Validation error!',&#13;&#10;message: 'The email address you entered was not valid.',&#13;&#10;}&#13;&#10;return res.redirect(303, '/newsletter')&#13;&#10;}&#13;&#10;// NewsletterSignup is an example of an object you might create; since&#13;&#10;// every implementation will vary, it is up to you to write these&#13;&#10;// project-specific interfaces. This simply shows how a typical&#13;&#10;// Express implementation might look in your project.&#13;&#10;new NewsletterSignup({ name, email }).save((err) =&gt; {&#13;&#10;if(err) { req.session.flash = {&#13;&#10;type: 'danger',&#13;&#10;intro: 'Database error!',&#13;&#10;message: 'There was a database error; please try again later.',&#13;&#10;}&#13;&#10;return res.redirect(303, '/newsletter/archive')&#13;&#10;}&#13;&#10;req.session.flash = { type: 'success', intro: 'Thank you!',&#13;&#10;message: 'You have now been signed up for the newsletter.',&#13;&#10;};&#13;&#10;return res.redirect(303, '/newsletter/archive')&#13;&#10;})&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Note that were careful to distinguish between input
validation and database errors. Remember that even if we do input validation on
the frontend (and you should), you should also perform it on the backend,
because malicious users can circumvent frontend validation.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Flash messages are a great mechanism to have
available in your website, even if other methods are more appropriate in
certain areas (for example, flash messages arent always appropriate for
multiform wizards or</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection189>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>shopping cart checkout flows). Flash messages are also
great during development, because they are an easy way to provide feedback,
even if<span style='letter-spacing:4.0pt'> </span>you replace them with a
different technique later. Adding support for flash messages<span
style='letter-spacing:1.2pt'> </span>is<span style='letter-spacing:1.2pt'> </span>one<span
style='letter-spacing:1.2pt'> </span>of<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>first<span style='letter-spacing:1.2pt'> </span>things<span
style='letter-spacing:1.2pt'> </span>I<span style='letter-spacing:1.2pt'> </span>do<span
style='letter-spacing:1.25pt'> </span>when<span style='letter-spacing:1.25pt'> </span>setting<span
style='letter-spacing:1.25pt'> </span>up<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>website,<span style='letter-spacing:1.25pt'>
</span>and well be using this technique throughout the rest of the book.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: TIP&#13;&#10;Because the flash message is being transferred from the session to res.locals.flash in middleware, you have to perform a redirect for the flash message to be displayed. If you want to display a flash message without redirecting, set res.locals.flash instead of req.session.flash.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;The example in this chapter used browser form submission with redirects because the use of sessions to control UI like this is typically not used in applications that use Ajax for form submission. In that event, you would want to indicate any errors in the JSON returned from the form handler and have the frontend modify the DOM to dynamically display error messages. Thats not to say that sessions arent useful for frontend rendered applications, but they are seldom used for this purpose.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="What_to_Use_Sessions_For"></a><a
name="_bookmark422"></a><span style='color:#8E0011'>What<span style='letter-spacing:
-.3pt'> </span>to<span style='letter-spacing:-.15pt'> </span>Use<span
style='letter-spacing:-.15pt'> </span><a name="_bookmark423"></a>Sessions<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.25pt'>For</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark424"></a><span style='color:#333333'>Sessions are useful
whenever you want to save a user preference that applies across pages. Most
commonly, sessions are used to provide user authentication information: you log
in, and a session is created. After that, you<span style='letter-spacing:1.35pt'>
</span>dont<span style='letter-spacing:1.3pt'> </span>have<span
style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:1.35pt'> </span>log<span
style='letter-spacing:1.35pt'> </span>in<span style='letter-spacing:1.35pt'> </span>again<span
style='letter-spacing:1.35pt'> </span>every<span style='letter-spacing:1.35pt'>
</span>time<span style='letter-spacing:1.3pt'> </span>you<span
style='letter-spacing:1.35pt'> </span>reload<span style='letter-spacing:1.35pt'>
</span>the<span style='letter-spacing:1.3pt'> </span>page.<span
style='letter-spacing:1.35pt'> </span>Sessions can be useful even without user
accounts, though. Its quite common for sites to remember how you like things
sorted or what date format you preferall without your having to log in.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection190>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While I encourage you to prefer sessions over cookies,
its important to understand how cookies work (especially because they enable
sessions to work). It will help you with diagnosing issues and understanding
the security and privacy considerations of your application<a
name="_bookmark425"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark426"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Understanding cookies and sessions gives us a better
understanding of<span style='letter-spacing:4.0pt'> </span>how web applications
maintain the illusion of state when the underlying protocol (HTTP) is
stateless. We learned techniques for handling cookies and sessions to control
the users experience.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve also been writing middleware as we went along
without too much explanation of middleware. In the next chapter, were going to
dive into middleware and learn everything there is to know about it!</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection191>

<h1><a name="10._Middleware"></a><a name="_bookmark427"></a>Chapter<span
style='letter-spacing:.55pt'> </span>10.<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Middleware</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="_bookmark428"></a><span style='color:#333333'>By now, weve already had
some exposure to middleware: weve used existing middleware (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>body-parser</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>cookie-parser</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static</span><span
style='color:#333333'>, and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express-session</span><span style='color:#333333'>, to name a
few), and weve even written some of our own (for adding weather data to our
template context, configuring flash messages, and our 404 handler). But what is
middleware, exactly?</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Conceptually, <i>middleware </i>is a way to encapsulate
functionality specifically, functionality that operates on an HTTP request to
your application. Practically, middleware is simply a function that takes three
arguments: a request object, a response object, and a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next()<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>function,
which will be explained shortly. (There is also a form that takes four
arguments, for error handling, which will be covered at the end of this <span
style='letter-spacing:-.1pt'>chapter.)</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark429"></a><span style='color:#333333'>Middleware is executed in
whats known as a <i>pipeline</i>. You can imagine a physical pipe, carrying
water. The water gets pumped in at one end, and then there are gauges and
valves before the water gets where its going.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The important part about this analogy is that <i>order
matters</i>; if you put a pressure gauge before a valve, it has a different
effect than if you put the pressure gauge after the valve. Similarly, if you
have a valve that injects something into the water, everything downstream
from that valve will contain the added ingredient. In an Express app, you
insert middleware into the pipeline by calling </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>app.use</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark430"></a><span style='color:#333333'>Prior to Express 4.0, the
pipeline was complicated by your having to link in the <i>router </i>explicitly.
Depending on where you linked in the router,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection192>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Middleware_Examples"></a><a name="_bookmark434"></a><span
style='color:#333333'>routes could be linked in out of order, making the
pipeline sequence less clear when you mix middleware and route handlers. In
Express 4.0, middleware and route handlers are invoked in the order in which
they were linked in, making the sequence much clearer.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its common practice to have the last middleware in your
pipeline be a catchall handler for any request that doesnt match any other
routes. This middleware usually returns a status code of 404 (Not Found).</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:95.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
126%'><span style='color:#333333'>So how is a request terminated in the
pipeline? Thats what the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next </span><span style='color:#333333'>function passed to each
middleware does: if you <i>dont </i>call </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next()</span><span style='color:#333333'>, the request
terminates with that middleware.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:9.5pt;text-align:justify'><a name="Middleware_Principles"></a><a
name="_bookmark431"></a><span style='color:#8E0011'>Middleware<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Principles</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark432"></a><span style='color:#333333'>Learning how to think
flexibly about middleware and route handlers is key to understanding how
Express works. Here are the things you should keep<span style='letter-spacing:
4.0pt'> </span>in mind:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:106%'><span
style='position:relative;z-index:15853056'><span style='left:0px;position:absolute;
left:169px;top:-130812px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Route handlers (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.post</span><span
style='color:#333333'>, etc.often referred to collectively as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.METHOD</span><span
style='color:#333333'>) can be thought of as middleware that handles only a
specific HTTP verb (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST</span><span
style='color:#333333'>, etc.). Conversely, middleware can be thought of as a
route handler that handles all HTTP verbs (this is essentially equivalent to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.all</span><span
style='color:#333333'>, which handles any HTTP verb; there are some minor
differences with exotic<span style='letter-spacing:1.35pt'> </span>verbs<span
style='letter-spacing:1.35pt'> </span>such<span style='letter-spacing:1.45pt'> </span>as<span
style='letter-spacing:1.35pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>PURGE</span><span style='color:#333333'>,<span style='letter-spacing:
1.45pt'> </span>but<span style='letter-spacing:1.35pt'> </span>for<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.35pt'> </span>common<span
style='letter-spacing:1.45pt'> </span>verbs,<span style='letter-spacing:1.45pt'>
</span>the<span style='letter-spacing:1.35pt'> </span>effect is the same).</span></p>

<p class=MsoBodyText style='margin-top:9.75pt;margin-right:75.15pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;text-align:justify;line-height:
106%'><span style='position:relative;z-index:15853568'><span style='left:0px;
position:absolute;left:169px;top:-131014px;width:7px;height:1px'><img width=7
height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
name="_bookmark433"></a><span style='color:#333333'>Route handlers require a
path as their first parameter. If you want that path to match any route, simply
use </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>\*</span><span
style='color:#333333'>. Middleware can also take a path as its first parameter,
but it is optional (if it is omitted,<span style='letter-spacing:2.0pt'> </span>it
will match any path, as if you had specified </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>*</span><span style='color:#333333'>).</span></p>

</div>

<span style='font-size:11.0pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection193>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:110%'><span
style='position:relative;z-index:15854592'><span style='left:0px;position:absolute;
left:169px;top:-131125px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><a
name="_bookmark435"></a><span style='color:#333333'>Route<span
style='letter-spacing:1.95pt'> </span>handlers<span style='letter-spacing:1.95pt'>
</span>and<span style='letter-spacing:2.0pt'> </span>middleware<span
style='letter-spacing:1.95pt'> </span>take<span style='letter-spacing:1.95pt'> </span>a<span
style='letter-spacing:1.95pt'> </span>callback<span style='letter-spacing:2.0pt'>
</span>function<span style='letter-spacing:2.0pt'> </span>that takes two,
three, or four parameters (technically, you could also have zero or one
parameters, but there is no sensible use for these forms). If there are two or
three parameters, the first two parameters are the request and response
objects, and the third parameter is the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>function. <a name="_bookmark436"></a>If there are four
parameters, it becomes <i>error-handling </i>middleware, and the first
parameter becomes an error object, followed by the request, response, and next
objects.</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:106%'><span
style='position:relative;z-index:15855104'><span style='left:0px;position:absolute;
left:169px;top:-131349px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><a
name="_bookmark437"></a><span style='color:#333333'>If you <i>dont </i>call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next()</span><span
style='color:#333333'>, the pipeline will be terminated, and no more route
handlers or middleware will be processed.<span style='letter-spacing:1.8pt'> </span>If
you<span style='letter-spacing:4.0pt'> </span>dont call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next()</span><span
style='color:#333333'>, you should send a response to the client (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.send</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.json</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.render</span><span
style='color:#333333'>, etc.); if you dont, the client will hang and
eventually time out.</span></p>

<p class=MsoBodyText style='margin-top:9.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:110%'><span
style='position:relative;z-index:15855616'><span style='left:0px;position:absolute;
left:169px;top:-131483px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>If you <i>do </i>call </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>next()</span><span style='color:#333333'>,
its generally inadvisable to send a response to the client. If you do,
middleware or route handlers further down the pipeline will be executed, but
any client responses they send will be ignored.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:10.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Middleware<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Examples</span></span></h2>

<p class=MsoNormal style='margin-top:13.65pt;margin-right:86.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>If you want to see this
in action, lets try some really simple middleware (<i>ch10/00-simple-middleware.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.use((req, res, next) =&gt; {&#13;&#10;console.log(`processing request for ${req.url}	`)&#13;&#10;next()&#13;&#10;})&#13;&#10;&#13;&#10;app.use((req, res, next) =&gt; { console.log('terminating request') res.send('thanks for playing!')&#13;&#10;// note that we do NOT call next() here...this terminates the request&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection194>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: app.use((req, res, next) =&gt; { console.log(`whoops, i'll never get called!`)&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Here we have three examples of middleware. The first one
simply logs a message to the console before passing on the request to the next
middleware in the pipeline by calling </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next()</span><span style='color:#333333'>. Then the next
middleware actually handles the request. Note that if we omitted the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.send<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>here,
no response would ever be returned to the client. Eventually, the client would
time out. The last middleware will never execute, because all requests are
terminated in the prior middleware.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:105.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now lets consider a
more complicated, complete example (<i>ch10/01- routing-example.js </i>in the
companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const express = require('express')&#13;&#10;const app = express()&#13;&#10;&#13;&#10;app.use((req, res, next) =&gt; { console.log('\n\nALLWAYS') next()&#13;&#10;})&#13;&#10;&#13;&#10;app.get('/a', (req, res) =&gt; { console.log('/a: route terminated') res.send('a')&#13;&#10;})&#13;&#10;app.get('/a', (req, res) =&gt; { console.log('/a: never called');&#13;&#10;})&#13;&#10;app.get('/b', (req, res, next) =&gt; { console.log('/b: route not terminated') next()&#13;&#10;})&#13;&#10;app.use((req, res, next) =&gt; { console.log('SOMETIMES') next()&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection195>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: })&#13;&#10;app.get('/b', (req, res, next) =&gt; { console.log('/b (part 2): error thrown' ) throw new Error('b failed')&#13;&#10;})&#13;&#10;app.use('/b', (err, req, res, next) =&gt; { console.log('/b error detected and passed on') next(err)&#13;&#10;})&#13;&#10;app.get('/c', (err, req) =&gt; { console.log('/c: error thrown') throw new Error('c failed')&#13;&#10;})&#13;&#10;app.use('/c', (err, req, res, next) =&gt; { console.log('/c: error detected but not passed on') next()&#13;&#10;})&#13;&#10;&#13;&#10;app.use((err, req, res, next) =&gt; {&#13;&#10;console.log('unhandled error detected: ' + err.message) res.send('500 - server error')&#13;&#10;})&#13;&#10;&#13;&#10;app.use((req, res) =&gt; { console.log('route not handled') res.send('404 - not found')&#13;&#10;})&#13;&#10;&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;app.listen(port, () =&gt; console.log( `Express started on http://localhost:${port}` +&#13;&#10;'; press Ctrl-C to terminate.'))&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Before trying this example, imagine what the result will
be. What are the different routes? What will the client see? What will be
printed on the console? If you can correctly answer all of those questions,
youve got the hang of routes in Express! Pay particular attention to the
difference<span style='letter-spacing:4.0pt'> </span>between a request to <i>/b
</i>and a request to <i>/c</i>; in both instances, there was an error, but one
results in a 404, and the other results in a 500.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection196>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Note that middleware <i>must </i>be a function. Keep in
mind that in JavaScript, its quite easy (and common) to return a function from
a function. For example, youll note that </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express.static<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>is a function, but we actually invoke it, so it must
return another function. Consider the following:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=559 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image063.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Note also that a module can export a function, which can
in turn be used directly as middleware. For example, heres a module called <i>lib/tourRequiresWaiver.js
</i>(Meadowlark Travels rock-climbing packages require a liability waiver):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = (req,res,next) =&gt; { const { cart } = req.session if(!cart) return next()&#13;&#10;if(cart.items.some(item =&gt; item.product.requiresWaiver)) { cart.warnings.push('One or more of your selected ' +&#13;&#10;'tours requires a waiver.')&#13;&#10;}&#13;&#10;next()&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>We could link this
middleware in like so (<i>ch10/02-item-waiver.example.js </i>in the companion
repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const requiresWaiver = require('./lib/tourRequiresWaiver') app.use(requiresWaiver)"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>More commonly, though, you would export an object that
contains properties that are middleware. For example, lets put all of our
shopping cart validation code in <i>lib/cartValidation.js</i>:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection197>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Common_Middleware"></a><a
name="_bookmark438"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: module.exports = {&#13;&#10;&#13;&#10;resetValidation(req, res, next) {&#13;&#10;const { cart } = req.session&#13;&#10;if(cart) cart.warnings = cart.errors = [] next()&#13;&#10;},&#13;&#10;&#13;&#10;checkWaivers(req, res, next) { const { cart } = req.session if(!cart) return next()&#13;&#10;if(cart.items.some(item =&gt; item.product.requiresWaiver)) { cart.warnings.push('One or more of your selected ' +&#13;&#10;'tours requires a waiver.')&#13;&#10;}&#13;&#10;next()&#13;&#10;},&#13;&#10;&#13;&#10;checkGuestCounts(req, res, next) { const { cart } = req.session if(!cart) return next()&#13;&#10;if(cart.items.some(item =&gt; item.guests &gt; item.product.maxGuests )) { cart.errors.push('One or more of your selected tours ' +&#13;&#10;'cannot accommodate the number of guests you ' +&#13;&#10;'have selected.')&#13;&#10;}&#13;&#10;next()&#13;&#10;},&#13;&#10;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Then you could link the
middleware in like this (<i>ch10/03-more-cart- validation.js </i>in the
companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const cartValidation = require('./lib/cartValidation')&#13;&#10;&#13;&#10;app.use(cartValidation.resetValidation) app.use(cartValidation.checkWaivers) app.use(cartValidation.checkGuestCounts)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection198>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image064.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Common<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Middleware</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark439"></a><span style='color:#333333'>While there are thousands
of middleware projects on npm, there are a handful that are common and
fundamental, and at least some of these will be found in every non-trivial
Express project. Some of this middleware<span style='letter-spacing:4.0pt'> </span>was
so common that it was actually bundled with Express, but it has long since been
moved into individual packages. The only middleware still bundled with Express
itself is </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>This<span
style='letter-spacing:.45pt'> </span>list<span style='letter-spacing:.5pt'> </span>attempts<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.5pt'> </span>cover<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span>most<span
style='letter-spacing:.5pt'> </span>common<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>middleware:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>basicauth-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>dd</span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>l</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>w</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>e</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark440"></a><span style='color:#333333'>Provides<span
style='letter-spacing:1.8pt'> </span>basic<span style='letter-spacing:1.8pt'> </span>access<span
style='letter-spacing:1.8pt'> </span>authorization.<span style='letter-spacing:
1.85pt'> </span>Keep<span style='letter-spacing:1.85pt'> </span>in<span
style='letter-spacing:1.85pt'> </span>mind<span style='letter-spacing:1.85pt'> </span>that<span
style='letter-spacing:1.8pt'> </span>basic<span style='letter-spacing:1.8pt'> </span>auth
offers only the most basic security, and you should use basic auth <i>only </i>over
HTTPS (otherwise, usernames and passwords are transmitted in<span
style='letter-spacing:2.0pt'> </span>the clear). You should use basic auth only
when you need something quick and easy <i>and </i>youre using HTTPS.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>body-<span
style='letter-spacing:-.1pt'>parser</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark441"></a><span style='color:#333333'>Provides parsing for HTTP
request bodies. Provides middleware for parsing both URL-encoded and
JSON-encoded bodies, as well as <span style='letter-spacing:-.1pt'>others.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>busboy</span></i><i><span
style='font-size:14.0pt;color:#333333'>,<span style='letter-spacing:3.9pt'> </span></span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>u</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>l</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>p</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>y</span></i><i><span
style='font-size:14.0pt;color:#333333'>,</span></i><i><span style='font-size:
14.0pt;color:#333333;letter-spacing:3.9pt'> </span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>f</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>r</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>d</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>b</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.05pt'>l</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.05pt'>e</span></i><i><span
style='font-size:14.0pt;color:#333333'>,</span></i><i><span style='font-size:
14.0pt;color:#333333;letter-spacing:3.9pt'> </span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>u</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>l</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>r</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark442"></a><span
style='color:#333333'>All<span style='letter-spacing:.6pt'> </span>of<span
style='letter-spacing:.6pt'> </span>these<span style='letter-spacing:.6pt'> </span>middleware<span
style='letter-spacing:.65pt'> </span>options<span style='letter-spacing:.6pt'> </span>parse<span
style='letter-spacing:.6pt'> </span>request<span style='letter-spacing:.6pt'> </span>bodies<span
style='letter-spacing:.65pt'> </span>encoded<span style='letter-spacing:.65pt'>
</span><span style='letter-spacing:-.2pt'>with</span></span></p>

<p class=MsoBodyText style='margin-top:1.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>multipart/form-<span style='letter-spacing:-.1pt'>data</span></span><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection199>

<p class=MsoNormal style='margin-top:2.7pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>c</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>p</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>ss</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>i</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>n</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark443"></a><span style='color:#333333'>Compresses response data
with gzip or deflate. This is a good thing, and your users will thank you,
especially those on slow or mobile connections. It should be linked in early,
before any middleware that might send a response. The only thing that I
recommend linking in before </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>compress<span style='letter-spacing:-2.35pt'> </span></span><span
style='color:#333333'>is debugging or logging middleware (which do not send
responses). Note that in most production environments, compression is handled
by a proxy like NGINX, making this middleware unnecessary.</span></p>

<p class=MsoNormal style='margin-top:10.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>cookie-parser</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Provides<span
style='letter-spacing:.65pt'> </span>cookie<span style='letter-spacing:.7pt'> </span>support.<span
style='letter-spacing:.75pt'> </span>See<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark393"><span style='color:#070707'>Chapter<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.25pt'>9</span></span></a><span
style='color:#333333;letter-spacing:-.25pt'>.</span></p>

<p class=MsoNormal style='margin-top:12.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>cookie-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>session</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="_bookmark444"></a><span style='color:#333333'>Provides cookie-storage
session support. I do not generally recommend this approach to sessions. It
must be linked in after </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>cookie-parser</span><span style='color:#333333'>. See </span><a
href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>express-session</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark445"></a><span style='color:#333333'>Provides session ID (stored
in a cookie) session support. Defaults to a memory store, which is not suitable
for production and can be configured to use a database store. See </span><a
href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and </span><a
href="#_bookmark542"><span style='color:#070707'>Chapter 13</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>csurf</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark446"></a><span style='color:#333333'>Provides protection against
cross-site request forgery (CSRF) attacks. This uses sessions, so it must be
linked in after </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express-session </span><span style='color:#333333'>middleware.
Unfortunately, simply linking in this middleware does not magically protect
against CSRF attacks; see </span><a href="#_bookmark760"><span
style='color:#070707'>Chapter 18</span></a><span style='color:#070707'> </span><span
style='color:#333333'>for more <span style='letter-spacing:-.1pt'>information.</span></span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>serve-<span
style='letter-spacing:-.2pt'>index</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark447"></a><span style='color:#333333'>Provides directory listing
support for static files. There is no need to include this middleware unless
you specifically need directory listing.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>errorhandler</span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection200>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark448"></a><span style='color:#333333'>Provides stack traces and
error messages to the client. I do not recommend linking this in on a
production server, as it exposes implementation details, which can have
security or privacy consequences. See </span><a href="#_bookmark859"><span
style='color:#070707'>Chapter 20</span></a><span style='color:#070707'> </span><span
style='color:#333333'>for more information.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>serve-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>favicon</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark449"></a><span style='color:#333333'>Serves the <i>favicon </i>(the
icon that appears in the title bar of your<span style='letter-spacing:2.0pt'> </span>browser).
This is not strictly necessary; you can simply put a<span style='letter-spacing:
4.0pt'> </span><i>favicon.ico </i>in the root of your static directory, but
this middleware can improve performance. If you use it, it should be linked in
high in the middleware stack. It also allows you to designate a filename other
than <i><span style='letter-spacing:-.1pt'>favicon.ico</span></i><span
style='letter-spacing:-.1pt'>.</span></span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>o</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>r</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>g</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>a</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>n</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark450"></a><span style='color:#333333'>Provides automated logging
support; all requests will be logged. See </span><a href="#_bookmark859"><span
style='color:#070707'>Chapter 20</span></a><span style='color:#070707'> </span><span
style='color:#333333'>for more information.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>m</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>t</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>h</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>d</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.1pt'>override</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark451"></a><span style='color:#333333'>Provides support for the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>x-http-method-override<span
style='letter-spacing:-.75pt'> </span></span><span style='color:#333333'>request
header, which allows browsers to fake using HTTP methods other than </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET </span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST</span><span style='color:#333333'>. This can be useful for
debugging. This is needed only if youre writing APIs.</span></p>

<p class=MsoNormal style='margin-top:12.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>response-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.25pt'>t</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.25pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.25pt'>m</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.2pt'>e</span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark452"></a><span style='color:#333333'>Adds the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>X-Response-Time<span
style='letter-spacing:-1.45pt'> </span></span><span style='color:#333333'>header
to the response, providing the response time in milliseconds. You usually dont
need this middleware unless you are doing performance tuning.</span></p>

<p class=MsoNormal style='margin-top:11.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>static</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark453"></a><span style='color:#333333'>Provides support for
serving static (public) files. You can link in this middleware multiple times, specifying
different directories. See </span><a href="#_bookmark721"><span
style='color:#070707'>Chapter 17</span></a><span style='color:#070707'> </span><span
style='color:#333333'>for more details.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>vhost</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark454"></a><span style='color:#333333'>Virtual hosts (vhosts), a
term borrowed from Apache, makes subdomains easier to manage in Express. See </span><a
href="#_bookmark603"><span style='color:#070707'>Chapter 14</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for more</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection201>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>information<a name="_bookmark455"></a>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:11.65pt'><a name="Third-Party_Middleware"></a><a
name="_bookmark456"></a><span style='color:#8E0011'>Third-Party<span
style='letter-spacing:-.5pt'> </span><span style='letter-spacing:-.1pt'>Middleware</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark457"></a><span style='color:#333333'>Currently, there is no
comprehensive store or index for third-party middleware.<span
style='letter-spacing:2.0pt'> </span>Almost all Express middleware,<span
style='letter-spacing:2.0pt'> </span>however,<span style='letter-spacing:2.0pt'>
</span>will be available on npm, so if you search npm for Express and
middleware, youll get<span style='letter-spacing:4.0pt'> </span>a pretty
good list. The official Express documentation also contains a<span
style='letter-spacing:2.0pt'> </span>useful </span><a
href="http://bit.ly/36UrbnL"><span style='color:#070707'>list of middleware</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark458"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, we delved into what middleware is, how
to write our own, and how its processed as part of an Express application. If
youre starting<span style='letter-spacing:2.0pt'> </span>to think that an
Express application is simply a collection of middleware, youre starting to
understand Express! Even the route handlers weve been using heretofore are
just specialized cases of middleware.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the next chapter, well be looking at another common
infrastructure need: sending email (and you had better believe there is going
to be some middleware involved!)<a name="_bookmark459"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection202>

<h1><a name="11._Sending_Email"></a><a name="SMTP,_MSAs,_and_MTAs"></a><a
name="_bookmark460"></a>Chapter<span style='letter-spacing:.65pt'> </span>11.<span
style='letter-spacing:.7pt'> </span>Sending<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Email</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark461"></a><span style='color:#333333'>One of the primary ways
your application can communicate with the world is email. From user
registration to password reset instructions to promotional emails, the ability
to send email is an important feature. In this chapter, youll learn how to
format and send email with Node and Express to help communicate with your
users.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Neither Node nor Express has any built-in way of sending
email, so we have to use a third-party module. The package I recommend is
Andris Reinmans excellent </span><a href="http://bit.ly/2Ked7vy"><i><span
style='color:#070707'>Nodemailer</span></i></a><span style='color:#333333'>.
Before we dive into configuring Nodemailer, lets get some email basics out of
the way.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>SMTP,<span
style='letter-spacing:-.2pt'> </span>MSAs,<span style='letter-spacing:-.15pt'> </span>and<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.2pt'>MTAs</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark462"></a><span style='color:#333333'>The lingua franca for
sending email is the Simple Mail Transfer Protocol (SMTP). While it is possible
to use SMTP to send an email directly to the recipients mail server,<span
style='letter-spacing:1.4pt'> </span>this is generally<span style='letter-spacing:
1.4pt'> </span>a bad<span style='letter-spacing:1.4pt'> </span>idea: unless you<span
style='letter-spacing:1.4pt'> </span>are a trusted sender like Google or
Yahoo!, chances are your email will be tossed directly into the spam bin. <a
name="_bookmark463"></a>Its better to use a mail submission agent (MSA),<span
style='letter-spacing:1.95pt'> </span>which<span style='letter-spacing:1.95pt'>
</span>will<span style='letter-spacing:1.85pt'> </span>deliver<span
style='letter-spacing:1.85pt'> </span>the<span style='letter-spacing:1.85pt'> </span>email<span
style='letter-spacing:1.85pt'> </span>through<span style='letter-spacing:1.95pt'>
</span>trusted<span style='letter-spacing:1.95pt'> </span>channels,<span
style='letter-spacing:1.95pt'> </span>reducing the chance that your email will
be marked as spam. In addition to ensuring that<span style='letter-spacing:
1.9pt'> </span>your<span style='letter-spacing:1.9pt'> </span>email<span
style='letter-spacing:1.9pt'> </span>arrives,<span style='letter-spacing:1.95pt'>
</span>MSAs<span style='letter-spacing:1.9pt'> </span>handle<span
style='letter-spacing:1.9pt'> </span>nuisances<span style='letter-spacing:1.9pt'>
</span>like<span style='letter-spacing:1.9pt'> </span>temporary<span
style='letter-spacing:1.95pt'> </span>outages and bounced emails. <a
name="_bookmark464"></a>The final piece of the equation is the mail transfer<span
style='letter-spacing:2.0pt'> </span>agent (MTA), which is the service that
actually sends the email to its final destination.<span style='letter-spacing:
1.65pt'> </span>For the purposes of this book,<span style='letter-spacing:1.65pt'>
</span><i>MSA</i>,<span style='letter-spacing:1.65pt'> </span><i>MTA</i>,<span
style='letter-spacing:1.65pt'> </span>and<span style='letter-spacing:1.65pt'> </span><i>SMTP
server </i>are essentially equivalent.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection203>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So youll need access to an MSA. While it is possible to
get started using a free consumer email service such as Gmail, Outlook, or
Yahoo!, these services<span style='letter-spacing:1.4pt'> </span>are<span
style='letter-spacing:1.4pt'> </span>no<span style='letter-spacing:1.45pt'> </span>longer<span
style='letter-spacing:1.4pt'> </span>as<span style='letter-spacing:1.4pt'> </span>friendly<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.45pt'> </span>automated<span
style='letter-spacing:1.45pt'> </span>emails<span style='letter-spacing:1.4pt'>
</span>as<span style='letter-spacing:1.4pt'> </span>they<span style='letter-spacing:
1.45pt'> </span>once<span style='letter-spacing:1.4pt'> </span>were (in an
effort to cut down on abuse). Fortunately, there are a couple of excellent
email services to choose from that have a free option for low- volume<span
style='letter-spacing:1.55pt'> </span>use:<span style='letter-spacing:1.55pt'> </span></span><a
href="https://sendgrid.com/"><span style='color:#070707'>Sendgrid</span></a><span
style='color:#070707;letter-spacing:1.6pt'> </span><span style='color:#333333'>and<span
style='letter-spacing:1.6pt'> </span></span><a href="https://www.mailgun.com/"><span
style='color:#070707'>Mailgun</span></a><span style='color:#333333'>.<span
style='letter-spacing:1.6pt'> </span>Ive<span style='letter-spacing:1.55pt'> </span>used<span
style='letter-spacing:1.6pt'> </span>both<span style='letter-spacing:1.6pt'> </span>services,<span
style='letter-spacing:1.6pt'> </span>and<span style='letter-spacing:1.6pt'> </span>I<span
style='letter-spacing:1.55pt'> </span>like them both. The examples in this book
will be using SendGrid.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre working for an organization, the organization
itself may have an MSA; you can contact your IT department and ask them if
theres an<span style='letter-spacing:2.0pt'> </span>SMTP relay available for
sending automated emails.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre using SendGrid or Mailgun, go ahead and set up
your account now. For SendGrid, youll need to create an API key (which will be
your SMTP password).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Receiving_Email"></a><a name="_bookmark465"></a><span
style='color:#8E0011'>Receiving<span style='letter-spacing:-.4pt'> </span><span
style='letter-spacing:-.1pt'>Email</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark466"></a><span style='color:#333333'>Most websites only need the
ability to <i>send </i>email, like password reset instructions and promotional
emails. However, some applications need to receive email as well. A good
example is an issue-tracking system that sends out an email when someone
updates an issue, and if you reply to<span style='letter-spacing:4.0pt'> </span>that
email, the issue is automatically updated with your response.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Unfortunately, receiving email is much more involved and
will not be covered in this book. If this is functionality you need, you should
allow your mail provider to maintain the mailbox and have a periodic process to
access it with an IMAP agent such as </span><a href="http://bit.ly/2qQK0r5"><span
style='color:#070707'>imap-simple</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Email<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Headers</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection204>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="HTML_Email"></a><a name="_bookmark470"></a><a name="Email_Headers"></a><a
name="_bookmark467"></a><a name="_bookmark468"></a><span style='color:#333333'>An
email message consists of two parts: the header and the body (very<span
style='letter-spacing:4.0pt'> </span>much like an HTTP request). The <i>header </i>contains
information about the email: who its from, who its addressed to, the date it
was received, the subject, and more. Those are the headers that are normally
displayed to the user in an email application, but there are many more headers.
Most email clients allow you to look at the headers; if youve never done so, I
recommend<span style='letter-spacing:1.6pt'> </span>you<span style='letter-spacing:
1.6pt'> </span>take<span style='letter-spacing:1.55pt'> </span>a<span
style='letter-spacing:1.55pt'> </span>look.<span style='letter-spacing:1.6pt'> </span>The<span
style='letter-spacing:1.55pt'> </span>headers<span style='letter-spacing:1.55pt'>
</span>give<span style='letter-spacing:1.55pt'> </span>you<span
style='letter-spacing:1.6pt'> </span>all<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>information about how the email got to
you; every server and MTA that the email<span style='letter-spacing:4.0pt'> </span>passed
through will be listed in the header.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It often comes as a surprise to people that some headers,
like the from address, can be set arbitrarily by the sender. <a
name="_bookmark469"></a>When you specify a from address other than the
account from which youre sending, its often referred to as <i>spoofing</i>.
There is nothing preventing you from sending an email with the from address
Bill Gates &lt;</span><a href="mailto:billg@microsoft.com"><i><span
style='color:#333333;text-decoration:none'>billg@microsoft.com</span></i></a><span
style='color:#333333'>&gt;. Im not recommending that you try this, just
driving home the point that you can<span style='letter-spacing:4.0pt'> </span>set
certain headers to be whatever you want. Sometimes there are<span
style='letter-spacing:4.0pt'> </span>legitimate reasons to do this, but you
should never abuse it.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>An email you send <i>must </i>have a from address,
however. This can sometimes cause problems when sending automated email, which
is why you often see email with a return addresses like DO NOT REPLY &lt;<i>do-
</i></span><a href="mailto:not-reply@meadowlarktravel.com"><i><span
style='color:#333333;text-decoration:none'>not-reply@meadowlarktravel.com</span></i></a><span
style='color:#333333'>&gt;. Whether you want to take this approach or have
automated emails come from an address like Meadowlark Travel &lt;</span><a
href="mailto:info@meadowlarktravel.com"><i><span style='color:#333333;
text-decoration:none'>info@meadowlarktravel.com</span></i></a><span
style='color:#333333'>&gt; is up to you; if you take the latter approach,
though, you should be prepared to respond to emails that come to </span><a
href="mailto:info@meadowlarktravel.com"><i><span style='color:#333333;
text-decoration:none'>info@meadowlarktravel.com</span></i><span
style='color:#333333;text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Email<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Formats</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection205>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name=Nodemailer></a><a name="_bookmark474"></a><a name="Email_Formats"></a><a
name="_bookmark471"></a><a name="_bookmark472"></a><span style='color:#333333'>When
the internet was new, all email was simply ASC</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>II
text. The world</span></a><span style='color:#333333'> has changed a lot since
then, and people want to send </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>email in different</span></a><span
style='color:#333333'> languages and do more sophisticated things like inclu</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>de
formatted text,</span></a><span style='color:#333333'> images, and attachments.
This is where things start to </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>get ugly: email</span></a><span
style='color:#333333'> formats and<span style='letter-spacing:1.0pt'> </span>encoding<span
style='letter-spacing:1.0pt'> </span>are a horrible jumble of techniq</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>ues
and<span style='letter-spacing:1.0pt'> </span>standards.</span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Fortunately, we wont really have to address these co</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>mplexities.</span></a><span
style='color:#333333'> Nodemailer will handle that for us. Whats important </span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>for
you to know is</span></a><span style='color:#333333'> that your email can be
either plain text (Unicode) or H</span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>TML.</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Almost all modern email applications support HTML </span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>email,
so its</span></a><span style='color:#333333'> generally pretty safe to format
your emails in HTML. </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>Still, there are text</span></a><span
style='color:#333333'> purists out there who eschew HTML email, so I reco</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>mmend
always</span></a><span style='color:#333333'> including both text and HTML
email. If you dont wa</span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>nt to have to write</span></a><span
style='color:#333333'> text and HTML email, Nodemailer supports a shortcu</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>t
that will</span></a><span style='color:#333333'> automatically generate the
plain text version from the </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>HTML.</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>HTML<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Email</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark473"></a><span style='color:#333333'>HTML<span style='letter-spacing:
1.4pt'> </span>email<span style='letter-spacing:1.4pt'> </span>is<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>topic<span
style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:1.4pt'> </span>could<span
style='letter-spacing:1.45pt'> </span>fill<span style='letter-spacing:1.4pt'> </span>an<span
style='letter-spacing:1.45pt'> </span>entire<span style='letter-spacing:1.4pt'>
</span>book.<span style='letter-spacing:1.45pt'> </span>U</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>nfortunately,<span
style='letter-spacing:1.45pt'> </span>its</span></a><span style='color:#333333'>
not as simple as just writing HTML as you would for </span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>your
site: most mail</span></a><span style='color:#333333'> clients support only a
small subset of HTML. Mostly, </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>you have to write</span></a><span
style='color:#333333'> HTML as if it were still 1996; its not much fun. In pa</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>rticular,
you have to</span></a><span style='color:#333333'> go back to using tables for
layout (cue sad music).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you have experience with browser compatibility iss</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>ues
with HTML, you</span></a><span style='color:#333333'> know what a headache it
can be. Email compatibility </span><a href="http://bit.ly/33CsaXs"><span
style='color:#333333;text-decoration:none'>issues are much</span></a><span
style='color:#333333;letter-spacing:4.0pt'> </span><span style='color:#333333'>worse.
Fortunately, there are some things that can hel</span><a
href="http://bit.ly/33CsaXs"><span style='color:#333333;text-decoration:none'>p.</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>First,<span
style='letter-spacing:.6pt'> </span>I<span style='letter-spacing:.55pt'> </span>encourage<span
style='letter-spacing:.55pt'> </span>you<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.6pt'> </span>read<span style='letter-spacing:.65pt'> </span>MailChimps<span
style='letter-spacing:.55pt'> </span>excellent<span style='letter-spacing:.55pt'>
</span></span><a href="http://bit.ly/33CsaXs"><span style='color:#070707'>article<span
style='letter-spacing:.55pt'> </span>about<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>writing</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection206>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><u><span
style='color:#070707'>HTML email</span></u><span style='color:#333333'>. It
does a good job covering the basics and explaining the things you need to keep
in mind when writing HTML email.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark475"></a><span style='color:#333333'>The next is a real time-saver:
</span><a href="http://bit.ly/2qJ1XIe"><span style='color:#070707'>HTML Email
Boilerplate</span></a><span style='color:#333333'>. Its essentially a very
well-written, rigorously tested template for HTML email.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Finally, theres testing. Youve read up on how to write
HTML email, and youre using HTML Email Boilerplate, but testing is the only
way to know for sure your email is not going to explode on Lotus Notes 7 (yes,
people still use it). Feel like installing 30 different mail clients to test
one email? I didnt think so. Fortunately, theres a great service that does it
for you: </span><a href="http://bit.ly/2NI6JPo"><span style='color:#070707'>Litmus</span></a><span
style='color:#333333'>. Its not an inexpensive service; plans start at about
$100 a month. But if you send a lot of promotional emails, its hard to beat.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>On the other hand, if your formatting is modest, theres
no need for an expensive testing service like Litmus. If youre sticking to
things like headers, bold/italic text, horizontal rules, and some image links,
youre pretty safe.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>Nodemailer</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark476"></a><span
style='color:#333333'>First,<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.45pt'> </span>need<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span>install<span style='letter-spacing:.45pt'>
</span>the<span style='letter-spacing:.45pt'> </span>Nodemailer<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>package:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.65pt'> </span>install<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>nodemailer</span> </span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Then, require the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>nodemailer<span style='letter-spacing:-2.5pt'> </span></span><span
style='color:#333333'>package and create a Nodemailer instance (a <i>transport </i>in
Nodemailer parlance):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const nodemailer = require('nodemailer')&#13;&#10;const mailTransport = nodemailer.createTransport({ auth: {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection207>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: user: credentials.sendgrid.user, pass: credentials.sendgrid.password,&#13;&#10;}&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Notice were using the
credentials module we set up in </span><a href="#_bookmark393"><span
style='font-size:14.0pt;line-height:133%;color:#070707'>Chapter 9</span></a><span
style='font-size:14.0pt;line-height:133%;color:#333333'>. Youll need to update
your <i>.credentials.development.json </i>file accordingly:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: {&#13;&#10;&quot;cookieSecret&quot;: &quot;your cookie secret goes here&quot;, &quot;sendgrid&quot;: {&#13;&#10;&quot;user&quot;: &quot;your sendgrid username&quot;, &quot;password&quot;: &quot;your sendgrid password&quot;&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark477"></a><span style='color:#333333'>Common<span
style='letter-spacing:2.0pt'> </span>configuration<span style='letter-spacing:
2.0pt'> </span>options<span style='letter-spacing:2.0pt'> </span>for<span
style='letter-spacing:2.0pt'> </span>SMTP<span style='letter-spacing:2.0pt'> </span>are<span
style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:2.0pt'> </span>port,<span
style='letter-spacing:2.0pt'> </span>authentication type, and TLS options.
However, most of the major mail services use the default options. To find out
what settings to use, consult your mail service documentation (try searching
for <i>sending SMTP email </i>or <i>SMTP configuration </i>or <i>SMTP relay</i>).
If youre having trouble sending SMTP </span><a
href="https://nodemailer.com/smtp"><span style='color:#333333;text-decoration:
none'>email, you may need to check the options; see the </span><span
style='color:#070707'>Nodemailer</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>documentation</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#333333;
text-decoration:none'>for a complete list of supported options.</span></a></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image029.gif"
  alt="Text Box: NOTE&#13;&#10;If youre following along with the companion repo, youll find that there arent any settings in the credentials file. In the past, I have had many readers contact me asking why the file is missing or empty. I intentionally dont provide valid credentials for the same reason you should be careful with your credentials! I trust you very much, dear reader, but not so much that Im going to give you my email password!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Sending<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.2pt'>Mail</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection208>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:94.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Sending_Mail"></a><a name="_bookmark478"></a><a name="_bookmark479"></a><span
style='color:#333333'>Now that we have our mail transport instance, we can send
mail. Well start with a simple example that sends text mail to only one
recipient (<i>ch11/00-smtp.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: try {&#13;&#10;const result = await mailTransport.sendMail({&#13;&#10;from: '&quot;Meadowlark Travel&quot; &lt;info@meadowlarktravel.com&gt;', to: 'joecustomer@gmail.com',&#13;&#10;subject: 'Your Meadowlark Travel Tour',&#13;&#10;text: 'Thank you for booking your trip with Meadowlark Travel. ' + 'We look forward to your visit!',&#13;&#10;})&#13;&#10;console.log('mail sent successfully: ', result)&#13;&#10;} catch(err) {&#13;&#10;console.log('could not send mail: ' + err.message)&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;In the code samples in this section, Im using fake email addresses like joecustomer@gmail.com. For verification purposes, youll probably want to change those email addresses to an email you control so you can see whats happening. Otherwise, poor joecustomer@gmail.com is going to be getting a lot of nonsense email!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Youll notice that were handling errors here, but its important
to understand that no errors doesnt necessarily mean your email was delivered
successfully to the <i>recipient</i>. The callbacks </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>error<span
style='letter-spacing:-1.45pt'> </span></span><span style='color:#333333'>parameter
will be set only if there was a problem communicating with the MSA<span
style='letter-spacing:4.0pt'> </span>(such as a network or authentication
error). If the MSA was unable to deliver the email (for example, because of an
invalid email address or an unknown user), you will have to check your account
activity in your mail service, which you can do either from the admin interface
or through an <span style='letter-spacing:-.2pt'>API.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection209>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:72.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>If you need your system to automatically
determine whether the email was delivered successfully, youll have to use your
mail services API. Consult the API documentation for your mail service for
more information.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='text-align:justify'><a name="Sending_Mail_to_Multiple_Recipients"></a><a
name="_bookmark480"></a><span style='color:#3F3F3F'>Sending<span
style='letter-spacing:-.25pt'> </span>Mail<span style='letter-spacing:-.25pt'> </span>to<span
style='letter-spacing:-.2pt'> </span>Multiple<span style='letter-spacing:-.25pt'>
</span><span style='letter-spacing:-.1pt'>Recipients</span></span></h3>

<p class=MsoNormal style='margin-top:13.65pt;margin-right:85.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark481"></a><span style='font-size:14.0pt;line-height:133%;
color:#333333'>Nodemail supports sending mail to multiple recipients by using
commas (<i>ch11/01-multiple-recipients.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: try {&#13;&#10;const result = await mailTransport.sendMail({&#13;&#10;from: '&quot;Meadowlark Travel&quot; &lt;info@meadowlarktravel.com&gt;', to: 'joe@gmail.com, &quot;Jane Customer&quot; &lt;jane@yahoo.com&gt;, ' +&#13;&#10;'fred@hotmail.com',&#13;&#10;subject: 'Your Meadowlark Travel Tour',&#13;&#10;text: 'Thank you for booking your trip with Meadowlark Travel. ' + 'We look forward to your visit!',&#13;&#10;})&#13;&#10;console.log('mail sent successfully: ', result)&#13;&#10;} catch(err) {&#13;&#10;console.log('could not send mail: ' + err.message)&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Note that, in this example, we mixed plain email
addresses (<i>joe@gmail.com</i>) with email addresses specifying the
recipients name (Jane Customer &lt;</span><a href="mailto:jane@yahoo.com"><i><span
style='color:#333333;text-decoration:none'>jane@yahoo.com</span></i></a><span
style='color:#333333'>&gt;). This is allowed syntax.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When sending email to multiple recipients, you must be
careful to observe the limits of your MSA. <a name="_bookmark483"></a>SendGrid,
for example, recommends limiting the number of recipients (SendGrid recommends
no more than a thousand in one email). If youre sending bulk email, you
probably want to deliver multiple messages, each with multiple recipients (<i>ch11/02-many-
recipients.js </i>in the companion repo)<a name="_bookmark482"></a>:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: // largeRecipientList is an array of email addresses"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection210>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Sending_HTML_Email"></a><a
name="Images_in_HTML_Email"></a><a name="_bookmark486"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: const recipientLimit = 100&#13;&#10;const batches = largeRecipientList.reduce((batches, r) =&gt; { const lastBatch = batches[batches.length - 1] if(lastBatch.length &lt; recipientLimit)&#13;&#10;lastBatch.push(r)&#13;&#10;else&#13;&#10;batches.push([r])&#13;&#10;return batches&#13;&#10;}, [[]])&#13;&#10;try {&#13;&#10;const results = await Promise.all(batches.map(batch =&gt; mailTransport.sendMail({&#13;&#10;from: '&quot;Meadowlark Travel&quot;, &lt;info@meadowlarktravel.com&gt;', to: batch.join(', '),&#13;&#10;subject: 'Special price on Hood River travel package!', text: 'Book your trip to scenic Hood River now!',&#13;&#10;})&#13;&#10;))&#13;&#10;console.log(results)&#13;&#10;} catch(err) {&#13;&#10;console.log('at least one email batch failed: ' + err.message)&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="Better_Options_for_Bulk_Email"></a><a
name="_bookmark484"></a><span style='color:#8E0011'>Better<span
style='letter-spacing:-.3pt'> </span>Options<span style='letter-spacing:-.2pt'>
</span>for<span style='letter-spacing:-.2pt'> </span>Bulk<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Email</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark485"></a><span style='color:#333333'>While you can certainly
send bulk email with Nodemailer and an appropriate MSA, you should think
carefully before going this route. A responsible email campaign must provide a
way for people to unsubscribe from your promotional emails, and that is not a trivial
task. Multiply that<span style='letter-spacing:4.0pt'> </span>by every
subscription list you maintain (perhaps you have a weekly newsletter<span
style='letter-spacing:1.9pt'> </span>and<span style='letter-spacing:1.95pt'> </span>a<span
style='letter-spacing:1.9pt'> </span>special<span style='letter-spacing:1.9pt'>
</span>announcements<span style='letter-spacing:1.9pt'> </span>campaign,<span
style='letter-spacing:1.95pt'> </span>for<span style='letter-spacing:1.9pt'> </span>example).<span
style='letter-spacing:1.95pt'> </span>This<span style='letter-spacing:1.9pt'> </span>is
an area in which its best not to reinvent the wheel. Services like </span><a
href="https://myemma.com/"><span style='color:#070707'>Emma</span></a><span
style='color:#333333'>, </span><a href="http://mailchimp.com/"><span
style='color:#070707'>Mailchimp</span></a><span style='color:#333333'>, and </span><a
href="http://www.campaignmonitor.com/"><span style='color:#070707'>Campaign
Monitor</span></a><span style='color:#070707'> </span><span style='color:#333333'>offer
everything you need, including great tools for monitoring the success of your
email campaigns. Theyre very affordable, and I highly recommend using them for
promotional emails, newsletters, etc.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection211>

<h2 style='margin-top:3.95pt'><a name="Using_Views_to_Send_HTML_Email"></a><a
name="_bookmark490"></a><span style='color:#8E0011'>Sending<span
style='letter-spacing:-.25pt'> </span>HTML<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Email</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark487"></a><span style='color:#333333'>So<span style='letter-spacing:
1.6pt'> </span>far,<span style='letter-spacing:1.6pt'> </span>weve<span
style='letter-spacing:1.55pt'> </span>just<span style='letter-spacing:1.55pt'> </span>been<span
style='letter-spacing:1.6pt'> </span>sending<span style='letter-spacing:1.6pt'>
</span>plain-text<span style='letter-spacing:1.55pt'> </span>email,<span
style='letter-spacing:1.6pt'> </span>but<span style='letter-spacing:1.55pt'> </span>most<span
style='letter-spacing:1.55pt'> </span>people<span style='letter-spacing:1.55pt'>
</span>these days expect something a little prettier. <a name="_bookmark488"></a>Nodemailer
allows you to send both HTML<span style='letter-spacing:1.4pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>plaintext<span style='letter-spacing:1.4pt'>
</span>versions<span style='letter-spacing:1.4pt'> </span>in<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.4pt'> </span>same<span
style='letter-spacing:1.4pt'> </span>email,<span style='letter-spacing:1.5pt'> </span>allowing<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.4pt'> </span>email<span
style='letter-spacing:1.4pt'> </span>client to choose which version is
displayed (usually HTML) (<i>ch11/03-html- email.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const result = await mailTransport.sendMail({&#13;&#10;from: '&quot;Meadowlark Travel&quot; &lt;info@meadowlarktravel.com&gt;', to: 'joe@gmail.com, &quot;Jane Customer&quot; &lt;jane@yahoo.com&gt;, ' +&#13;&#10;'fred@hotmail.com',&#13;&#10;subject: 'Your Meadowlark Travel Tour',&#13;&#10;html: '&lt;h1&gt;Meadowlark Travel&lt;/h1&gt;\n&lt;p&gt;Thanks for book your trip with ' + 'Meadowlark Travel. &lt;b&gt;We look forward to your visit!&lt;/b&gt;',&#13;&#10;text: 'Thank you for booking your trip with Meadowlark Travel. ' + 'We look forward to your visit!',&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Providing both HTML and text versions is a lot of work,
especially if very few of your users prefer text-only email. If you want to
save some time,<span style='letter-spacing:4.0pt'> </span></span><a
href="http://bit.ly/34RX8Lq"><span style='color:#333333;text-decoration:none'>you
can write your emails in HTML and use a package like </span><span
style='color:#070707'>html-to-</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>formatted-text</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#333333;
text-decoration:none'>to automatically generate text from your HTML. (Jus</span></a><span
style='color:#333333'>t keep<span style='letter-spacing:2.0pt'> </span>in mind
that it wont be as high quality as hand-crafted text; HTML wont always
translate cleanly.)</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Images<span style='letter-spacing:-.2pt'> </span>in<span
style='letter-spacing:-.15pt'> </span>HTML<span style='letter-spacing:-.1pt'>
Email</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark489"></a><span style='color:#333333'>While it is possible to embed
images in HTML email, I strongly<span style='letter-spacing:2.0pt'> </span>discourage
it. They bloat your email messages, and it isnt generally considered good
practice. Instead, you should make images you want to<span style='letter-spacing:
2.0pt'> </span>use in email available on your web server and link appropriately
from the <span style='letter-spacing:-.1pt'>email.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection212>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>It is best to have a dedicated location in
your static assets folder for email images. You should even keep assets that
you use both on your site and in emails separate. It reduces the chance of
negatively affecting the layout of your emails.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets add some email resources in our Meadowlark Travel
project. In your <i>public </i>directory, create a subdirectory called <i>email</i>.
You can place your <i>logo.png<span style='letter-spacing:1.35pt'> </span></i>in<span
style='letter-spacing:1.35pt'> </span>there,<span style='letter-spacing:1.35pt'>
</span>and<span style='letter-spacing:1.35pt'> </span>any<span
style='letter-spacing:1.35pt'> </span>other images you<span style='letter-spacing:
1.35pt'> </span>want to<span style='letter-spacing:1.35pt'> </span>use in<span
style='letter-spacing:1.35pt'> </span>your email.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Then,<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.5pt'> </span>email,<span style='letter-spacing:.5pt'> </span>you<span
style='letter-spacing:.55pt'> </span>can<span style='letter-spacing:.5pt'> </span>use<span
style='letter-spacing:.5pt'> </span>those<span style='letter-spacing:.45pt'> </span>images<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>directly:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;img src=&quot;//meadowlarktravel.com/email/logo.png&quot; alt=&quot;Meadowlark Travel Logo&quot;&gt;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;It should be obvious that you do not want to use localhost when sending out email to other people; they probably wont even have a server running, much less on port 3000! Depending on your mail client, you might be able to use localhost in your email for testing purposes, but it wont work outside of your computer. In Chapter 17, well discuss some techniques to smooth the transition from development to production.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Using<span
style='letter-spacing:-.15pt'> </span>Views<span style='letter-spacing:-.2pt'> </span>to<span
style='letter-spacing:-.1pt'> </span>Send<span style='letter-spacing:-.15pt'> </span>HTML<span
style='letter-spacing:-.1pt'> </span><span style='letter-spacing:-.2pt'>Email</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark491"></a><span style='color:#333333'>So far, weve been putting
our HTML in strings in JavaScript, a practice you should try to avoid. Our HTML
has been simple enough, but take a<span style='letter-spacing:2.0pt'> </span>look
at </span><a href="http://bit.ly/2qJ1XIe"><span style='color:#070707'>HTML
Email Boilerplate</span></a><span style='color:#333333'>: do you want to put
all that boilerplate in<span style='letter-spacing:4.0pt'> </span>a string?
Absolutely not.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Fortunately, we can leverage views to handle this. Lets
consider our Thank you for booking your trip with Meadowlark Travel email
example, which well expand a little bit. Lets imagine that we have a shopping<span
style='letter-spacing:1.05pt'> </span>cart object that contains our order
information.<span style='letter-spacing:1.05pt'> </span>That shopping</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection213>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>cart object will be stored in the session. Lets say the
last step in our ordering process is a form thats processed by <i>/cart/checkout</i>,
which sends<span style='letter-spacing:4.0pt'> </span>a<span style='letter-spacing:
1.5pt'> </span>confirmation<span style='letter-spacing:1.55pt'> </span>email.<span
style='letter-spacing:1.55pt'> </span>Lets<span style='letter-spacing:1.5pt'> </span>start<span
style='letter-spacing:1.5pt'> </span>by<span style='letter-spacing:1.55pt'> </span>creating<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.5pt'> </span>view<span
style='letter-spacing:1.5pt'> </span>for<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>thank-you page, <i>views/cart-thank-you.handlebars</i>:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;p&gt;Thank you for booking your trip with Meadowlark Travel,&#13;&#10;{{cart.billing.name}}!&lt;/p&gt;&#13;&#10;&lt;p&gt;Your reservation number is {{cart.number}}, and an email has been sent to {{cart.billing.email}} for your records.&lt;/p&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Then<span
style='letter-spacing:1.7pt'> </span>well<span style='letter-spacing:1.65pt'> </span>create<span
style='letter-spacing:1.65pt'> </span>an<span style='letter-spacing:1.7pt'> </span>email<span
style='letter-spacing:1.65pt'> </span>template<span style='letter-spacing:1.65pt'>
</span>for<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>email.<span style='letter-spacing:1.7pt'>
</span>Download<span style='letter-spacing:1.7pt'> </span>HTML Email
Boilerplate, and put in <i>views/email/cart-thank-you.handlebars</i>. Edit the
file, and modify the body:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; id=&quot;backgroundTable&quot;&gt;&#13;&#10;&lt;tr&gt;&#13;&#10;&lt;td valign=&quot;top&quot;&gt;&#13;&#10;&lt;table cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; align=&quot;center&quot;&gt;&#13;&#10;&lt;tr&gt;&#13;&#10;&lt;td width=&quot;200&quot; valign=&quot;top&quot;&gt;&lt;img class=&quot;image_fix&quot; src=&quot;//placehold.it/100x100&quot;&#13;&#10;alt=&quot;Meadowlark Travel&quot; title=&quot;Meadowlark Travel&quot; width=&quot;180&quot; height=&quot;220&quot; /&gt;&lt;/td&gt;&#13;&#10;&lt;/tr&gt;&#13;&#10;&lt;tr&gt;&#13;&#10;&lt;td width=&quot;200&quot; valign=&quot;top&quot;&gt;&lt;p&gt;&#13;&#10;Thank you for booking your trip with Meadowlark Travel,&#13;&#10;{{cart.billing.name}}.&lt;/p&gt;&lt;p&gt;Your reservation number is {{cart.number}}.&lt;/p&gt;&lt;/td&gt;&#13;&#10;&lt;/tr&gt;&#13;&#10;&lt;tr&gt;&#13;&#10;&lt;td width=&quot;200&quot; valign=&quot;top&quot;&gt;Problems with your reservation? Contact Meadowlark Travel at&#13;&#10;&lt;span class=&quot;mobile_link&quot;&gt;555-555-0123&lt;/span&gt;.&lt;/td&gt;&#13;&#10;&lt;/tr&gt;&#13;&#10;&lt;/table&gt;&#13;&#10;&lt;/td&gt;&#13;&#10;&lt;/tr&gt;&#13;&#10;&lt;/table&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image065.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection214>

<p class=MsoBodyText style='margin-left:55.0pt'><a
name="Encapsulating_Email_Functionality"></a><a name="_bookmark492"></a><span
style='font-size:10.0pt'><img width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:124.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now we can create a
route for our cart Thank-you page (<i>ch11/04- rendering-html-email.js </i>in
the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.post('/cart/checkout', (req, res, next) =&gt; {&#13;&#10;const cart = req.session.cart&#13;&#10;if(!cart) next(new Error('Cart does not exist.'))&#13;&#10;const name = req.body.name || '', email = req.body.email || ''&#13;&#10;// input validation&#13;&#10;if(!email.match(VALID_EMAIL_REGEX))&#13;&#10;return res.next(new Error('Invalid email address.'))&#13;&#10;// assign a random cart ID; normally we would use a database ID here cart.number = Math.random().toString().replace(/^0\.0*/, '') cart.billing = {&#13;&#10;name: name, email: email,&#13;&#10;}&#13;&#10;res.render('email/cart-thank-you', { layout: null, cart: cart }, (err,html) =&gt; {&#13;&#10;console.log('rendered email: ', html)&#13;&#10;if(err) console.log('error in email template') mailTransport.sendMail({&#13;&#10;from: '&quot;Meadowlark Travel&quot;: info@meadowlarktravel.com', to: cart.billing.email,&#13;&#10;subject: 'Thank You for Book your Trip with Meadowlark Travel', html: html,&#13;&#10;text: htmlToFormattedText(html),&#13;&#10;})&#13;&#10;.then(info =&gt; { console.log('sent! ', info)&#13;&#10;res.render('cart-thank-you', { cart: cart })&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;console.error('Unable to send confirmation: ' + err.message)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection215>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="_bookmark496"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image066.gif"
alt="Text Box: })&#13;&#10;}&#13;&#10;)&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark493"></a><span style='color:#333333'>Note that were calling </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.render<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>twice.
Normally, you call it only once (calling it twice will display only the results
of the first call). However, in this instance, were circumventing the normal
rendering process the first time we call it: notice that we provide a callback.
Doing that prevents the results of the view from being<span style='letter-spacing:
1.55pt'> </span>rendered<span style='letter-spacing:1.55pt'> </span>to<span
style='letter-spacing:1.55pt'> </span>the browser.<span style='letter-spacing:
1.55pt'> </span>Instead,<span style='letter-spacing:1.55pt'> </span>the
callback receives the rendered view in the parameter </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>html</span><span
style='color:#333333'>: all we have to<span style='letter-spacing:4.0pt'> </span>do
is take that rendered HTML and send the email! We specify </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>layout: null<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>to<span
style='letter-spacing:1.35pt'> </span>prevent<span style='letter-spacing:1.3pt'>
</span>our<span style='letter-spacing:1.3pt'> </span>layout<span
style='letter-spacing:1.3pt'> </span>file<span style='letter-spacing:1.3pt'> </span>from<span
style='letter-spacing:1.3pt'> </span>being<span style='letter-spacing:1.35pt'> </span>used,<span
style='letter-spacing:1.35pt'> </span>because<span style='letter-spacing:1.3pt'>
</span>its<span style='letter-spacing:1.3pt'> </span>all<span
style='letter-spacing:1.3pt'> </span>in<span style='letter-spacing:1.35pt'> </span>the
email template (an alternate approach would be to create a separate layout file
for emails and use that instead). Lastly, we call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.render<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>again.</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.55pt'><span
style='color:#333333'>This<span style='letter-spacing:.45pt'> </span>time,<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.45pt'> </span>results<span
style='letter-spacing:.45pt'> </span>will<span style='letter-spacing:.45pt'> </span>be<span
style='letter-spacing:.45pt'> </span>rendered<span style='letter-spacing:.55pt'>
</span>to<span style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:
.45pt'> </span>HTML<span style='letter-spacing:.45pt'> </span>response<span
style='letter-spacing:.45pt'> </span>as<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>normal<a name="_bookmark494"></a>.</span></span></p>

<p class=MsoBodyText><span style='font-size:21.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Encapsulating<span style='letter-spacing:-.45pt'>
</span>Email<span style='letter-spacing:-.4pt'> </span><span style='letter-spacing:
-.1pt'>Functionality</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark495"></a><span style='color:#333333'>If youre using email a lot
throughout your site, you may want to encapsulate the email functionality.
Lets assume you always want your site to send email from the same sender
(Meadowlark Travel</span></p>

<p class=MsoNormal style='margin-top:.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>&lt;</span><a
href="mailto:info@meadowlarktravel.com"><i><span style='font-size:14.0pt;
line-height:133%;color:#333333;text-decoration:none'>info@meadowlarktravel.com</span></i></a><span
style='font-size:14.0pt;line-height:133%;color:#333333'>&gt;) and you always
want the email to be sent in HTML with automatically generated text. Create a
module called <i>lib/email.js </i>(<i>ch11/lib/email.js </i>in the companion
repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const nodemailer = require('nodemailer')&#13;&#10;const htmlToFormattedText = require('html-to-formatted-text') module.exports = credentials =&gt; {&#13;&#10;const mailTransport = nodemailer.createTransport({ host: 'smtp.sendgrid.net',&#13;&#10;auth: {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection216>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: user: credentials.sendgrid.user, pass: credentials.sendgrid.password,&#13;&#10;},&#13;&#10;})&#13;&#10;&#13;&#10;const from = '&quot;Meadowlark Travel&quot; &lt;info@meadowlarktravel.com&gt;'&#13;&#10;const errorRecipient = 'youremail@gmail.com'&#13;&#10;&#13;&#10;return {&#13;&#10;send: (to, subject, html) =&gt; mailTransport.sendMail({&#13;&#10;from, to, subject, html,&#13;&#10;text: htmlToFormattedText(html),&#13;&#10;}),&#13;&#10;}&#13;&#10;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now all we have to do
to send an email is the following (<i>ch11/05-email- library.js </i>in the
companion repo)<a name="_bookmark497"></a>:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const emailService = require('./lib/email')(credentials)&#13;&#10;&#13;&#10;emailService.send(email, &quot;Hood River tours on sale today!&quot;, &quot;Get 'em while they're hot!&quot;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, you learned the basics of how email is
delivered on the internet. If you were following along, you set up a free email
service (most likely SendGrid or Mailgun) and used the service to send text and
HTML email. You learned how we can use the same template rendering<span
style='letter-spacing:4.0pt'> </span>mechanism we use for rendering HTML in our
Express applications to render HTML for email.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection217>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Email<span style='letter-spacing:1.85pt'> </span>remains<span
style='letter-spacing:1.85pt'> </span>an<span style='letter-spacing:1.95pt'> </span>important<span
style='letter-spacing:1.85pt'> </span>way<span style='letter-spacing:1.95pt'> </span>your<span
style='letter-spacing:1.85pt'> </span>application<span style='letter-spacing:
1.95pt'> </span>can<span style='letter-spacing:1.95pt'> </span>communicate<span
style='letter-spacing:1.85pt'> </span>to your<span style='letter-spacing:1.3pt'>
</span>users.<span style='letter-spacing:1.4pt'> </span>Be<span
style='letter-spacing:1.3pt'> </span>mindful<span style='letter-spacing:1.3pt'>
</span>not<span style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:
1.4pt'> </span>abuse<span style='letter-spacing:1.3pt'> </span>this<span
style='letter-spacing:1.3pt'> </span>power!<span style='letter-spacing:1.3pt'> </span>If<span
style='letter-spacing:1.3pt'> </span>youre<span style='letter-spacing:1.3pt'> </span>like<span
style='letter-spacing:1.3pt'> </span>me,<span style='letter-spacing:1.4pt'> </span>you
have an inbox overflowing with automated email that you mostly ignore. When it
comes to automated emails, less is more. There are legitimate and useful
reasons your application could send an email to your users, but you should
always ask yourself, Do my users <i>really </i>want this email? Is there
another way to communicate this information?<a name="_bookmark498"></a></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that weve covered some basic infrastructure that
well need to create applications, well spend some time talking about the
eventual production launch of our application and the kinds of things well
want to consider to make that launch successful.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection218>

<h1 style='margin-right:85.3pt;line-height:105%'><a
name="12._Production_Concerns"></a><a name="Execution_Environments"></a><a
name="_bookmark499"></a>Chapter 12. Production <span style='letter-spacing:
-.1pt'>Concerns</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark500"></a><span style='color:#333333'>While it may feel premature
to start discussing production concerns at this point,<span style='letter-spacing:
1.3pt'> </span>you<span style='letter-spacing:1.3pt'> </span>can<span
style='letter-spacing:1.3pt'> </span>save<span style='letter-spacing:1.2pt'> </span>yourself<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.2pt'> </span>lot<span
style='letter-spacing:1.2pt'> </span>of<span style='letter-spacing:1.2pt'> </span>time<span
style='letter-spacing:1.2pt'> </span>and<span style='letter-spacing:1.3pt'> </span>suffering<span
style='letter-spacing:1.3pt'> </span>down<span style='letter-spacing:1.3pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>line<span style='letter-spacing:1.2pt'> </span>if
you start thinking about production early on. Launch day will be here<span
style='letter-spacing:4.0pt'> </span>before you know it.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, youll learn about Expresss support for
different execution environments, methods to scale your website, and how to
monitor your websites health. Youll see how you can simulate a production<span
style='letter-spacing:4.0pt'> </span>environment for testing and development
and also how to perform stress testing so you can identify production problems
before they happen.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Execution<span
style='letter-spacing:-.4pt'> </span><span style='letter-spacing:-.1pt'>Environments</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark501"></a><span style='color:#333333'>Express supports the
concept of <i>execution environments</i>: a way to run your application in
production, development, or test mode. You could actually have as many
different environments as you want. For example, you could have a staging
environment, or a training environment.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>However, keep in mind that development, production, and
test are standard environments, and both Express and third-party middleware
often make decisions based on those environments. In other words, if you have a
staging environment, theres no way to make it automatically inherit the properties
of a production environment. For this reason, I recommend you stick with the
standards of production, development, and <span style='letter-spacing:-.1pt'>test.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection219>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>While it is possible to specify the execution environment
by calling </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.set('env', \'production')</span><span style='color:#333333'>,
it is inadvisable to do so; it means<span style='letter-spacing:4.0pt'> </span>your
app will always run in that environment, no matter what the situation. Worse,<span
style='letter-spacing:1.55pt'> </span>it<span style='letter-spacing:1.5pt'> </span>may<span
style='letter-spacing:1.55pt'> </span>start<span style='letter-spacing:1.5pt'> </span>running<span
style='letter-spacing:1.55pt'> </span>in<span style='letter-spacing:1.55pt'> </span>one<span
style='letter-spacing:1.5pt'> </span>environment<span style='letter-spacing:
1.5pt'> </span>and<span style='letter-spacing:1.55pt'> </span>then<span
style='letter-spacing:1.55pt'> </span>switch<span style='letter-spacing:1.55pt'>
</span>to <span style='letter-spacing:-.1pt'>another.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Its preferable to specify the execution environment by
using the environment variable </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>NODE_ENV</span><span style='color:#333333'>. Lets modify our
app to report on the mode its running in by calling </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.get('env)</span><span
style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const port = process.env.PORT || 3000&#13;&#10;app.listen(port, () =&gt; console.log(`Express started in ` +&#13;&#10;`${app.get('env')} mode at http://localhost:${port}` +&#13;&#10;`; press Ctrl-C to terminate.`))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you start your server now, youll see youre running
in development mode; its the default if you dont specify otherwise. Lets try
putting it in production mode:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: $ export NODE_ENV=production&#13;&#10;$ node meadowlark.js&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre using Unix/BSD, theres a handy syntax that
allows you to modify the environment only for the duration of that command:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>$<span style='letter-spacing:.95pt'> </span>NODE_ENV=production<span
style='letter-spacing:1.0pt'> </span>node<span style='letter-spacing:1.0pt'> </span><span
style='letter-spacing:-.1pt'>meadowlark.j<a
name="Environment-Specific_Configuration"></a><a name="_bookmark502"></a>s</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>This will run the server in production mode, but once the
server terminates, the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>NODE_ENV<span style='letter-spacing:-2.4pt'> </span></span><span
style='color:#333333'>environment variable wont be modified. Im particularly
fond of this shortcut, and it reduces the chance that I accidentally leave
environment variables set to values that I dont necessarily want for
everything.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection220>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image067.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Environment-Specific<span
style='letter-spacing:-.95pt'> </span><span style='letter-spacing:-.1pt'>Configuration</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark503"></a><span style='color:#333333'>Just changing the execution
environment wont do much, though Express will log more warnings to the console
in production mode (for example, informing you of modules that are deprecated
and will be removed in the future). Also, in production mode, view caching is
enabled by default (see </span><a href="#_bookmark309"><span style='color:#070707'>Chapter
7</span></a><span style='color:#333333'>).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Mainly, the execution environment is a tool for you to
leverage, allowing you to easily make decisions about how your application
should behave in the different environments. As a word of caution, you should
try to<span style='letter-spacing:4.0pt'> </span>minimize the differences
between your development, test, and production environments. That is, you
should use this feature sparingly. If your development or test environments
differ wildly from production, you are increasing your chances of different
behavior in production, which is a<span style='letter-spacing:2.0pt'> </span>recipe
for more defects (or harder-to-find ones). Some differences are inevitable;<span
style='letter-spacing:1.65pt'> </span>for<span style='letter-spacing:1.65pt'> </span>example,<span
style='letter-spacing:1.7pt'> </span>if<span style='letter-spacing:1.65pt'> </span>your<span
style='letter-spacing:1.65pt'> </span>app<span style='letter-spacing:1.7pt'> </span>is<span
style='letter-spacing:1.65pt'> </span>highly<span style='letter-spacing:1.7pt'>
</span>database<span style='letter-spacing:1.65pt'> </span>driven,<span
style='letter-spacing:1.7pt'> </span>you probably dont want to be messing with
the production database during development, and that would be a good candidate
for environment-specific configuration.<span style='letter-spacing:2.0pt'> </span>Another<span
style='letter-spacing:2.0pt'> </span>low-impact<span style='letter-spacing:
2.0pt'> </span>area<span style='letter-spacing:2.0pt'> </span>is<span
style='letter-spacing:2.0pt'> </span>more<span style='letter-spacing:2.0pt'> </span>verbose<span
style='letter-spacing:2.0pt'> </span>logging.<span style='letter-spacing:2.0pt'>
</span>There are a lot of things you might want to log in development that are<span
style='letter-spacing:2.0pt'> </span>unnecessary to record in production.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection221>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="Running_Your_Node_Process"></a><a name="_bookmark506"></a><a
name="_bookmark504"></a><span style='color:#333333'>Lets add some logging to
our server. The twist is that we want different behavior for production and
development. For development, we can leave the defaults, but for production, we
want to log to a file. <a name="_bookmark505"></a>Well use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>morgan </span><span
style='color:#333333'>(dont forget </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install morgan</span><span style='color:#333333'>), which is
the most common logging middleware (<i>ch12/00-logging.js </i>in the companion
repo):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const morgan = require('morgan')&#13;&#10;const fs = require('fs')&#13;&#10;&#13;&#10;switch(app.get('env')) {&#13;&#10;case 'development': app.use(morgan('dev')) break&#13;&#10;case 'production':&#13;&#10;const stream = fs.createWriteStream(  dirname + '/access.log',&#13;&#10;{ flags: 'a' }) app.use(morgan('combined', { stream })) break&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>If you start the server as you normally would (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node meadowlark.js</span><span
style='color:#333333'>) and visit the site, youll see the activity logged to
the console. To see how the application behaves in production mode, run it with<span
style='letter-spacing:4.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>NODE_ENV=production<span style='letter-spacing:-1.4pt'> </span></span><span
style='color:#333333'>instead. Now if you visit the application, you<span
style='letter-spacing:2.0pt'> </span>wont see any activity on the terminal
(probably what we want for a </span><a href="http://bit.ly/2NGC592"><span
style='color:#333333;text-decoration:none'>production server), but all of the
activity is logged in </span><span style='color:#070707'>Apaches Combined</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>Log
Format</span><span style='color:#333333;text-decoration:none'>, which is a
staple for many server tools.</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>We accomplished this by creating an appendable (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{ flags: </span><i><span
style='font-family:"Courier New";color:#333333'>a<span style='letter-spacing:
-.1pt'> </span></span></i><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>}</span><span style='color:#333333'>) write stream and passing
it to the morgan configuration. Morgan has many options; to see them all, check
out the </span><a href="http://bit.ly/32H5wMr"><span style='color:#070707'>morgan
documentation</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image065.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection222>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="Scaling_Your_Website"></a><a
name="_bookmark511"></a><span style='font-size:10.0pt'><img width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image067.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.7pt;margin-right:75.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>I will stress again that you should use your best
judgment when making environment-specific configuration choices. Always keep in
mind that<span style='letter-spacing:2.0pt'> </span>when your site is live,
your production instances will be running in </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>production<span style='letter-spacing:
-2.6pt'> </span></span><span style='color:#333333'>mode (or they should be).
Whenever youre tempted to make<span style='letter-spacing:4.0pt'> </span>a
development-specific modification, you should always think first about how that
might have QA consequences in production. Well see a more robust example of
environment-specific configuration in </span><a href="#_bookmark542"><span
style='color:#070707'>Chapter 13</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Running<span style='letter-spacing:-.2pt'> </span>Your<span
style='letter-spacing:-.2pt'> </span>Node<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Process</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark509"></a><span style='color:#333333'>So far, weve been running
our application by invoking it directly w<a name="_bookmark507"></a>ith </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>(for
example, </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node
meadowlark.js</span><span style='color:#333333'>). This is fine for development
and testing, but it has disadvantages for production. Notably, there are no
protections if your app crashes or gets terminated. <a name="_bookmark508"></a>A
robust <i>process manager </i>can address this problem.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Depending on your hosting solution, you may not need a
process manager<span style='letter-spacing:2.0pt'> </span>if one is provided by
the hosting solution itself. That is, the hosting<span style='letter-spacing:
4.0pt'> </span>provider will give you a configuration option to point to your
application file, and it will handle the process management.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>But if you need to manage the process yourself, there are
two popular options for process managers<a name="_bookmark510"></a>:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15876608'><span style='left:0px;position:absolute;left:169px;
top:-156940px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
href="https://github.com/foreversd/forever"><span style='color:#070707;
letter-spacing:-.1pt'>Forever</span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection223>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15877120'><span style='left:0px;position:absolute;left:169px;
top:-156968px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><a
href="https://github.com/Unitech/pm2"><span style='color:#070707;letter-spacing:
-.25pt'>PM2</span></a></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Since production environments can vary widely, we wont
go into the specifics of setting up and configuring a process manager. Both
Forever and PM2 have excellent documentation, and you can install and use them
on your development machine to learn how to configure them.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I have used them both, and I dont have a strong
preference. Forever is a little more straightforward and easy to get started,
and PM2 offers more <span style='letter-spacing:-.1pt'>features.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you want to experiment with a process manager without
investing a lot of time, I recommend giving Forever a try. You can try it in
two steps.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>First,<span
style='letter-spacing:.45pt'> </span>install<span style='letter-spacing:.45pt'>
</span><span style='letter-spacing:-.1pt'>Forever:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.55pt'> </span>install<span
style='letter-spacing:.55pt'> </span>-g<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>forever</span> </span></p>

<p class=MsoBodyText style='margin-top:.6pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Then, start your application with Forever (run this from
your application <span style='letter-spacing:-.1pt'>root):</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>forever<span style='letter-spacing:.75pt'> </span>start<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>meadowlark.js</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Your application is now runningand it will stay running
even if you close your terminal window! You can restart the process with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>forever restart
meadowlark.js<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>and stop it with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>forever stop <span style='letter-spacing:-.1pt'>meadowlark.js</span></span><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Getting started with PM2 is a little more involved but is
worth looking into if you need to use your own process manager for production.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Scaling<span style='letter-spacing:-.35pt'> </span>Your<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection224>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Scaling_Out_with_App_Clusters"></a><a name="_bookmark515"></a><a
name="_bookmark512"></a><span style='color:#333333'>These days, scaling usually
means one of two things: scaling up or scaling out.<span style='letter-spacing:
1.7pt'> </span><a name="_bookmark513"></a><i>Scaling<span style='letter-spacing:
1.7pt'> </span>up<span style='letter-spacing:1.7pt'> </span></i>refers<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.7pt'> </span>making<span
style='letter-spacing:1.7pt'> </span>servers<span style='letter-spacing:1.65pt'>
</span>more<span style='letter-spacing:1.65pt'> </span>powerful:<span
style='letter-spacing:1.65pt'> </span>faster<span style='letter-spacing:1.65pt'>
</span>CPUs, better<span style='letter-spacing:1.65pt'> </span>architecture,<span
style='letter-spacing:1.75pt'> </span>more<span style='letter-spacing:1.65pt'> </span>cores,<span
style='letter-spacing:1.75pt'> </span>more<span style='letter-spacing:1.65pt'> </span>memory,<span
style='letter-spacing:1.75pt'> </span>etc.<span style='letter-spacing:1.75pt'> </span><i>Scaling<span
style='letter-spacing:1.75pt'> </span>out</i>,<span style='letter-spacing:1.75pt'>
</span>on<span style='letter-spacing:1.75pt'> </span>the other hand, simply
means more servers. With the increased popularity of cloud computing and the
ubiquity of virtualization, server computational power is becoming less
relevant, and scaling out is usually the most cost- effective method for
scaling websites according to your needs.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When developing websites for Node, you should always
consider the possibility of scaling out. Even if your application is tiny
(maybe its even an intranet application that will always have a limited
audience) and will never conceivably need to be scaled out, its a good habit
to get into. After all, maybe your next Node project will be the next Twitter,
and scaling out will be essential. Fortunately, Nodes support for scaling out
is very good, and writing your application with this in mind is painless.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark514"></a><span style='color:#333333'>The most important thing to
remember when building a website designed to be scaled out is persistence. If
youre used to relying on file-based storage for persistence, <i>stop right
there</i>. That way lies madness.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>My first experience with this problem was nearly
disastrous. One of our clients was running a web-based contest, and the web
application was designed to inform the first 50 winners that they would receive
a prize.<span style='letter-spacing:4.0pt'> </span>With<span style='letter-spacing:
1.5pt'> </span>that<span style='letter-spacing:1.45pt'> </span>particular<span
style='letter-spacing:1.45pt'> </span>client,<span style='letter-spacing:1.5pt'>
</span>we<span style='letter-spacing:1.45pt'> </span>were<span
style='letter-spacing:1.45pt'> </span>unable<span style='letter-spacing:1.45pt'>
</span>to<span style='letter-spacing:1.5pt'> </span>easily<span
style='letter-spacing:1.5pt'> </span>use<span style='letter-spacing:1.45pt'> </span>a<span
style='letter-spacing:1.45pt'> </span>database because<span style='letter-spacing:
1.8pt'> </span>of<span style='letter-spacing:1.8pt'> </span>some<span
style='letter-spacing:1.8pt'> </span>corporate<span style='letter-spacing:1.8pt'>
</span>IT<span style='letter-spacing:1.8pt'> </span>restrictions,<span
style='letter-spacing:1.85pt'> </span>so<span style='letter-spacing:1.85pt'> </span>most<span
style='letter-spacing:1.8pt'> </span>persistence<span style='letter-spacing:
1.8pt'> </span>was achieved by writing flat files. I proceeded just as I always
had, saving each entry to a file. Once the file had recorded 50 winners, no
more people<span style='letter-spacing:4.0pt'> </span>would be notified that
they had won. The problem is that the server was load-balanced,<span
style='letter-spacing:1.6pt'> </span>so<span style='letter-spacing:1.6pt'> </span>half<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>requests<span
style='letter-spacing:1.5pt'> </span>were<span style='letter-spacing:1.5pt'> </span>served<span
style='letter-spacing:1.6pt'> </span>by<span style='letter-spacing:1.6pt'> </span>one<span
style='letter-spacing:1.5pt'> </span>server,<span style='letter-spacing:1.6pt'>
</span>and<span style='letter-spacing:1.6pt'> </span>the other half by<span
style='letter-spacing:1.5pt'> </span>another.<span style='letter-spacing:1.5pt'>
</span>One server notified<span style='letter-spacing:1.5pt'> </span>50<span
style='letter-spacing:1.5pt'> </span>people that they<span style='letter-spacing:
1.5pt'> </span>had<span style='letter-spacing:1.5pt'> </span>won</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection225>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>and so did the other server. Fortunately, the prizes were
small (fleece blankets) and not something expensive like iPads, and the client
took their lumps and handed out 100 prizes instead of 50 (I offered to pay for
the<span style='letter-spacing:4.0pt'> </span>extra<span style='letter-spacing:
1.5pt'> </span>50<span style='letter-spacing:1.6pt'> </span>blankets<span
style='letter-spacing:1.5pt'> </span>out<span style='letter-spacing:1.5pt'> </span>of<span
style='letter-spacing:1.5pt'> </span>pocket<span style='letter-spacing:1.5pt'> </span>for<span
style='letter-spacing:1.5pt'> </span>my<span style='letter-spacing:1.6pt'> </span>mistake,<span
style='letter-spacing:1.6pt'> </span>but<span style='letter-spacing:1.5pt'> </span>they<span
style='letter-spacing:1.6pt'> </span>generously refused to take me up on my
offer).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The<span style='letter-spacing:1.35pt'> </span>moral<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>this<span
style='letter-spacing:1.35pt'> </span>story<span style='letter-spacing:1.4pt'> </span>is<span
style='letter-spacing:1.35pt'> </span>that<span style='letter-spacing:1.35pt'> </span>unless<span
style='letter-spacing:1.35pt'> </span>you<span style='letter-spacing:1.4pt'> </span>have<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.35pt'> </span>filesystem<span
style='letter-spacing:1.35pt'> </span>thats accessible<span style='letter-spacing:
1.35pt'> </span>to<span style='letter-spacing:1.4pt'> </span><i>all<span
style='letter-spacing:1.35pt'> </span></i>of<span style='letter-spacing:1.35pt'>
</span>your<span style='letter-spacing:1.35pt'> </span>servers,<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.4pt'> </span>should<span
style='letter-spacing:1.4pt'> </span>not<span style='letter-spacing:1.35pt'> </span>rely<span
style='letter-spacing:1.4pt'> </span>on<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>local filesystem for persistence. The
exceptions are read-only data, like logging, and backups. For example, I have
commonly backed up form submission data to a local flat file in case the
database connection failed. In the case of<span style='letter-spacing:4.0pt'> </span>a<span
style='letter-spacing:1.1pt'> </span>database<span style='letter-spacing:1.1pt'>
</span>outage,<span style='letter-spacing:1.15pt'> </span>it<span
style='letter-spacing:1.1pt'> </span>is<span style='letter-spacing:1.1pt'> </span>a<span
style='letter-spacing:1.1pt'> </span>hassle<span style='letter-spacing:1.1pt'> </span>to<span
style='letter-spacing:1.15pt'> </span>go<span style='letter-spacing:1.15pt'> </span>to<span
style='letter-spacing:1.15pt'> </span>each<span style='letter-spacing:1.15pt'> </span>server<span
style='letter-spacing:1.1pt'> </span>and<span style='letter-spacing:1.15pt'> </span>collect<span
style='letter-spacing:1.1pt'> </span>the<span style='letter-spacing:1.1pt'> </span>files,
but at least no damage has been done.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Scaling<span style='letter-spacing:-.15pt'> </span>Out<span
style='letter-spacing:-.15pt'> </span>with<span style='letter-spacing:-.15pt'> </span>App<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Clusters</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark516"></a><span style='color:#333333'>Node itself supports <i>app
clusters</i>, a simple, single-server form of scaling out. With app clusters,
you can create an independent server for each core (CPU) on the system (having
more servers than the number of cores will not improve the performance of your
app). App clusters are good for two reasons: first, they can help maximize the
performance of a given server (the hardware or virtual machine), and second,
its a low-overhead way to test your app under parallel conditions.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:79.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets go ahead and add cluster support to our website.
While its quite common to do all of this work in your main application file,
we are going to create a second application file that will run the app in a cluster,
using the nonclustered application file weve been using all along. To enable<span
style='letter-spacing:2.0pt'> </span>that, we have to make a slight
modification to <i>meadowlark.js </i>first (see <i>ch12/01-server.js </i>in the
companion repo for a simplified example):</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection226>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: function startServer(port) { app.listen(port, function() {&#13;&#10;console.log(`Express started in ${app.get('env')} ` +&#13;&#10;`mode on http://localhost:${port}` +&#13;&#10;`; press Ctrl-C to terminate.`)&#13;&#10;})&#13;&#10;}&#13;&#10;&#13;&#10;if(require.main === module) {&#13;&#10;// application run directly; start app server&#13;&#10;startServer(process.env.PORT || 3000)&#13;&#10;} else {&#13;&#10;// application imported as a module via &quot;require&quot;: export&#13;&#10;// function to create server&#13;&#10;module.exports = startServer&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>If you recall from </span><a href="#_bookmark165"><span
style='color:#070707'>Chapter 5</span></a><span style='color:#333333'>, if </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>require.main ===
module</span><span style='color:#333333'>, it means the script has been run
directly; otherwise, it has been called with </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>require </span><span style='color:
#333333'>from another script.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Then,<span style='letter-spacing:.75pt'> </span>we<span
style='letter-spacing:.65pt'> </span>create<span style='letter-spacing:.7pt'> </span>a<span
style='letter-spacing:.7pt'> </span>new<span style='letter-spacing:.7pt'> </span>script,<span
style='letter-spacing:.75pt'> </span><i>meadowlark-cluster.js<span
style='letter-spacing:.7pt'> </span></i>(see<span style='letter-spacing:.7pt'> </span><i>ch12/01-<span
style='letter-spacing:-.1pt'>cluster</span></i></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>in<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span>companion<span
style='letter-spacing:.55pt'> </span>repo<span style='letter-spacing:.5pt'> </span>for<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.5pt'> </span>simplified<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>example):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const cluster = require('cluster')&#13;&#10;&#13;&#10;function startWorker() {&#13;&#10;const worker = cluster.fork()&#13;&#10;console.log(`CLUSTER: Worker ${worker.id} started`)&#13;&#10;}&#13;&#10;&#13;&#10;if(cluster.isMaster){ require('os').cpus().forEach(startWorker)&#13;&#10;// log any workers that disconnect; if a worker disconnects, it&#13;&#10;// should then exit, so we'll wait for the exit event to spawn&#13;&#10;// a new worker to replace it&#13;&#10;cluster.on('disconnect', worker =&gt; console.log(&#13;&#10;`CLUSTER: Worker ${worker.id} disconnected from the cluster.`&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection227>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image066.gif"
alt="Text Box: ))&#13;&#10;&#13;&#10;// when a worker dies (exits), create a worker to replace it&#13;&#10;cluster.on('exit', (worker, code, signal) =&gt; { console.log(&#13;&#10;`CLUSTER: Worker ${worker.id} died with exit ` +&#13;&#10;`code ${code} (${signal})`&#13;&#10;)&#13;&#10;startWorker()&#13;&#10;})&#13;&#10;&#13;&#10;} else {&#13;&#10;&#13;&#10;const port = process.env.PORT || 3000&#13;&#10;// start our app on worker; see meadowlark.js&#13;&#10;require('./meadowlark.js')(port)&#13;&#10;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>When this JavaScript is executed, it will be either in
the context of master (when it is run directly, with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node
meadowlark-cluster.js</span><span style='color:#333333'>) or in the context of
a worker, when Nodes cluster system executes it. <a name="_bookmark517"></a>The<span
style='letter-spacing:4.0pt'> </span>properties </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>cluster.isMaster<span
style='letter-spacing:-.35pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>cluster.isWorker<span
style='letter-spacing:-.35pt'> </span></span><span style='color:#333333'>determine
which context<span style='letter-spacing:1.5pt'> </span>youre<span
style='letter-spacing:1.5pt'> </span>running<span style='letter-spacing:1.55pt'>
</span>in.<span style='letter-spacing:1.55pt'> </span>When<span
style='letter-spacing:1.55pt'> </span>we<span style='letter-spacing:1.5pt'> </span>run<span
style='letter-spacing:1.55pt'> </span>this<span style='letter-spacing:1.5pt'> </span>script,<span
style='letter-spacing:1.55pt'> </span>its<span style='letter-spacing:1.5pt'> </span>executing<span
style='letter-spacing:1.55pt'> </span>in master mode, and we start a worker
using </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>cluster.fork<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>for
each CPU in the system. Also, we respawn any dead workers by listening for </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>exit </span><span
style='color:#333333'>events from workers.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Finally,<span style='letter-spacing:1.5pt'> </span>in<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.45pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>else<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>clause,<span
style='letter-spacing:1.5pt'> </span>we<span style='letter-spacing:1.45pt'> </span>handle<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>worker<span
style='letter-spacing:1.45pt'> </span>case.<span style='letter-spacing:1.5pt'> </span>Since<span
style='letter-spacing:1.45pt'> </span>we configured <i>meadowlark.js </i>to be
used as a module, we simply import it and immediately invoke it (remember, we
exported it as a function that starts<span style='letter-spacing:4.0pt'> </span>the
server).</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>start<span style='letter-spacing:.5pt'> </span>up<span
style='letter-spacing:.55pt'> </span>your<span style='letter-spacing:.5pt'> </span>new<span
style='letter-spacing:.5pt'> </span>clustered<span style='letter-spacing:.5pt'>
</span><span style='letter-spacing:-.1pt'>server:</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:19.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>node<span style='letter-spacing:1.7pt'> </span>meadowlark</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>-</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>cluster</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt;
background:#FBFBFB'>j<a name="Handling_Uncaught_Exceptions"></a><a
name="_bookmark518"></a>s</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;background:#FBFBFB'> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection228>

<p class=MsoBodyText style='margin-left:54.95pt'><span style='font-size:10.0pt;
font-family:"BIZ UDGothic",sans-serif'><img width=579 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image068.gif"
alt="Text Box: NOTE&#13;&#10;If you are using virtualization (like Oracles VirtualBox), you may have to configure your VM to have multiple CPUs. By default, virtual machines often have a single CPU.&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Assuming youre on a multicore system, you should see
some number of workers started. If you want to see evidence of different
workers handling different requests, add the following middleware before your
routes:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const cluster = require('cluster')&#13;&#10;&#13;&#10;app.use((req, res, next) =&gt; {&#13;&#10;if(cluster.isWorker)&#13;&#10;console.log(`Worker ${cluster.worker.id} received request`) next()&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now you can connect to your application with a browser.
Reload a few times and see how you can get a different worker out of the pool
on each request. (You may not be able to; Node is designed to handle large
numbers of connections, and you may not be able to stress it sufficiently
simply by reloading your browser; later well explore stress testing, and
youll be able to better see the cluster in action.<a name="_bookmark519"></a>)</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Handling<span style='letter-spacing:-.3pt'> </span>Uncaught<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Exceptions</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark520"></a><span style='color:#333333'>In the asynchronous world
of Node, uncaught exceptions are of particular concern. Lets start with a
simple example that doesnt cause too much trouble (I encourage you to follow
along with these examples):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.get('/fail', (req, res) =&gt; {&#13;&#10;throw new Error('Nope!')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection229>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark521"></a><span style='color:#333333'>When Express executes route
handlers, it wraps them in a try/catch block,<span style='letter-spacing:2.0pt'>
</span>so<span style='letter-spacing:.9pt'> </span>this isnt actually<span
style='letter-spacing:.9pt'> </span>an<span style='letter-spacing:.9pt'> </span>uncaught
exception.<span style='letter-spacing:.9pt'> </span>This wont cause too<span
style='letter-spacing:.9pt'> </span>much<span style='letter-spacing:.9pt'> </span>of
a<span style='letter-spacing:1.4pt'> </span>problem:<span style='letter-spacing:
1.4pt'> </span>Express<span style='letter-spacing:1.4pt'> </span>will<span
style='letter-spacing:1.4pt'> </span>log<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>exception<span style='letter-spacing:1.45pt'>
</span>on<span style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:
1.4pt'> </span>server<span style='letter-spacing:1.4pt'> </span>side,<span
style='letter-spacing:1.45pt'> </span>and<span style='letter-spacing:1.45pt'> </span>the
visitor will get an ugly stack dump. However, your server is stable, and other
requests will continue to be served correctly. If we want to provide a nice
error page, create a file <i>views/500.handlebars </i>and add an error handler
after all of your routes:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.use((err, req, res, next) =&gt; { console.error(err.message, err.stack) app.status(500).render('500')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its always a good practice to provide a custom error
page; it not only looks more professional to your users when errors do occur,
but also allows you to take action when errors occur. For example, this error
handler would be a good place to notify your dev team that an error occurred.
Unfortunately, this helps only for exceptions that Express can catch. Lets try
something worse:</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.get('/epic-fail', (req, res) =&gt; { process.nextTick(() =&gt;&#13;&#10;throw new Error('Kaboom!')&#13;&#10;)&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Go ahead and try it. The result is considerably more
catastrophic: it brings your whole server down! In addition to not displaying a
friendly error message to your user, now your server is down, and <i>no </i>requests
are being served.<span style='letter-spacing:2.0pt'> </span>This<span
style='letter-spacing:2.0pt'> </span>is<span style='letter-spacing:2.0pt'> </span>because<span
style='letter-spacing:2.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>setTimeout<span style='letter-spacing:-1.15pt'> </span></span><span
style='color:#333333'>is<span style='letter-spacing:2.0pt'> </span>executing<span
style='letter-spacing:2.0pt'> </span><i>asynchronously</i>; execution<span
style='letter-spacing:1.65pt'> </span>of<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>function<span style='letter-spacing:1.65pt'>
</span>with<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>exception<span style='letter-spacing:
1.65pt'> </span>is<span style='letter-spacing:1.55pt'> </span>being<span
style='letter-spacing:1.65pt'> </span>deferred<span style='letter-spacing:1.65pt'>
</span>until<span style='letter-spacing:1.55pt'> </span>Node is idle. The
problem is, when Node is idle and gets around to executing the function, it no
longer has context about the request it was being served</span></p>

</div>

<span style='font-size:11.0pt;line-height:131%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection230>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Scaling_Out_with_Multiple_Servers"></a><a name="_bookmark524"></a><span
style='color:#333333'>from, so it has no recourse but to unceremoniously shut
down the whole server, because now its in an undefined state. (Node cant know
the purpose of the function or its caller, so it can no longer assume that any
further functions will work correctly.)</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image056.gif"
  alt="Text Box: NOTE&#13;&#10;process.nextTick is similar to calling setTimeout with an argument of 0, but its more efficient. Were using it here for demonstration purposes; its not something you would generally use in server-side code. However, in coming chapters, we will be dealing with many things that execute asynchronously, such as database access, filesystem access, and network access, to name a few, and they are all subject to this problem.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There is action that we can take to handle uncaught
exceptions, but <i>if Node cant determine the stability of your application,
neither can you</i>. In other words, if there is an uncaught exception, the
only recourse is to shut down the server. The best we can do in this
circumstance is to shut down as gracefully as possible and have a failover
mechanism. The easiest failover mechanism is to use a cluster. If your
application is operating in clustered mode<span style='letter-spacing:1.45pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>one<span style='letter-spacing:1.45pt'> </span>worker<span
style='letter-spacing:1.45pt'> </span>dies,<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>master<span style='letter-spacing:1.45pt'>
</span>will<span style='letter-spacing:1.45pt'> </span>spawn<span
style='letter-spacing:1.5pt'> </span>another<span style='letter-spacing:1.45pt'>
</span>worker<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>take its<span style='letter-spacing:1.5pt'>
</span>place.<span style='letter-spacing:1.55pt'> </span>(You<span
style='letter-spacing:1.55pt'> </span>dont<span style='letter-spacing:1.5pt'> </span>even<span
style='letter-spacing:1.55pt'> </span>need<span style='letter-spacing:1.55pt'> </span>multiple<span
style='letter-spacing:1.5pt'> </span>workers;<span style='letter-spacing:1.5pt'>
</span>a<span style='letter-spacing:1.5pt'> </span>cluster<span
style='letter-spacing:1.5pt'> </span>with<span style='letter-spacing:1.55pt'> </span>one
worker will suffice, though the failover may be slightly slower.)</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>So with that in mind, how can we shut down as gracefully
as possible when confronted with an unhandled exception? <a name="_bookmark523"></a>Nodes
mechanism for dealing with this is the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>uncaughtException<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>event. (Node also has a mechanism called <i>domains</i>,
but this module has been deprecated, and its use is no longer recommended.)</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: process.on('uncaughtException', err =&gt; { console.error('UNCAUGHT EXCEPTION\n', err.stack);"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection231>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: // do any cleanup you need to do here...close&#13;&#10;// database connections, etc.&#13;&#10;process.exit(1)&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its unrealistic to expect that your application will
never experience uncaught exceptions, but you should have a mechanism in place
to record the exception and notify you when it happens, and you should take it
seriously.<span style='letter-spacing:1.45pt'> </span>Try<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.45pt'> </span>determine<span
style='letter-spacing:1.4pt'> </span>why<span style='letter-spacing:1.45pt'> </span>it<span
style='letter-spacing:1.4pt'> </span>happened<span style='letter-spacing:1.45pt'>
</span>so<span style='letter-spacing:1.45pt'> </span>you<span style='letter-spacing:
1.45pt'> </span>can<span style='letter-spacing:1.45pt'> </span>fix<span
style='letter-spacing:1.45pt'> </span>it.<span style='letter-spacing:1.45pt'> </span>Services
like </span><a href="https://sentry.io/"><span style='color:#070707'>Sentry</span></a><span
style='color:#333333'>, </span><a href="https://rollbar.com/"><span
style='color:#070707'>Rollbar</span></a><span style='color:#333333'>, </span><a
href="https://airbrake.io/"><span style='color:#070707'>Airbrake</span></a><span
style='color:#333333'>, and </span><a href="https://newrelic.com/"><span
style='color:#070707'>New Relic</span></a><span style='color:#070707'> </span><span
style='color:#333333'>are a great way to record these kinds of errors for
analysis. <a name="_bookmark525"></a>For example, to use Sentry, first you<span
style='letter-spacing:4.0pt'> </span>have to register for a free account, at
which point you will receive a data source name (DSN), and then you can modify
your exception handler:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const Sentry = require('@sentry/node') Sentry.init({ dsn: '** YOUR DSN GOES HERE **' })&#13;&#10;&#13;&#10;process.on('uncaughtException', err =&gt; {&#13;&#10;// do any cleanup you need to do here...close&#13;&#10;// database connections, etc. Sentry.captureException(err) process.exit(1)&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Scaling<span
style='letter-spacing:-.25pt'> </span>Out<span style='letter-spacing:-.25pt'> </span>with<span
style='letter-spacing:-.2pt'> </span>Multiple<span style='letter-spacing:-.25pt'>
</span><span style='letter-spacing:-.1pt'>Servers</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark526"></a><span style='color:#333333'>Although scaling out using
clustering can maximize the performance of an individual server, what happens
when you need more than one server?</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Thats where things get a little more complicated. <a
name="_bookmark527"></a>To achieve this kind of parallelism, you need a <i>proxy
</i>server. (Its often called a <i>reverse proxy </i>or <i>forward-facing
proxy </i>to distinguish it from proxies commonly used to access external
networks, but I find this language to be confusing and unnecessary, so I will
simply refer to it as a proxy.)</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark528"></a><span
style='color:#333333'>Two<span style='letter-spacing:.7pt'> </span>very<span
style='letter-spacing:.7pt'> </span>popular<span style='letter-spacing:.65pt'> </span>options<span
style='letter-spacing:.65pt'> </span>are<span style='letter-spacing:.7pt'> </span></span><a
href="https://www.nginx.com/"><span style='color:#070707'>NGINX</span></a><span
style='color:#070707;letter-spacing:.65pt'> </span><span style='color:#333333'>(pronounced<span
style='letter-spacing:.7pt'> </span>engine<span style='letter-spacing:.65pt'> </span>X)<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.25pt'>and</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection232>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="http://www.haproxy.org/"><span style='color:#070707'>HAProxy</span></a><span
style='color:#333333'>. NGINX servers in particular are springing up like
weeds. I recently did a competitive analysis for my company and found upward of
80% of our competitors were using NGINX. NGINX and HAProxy are both robust,
high-performance proxy servers and are capable of the most demanding
applications. (If you need proof, consider that Netflix, which accounts for as
much as 15% of <i>all internet traffic</i>, uses NGINX.)</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="http://bit.ly/34RWyNN"><span style='color:#333333;text-decoration:none'>There
are also some smaller Node-based proxy servers, such as </span><span
style='color:#070707'>node-http-</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>proxy</span><span style='color:#333333;
text-decoration:none'>. This is a great option if your needs are modest, or for
development.</span></a><span style='color:#333333'> For production, I recommend
using NGINX or HAProxy (both are free, though they offer support for a fee).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Installing and configuring a proxy is beyond the scope of
this book, but it<span style='letter-spacing:4.0pt'> </span>is not as hard as
you might think (especially if you use node-http-proxy or another lightweight
proxy). For now, using clusters gives us some<span style='letter-spacing:2.0pt'>
</span>assurance that our website is ready for scaling out.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you do configure a proxy server, make sure you tell
Express that you are using a proxy and that it should be trusted:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>enable</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'trust<span style='letter-spacing:1.9pt'> </span><span
style='letter-spacing:-.1pt'>proxy'</span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>)</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark530"></a><span style='color:#333333'>Doing this will ensure that
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.ip</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.protocol</span><span style='color:#333333'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.secure<span
style='letter-spacing:-2.5pt'> </span></span><span style='color:#333333'>will
reflect the details about the connection between the <i>client and the proxy</i>,
not between the client and your app. <a name="_bookmark531"></a>Also, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.ips<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>will
be an array that indicates the original client IP and the names or IP addresses
of any intermediate proxies<a name="_bookmark529"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Monitoring<span style='letter-spacing:-.3pt'> </span>Your<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark532"></a><span
style='color:#333333'>Monitoring<span style='letter-spacing:.65pt'> </span>your<span
style='letter-spacing:.6pt'> </span>website<span style='letter-spacing:.6pt'> </span>is<span
style='letter-spacing:.6pt'> </span>one<span style='letter-spacing:.6pt'> </span>of<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.6pt'> </span>most<span
style='letter-spacing:.6pt'> </span>importantand<span style='letter-spacing:
.65pt'> </span>most<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>often</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection233>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Monitoring_Your_Website"></a><a name="_bookmark533"></a><span
style='color:#333333'>overlookedQA measures you can take. The only thing worse
than being<span style='letter-spacing:2.0pt'> </span>up at 3 a.m. fixing a
broken website is being woken up at 3 a.m. by your<span style='letter-spacing:
2.0pt'> </span>boss<span style='letter-spacing:1.4pt'> </span>because<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>website<span
style='letter-spacing:1.4pt'> </span>is<span style='letter-spacing:1.4pt'> </span>down<span
style='letter-spacing:1.5pt'> </span>(or,<span style='letter-spacing:1.5pt'> </span>worse<span
style='letter-spacing:1.4pt'> </span>still,<span style='letter-spacing:1.5pt'> </span>arriving<span
style='letter-spacing:1.5pt'> </span>in<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>morning to realize that your client just
lost $10,000 in sales because the website had been down all night and no one
noticed).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Theres nothing you can do about failures: they are as
inevitable as death and taxes. However, if there is one thing you can do to
convince your boss and your clients that you are great at your job, its to <i>always
</i>know about failures before they do.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><a name="Third-Party_Uptime_Monitors"></a><a
name="_bookmark534"></a><span style='color:#3F3F3F'>Third-Party<span
style='letter-spacing:-.4pt'> </span>Uptime<span style='letter-spacing:-.4pt'> </span><span
style='letter-spacing:-.1pt'>Monitors</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:73.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark535"></a><span style='color:#333333'>Having an uptime monitor
running on your websites server is as effective<span style='letter-spacing:
2.0pt'> </span>as<span style='letter-spacing:1.15pt'> </span>having<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.15pt'> </span>smoke<span
style='letter-spacing:1.15pt'> </span>alarm<span style='letter-spacing:1.15pt'>
</span>in<span style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:
1.15pt'> </span>house<span style='letter-spacing:1.15pt'> </span>that<span
style='letter-spacing:1.15pt'> </span>nobody<span style='letter-spacing:1.2pt'>
</span>lives<span style='letter-spacing:1.15pt'> </span>in.<span
style='letter-spacing:1.2pt'> </span>It<span style='letter-spacing:1.15pt'> </span>might<span
style='letter-spacing:1.15pt'> </span>be<span style='letter-spacing:1.15pt'> </span>able
to catch errors if a certain page goes down, but if the whole <i>server </i>goes
down, it may go down without even sending out an SOS. Thats why your first<span
style='letter-spacing:1.9pt'> </span>line<span style='letter-spacing:1.9pt'> </span>of<span
style='letter-spacing:1.9pt'> </span>defense<span style='letter-spacing:1.9pt'>
</span>should<span style='letter-spacing:2.0pt'> </span>be<span
style='letter-spacing:1.9pt'> </span>third-party<span style='letter-spacing:
2.0pt'> </span>uptime<span style='letter-spacing:1.9pt'> </span>monitors.<span
style='letter-spacing:2.0pt'> </span></span><a name="_bookmark536"></a><a
href="http://uptimerobot.com/"><span style='color:#070707'>UptimeRobot</span></a><span
style='color:#070707'> </span><span style='color:#333333'>is free for up to 50
monitors and is simple to configure. Alerts can go to email, SMS (text
message), Twitter, or Slack (among others). You can monitor<span
style='letter-spacing:1.35pt'> </span>for<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>return<span style='letter-spacing:1.4pt'>
</span>code<span style='letter-spacing:1.35pt'> </span>from<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.35pt'> </span>single<span
style='letter-spacing:1.35pt'> </span>page<span style='letter-spacing:1.35pt'> </span>(anything<span
style='letter-spacing:1.4pt'> </span>other<span style='letter-spacing:1.35pt'> </span>than<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.35pt'> </span>200
is<span style='letter-spacing:1.25pt'> </span>considered<span style='letter-spacing:
1.3pt'> </span>an<span style='letter-spacing:1.3pt'> </span>error)<span
style='letter-spacing:1.25pt'> </span>or<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>check<span style='letter-spacing:1.3pt'> </span>for<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.25pt'> </span>presence<span
style='letter-spacing:1.25pt'> </span>or<span style='letter-spacing:1.25pt'> </span>absence<span
style='letter-spacing:1.25pt'> </span>of<span style='letter-spacing:1.25pt'> </span>a
keyword on the page. Keep in mind that if you use a keyword monitor, it may
affect your analytics (you can exclude traffic from uptime monitors in most
analytics services).</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If your needs are more sophisticated, there are other,
more expensive services out there such as </span><a href="http://pingdom.com/"><span
style='color:#070707'>Pingdom</span></a><span style='color:#070707'> </span><span
style='color:#333333'>and </span><a href="http://www.site24x7.com/"><span
style='color:#070707'>Site24x7</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Stress<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Testing</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection234>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Stress_Testing"></a><a name="_bookmark537"></a><a name="_bookmark538"></a><i><span
style='color:#333333'>Stress<span style='letter-spacing:1.55pt'> </span>testing<span
style='letter-spacing:1.55pt'> </span></span></i><span style='color:#333333'>(or<span
style='letter-spacing:1.6pt'> </span><i>load<span style='letter-spacing:1.6pt'>
</span>testing</i>)<span style='letter-spacing:1.55pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>designed<span style='letter-spacing:1.6pt'>
</span>to<span style='letter-spacing:1.6pt'> </span>give<span style='letter-spacing:
1.55pt'> </span>you<span style='letter-spacing:1.6pt'> </span>some<span
style='letter-spacing:1.55pt'> </span>confidence that your server will function
under the load of hundreds or thousands of simultaneous requests. This is
another deep area that could be the subject<span style='letter-spacing:2.0pt'> </span>for
a whole book: stress testing can be arbitrarily sophisticated, and how
complicated you want to get depends largely on the nature of your project.<span
style='letter-spacing:2.0pt'> </span>If<span style='letter-spacing:1.4pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>have<span style='letter-spacing:1.4pt'> </span>reason<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.5pt'> </span>believe<span
style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:1.4pt'> </span>your<span
style='letter-spacing:1.4pt'> </span>site<span style='letter-spacing:1.4pt'> </span>could<span
style='letter-spacing:1.5pt'> </span>be<span style='letter-spacing:1.4pt'> </span>massively<span
style='letter-spacing:1.5pt'> </span>popular, you might want to invest more
time in stress testing.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><a
name="_bookmark539"></a><span style='color:#333333'>Lets add a simple stress
test using </span><a href="https://artillery.io/"><span style='color:#070707'>Artillery</span></a><span
style='color:#333333'>. First, install Artillery by running </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm install -g
artillery</span><span style='color:#333333'>; then edit your <i>package.json </i>file
and add the following to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>scripts<span style='letter-spacing:-1.55pt'> </span></span><span
style='color:#333333'>section:</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &quot;scripts&quot;: {&#13;&#10;&quot;stress&quot;: &quot;artillery quick --count 10 -n 20 http://localhost:3000/&quot;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><span
style='color:#333333'>This will simulate 10 virtual users (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>--count 10</span><span
style='color:#333333'>), each of whom will send 20 requests (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>-n 20</span><span
style='color:#333333'>) to your server.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Make sure your application is running (in a separate
terminal window, for example) and then run </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>npm run stress</span><span
style='color:#333333'>. Youll see statistics like this:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: Started phase 0, duration: 1s @ 16:43:37(-0700) 2019-04-14&#13;&#10;Report @ 16:43:38(-0700) 2019-04-14&#13;&#10;Elapsed time: 1 second Scenarios launched:  10&#13;&#10;Scenarios completed: 10&#13;&#10;Requests completed:  200&#13;&#10;RPS sent: 147.06&#13;&#10;Request latency: min: 1.8&#13;&#10;max: 10.3&#13;&#10;median: 2.5&#13;&#10;p95: 4.2&#13;&#10;p99: 5.4&#13;&#10;Codes:&#13;&#10;200: 200&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection235>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: All virtual users finished&#13;&#10;Summary report @ 16:43:38(-0700) 2019-04-14&#13;&#10;Scenarios launched:  10&#13;&#10;Scenarios completed: 10&#13;&#10;Requests completed:  200&#13;&#10;RPS sent: 145.99&#13;&#10;Request latency: min: 1.8&#13;&#10;max: 10.3&#13;&#10;median: 2.5&#13;&#10;p95: 4.2&#13;&#10;p99: 5.4&#13;&#10;Scenario counts: 0: 10 (100%)&#13;&#10;Codes:&#13;&#10;200: 200&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This test was run on my development laptop. You can see
Express didnt take more than 10.3 milliseconds to serve any requests, and 99%
of them were<span style='letter-spacing:1.65pt'> </span>served<span
style='letter-spacing:1.75pt'> </span>in<span style='letter-spacing:1.75pt'> </span>under<span
style='letter-spacing:1.65pt'> </span>5.4<span style='letter-spacing:1.75pt'> </span>milliseconds.<span
style='letter-spacing:1.75pt'> </span>I<span style='letter-spacing:1.65pt'> </span>cant<span
style='letter-spacing:1.65pt'> </span>offer<span style='letter-spacing:1.65pt'>
</span>concrete<span style='letter-spacing:1.65pt'> </span>guidance about what
kind of numbers you should be looking for, but to ensure a snappy application,
you should be looking for total connection times under 50 milliseconds. (Dont
forget that this is just the time it takes the server to deliver the data to
the client; the client still has to render it, which takes<span
style='letter-spacing:2.0pt'> </span>time, so the less time you spend
transmitting the data, the better.)</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you stress test your application regularly and
benchmark it, youll be<span style='letter-spacing:4.0pt'> </span>able to
recognize problems. If you just finished a feature and you find that your
connection times have tripled, you might want to do some<span style='letter-spacing:
2.0pt'> </span>performance tuning on your new feature!</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark540"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I hope this chapter has given you some insight into the
things youll want to think about as you approach the launch of your
application. There is a<span style='letter-spacing:2.0pt'> </span>lot of detail
that goes into<span style='letter-spacing:1.5pt'> </span>a production<span
style='letter-spacing:1.5pt'> </span>application,<span style='letter-spacing:
1.5pt'> </span>and<span style='letter-spacing:1.5pt'> </span>while you<span
style='letter-spacing:1.5pt'> </span>cant</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection236>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>anticipate everything that might happen when you launch,
the more you can anticipate, the better off youll be. To paraphrase Louis
Pasteur, fortune favors the prepared<a name="_bookmark541"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection237>

<h1><a name="13._Persistence"></a><a name="Filesystem_Persistence"></a><a
name="_bookmark542"></a>Chapter<span style='letter-spacing:.55pt'> </span>13.<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Persistence</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark543"></a><span style='color:#333333'>All but the simplest
websites and web applications are going to require <i>persistence </i>of some
kind; that is, some way to store data thats more permanent than volatile
memory so that your data will survive server crashes, power outages, upgrades,
and relocations. In this chapter, well be discussing the options available for
persistence and demonstrating both document databases and relational databases.
Before we jump in to databases, however, well start with the most basic form
of persistence: filesystem persistence.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Filesystem<span style='letter-spacing:-.45pt'> </span><span
style='letter-spacing:-.1pt'>Persistence</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark544"></a><span style='color:#333333'>One way to achieve <a
name="_bookmark545"></a>persistence is to simply save data to so-called flat
files (<i>flat </i>because theres no inherent structure in a file; its just a
sequence of bytes). Node makes filesystem persistence possible through the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs </span><span
style='color:#333333'>(filesystem) module.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Filesystem persistence has some drawbacks. In particular,
it doesnt scale well. The minute you need more than one server to meet traffic
demands, you will run into problems with filesystem persistence, unless all of
your servers have access to a shared filesystem. Also, because flat files have
no inherent structure, the burden of locating, sorting, and filtering data will
be on your application. <a name="_bookmark547"></a>For these reasons, you
should favor databases over filesystems for storing data. <a name="_bookmark546"></a>The
one exception is storing binary files, such<span style='letter-spacing:2.0pt'> </span>as
images,<span style='letter-spacing:1.6pt'> </span>audio<span style='letter-spacing:
1.6pt'> </span>files,<span style='letter-spacing:1.6pt'> </span>or videos.<span
style='letter-spacing:1.6pt'> </span>While many<span style='letter-spacing:
1.6pt'> </span>databases can<span style='letter-spacing:1.6pt'> </span>handle
this type of data, they rarely do so more efficiently than a filesystem (though</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection238>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>information <i>about </i>the binary files is usually
stored in a database to enable searching, sorting, and filtering).</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you do need to store binary data, keep in mind that
filesystem storage still has the problem of not scaling well. If your hosting
doesnt have access to a shared filesystem (which is usually the case), you
should consider storing binary files in a database (which usually requires some
configuration so the database doesnt grind to a stop) or a cloud-based storage
service, like Amazon S3 or Microsoft Azure Storage.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have the caveats out of the way, lets look
at Nodes filesystem support. Well revisit the vacation photo contest from<span
style='letter-spacing:2.0pt'> </span></span><a href="#_bookmark355"><span
style='color:#070707'>Chapter 8</span></a><span style='color:#333333'>. In our
application file, lets fill in the handler that processes that form (<i>ch13/00-mongodb/lib/handlers.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const pathUtils = require('path')&#13;&#10;const fs = require('fs')&#13;&#10;&#13;&#10;// create directory to store vacation photos (if it doesn't already exist)&#13;&#10;const dataDir = pathUtils.resolve(  dirname, '..', 'data')&#13;&#10;const vacationPhotosDir = pathUtils.join(dataDir, 'vacation-photos') if(!fs.existsSync(dataDir)) fs.mkdirSync(dataDir) if(!fs.existsSync(vacationPhotosDir)) fs.mkdirSync(vacationPhotosDir)&#13;&#10;&#13;&#10;function saveContestEntry(contestName, email, year, month, photoPath) {&#13;&#10;// TODO...this will come later&#13;&#10;}&#13;&#10;&#13;&#10;// we'll want these promise-based versions of fs functions later&#13;&#10;const { promisify } = require('util') const mkdir = promisify(fs.mkdir) const rename = promisify(fs.rename)&#13;&#10;&#13;&#10;exports.api.vacationPhotoContest = async (req, res, fields, files) =&gt; {&#13;&#10;const photo = files.photo[0]&#13;&#10;const dir = vacationPhotosDir + '/' + Date.now()&#13;&#10;const path = dir + '/' + photo.originalFilename&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection239>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Cloud_Persistence"></a><a
name="_bookmark548"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image066.gif"
alt="Text Box: await mkdir(dir)&#13;&#10;await rename(photo.path, path) saveContestEntry('vacation-photo', fields.email,&#13;&#10;req.params.year, req.params.month, path) res.send({ result: 'success' })&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Theres a lot going on there, so lets break it down. We
first create a directory to store the uploaded files (if it doesnt already
exist). Youll probably want to add the <i>data </i>directory to your <i>.gitignore
</i>file so you dont accidentally commit uploaded files. Recall from </span><a
href="#_bookmark355"><span style='color:#070707'>Chapter 8</span></a><span
style='color:#070707'> </span><span style='color:#333333'>that were handling
the actual file upload in <i>meadowlark.js </i>and calling our handler<span
style='letter-spacing:4.0pt'> </span>with the files already decoded. What we
get is an object (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>files</span><span style='color:#333333'>) that contains<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.65pt'> </span>information<span
style='letter-spacing:1.7pt'> </span>about<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>uploaded<span style='letter-spacing:1.7pt'>
</span>files.<span style='letter-spacing:1.7pt'> </span>Since<span
style='letter-spacing:1.65pt'> </span>we<span style='letter-spacing:1.65pt'> </span>want<span
style='letter-spacing:1.65pt'> </span>to prevent<span style='letter-spacing:
1.55pt'> </span>collisions,<span style='letter-spacing:1.6pt'> </span>we<span
style='letter-spacing:1.55pt'> </span>cant<span style='letter-spacing:1.55pt'>
</span>just<span style='letter-spacing:1.55pt'> </span>use<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>filename<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>user<span
style='letter-spacing:1.55pt'> </span>uploaded<span style='letter-spacing:1.6pt'>
</span>(in case two users both upload <i>portland.jpg</i>). To avoid this
problem, we create<span style='letter-spacing:4.0pt'> </span>a unique directory
based on the timestamp; its pretty unlikely that two<span style='letter-spacing:
4.0pt'> </span>users will both upload <i>portland.jpg </i>in the same
millisecond! Then we rename (move) the uploaded file (our file processor will
have given it a temporary name, which we can get from the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>path<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>property)
to our constructed name.</span></p>

<p class=MsoBodyText><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Finally,<span style='letter-spacing:1.45pt'> </span>we
need<span style='letter-spacing:1.45pt'> </span>some way<span style='letter-spacing:
1.45pt'> </span>to<span style='letter-spacing:1.45pt'> </span>associate the
files that users upload<span style='letter-spacing:1.45pt'> </span>with their<span
style='letter-spacing:1.5pt'> </span>email<span style='letter-spacing:1.5pt'> </span>addresses<span
style='letter-spacing:1.5pt'> </span>(and<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>month<span style='letter-spacing:1.6pt'> </span>and<span
style='letter-spacing:1.6pt'> </span>year<span style='letter-spacing:1.5pt'> </span>of<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>submission).<span
style='letter-spacing:1.6pt'> </span>We could encode this information into the
file or directory names, but we are going to prefer storing this information in
a database. Since we havent learned how to do that yet, were going to
encapsulate that functionality in the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vacationPhotoContest<span style='letter-spacing:-1.4pt'> </span></span><span
style='color:#333333'>function and complete that function later in this
chapter.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image065.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection240>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="Database_Persistence"></a><a
name="_bookmark551"></a><span style='font-size:10.0pt'><img width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image067.gif"></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Even though filesystem persistence has its drawbacks,
its frequently used for intermediate file storage, and its useful to know how
to use the Node filesystem library. However, to address the deficiencies of
filesystem storage, lets turn our attention to cloud persistence<a
name="_bookmark549"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Cloud<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Persistence</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark550"></a><span style='color:#333333'>Cloud storage is becoming
increasingly popular, and I highly recommend you take advantage of one of these
inexpensive, robust services.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When using cloud services, theres a certain amount of
up-front work you have to do. Obviously, you have to create an account, but you
also have to understand how your application authenticates with the cloud
service, and its also helpful to understand some basic terminology (for
example, AWS calls its file storage mechanism <i>buckets</i>, while Azure calls
them<span style='letter-spacing:4.0pt'> </span><i>containers</i>). Its beyond
the scope of this book to detail all of that information, and it is
well-documented:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15887872'><span style='left:0px;position:absolute;left:169px;
top:-172284px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
href="https://amzn.to/2CCYk9s"><span style='color:#070707'>AWS:<span
style='letter-spacing:.45pt'> </span>Getting<span style='letter-spacing:.55pt'>
</span>Started<span style='letter-spacing:.55pt'> </span>in<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Node.js</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15888384'><span style='left:0px;position:absolute;left:169px;
top:-172312px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
href="http://bit.ly/2NEkTku"><span style='color:#070707'>Azure<span
style='letter-spacing:.55pt'> </span>for<span style='letter-spacing:.6pt'> </span>JavaScript<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.65pt'> </span>Node.js<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Developers</span></span></a></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>good<span style='letter-spacing:.55pt'> </span>news<span
style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.5pt'> </span>that<span
style='letter-spacing:.5pt'> </span>once<span style='letter-spacing:.5pt'> </span>you<span
style='letter-spacing:.55pt'> </span>get<span style='letter-spacing:.5pt'> </span>past<span
style='letter-spacing:.5pt'> </span>this<span style='letter-spacing:.5pt'> </span>initial<span
style='letter-spacing:.5pt'> </span>configuration,<span style='letter-spacing:
.55pt'> </span><span style='letter-spacing:-.1pt'>using</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection241>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>cloud persistence is quite easy. <a name="_bookmark552"></a>Heres
an example of how easy it is to save<span style='letter-spacing:4.0pt'> </span>a
file to an Amazon S3 account:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const filename = 'customerUpload.jpg'&#13;&#10;&#13;&#10;s3.putObject({ Bucket: 'uploads', Key: filename,&#13;&#10;Body: fs.readFileSync(  dirname + '/tmp/ + filename),&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>See<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.55pt'> </span></span><a
href="https://amzn.to/2O3e1MA"><span style='color:#070707'>AWS<span
style='letter-spacing:.6pt'> </span>SDK<span style='letter-spacing:.55pt'> </span>documentation</span></a><span
style='color:#070707;letter-spacing:.65pt'> </span><span style='color:#333333'>for<span
style='letter-spacing:.55pt'> </span>more<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>information.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark553"></a><span
style='color:#333333'>Heres<span style='letter-spacing:.45pt'> </span>an<span
style='letter-spacing:.5pt'> </span>example<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.5pt'> </span>how<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.5pt'> </span>do<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span>same<span style='letter-spacing:.45pt'> </span>thing<span
style='letter-spacing:.5pt'> </span>with<span style='letter-spacing:.55pt'> </span>Microsoft<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Azure:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const filename = 'customerUpload.jpg'&#13;&#10;&#13;&#10;const blobService = azure.createBlobService() blobService.createBlockBlobFromFile('uploads', filename,   dirname +&#13;&#10;'/tmp/' + filename)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>See<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.6pt'> </span></span><a
href="http://bit.ly/2Kd3rRK"><span style='color:#070707'>Microsoft<span
style='letter-spacing:.65pt'> </span>Azure<span style='letter-spacing:.6pt'> </span>documentation</span></a><span
style='color:#070707;letter-spacing:.7pt'> </span><span style='color:#333333'>for<span
style='letter-spacing:.6pt'> </span>more<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>information.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we know a couple of techniques for file storage,
lets consider the storage of structured data with databases.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Database<span style='letter-spacing:-.35pt'> </span><span
style='letter-spacing:-.1pt'>Persistence</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark554"></a><span style='color:#333333'>All except the simplest
websites and web applications require a database. Even<span style='letter-spacing:
1.3pt'> </span>if<span style='letter-spacing:1.25pt'> </span>the<span
style='letter-spacing:1.25pt'> </span>bulk<span style='letter-spacing:1.3pt'> </span>of<span
style='letter-spacing:1.25pt'> </span>your<span style='letter-spacing:1.25pt'> </span>data<span
style='letter-spacing:1.25pt'> </span>is<span style='letter-spacing:1.25pt'> </span>binary<span
style='letter-spacing:1.3pt'> </span>and<span style='letter-spacing:1.3pt'> </span>youre<span
style='letter-spacing:1.25pt'> </span>using<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.25pt'> </span>shared filesystem or cloud storage, the
chances are youll want a database to help catalog that binary data.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><a name="_bookmark555"></a><span
style='font-size:14.0pt;color:#333333'>Traditionally,<span style='letter-spacing:
.7pt'> </span>the<span style='letter-spacing:.65pt'> </span>word<span
style='letter-spacing:.75pt'> </span><i>database<span style='letter-spacing:
.65pt'> </span></i>is<span style='letter-spacing:.65pt'> </span>shorthand<span
style='letter-spacing:.75pt'> </span>for<span style='letter-spacing:.65pt'> </span><i>relational<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>database</span></i></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection242>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Abstracting_the_Database_Layer"></a><a name="_bookmark558"></a><i><span
style='color:#333333'>management system </span></i><span style='color:#333333'>(RDBMS).
Relational databases, such as Oracle, MySQL, PostgreSQL, or SQL Server, are
based on decades of research and formal database theory. It is a technology
that is quite mature at this point, and the power of these databases is
unquestionable. However, we now have the luxury of expanding our ideas of what
constitutes a database. <a name="_bookmark556"></a>NoSQL databases have come
into vogue in recent years, and theyre challenging the status quo of internet
data storage.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It would be foolish to claim that NoSQL databases are somehow
better than relational databases, but they do have certain advantages (and vice
versa). While it is quite easy to integrate a relational database with Node
apps, there are NoSQL databases that seem almost to have been designed for
Node.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark557"></a><span style='color:#333333'>The two most popular types
of NoSQL databases are <i>document databases </i>and <i>key-value </i>databases.
Document databases excel at storing objects, which makes them a natural fit for
Node and JavaScript. Key-value databases,<span style='letter-spacing:1.55pt'> </span>as<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>name<span
style='letter-spacing:1.45pt'> </span>implies,<span style='letter-spacing:1.55pt'>
</span>are<span style='letter-spacing:1.45pt'> </span>extremely<span
style='letter-spacing:1.55pt'> </span>simple<span style='letter-spacing:1.45pt'>
</span>and<span style='letter-spacing:1.55pt'> </span>are<span
style='letter-spacing:1.45pt'> </span>a<span style='letter-spacing:1.45pt'> </span>great
choice for applications with data schemas that are easily mapped into key-
value pairs.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I feel that document databases represent the optimal
compromise between the constraints of relational databases and the simplicity
of key-value databases, and for that reason, we will be using a document
database for<span style='letter-spacing:2.0pt'> </span>our first example.
MongoDB is the leading document database and is<span style='letter-spacing:
2.0pt'> </span>robust and established at this point.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For our second example, well be using PostgreSQL, a
popular and robust open source RDBMS.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>A<span style='letter-spacing:-.15pt'> </span>Note<span
style='letter-spacing:-.1pt'> </span>on<span style='letter-spacing:-.05pt'> </span><span
style='letter-spacing:-.1pt'>Performance</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection243>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="A_Note_on_Performance"></a><a name="_bookmark559"></a><a
name="_bookmark560"></a><span style='color:#333333'>The simplicity of NoSQL
databases is a double-edged sword. Carefully planning a relational database can
be an involved task, but the benefit of<span style='letter-spacing:4.0pt'> </span>that
careful planning is a database that offers excellent performance. Dont be fooled
into thinking that because NoSQL databases are generally<span style='letter-spacing:
4.0pt'> </span>simpler, there isnt an art and a science to tuning them for
maximum <span style='letter-spacing:-.1pt'>performance.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Relational databases have traditionally relied on their
rigid data structures and decades of optimization research to achieve high
performance.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:72.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>NoSQL databases, on the other hand, have embraced the
distributed nature of<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>internet<span style='letter-spacing:1.55pt'>
</span>and,<span style='letter-spacing:1.6pt'> </span>like<span
style='letter-spacing:1.55pt'> </span>Node,<span style='letter-spacing:1.6pt'> </span>have<span
style='letter-spacing:1.55pt'> </span>instead<span style='letter-spacing:1.6pt'>
</span>focused<span style='letter-spacing:1.6pt'> </span>on<span
style='letter-spacing:1.6pt'> </span>concurrency<span style='letter-spacing:
1.6pt'> </span>to scale<span style='letter-spacing:1.95pt'> </span>performance<span
style='letter-spacing:1.95pt'> </span>(relational<span style='letter-spacing:
1.95pt'> </span>databases<span style='letter-spacing:1.95pt'> </span>also<span
style='letter-spacing:2.0pt'> </span>support<span style='letter-spacing:1.95pt'>
</span>concurrency,<span style='letter-spacing:2.0pt'> </span>but<span
style='letter-spacing:1.95pt'> </span>this is usually reserved for the most
demanding applications).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Planning for database performance and scalability is a
large, complex topic that is beyond the scope of this book. If your application
requires a high level of database performance, I recommend starting with
Kristina Chodorow and Michael Dirolfs </span><a
href="http://bit.ly/Mongo_DB_Guide"><i><span style='color:#070707'>MongoDB: The
Definitive Guide</span></i></a><i><span style='color:#070707'> </span></i><span
style='color:#333333;letter-spacing:-.1pt'>(OReilly).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Abstracting<span style='letter-spacing:-.3pt'> </span>the<span
style='letter-spacing:-.35pt'> </span>Database<span style='letter-spacing:-.3pt'>
</span><span style='letter-spacing:-.1pt'>Layer</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:72.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark561"></a><span style='color:#333333'>In this book, well be
implementing the same features and demonstrating how to do that with two
databases (and not just two databases but two substantially different database
architectures). While the objective in this book is to cover two popular
options for database architecture, it reflects a real-world scenario: switching
a major component of your web application midproject. This could happen for
many reasons. Usually it boils down to discovering<span style='letter-spacing:
1.8pt'> </span>that<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>different<span style='letter-spacing:1.7pt'>
</span>technology<span style='letter-spacing:1.8pt'> </span>is<span
style='letter-spacing:1.7pt'> </span>going<span style='letter-spacing:1.8pt'> </span>to<span
style='letter-spacing:1.8pt'> </span>be<span style='letter-spacing:1.7pt'> </span>more<span
style='letter-spacing:1.7pt'> </span>cost-effective or allow you to implement
necessary features more quickly.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection244>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whenever possible, there is value in <i>abstracting </i>your
technology choices, which<span style='letter-spacing:1.5pt'> </span>refers to<span
style='letter-spacing:1.5pt'> </span>writing<span style='letter-spacing:1.5pt'>
</span>some kind<span style='letter-spacing:1.5pt'> </span>of API layer to<span
style='letter-spacing:1.5pt'> </span>generalize the underlying technology
choices. If done right, it reduces the cost of switching out the component in
question. However, it comes at a cost: writing the abstraction layer is one
more thing you have to write and <span style='letter-spacing:-.1pt'>maintain.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Happily, our abstraction layer will be very small, as
were supporting only<span style='letter-spacing:4.0pt'> </span>a handful of
features for the purposes of this book. For now, the features<span
style='letter-spacing:2.0pt'> </span>will be as follows:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15890432'><span style='left:0px;position:absolute;left:169px;
top:-175387px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Returning<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.5pt'> </span>list<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.5pt'> </span>active<span style='letter-spacing:.45pt'> </span>vacations<span
style='letter-spacing:.5pt'> </span>from<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>database</span></span></p>

<p class=MsoBodyText style='margin-top:11.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15890944'><span style='left:0px;position:absolute;
left:169px;top:-175416px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Storing the email address of users who want to be
notified when certain vacations are in season</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:77.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While this seems simple enough, there are a lot of
details here. What does<span style='letter-spacing:4.0pt'> </span>a vacation
look like? Do we always want to get all the vacations from the database,<span
style='letter-spacing:1.3pt'> </span>or<span style='letter-spacing:1.2pt'> </span>do<span
style='letter-spacing:1.3pt'> </span>we<span style='letter-spacing:1.2pt'> </span>want<span
style='letter-spacing:1.2pt'> </span>to<span style='letter-spacing:1.3pt'> </span>be<span
style='letter-spacing:1.2pt'> </span>able<span style='letter-spacing:1.2pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>filter<span style='letter-spacing:1.2pt'> </span>them<span
style='letter-spacing:1.2pt'> </span>or<span style='letter-spacing:1.2pt'> </span>paginate<span
style='letter-spacing:1.2pt'> </span>them?<span style='letter-spacing:1.2pt'> </span>How
do we identify vacations? And so on.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Were going to keep our abstraction layer simple for the
purposes of this book. Well contain it in a file called <i>db.js </i>that will
export two methods that well start by just providing dummy implementations:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = {&#13;&#10;getVacations: async (options = {}) =&gt; {&#13;&#10;// let's fake some vacation data:&#13;&#10;const vacations = [&#13;&#10;{&#13;&#10;name: 'Hood River Day Trip', slug: 'hood-river-day-trip', category: 'Day Trip',&#13;&#10;sku: 'HR199',&#13;&#10;description: 'Spend a day sailing on the Columbia and ' +&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection245>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: 'enjoying craft beers in Hood River!', location: {&#13;&#10;// we'll use this for geocoding later in the book&#13;&#10;search: 'Hood River, Oregon, USA',&#13;&#10;},&#13;&#10;price: 99.95,&#13;&#10;tags: ['day trip', 'hood river', 'sailing', 'windsurfing', 'breweries'],&#13;&#10;inSeason: true, maximumGuests: 16, available: true, packagesSold: 0,&#13;&#10;}&#13;&#10;]&#13;&#10;// if the &quot;available&quot; option is specified, return only vacations that match&#13;&#10;if(options.available !== undefined)&#13;&#10;return vacations.filter(({ available }) =&gt; available === options.available)&#13;&#10;return vacations&#13;&#10;},&#13;&#10;addVacationInSeasonListener: async (email, sku) =&gt; {&#13;&#10;// we'll just pretend we did this...since this is&#13;&#10;// an async function, a new promise will automatically&#13;&#10;// be returned that simply resolves to undefined&#13;&#10;},&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:72.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This sets an expectation about how our database
implementation should<span style='letter-spacing:4.0pt'> </span>look to the
applicationand all we have to do is make our databases conform to that
interface. Note that were introducing the concept of vacation availability;
were doing this so we can easily disable vacations temporarily instead of
deleting them from the database. An example use<span style='letter-spacing:
2.0pt'> </span>case<span style='letter-spacing:1.2pt'> </span>for<span
style='letter-spacing:1.2pt'> </span>this<span style='letter-spacing:1.2pt'> </span>would<span
style='letter-spacing:1.25pt'> </span>be<span style='letter-spacing:1.2pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>bed<span style='letter-spacing:1.25pt'> </span>and<span
style='letter-spacing:1.25pt'> </span>breakfast<span style='letter-spacing:
1.2pt'> </span>that<span style='letter-spacing:1.2pt'> </span>contacts<span
style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.25pt'> </span>let<span style='letter-spacing:1.2pt'> </span>you
know<span style='letter-spacing:1.7pt'> </span>they<span style='letter-spacing:
1.8pt'> </span>are<span style='letter-spacing:1.7pt'> </span>closed<span
style='letter-spacing:1.8pt'> </span>for<span style='letter-spacing:1.7pt'> </span>several<span
style='letter-spacing:1.7pt'> </span>months<span style='letter-spacing:1.7pt'> </span>for<span
style='letter-spacing:1.7pt'> </span>remodeling.<span style='letter-spacing:
1.8pt'> </span>Were<span style='letter-spacing:1.7pt'> </span>keeping this<span
style='letter-spacing:1.45pt'> </span>separate<span style='letter-spacing:1.45pt'>
</span>from<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>concept<span style='letter-spacing:1.45pt'>
</span>of<span style='letter-spacing:1.45pt'> </span>being<span
style='letter-spacing:1.5pt'> </span>in<span style='letter-spacing:1.5pt'> </span>season<span
style='letter-spacing:1.45pt'> </span>because<span style='letter-spacing:1.45pt'>
</span>we<span style='letter-spacing:1.45pt'> </span>may<span style='letter-spacing:
1.5pt'> </span>want to<span style='letter-spacing:1.6pt'> </span>list<span
style='letter-spacing:1.55pt'> </span>out-of-season<span style='letter-spacing:
1.6pt'> </span>vacations<span style='letter-spacing:1.55pt'> </span>on<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>website<span
style='letter-spacing:1.55pt'> </span>because<span style='letter-spacing:1.55pt'>
</span>people<span style='letter-spacing:1.55pt'> </span>like<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>plan
in advance.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection246>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We also include some very generic location information;
well be getting more specific about this in </span><a href="#_bookmark828"><span
style='color:#070707'>Chapter 19</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have an abstraction foundation for our
database layer, lets look at how we can implement database storage with
MongoDB<a name="_bookmark562"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Setting_Up_MongoDB"></a><a name="_bookmark563"></a><span
style='color:#3F3F3F'>Setting<span style='letter-spacing:-.15pt'> </span>Up<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>MongoDB</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark564"></a><span style='color:#333333'>The difficulty involved in
setting up a MongoDB instance varies with your operating<span style='letter-spacing:
1.85pt'> </span>system.<span style='letter-spacing:1.85pt'> </span><a
name="_bookmark565"></a>For<span style='letter-spacing:1.8pt'> </span>this<span
style='letter-spacing:1.8pt'> </span>reason,<span style='letter-spacing:1.85pt'>
</span>well<span style='letter-spacing:1.8pt'> </span>be<span
style='letter-spacing:1.8pt'> </span>avoiding<span style='letter-spacing:1.85pt'>
</span>the<span style='letter-spacing:1.8pt'> </span>problem altogether by
using an excellent free MongoDB hosting service, mLab.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image029.gif"
  alt="Text Box: NOTE&#13;&#10;mLab is not the only MongoDB service available. The MongoDB company itself is now offering free and low-cost database hosting through its product MongoDB Atlas. Free accounts are not recommended for production purposes, though. Both mLab and MongoDB Atlas offer production-ready accounts, so you should look into their pricing before making a choice. It will be less hassle to stay with the same hosting service when you make the switch to production.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:80.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Getting started with mLab is simple. Just go to </span><a
href="https://mlab.com/"><i><span style='color:#070707'>https://mlab.com</span></i></a><i><span
style='color:#070707'> </span></i><span style='color:#333333'>and click Sign
Up. Fill out the registration form and log in, and youll be at your<span
style='letter-spacing:2.0pt'> </span>home<span style='letter-spacing:1.65pt'> </span>screen.<span
style='letter-spacing:1.75pt'> </span>Under<span style='letter-spacing:1.65pt'>
</span>Databases,<span style='letter-spacing:1.75pt'> </span>youll<span
style='letter-spacing:1.65pt'> </span>see<span style='letter-spacing:1.65pt'> </span>no<span
style='letter-spacing:1.75pt'> </span>databases<span style='letter-spacing:
1.65pt'> </span>at<span style='letter-spacing:1.65pt'> </span>this<span
style='letter-spacing:1.65pt'> </span>time. Click Create new, and you will
be taken to a page with some options for your new database. The first thing
youll select is a cloud provider. For a free (sandbox) account, the choice is
largely irrelevant, though you should look for a data center near you (not
every data center will offer sandbox accounts, however). Select SANDBOX, and
choose a region. Then choose<span style='letter-spacing:4.0pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>database<span style='letter-spacing:1.4pt'>
</span>name,<span style='letter-spacing:1.45pt'> </span>and<span
style='letter-spacing:1.45pt'> </span>click<span style='letter-spacing:1.45pt'>
</span>through<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>Submit<span style='letter-spacing:1.4pt'>
</span>Order<span style='letter-spacing:1.4pt'> </span>(its<span
style='letter-spacing:1.4pt'> </span>still<span style='letter-spacing:1.4pt'> </span>an<span
style='letter-spacing:1.45pt'> </span>order even<span style='letter-spacing:
1.3pt'> </span>though<span style='letter-spacing:1.3pt'> </span>its<span
style='letter-spacing:1.25pt'> </span>free!).<span style='letter-spacing:1.3pt'>
</span>You<span style='letter-spacing:1.3pt'> </span>will<span
style='letter-spacing:1.25pt'> </span>be<span style='letter-spacing:1.25pt'> </span>taken<span
style='letter-spacing:1.3pt'> </span>back<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.25pt'> </span>list<span
style='letter-spacing:1.25pt'> </span>of<span style='letter-spacing:1.25pt'> </span>your
databases,<span style='letter-spacing:.85pt'> </span>and<span style='letter-spacing:
.85pt'> </span>after a few seconds,<span style='letter-spacing:.85pt'> </span>your
database will be available for use.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection247>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:83.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Having a database set up is half the battle.
Now we have to know how to access it with Node, and thats where Mongoose comes
in.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name=Mongoose></a><a name="_bookmark567"></a><span style='color:#3F3F3F;
letter-spacing:-.1pt'>Mongoose</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:81.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark568"></a><span style='color:#333333'>While theres a
low-level driver available for </span><a href="http://bit.ly/2Kfw0hE"><span
style='color:#070707'>MongoDB</span></a><span style='color:#333333'>, youll
probably want to use an object document mapper (ODM). The most popular ODM for
MongoDB is <i>Mongoose</i>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>One of the advantages of JavaScript is that its object
model is extremely flexible. If you want to add a property or method to an
object, you just do it, and you dont need to worry about modifying a class.
Unfortunately,<span style='letter-spacing:2.0pt'> </span>that kind of
freewheeling flexibility can have a negative impact on your databases because
they can become fragmented and hard to optimize.</span></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Mongoose attempts to strike a balance by introducing <i>schemas
</i>and <i>models </i>(combined, schemas and models are similar to classes in
traditional object- oriented programming). The schemas are flexible but still
provide some necessary structure for your database.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Before<span
style='letter-spacing:.45pt'> </span>we<span style='letter-spacing:.5pt'> </span>get<span
style='letter-spacing:.5pt'> </span>started,<span style='letter-spacing:.55pt'>
</span>well<span style='letter-spacing:.5pt'> </span>need<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.55pt'> </span>install<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.5pt'> </span>Mongoose<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>module:</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:.65pt'> </span>install<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>mongoose</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Then<span
style='letter-spacing:.55pt'> </span>well<span style='letter-spacing:.5pt'> </span>add<span
style='letter-spacing:.6pt'> </span>our<span style='letter-spacing:.5pt'> </span>database<span
style='letter-spacing:.5pt'> </span>credentials<span style='letter-spacing:
.55pt'> </span>to<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>our</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>.credentials.development.json<span style='letter-spacing:2.55pt'>
</span></span></i><span style='font-size:14.0pt;color:#333333;letter-spacing:
-.1pt'>file:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &quot;mongo&quot;: {&#13;&#10;&quot;connectionString&quot;: &quot;your_dev_connection_string&quot;&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Youll find your connection string on the database page
in mLab. From your<span style='letter-spacing:.5pt'> </span>home<span
style='letter-spacing:.55pt'> </span>screen,<span style='letter-spacing:.6pt'> </span>click<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.55pt'> </span>appropriate<span
style='letter-spacing:.55pt'> </span>database.<span style='letter-spacing:.6pt'>
</span>Youll<span style='letter-spacing:.5pt'> </span>see<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.55pt'> </span>box<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>with</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection248>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:86.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="Creating_Schemas_and_Models"></a><a name="_bookmark571"></a><span
style='color:#333333'>your MongoDB connection URI (it starts with <i>mongodb://</i>).
Youll also need a user for your database. To create one, click Users, and then
Add database user.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Notice that we could establish a second set of
credentials for production by creating a <i>.credentials.production.js </i>file
and using </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>NODE_ENV=production</span><span
style='color:#333333'>; youll want to do this when its time to go live!</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have all the configuration done, lets actually
make a connection to the database and do something useful!</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Database_Connections_with_Mongoose"></a><a name="_bookmark569"></a><span
style='color:#3F3F3F'>Database<span style='letter-spacing:-.35pt'> </span>Connections<span
style='letter-spacing:-.35pt'> </span>with<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Mongoose</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark570"></a><span style='color:#333333'>Well start by creating a
connection to our database. Well put our database initialization code in <i>db.js</i>,
along with the dummy API we created earlier (<i>ch13/00-mongodb/db.js </i>in
the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const mongoose = require('mongoose')&#13;&#10;const { connectionString } = credentials.mongo&#13;&#10;if(!connectionString) {&#13;&#10;console.error('MongoDB connection string missing!') process.exit(1)&#13;&#10;}&#13;&#10;mongoose.connect(connectionString) const db = mongoose.connection db.on('error' err =&gt; {&#13;&#10;console.error('MongoDB error: ' + err.message) process.exit(1)&#13;&#10;})&#13;&#10;db.once('open', () =&gt; console.log('MongoDB connection established'))&#13;&#10;&#13;&#10;module.exports = { getVacations: async () =&gt; {&#13;&#10;//...return fake vacation data&#13;&#10;},&#13;&#10;addVacationInSeasonListener: async (email, sku) =&gt; {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection249>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: //...do nothing&#13;&#10;},&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Any file that needs to access the database can simply
import <i>db.js</i>. However, we want the initialization to happen right away,
before we need the API, so well go ahead and import this from <i>meadowlark.js
</i>(where we dont need to do anything with the API):</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'./db'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that were connecting to the database, its time to
consider how were going to structure data that were transferring to and from
the <span style='letter-spacing:-.1pt'>database.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Creating<span style='letter-spacing:-.25pt'> </span>Schemas<span
style='letter-spacing:-.3pt'> </span>and<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Models</span></span></h3>

<p class=MsoNormal style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark572"></a><span style='font-size:14.0pt;line-height:133%;
color:#333333'>Lets create a vacation package database for Meadowlark Travel.
We start by defining a schema and creating a model from it. Create the file <i>models/vacation.js
</i>(<i>ch13/00-mongodb/models/vacation.js </i>in<span style='letter-spacing:
2.0pt'> </span>the<span style='letter-spacing:4.0pt'> </span>companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const mongoose = require('mongoose')&#13;&#10;&#13;&#10;const vacationSchema = mongoose.Schema({ name: String,&#13;&#10;slug: String, category: String, sku: String, description: String, location: {&#13;&#10;search: String, coordinates: { lat: Number, lng: Number,&#13;&#10;},&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection250>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Seeding_Initial_Data"></a><a
name="_bookmark574"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: },&#13;&#10;price: Number, tags: [String], inSeason: Boolean, available: Boolean,&#13;&#10;requiresWaiver: Boolean, maximumGuests: Number, notes: String, packagesSold: Number,&#13;&#10;})&#13;&#10;&#13;&#10;const Vacation = mongoose.model('Vacation', vacationSchema) module.exports = Vacation&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>This code declares the properties that make up our
vacation model, and the types of those properties. Youll see there are several
string properties,<span style='letter-spacing:4.0pt'> </span>some numeric
properties, two Boolean properties, and an array of strings (denoted by </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>[String]</span><span
style='color:#333333'>). At this point, we can also define methods on our
schema. Each product has a stock keeping unit (SKU); even though we<span
style='letter-spacing:4.0pt'> </span>dont think about vacations being stock
items, the concept of an SKU is pretty<span style='letter-spacing:1.95pt'> </span>standard<span
style='letter-spacing:1.95pt'> </span>for<span style='letter-spacing:1.9pt'> </span>accounting,<span
style='letter-spacing:1.95pt'> </span>even<span style='letter-spacing:1.95pt'> </span>when<span
style='letter-spacing:1.95pt'> </span>tangible<span style='letter-spacing:1.9pt'>
</span>goods<span style='letter-spacing:1.9pt'> </span>arent<span
style='letter-spacing:1.9pt'> </span>being <span style='letter-spacing:-.1pt'>sold.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Once we have the schema, we create a model using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>mongoose.model</span><span
style='color:#333333'>: at<span style='letter-spacing:4.0pt'> </span>this
point, </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacation<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>is
very much like a class in traditional object-oriented programming. Note that we
have to define our methods before we create<span style='letter-spacing:4.0pt'> </span>our
model.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image036.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection251>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image067.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>We are exporting the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>Vacation<span style='letter-spacing:
-2.55pt'> </span></span><span style='color:#333333'>model object created by
Mongoose. While we could use this model directly, that would be undermining our
effort to provide a database abstraction layer. So we will choose to import it
only from the <i>db.js </i>file and let the rest of our application use its
methods. Add<span style='letter-spacing:4.0pt'> </span>the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacation<span
style='letter-spacing:-.6pt'> </span></span><span style='color:#333333'>model
to <i>db.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>&nbsp;</p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.6pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>Vacation<span style='letter-spacing:.65pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.65pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'./models/vacation'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>All of our structures are now defined, but our database
isnt very interesting because theres nothing actually in it. Lets make it
useful by seeding it with some data.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Seeding<span style='letter-spacing:-.35pt'> </span>Initial<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark575"></a><span style='color:#333333'>We dont yet have any
vacation packages in our database, so well add some to get us started.
Eventually, you may want to create a way to<span style='letter-spacing:4.0pt'> </span>manage
products, but for the purposes of this book, were just going to do<span
style='letter-spacing:4.0pt'> </span>it in code (<i>ch13/00-mongodb/db.js </i>in
the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: Vacation.find((err, vacations) =&gt; { if(err) return console.error(err) if(vacations.length) return&#13;&#10;&#13;&#10;new Vacation({&#13;&#10;name: 'Hood River Day Trip', slug: 'hood-river-day-trip', category: 'Day Trip',&#13;&#10;sku: 'HR199',&#13;&#10;description: 'Spend a day sailing on the Columbia and ' + 'enjoying craft beers in Hood River!',&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection252>

<p class=MsoNormal style='margin-top:2.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:91.0pt;margin-bottom:.0001pt'><a name="Retrieving_Data"></a><a
name="_bookmark576"></a><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>location</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>:<span style='letter-spacing:1.05pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.5pt'>{</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:101.8pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>search</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:.8pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>'Hood<span
style='letter-spacing:.8pt'> </span>River,<span style='letter-spacing:.8pt'> </span>Oregon,<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>USA'</span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.25pt'>},</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:91.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>price</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#FF6600;letter-spacing:-.1pt'>99.95</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>tags</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>[<span
style='color:#CC3300'>'day trip'</span>, <span style='color:#CC3300'>'hood
river'</span>, <span style='color:#CC3300'>'sailing'</span>, <span
style='color:#CC3300'>'windsurfing'</span>, <span style='color:#CC3300'>'breweries'</span>],
<span style='color:#000087'>inSeason</span><span style='color:#545454'>: </span><b><span
style='color:#006699'>true</span></b>,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:366.2pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>maximumGuests</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600'>16</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif'>, <span style='color:#000087'>available</span><span
style='color:#545454'>: </span><b><span style='color:#006699'>true</span></b>, <span
style='color:#000087'>packagesSold</span><span style='color:#545454'>: </span><span
style='color:#FF6600'>0</span>,</span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.9pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>}).<span style='color:#000087'>save</span>()</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:80.15pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>new<span style='letter-spacing:
.45pt'> </span></span></b><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt'>Vacation</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>({</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>name</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Oregon Coast Getaway'</span><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif'>, <span
style='color:#000087'>slug</span><span style='color:#545454'>: </span><span
style='color:#CC3300'>'oregon-coast-getaway'</span>, <span style='color:#000087'>category</span><span
style='color:#545454'>: </span><span style='color:#CC3300'>'Weekend Getaway'</span>,
<span style='color:#000087'>sku</span><span style='color:#545454'>: </span><span
style='color:#CC3300'>'OC39'</span>,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:103.55pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>description</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Enjoy the ocean air and quaint coastal towns!'</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>,
<span style='color:#000087'>location</span><span style='color:#545454'>: </span>{</span></p>

<p class=MsoNormal style='margin-left:101.8pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087'>search</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:.85pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>'Cannon<span
style='letter-spacing:.85pt'> </span>Beach,<span style='letter-spacing:.85pt'> </span>Oregon,<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>USA'</span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.25pt'>},</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:91.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>price</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#FF6600;letter-spacing:-.1pt'>269.95</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>tags</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>[<span
style='color:#CC3300'>'weekend getaway'</span>, <span style='color:#CC3300'>'oregon
coast'</span>, <span style='color:#CC3300'>'beachcombing'</span>], <span
style='color:#000087'>inSeason</span><span style='color:#545454'>: </span><b><span
style='color:#006699'>false</span></b>,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:366.2pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>maximumGuests</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600'>8</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif'>, <span style='color:#000087'>available</span><span
style='color:#545454'>: </span><b><span style='color:#006699'>true</span></b>, <span
style='color:#000087'>packagesSold</span><span style='color:#545454'>: </span><span
style='color:#FF6600'>0</span>,</span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.9pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>}).<span style='color:#000087'>save</span>()</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:80.15pt;text-align:justify'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699'>new<span
style='letter-spacing:.45pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt'>Vacation</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>({</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:294.15pt;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt;text-align:justify;line-height:
121%'><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>name</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Rock Climbing in Bend'</span><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif'>, <span
style='color:#000087'>slug</span><span style='color:#545454'>: </span><span
style='color:#CC3300'>'rock-climbing-in-bend'</span>, <span style='color:#000087'>category</span><span
style='color:#545454'>: </span><span style='color:#CC3300'>'Adventure'</span>,</span></p>

<p class=MsoNormal style='margin-left:101.8pt;text-align:justify;line-height:
12.9pt'><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>sku</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>:<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
letter-spacing:-.1pt'>'B99'</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:83.55pt;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt;text-align:justify;line-height:
121%'><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>description</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Experience the thrill of climbing in the high desert.'</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>,
<span style='color:#000087'>location</span><span style='color:#545454'>: </span>{</span></p>

<p class=MsoNormal style='margin-left:112.55pt;text-align:justify;line-height:
12.95pt'><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>search</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>:<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>'Bend,<span
style='letter-spacing:.85pt'> </span>Oregon,<span style='letter-spacing:.85pt'>
</span><span style='letter-spacing:-.1pt'>USA'</span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:101.8pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.25pt'>},</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>price</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#FF6600;letter-spacing:-.1pt'>289.95</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:101.8pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>tags</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>: </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>[<span
style='color:#CC3300'>'weekend getaway'</span>, <span style='color:#CC3300'>'bend'</span>,
<span style='color:#CC3300'>'high desert'</span>, <span style='color:#CC3300'>'rock
climbing'</span>], <span style='color:#000087'>inSeason</span><span
style='color:#545454'>: </span><b><span style='color:#006699'>true</span></b>,</span></p>

<p class=MsoNormal style='margin-left:101.8pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087'>requiresWaiver</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454'>:<span
style='letter-spacing:1.7pt'> </span></span><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699;letter-spacing:-.1pt'>true</span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection253>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt;
font-family:"BIZ UDGothic",sans-serif'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: maximumGuests: 4, available: false, packagesSold: 0,&#13;&#10;notes: 'The tour guide is currently recovering from a skiing&#13;&#10;accident.',&#13;&#10;}).save()&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:11.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>There are two Mongoose methods being used here. <a
name="_bookmark577"></a>The first, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>find</span><span style='color:#333333'>, does<span
style='letter-spacing:4.0pt'> </span>just what it says. In this case, its
finding all instances of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacation<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>in the database and invoking the callback with that list.
Were doing that because we dont want to keep re-adding our seed vacations: if
there are already vacations in the database, its been seeded, and we can go on
our merry<span style='letter-spacing:4.0pt'> </span>way.<span style='letter-spacing:
1.45pt'> </span>The<span style='letter-spacing:1.4pt'> </span>first<span
style='letter-spacing:1.4pt'> </span>time<span style='letter-spacing:1.4pt'> </span>this<span
style='letter-spacing:1.4pt'> </span>executes,<span style='letter-spacing:1.45pt'>
</span>though,<span style='letter-spacing:1.4pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>find<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>will<span
style='letter-spacing:1.4pt'> </span>return<span style='letter-spacing:1.45pt'>
</span>an<span style='letter-spacing:1.45pt'> </span>empty<span
style='letter-spacing:1.45pt'> </span>list, so we proceed to create two
vacations <a name="_bookmark578"></a>and then call the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>save<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>method
on them, which saves these new objects to the database.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.35pt'> </span>that<span style='letter-spacing:.35pt'> </span>data<span
style='letter-spacing:.35pt'> </span>is<span style='letter-spacing:.35pt'> </span><i>in<span
style='letter-spacing:.45pt'> </span></i>the<span style='letter-spacing:.35pt'>
</span>database,<span style='letter-spacing:.4pt'> </span>its<span
style='letter-spacing:.35pt'> </span>time<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.4pt'> </span>get<span style='letter-spacing:.35pt'> </span>it<span
style='letter-spacing:.35pt'> </span>back<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>out<a name="_bookmark579"></a>!</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:21.0pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Retrieving<span
style='letter-spacing:-.4pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></h3>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:71.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><a name="_bookmark580"></a><span style='color:#333333'>Weve already seen
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>find<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>method,
which is what well use to display a list of vacations. However, this time
were going to pass an option to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>find </span><span style='color:#333333'>that will filter the
data. Specifically, we want to display only vacations that are currently
available.</span></p>

<p class=MsoBodyText><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt;text-align:justify'><span
style='font-size:14.0pt;color:#333333'>Create<span style='letter-spacing:.45pt'>
</span>a<span style='letter-spacing:.45pt'> </span>view<span style='letter-spacing:
.5pt'> </span>for<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.45pt'> </span>products<span style='letter-spacing:.5pt'>
</span>page,<span style='letter-spacing:.45pt'> </span><i><span
style='letter-spacing:-.1pt'>views/vacations.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &lt;h1&gt;Vacations&lt;/h1&gt;&#13;&#10;{{#each vacations}}&#13;&#10;&lt;div class=&quot;vacation&quot;&gt;&#13;&#10;&lt;h3&gt;{{name}}&lt;/h3&gt;&#13;&#10;&lt;p&gt;{{description}}&lt;/p&gt;&#13;&#10;{{#if inSeason}}&#13;&#10;&lt;span class=&quot;price&quot;&gt;{{price}}&lt;/span&gt;&#13;&#10;&lt;a href=&quot;/cart/add?sku={{sku}}&quot; class=&quot;btn btn-default&quot;&gt;Buy Now!&lt;/a&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection254>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: {{else}}&#13;&#10;&lt;span class=&quot;outOfSeason&quot;&gt;We're sorry, this vacation is currently not in season.&#13;&#10;{{! The &quot;notify me when this vacation is in season&quot; page will be our next task. }}&#13;&#10;&lt;a href=&quot;/notify-me-when-in-season?sku={{sku}}&quot;&gt;Notify me when this vacation is in season.&lt;/a&gt;&#13;&#10;{{/if}}&#13;&#10;&lt;/div&gt;&#13;&#10;{{/each}}&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Now<span style='letter-spacing:.4pt'> </span>we<span
style='letter-spacing:.4pt'> </span>can<span style='letter-spacing:.5pt'> </span>create<span
style='letter-spacing:.4pt'> </span>route<span style='letter-spacing:.4pt'> </span>handlers<span
style='letter-spacing:.4pt'> </span>that<span style='letter-spacing:.45pt'> </span>hook<span
style='letter-spacing:.45pt'> </span>it<span style='letter-spacing:.4pt'> </span>all<span
style='letter-spacing:.45pt'> </span>up.<span style='letter-spacing:.45pt'> </span>In<span
style='letter-spacing:.5pt'> </span><i><span style='letter-spacing:-.1pt'>lib/handlers.js</span></i></span></p>

<p class=MsoBodyText style='margin-top:4.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>(dont<span
style='letter-spacing:.45pt'> </span>forget<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>import<span style='letter-spacing:.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>../db</span><span
style='color:#333333'>),<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.5pt'> </span>create<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>handler:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: exports.listVacations = async (req, res) =&gt; {&#13;&#10;const vacations = await db.getVacations({ available: true })&#13;&#10;const context = {&#13;&#10;vacations: vacations.map(vacation =&gt; ({ sku: vacation.sku,&#13;&#10;name: vacation.name,&#13;&#10;description: vacation.description, price: '$' + vacation.price.toFixed(2), inSeason: vacation.inSeason,&#13;&#10;}))&#13;&#10;}&#13;&#10;res.render('vacations', context)&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>We<span style='letter-spacing:.35pt'> </span>add<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>route<span
style='letter-spacing:.4pt'> </span>that<span style='letter-spacing:.4pt'> </span>calls<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.35pt'> </span>handler<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.4pt'> </span><i><span
style='letter-spacing:-.1pt'>meadowlark.js</span></i><span style='letter-spacing:
-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/vacations', handlers.listVacations)"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>If you run this example, youll see only the one vacation
from our dummy database<span style='letter-spacing:2.0pt'> </span>implementation.<span
style='letter-spacing:2.0pt'> </span>Thats<span style='letter-spacing:2.0pt'> </span>because<span
style='letter-spacing:2.0pt'> </span>weve<span style='letter-spacing:2.0pt'> </span>initialized<span
style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:2.0pt'> </span>database
and seeded its data, but we havent replaced the dummy implementation with a
real one. So lets do that now. Open <i>db.js </i>and modify<span
style='letter-spacing:2.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>getVacations</span><span style='color:#333333;
letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: module.exports = {"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection255>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="_bookmark581"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: getVacations: async (options = {}) =&gt; Vacation.find(options), addVacationInSeasonListener: async (email, sku) =&gt; {&#13;&#10;//...&#13;&#10;},&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>That was easy! A one-liner. Partially this is because
Mongoose is doing a lot of the heavy lifting for us, and the way weve designed
our API is similar to the way Mongoose works. When we adapt this later to
PostgreSQL, youll see we have to do a little more work.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;The astute reader may worry that our database abstraction layer isnt doing much to protect its technology-neutral objective. For example, a developer may read this code and see that they can pass any Mongoose options along to the vacation model, and then the application would be using features that are specific to Mongoose, which will make it harder to switch databases. We could take some steps to prevent this. Instead of just passing things to Mongoose, we could look for specific options and handle them explicitly, making it clear that any implementation would have to provide those options. But for the sake of this example, were going to let this slide and keep this code simple.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Most of this should be looking pretty familiar, but there
might be some things that surprise you. For instance, how were handling the
view context for the vacation listing might seem odd. Why did we map the
products returned from the database to a nearly identical object? One reason is
that we want to display the price in a neatly formatted way, so we have to
convert it to a formatted string.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>We<span
style='letter-spacing:.5pt'> </span>could<span style='letter-spacing:.55pt'> </span>have<span
style='letter-spacing:.55pt'> </span>saved<span style='letter-spacing:.55pt'> </span>some<span
style='letter-spacing:.55pt'> </span>typing<span style='letter-spacing:.55pt'> </span>by<span
style='letter-spacing:.6pt'> </span>doing<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>this:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const context = {&#13;&#10;vacations: products.map(vacations =&gt; { vacation.price = '$' + vacation.price.toFixed(2)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection256>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: return vacation&#13;&#10;})&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>That would certainly save us a few lines of code, but in
my experience,<span style='letter-spacing:2.0pt'> </span>there are good reasons
not to pass unmapped database objects directly to views. The view gets a bunch
of properties it may not need, possibly in formats that are incompatible with
it. Our example is pretty simple so far, but once it starts to get more
complicated, youll probably want to do even more<span style='letter-spacing:
1.25pt'> </span>customization<span style='letter-spacing:1.35pt'> </span>of<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.25pt'> </span>data<span
style='letter-spacing:1.25pt'> </span>thats<span style='letter-spacing:1.25pt'>
</span>passed<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.25pt'> </span>view.<span
style='letter-spacing:1.35pt'> </span>It<span style='letter-spacing:1.25pt'> </span>also<span
style='letter-spacing:1.35pt'> </span>makes<span style='letter-spacing:1.25pt'>
</span>it easy to accidentally expose confidential information or information
that could compromise the security of your website. For these reasons, I
recommend<span style='letter-spacing:1.9pt'> </span>mapping<span
style='letter-spacing:1.9pt'> </span>the<span style='letter-spacing:1.85pt'> </span>data<span
style='letter-spacing:1.85pt'> </span>thats<span style='letter-spacing:1.85pt'>
</span>returned<span style='letter-spacing:1.9pt'> </span>from<span
style='letter-spacing:1.85pt'> </span>the<span style='letter-spacing:1.85pt'> </span>database<span
style='letter-spacing:1.85pt'> </span>and passing<span style='letter-spacing:
1.75pt'> </span>only<span style='letter-spacing:1.75pt'> </span>whats needed<span
style='letter-spacing:1.75pt'> </span>onto<span style='letter-spacing:1.75pt'> </span>the
view (transforming<span style='letter-spacing:1.75pt'> </span>as necessary,<span
style='letter-spacing:1.75pt'> </span>as we did with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>price</span><span
style='color:#333333'>).</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;In some variations of the MVC architecture, a third component called a view model is introduced. A view model essentially distills and transforms a model (or models) so that its more appropriate for display in a view. What were doing here is creating a view model on the fly.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve come a long way at this point. Were successfully
using a database<span style='letter-spacing:4.0pt'> </span>to store information
about our vacations. But databases wouldnt be very useful if we couldnt
update them. Lets turn our attention to that aspect of interfacing with
databases.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Adding<span
style='letter-spacing:-.2pt'> Data</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark583"></a><span
style='color:#333333'>Weve<span style='letter-spacing:.45pt'> </span>already<span
style='letter-spacing:.5pt'> </span>seen<span style='letter-spacing:.5pt'> </span>how<span
style='letter-spacing:.45pt'> </span><a name="_bookmark584"></a>we<span
style='letter-spacing:.45pt'> </span>can<span style='letter-spacing:.55pt'> </span>add<span
style='letter-spacing:.5pt'> </span>data<span style='letter-spacing:.45pt'> </span>(we<span
style='letter-spacing:.45pt'> </span>added<span style='letter-spacing:.5pt'> </span>data<span
style='letter-spacing:.5pt'> </span>when<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>seeded</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection257>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>the vacation collection) and how we can update data (we
update the count of packages sold when we book a vacation), but lets take a
look at a slightly more involved scenario that highlights the flexibility of
document <span style='letter-spacing:-.1pt'>databases.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When a vacation is out of season, we display a link that
invites the customer to be notified when the vacation is in season again. Lets
hook up that functionality. First, we create the schema and model <span
style='letter-spacing:-.1pt'>(<i>models/vacationInSeasonListener.js</i>):</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const mongoose = require('mongoose')&#13;&#10;&#13;&#10;const vacationInSeasonListenerSchema = mongoose.Schema({ email: String,&#13;&#10;skus: [String],&#13;&#10;})&#13;&#10;const VacationInSeasonListener = mongoose.model('VacationInSeasonListener', vacationInSeasonListenerSchema)&#13;&#10;&#13;&#10;module.exports = VacationInSeasonListener&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.9pt'> </span>well<span
style='letter-spacing:.85pt'> </span>create<span style='letter-spacing:.8pt'> </span>our<span
style='letter-spacing:.85pt'> </span>view,<span style='letter-spacing:.95pt'> </span><i>views/notify-me-when-in-<span
style='letter-spacing:-.1pt'>season.handlebars</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;div class=&quot;formContainer&quot;&gt;&#13;&#10;&lt;form class=&quot;form-horizontal newsletterForm&quot; role=&quot;form&quot; action=&quot;/notify-me-when-in-season&quot; method=&quot;POST&quot;&gt;&#13;&#10;&lt;input type=&quot;hidden&quot; name=&quot;sku&quot; value=&quot;{{sku}}&quot;&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;label for=&quot;fieldEmail&quot; class=&quot;col-sm-2 control-label&quot;&gt;Email&lt;/label&gt;&#13;&#10;&lt;div class=&quot;col-sm-4&quot;&gt;&#13;&#10;&lt;input type=&quot;email&quot; class=&quot;form-control&quot; required id=&quot;fieldEmail&quot; name=&quot;email&quot;&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;div class=&quot;form-group&quot;&gt;&#13;&#10;&lt;div class=&quot;col-sm-offset-2 col-sm-4&quot;&gt;&#13;&#10;&lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot;&gt;Submit&lt;/button&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection258>

<p class=MsoNormal align=center style='margin-top:2.55pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#330099;
letter-spacing:-.1pt;background:#FBFBFB'>&lt;/div<a name=PostgreSQL></a><a
name="_bookmark585"></a>&gt;</span></b><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#330099;background:#FBFBFB'> </span></b></p>

<p class=MsoBodyText style='margin-top:.55pt'><b><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Then<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.45pt'> </span>route<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>handlers:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: exports.notifyWhenInSeasonForm = (req, res) =&gt; res.render('notify-me-when-in-season', { sku: req.query.sku })&#13;&#10;&#13;&#10;exports.notifyWhenInSeasonProcess = (req, res) =&gt; {&#13;&#10;const { email, sku } = req.body&#13;&#10;await db.addVacationInSeasonListener(email, sku)&#13;&#10;return res.redirect(303, '/vacations')&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Finally,<span
style='letter-spacing:.5pt'> </span>we<span style='letter-spacing:.5pt'> </span>add<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.45pt'> </span>real<span
style='letter-spacing:.5pt'> </span>implementation<span style='letter-spacing:
.55pt'> </span>to<span style='letter-spacing:.55pt'> </span><i><span
style='letter-spacing:-.1pt'>db.js</span></i><span style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const VacationInSeasonListener = require('./models/vacationInSeasonListener')&#13;&#10;&#13;&#10;module.exports = {&#13;&#10;getVacations: async (options = {}) =&gt; Vacation.find(options), addVacationInSeasonListener: async (email, sku) =&gt; {&#13;&#10;await VacationInSeasonListener.updateOne(&#13;&#10;{ email },&#13;&#10;{ $push: { skus: sku } },&#13;&#10;{ upsert: true }&#13;&#10;)&#13;&#10;},&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>What magic is this? How can we update a record in the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>VacationInSeasonListener<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>collection
before it even exists? The answer lies in a Mongoose convenience called an <i>upsert
</i>(a portmanteau of<span style='letter-spacing:4.0pt'> </span>update and
insert). Basically, if a record with the given email address doesnt exist,
it will be created. If a record does exist, it will be updated.</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:16.5pt'><span
style='color:#333333'>Then<span style='letter-spacing:.45pt'> </span>we<span
style='letter-spacing:.45pt'> </span>use<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.4pt'> </span>magic<span style='letter-spacing:.45pt'> </span>variable<span
style='letter-spacing:.5pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>$push<span style='letter-spacing:-3.05pt'> </span></span><span
style='color:#333333'>to<span style='letter-spacing:.45pt'> </span>indicate<span
style='letter-spacing:.45pt'> </span>that<span style='letter-spacing:.45pt'> </span>we<span
style='letter-spacing:.45pt'> </span>want<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.5pt'> </span>add<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.5pt'>a</span></span></p>

<p class=MsoBodyText style='margin-top:5.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>value<span
style='letter-spacing:.3pt'> </span>to<span style='letter-spacing:.4pt'> </span>an<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>array.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection259>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=580 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image034.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.55pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve certainly covered the important bases by now! We
learned how to connect to a MongoDB instance, seed it with data, read that data
out, and write updates to it! However, you may prefer to use an RDBMS, so lets
shift gears and see how we can do the same thing with PostgreSQL<span
style='letter-spacing:2.0pt'> </span><span style='letter-spacing:-.1pt'>instead<a
name="_bookmark586"></a>.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F;letter-spacing:-.1pt'>PostgreSQL</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark587"></a><span style='color:#333333'>Object databases like
MongoDB are great and are generally quicker to get started with, but if youre
trying to build a robust application, you may put as much workor moreinto
structuring your object databases as you would<span style='letter-spacing:2.0pt'>
</span>planning<span style='letter-spacing:2.0pt'> </span>out<span
style='letter-spacing:2.0pt'> </span>a<span style='letter-spacing:2.0pt'> </span>traditional<span
style='letter-spacing:2.0pt'> </span>relational<span style='letter-spacing:
2.0pt'> </span>database.<span style='letter-spacing:2.0pt'> </span>Furthermore,<span
style='letter-spacing:2.0pt'> </span>you may already have experience with
relational databases, or you might have<span style='letter-spacing:2.0pt'> </span>an
existing relational database you want to connect with.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Fortunately, there is robust support for every major
relational database in the JavaScript ecosystem, and if you want or need to use
a relational database, you shouldnt have any problem.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets take our vacation database and reimplement it using
a relational database. For this example, well use PostgreSQL, a popular and
sophisticated open source relational database. The techniques and principles
well use will be similar for any relational database.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark588"></a><span
style='color:#333333'>Similar<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.5pt'> </span>ODM<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.5pt'> </span>used<span
style='letter-spacing:.6pt'> </span>for<span style='letter-spacing:.55pt'> </span>MongoDB,<span
style='letter-spacing:.55pt'> </span>there<span style='letter-spacing:.55pt'> </span>are<span
style='letter-spacing:.55pt'> </span>object-<span style='letter-spacing:-.1pt'>relational</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection260>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>mapping (ORM) tools available for relational databases.
However, since most readers interested in this topic are probably already
familiar with relational databases and SQL, well use a Node PostgreSQL client <span
style='letter-spacing:-.1pt'>directly.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Like MongoDB, well use a free online PostgreSQL service.
Of course, if youre comfortable installing and configuring your own PostgreSQL
database, you are welcome to do that as well. All that will change is the
connection string. If you do use your own PostgreSQL instance, make sure youre
using 9.4 or later, because we will be using the JSON data type, which was
introduced in 9.4 (as I write this, I am using 11.3).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark589"></a><span style='color:#333333'>There are many options for
online PostgreSQL; for this example, Ill be using </span><a
href="https://www.elephantsql.com/"><span style='color:#070707'>ElephantSQL</span></a><span
style='color:#333333'>. Getting started couldnt be simpler: create an account
(you can use your GitHub account to log in), and click Create New<span
style='letter-spacing:4.0pt'> </span>Instance.<span style='letter-spacing:1.35pt'>
</span>All<span style='letter-spacing:1.3pt'> </span>you<span style='letter-spacing:
1.35pt'> </span>have<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>do<span style='letter-spacing:1.35pt'> </span>is<span
style='letter-spacing:1.3pt'> </span>give<span style='letter-spacing:1.3pt'> </span>it<span
style='letter-spacing:1.3pt'> </span>a<span style='letter-spacing:1.3pt'> </span>name<span
style='letter-spacing:1.3pt'> </span>(for<span style='letter-spacing:1.3pt'> </span>example,
meadowlark) and select a plan (you can use their free plan). Youll also
specify a region (try to pick the one closest to you). Once youre all set up,
youll find a Details section that lists information about your instance.</span></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Copy the URL (connection string), which includes the
username, password, and instance location all in one convenient string.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Put<span style='letter-spacing:.75pt'> </span>that<span
style='letter-spacing:.75pt'> </span>string<span style='letter-spacing:.8pt'> </span>in<span
style='letter-spacing:.8pt'> </span>your<span style='letter-spacing:.75pt'> </span><i>.credentials.development.json<span
style='letter-spacing:.8pt'> </span></i><span style='letter-spacing:-.1pt'>file:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &quot;postgres&quot;: {&#13;&#10;&quot;connectionString&quot;: &quot;your_dev_connection_string&quot;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark590"></a><span style='color:#333333'>One difference between
object databases and RDBMSs is that you typically do more up-front work to
define the schema of an RDBMS and use data definition SQL to create the schema
before adding or retrieving</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection261>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:71.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>data. In keeping with this paradigm, well do
that as a separate step instead of letting our ODM or ORM handle it, as we did
with MongoDB.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>We could create SQL scripts and use a
command-line client to execute the data definition scripts that will create our
tables, or we could do this work<span style='letter-spacing:4.0pt'> </span>in
JavaScript with the PostgreSQL client API, but in a separate step thats done
only once. Since this is a book about Node and Express, well do the <span
style='letter-spacing:-.1pt'>latter.</span></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:88.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>First, well have to install the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>pg<span
style='letter-spacing:-2.9pt'> </span></span><span style='color:#333333'>client
library (</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm
install pg</span><span style='color:#333333'>). Then create <i>db-init.js</i>,
which will be run only to initialize our database and is distinct from our <i>db.js
</i>file, which is used every time the server starts up (<i>ch13/01-postgres/db.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const { credentials } = require('./config')&#13;&#10;&#13;&#10;const { Client } = require('pg')&#13;&#10;const { connectionString } = credentials.postgres&#13;&#10;const client = new Client({ connectionString })&#13;&#10;&#13;&#10;const createScript = `&#13;&#10;CREATE TABLE IF NOT EXISTS vacations (&#13;&#10;name varchar(200) NOT NULL,&#13;&#10;slug varchar(200) NOT NULL UNIQUE, category varchar(50),&#13;&#10;sku varchar(20), description text,&#13;&#10;location_search varchar(100) NOT NULL, location_lat double precision, location_lng double precision,&#13;&#10;price money, tags jsonb,&#13;&#10;in_season boolean, available boolean, requires_waiver boolean, maximum_guests integer, notes text, packages_sold integer&#13;&#10;);&#13;&#10;`&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection262>

<p class=MsoBodyText style='margin-top:.15pt'></p>

<p class=MsoNormal style='margin-top:3.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:69.35pt;margin-bottom:.0001pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.75pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>getVacationCount<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=<span style='letter-spacing:
.75pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>async<span style='letter-spacing:.8pt'> </span>client<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=&gt;<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.5pt'>{</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.15pt;margin-bottom:.0001pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.7pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif'>{<span style='letter-spacing:.7pt'> </span><span
style='color:#000087'>rows<span style='letter-spacing:.75pt'> </span></span>}<span
style='letter-spacing:.7pt'> </span><span style='color:#545454'>=<span
style='letter-spacing:.75pt'> </span></span><span style='color:#000087'>await<span
style='letter-spacing:.7pt'> </span>client</span>.<span style='color:#000087'>query</span>(<span
style='color:#CC3300'>'SELECT<span style='letter-spacing:.75pt'> </span>COUNT(*)<span
style='letter-spacing:.7pt'> </span>FROM<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>VACATIONS'</span></span><span style='letter-spacing:
-.1pt'>)</span></span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:80.15pt;margin-bottom:.0001pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>return<span
style='letter-spacing:.75pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#336666;letter-spacing:-.1pt'>Number</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>(<span style='color:#000087'>rows</span>[<span style='color:#FF6600'>0</span>].<span
style='color:#000087'>count</span>)</span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:69.35pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif'>}</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:69.35pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.7pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>seedVacations<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=<span style='letter-spacing:
.7pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>async<span style='letter-spacing:.7pt'> </span>client<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=&gt;<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.5pt'>{</span></p>

<p class=MsoNormal style='margin-top:1.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.15pt;margin-bottom:.0001pt;line-height:13.0pt'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.45pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>sql<span style='letter-spacing:
.45pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>=<span style='letter-spacing:.45pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
letter-spacing:-.5pt'>`</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:342.75pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt;text-indent:-10.8pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>INSERT
INTO vacations( <span style='letter-spacing:-.1pt'>name,</span></span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:390.7pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt'>slug,
category, </span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.2pt'>sku, </span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt'>description,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:366.2pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt'>location_search,
price,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:390.7pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt'>tags,
in_season, available,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:366.2pt;margin-bottom:
0cm;margin-left:101.75pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt'>requires_waiver,
maximum_guests, notes, packages_sold</span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.75pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>)<span
style='letter-spacing:.5pt'> </span>VALUES<span style='letter-spacing:.5pt'> </span>($1,<span
style='letter-spacing:.5pt'> </span>$2,<span style='letter-spacing:.5pt'> </span>$3,<span
style='letter-spacing:.5pt'> </span>$4,<span style='letter-spacing:.5pt'> </span>$5,<span
style='letter-spacing:.5pt'> </span>$6,<span style='letter-spacing:.55pt'> </span>$7,<span
style='letter-spacing:.5pt'> </span>$8,<span style='letter-spacing:.5pt'> </span>$9,<span
style='letter-spacing:.5pt'> </span>$10,<span style='letter-spacing:.5pt'> </span>$11,<span
style='letter-spacing:.5pt'> </span>$12,<span style='letter-spacing:.5pt'> </span>$13,<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>$14)</span></span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.3pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>`</span></p>

<p class=MsoNormal style='margin-top:1.35pt;margin-right:342.75pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;text-indent:-10.8pt;line-height:
121%'><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>await client</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif'>.<span style='color:#000087'>query</span>(<span
style='color:#000087'>sql</span>, [ <span style='color:#CC3300'>'Hood River Day
Trip'</span>, <span style='color:#CC3300;letter-spacing:-.1pt'>'hood-river-day-trip'</span><span
style='letter-spacing:-.1pt'>, </span><span style='color:#CC3300'>'Day Trip'</span>,</span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.85pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
letter-spacing:-.1pt'>'HR199'</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:1.4pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:69.35pt;margin-bottom:.0001pt;text-indent:21.6pt;line-height:
110%'><span style='font-size:10.5pt;line-height:110%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Spend a day sailing on the Columbia and enjoying craft beers in
Hood <span style='letter-spacing:-.1pt'>River!'</span></span><span
style='font-size:10.5pt;line-height:110%;font-family:"BIZ UDGothic",sans-serif;
letter-spacing:-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:1.3pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300'>'Hood River, Oregon, USA'</span><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif'>, <span
style='color:#FF6600;letter-spacing:-.1pt'>99.95</span><span style='letter-spacing:
-.1pt'>,</span></span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300'>`[&quot;day<span
style='letter-spacing:.95pt'> </span>trip&quot;,<span style='letter-spacing:
1.0pt'> </span>&quot;hood<span style='letter-spacing:1.0pt'> </span>river&quot;,<span
style='letter-spacing:1.0pt'> </span>&quot;sailing&quot;,<span
style='letter-spacing:1.0pt'> </span>&quot;windsurfing&quot;,<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>&quot;breweries&quot;]`</span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>,</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:432.35pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699;letter-spacing:-.1pt'>true</span></b><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>, <b><span
style='color:#006699'>true</span></b>, <b><span style='color:#006699'>false</span></b>,
</span><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600;letter-spacing:-.2pt'>16</span><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.2pt'>,</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:432.35pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699;letter-spacing:-.1pt'>null</span></b><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>, </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600;letter-spacing:-.3pt'>0</span><span style='font-size:10.5pt;
line-height:121%;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.3pt'>,</span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.25pt'>])</span></p>

<p class=MsoNormal style='margin-top:1.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:80.15pt;margin-bottom:.0001pt'><i><span style='font-size:10.5pt;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>//<span style='letter-spacing:
1.6pt'> </span>we<span style='letter-spacing:1.6pt'> </span>can<span
style='letter-spacing:1.6pt'> </span>use<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.6pt'> </span></span></i><i><span style='font-size:10.5pt;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>s</span></i><i><span
style='font-size:10.5pt;font-family:"Trebuchet MS",sans-serif;color:#34576B'>a</span></i><i><span
style='font-size:10.5pt;font-family:"Trebuchet MS",sans-serif;color:#34576B'>m</span></i><i><span
style='font-size:10.5pt;font-family:"Trebuchet MS",sans-serif;color:#34576B'>e<span
style='letter-spacing:1.6pt'> </span>pattern<span style='letter-spacing:1.6pt'>
</span>to<span style='letter-spacing:1.6pt'> </span>insert<span
style='letter-spacing:1.6pt'> </span>other<span style='letter-spacing:1.6pt'> </span>vacation<span
style='letter-spacing:1.65pt'> </span>data<span style='letter-spacing:1.6pt'> </span><span
style='letter-spacing:-.1pt'>here...</span></span></i></p>

<p class=MsoNormal style='margin-top:1.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:69.35pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif'>}</span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection263>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt;
font-family:"BIZ UDGothic",sans-serif'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: client.connect().then(async () =&gt; {&#13;&#10;try {&#13;&#10;console.log('creating database schema') await client.query(createScript)&#13;&#10;const vacationCount = await getVacationCount(client)&#13;&#10;if(vacationCount === 0) { console.log('seeding vacations') await seedVacations(client)&#13;&#10;}&#13;&#10;} catch(err) {&#13;&#10;console.log('ERROR: could not initialize database') console.log(err.message)&#13;&#10;} finally { client.end()&#13;&#10;}&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:11.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Lets start at the bottom of this file. We take our
database client (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>client</span><span style='color:#333333'>) and call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>connect()<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>on
it, which establishes a database connection and returns a promise. When that
promise resolves, we can take actions against the database.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark591"></a><span style='color:#333333'>The<span style='letter-spacing:
2.0pt'> </span>first<span style='letter-spacing:2.0pt'> </span>thing<span
style='letter-spacing:2.0pt'> </span>we<span style='letter-spacing:2.0pt'> </span>do<span
style='letter-spacing:2.0pt'> </span>is<span style='letter-spacing:2.0pt'> </span>invoke<span
style='letter-spacing:2.0pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>client.query(createScript)</span><span style='color:#333333'>,<span
style='letter-spacing:2.0pt'> </span>which will create our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vacations<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>table
(also known as a <i>relation</i>). If we look at </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>createScript</span><span
style='color:#333333'>, well see this is data definition SQL. Its beyond the
scope of this book to delve into SQL, but if youre reading this section, I
assume you have at least a passing understanding of SQL. One thing you may note<span
style='letter-spacing:2.0pt'> </span>is that we use snake_case to name our
fields instead of camelCase. That is, what was inSeason has become
in_season. While it is possible to use camelCase to name structures in
PostgreSQL, you have to quote any identifiers with capital letters, which ends
up being more trouble than its worth. Well come back to that a little later.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Youll<span
style='letter-spacing:.5pt'> </span>see<span style='letter-spacing:.5pt'> </span>were<span
style='letter-spacing:.5pt'> </span>already<span style='letter-spacing:.55pt'> </span>having<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.55pt'> </span>put<span
style='letter-spacing:.55pt'> </span>more<span style='letter-spacing:.5pt'> </span>thought<span
style='letter-spacing:.5pt'> </span>into<span style='letter-spacing:.55pt'> </span>our<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>schema.</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection264>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>How long can a vacation name be? (Were arbitrarily
capping it at 200 characters here.) How long can category names and the SKU be?
Notice were using PostgreSQLs </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>money<span style='letter-spacing:-2.7pt'> </span></span><span
style='color:#333333'>type for the price and making the slug be our primary key
(instead of adding a separate ID).</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre already familiar with relational databases,
there wont be anything surprising about this simple schema. However, the way
weve handled tags might have jumped out at you.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:77.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In traditional database design, we would probably create
a new table to relate<span style='letter-spacing:1.5pt'> </span>vacations<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.6pt'> </span>tags<span
style='letter-spacing:1.5pt'> </span>(this<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>called<span style='letter-spacing:1.5pt'> </span><i>normalization</i>).<span
style='letter-spacing:1.6pt'> </span>And<span style='letter-spacing:1.6pt'> </span>we<span
style='letter-spacing:1.5pt'> </span>could<span style='letter-spacing:1.6pt'> </span>do
that here. But here is where we might decide to strike some compromises between
traditional relational database design and doing things in the JavaScript
way. If we went with two tables (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vacations<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vacation_tags</span><span style='color:#333333'>,<span
style='letter-spacing:1.75pt'> </span>for<span style='letter-spacing:1.7pt'> </span>example),<span
style='letter-spacing:1.75pt'> </span>wed<span style='letter-spacing:1.75pt'> </span>have<span
style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:1.75pt'> </span>query<span
style='letter-spacing:1.75pt'> </span>data<span style='letter-spacing:1.7pt'> </span>from<span
style='letter-spacing:1.7pt'> </span>both<span style='letter-spacing:1.75pt'> </span>tables
to create a single object that contains all the information about a vacation,<span
style='letter-spacing:4.0pt'> </span>as we had in our MongoDB example. And
there may be performance reasons for that extra complexity, but lets assume
there isnt, and we just want to be able to quickly determine the tags for a
particular vacation. We could<span style='letter-spacing:1.35pt'> </span>make<span
style='letter-spacing:1.3pt'> </span>this<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>text<span style='letter-spacing:1.3pt'> </span>field<span
style='letter-spacing:1.35pt'> </span>and<span style='letter-spacing:1.35pt'> </span>separate<span
style='letter-spacing:1.3pt'> </span>our<span style='letter-spacing:1.3pt'> </span>tags<span
style='letter-spacing:1.3pt'> </span>with<span style='letter-spacing:1.35pt'> </span>commas,<span
style='letter-spacing:1.35pt'> </span>but<span style='letter-spacing:1.3pt'> </span>then
we<span style='letter-spacing:1.3pt'> </span>would<span style='letter-spacing:
1.35pt'> </span>have<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>parse<span style='letter-spacing:1.3pt'> </span>out<span
style='letter-spacing:1.3pt'> </span>our<span style='letter-spacing:1.3pt'> </span>tags,<span
style='letter-spacing:1.35pt'> </span>and<span style='letter-spacing:1.35pt'> </span>PostgreSQL<span
style='letter-spacing:1.3pt'> </span>gives<span style='letter-spacing:1.3pt'> </span>us<span
style='letter-spacing:1.3pt'> </span>a<span style='letter-spacing:1.3pt'> </span>better
way in JSON data types. Well see shortly that by specifying this as JSON (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>jsonb</span><span
style='color:#333333'>, a binary representation thats usually higher
performance), we can store<span style='letter-spacing:1.3pt'> </span>this<span
style='letter-spacing:1.3pt'> </span>as<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>JavaScript<span style='letter-spacing:
1.3pt'> </span>array,<span style='letter-spacing:1.35pt'> </span>and<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.3pt'> </span>JavaScript<span
style='letter-spacing:1.3pt'> </span>array<span style='letter-spacing:1.35pt'> </span>comes<span
style='letter-spacing:1.3pt'> </span>out,<span style='letter-spacing:1.35pt'> </span>just<span
style='letter-spacing:1.3pt'> </span>as we had in MongoDB.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Finally, we insert our seed data into the database by
using the same basic concept as before: if the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>vacations<span style='letter-spacing:
-2.1pt'> </span></span><span style='color:#333333'>table is empty, we add some
initial data; otherwise, we assume weve already done that.</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection265>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Youll note that inserting our data is a little more
unwieldy than it was<span style='letter-spacing:2.0pt'> </span>with MongoDB.
There are ways to solve this problem, but for this example, I want to be
explicit about the use of SQL. We could write a function to make insert
statements more naturally, or we could use an ORM (more on this later). But for
now, the SQL gets the job done, and it should be comfortable for anyone who
already knows SQL.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Note that although this script is designed to be run only
once to initialize and seed our database, weve written it in a way that its
safe to run multiple times. We included the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>IF NOT EXISTS<span style='letter-spacing:
-2.85pt'> </span></span><span style='color:#333333'>option, and we check to see
whether the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vacations<span style='letter-spacing:-1.9pt'> </span></span><span
style='color:#333333'>table is empty before adding seed data.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>We<span
style='letter-spacing:.4pt'> </span>can<span style='letter-spacing:.45pt'> </span>now<span
style='letter-spacing:.4pt'> </span>run<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.4pt'> </span>script<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.45pt'> </span>initialize<span style='letter-spacing:
.45pt'> </span>our<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>database:</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.45pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>$<span style='letter-spacing:.55pt'> </span>node<span
style='letter-spacing:.55pt'> </span>db-<span style='letter-spacing:-.1pt'>init.js</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have our database set up, we can write some
code to <i>use </i>it in our website.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark592"></a><span style='color:#333333'>Database servers can
typically handle only a limited number of connections at a time, so web servers
usually implement a strategy called <i>connection pooling </i>to balance the
overhead of establishing a connection with the danger of leaving connections
open too long and choking the server. Fortunately, the details of this are
handled for you by the PostgreSQL Node client.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Well take a slightly different strategy with our <i>db.js
</i>file this time. Instead of a file we just require to establish the database
connection, it will return<span style='letter-spacing:2.0pt'> </span>an API
that we write that handles the details of communicating with the <span
style='letter-spacing:-.1pt'>database.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection266>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We also have a decision to make about our vacation model.
Recall that when we created our model, we used snake_case for our database
schema, but all of our JavaScript code uses camelCase. Broadly speaking, we
have three options here:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15908352'><span style='left:0px;position:absolute;
left:169px;top:-194570px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Refactor our schema to use camelCase. This will make our
SQL uglier because we have to remember to quote our property names <span
style='letter-spacing:-.1pt'>correctly.</span></span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15908864'><span style='left:0px;position:absolute;
left:169px;top:-194649px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Use snake_case in our JavaScript. This is less than ideal
because we like standards (right?).</span></p>

<p class=MsoBodyText style='margin-top:9.25pt;margin-right:79.45pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><span style='position:relative;z-index:15909376'><span style='left:0px;
position:absolute;left:169px;top:-194710px;width:7px;height:1px'><img width=7
height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Use snake_case on the database side, and translate to
camelCase on the JavaScript side. This is more work that we have to do, but<span
style='letter-spacing:2.0pt'> </span>it keeps our SQL and our JavaScript
pristine.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Fortunately, the third option can be done automatically.
We could write our own function to do that translation, but well rely on a
popular utility library called </span><a href="https://lodash.com/"><span
style='color:#070707'>Lodash</span></a><span style='color:#333333'>, which
makes it extremely easy. Just run </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install lodash<span style='letter-spacing:-1.25pt'> </span></span><span
style='color:#333333'>to install it.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Right now, our database needs are very modest. All we
need to do is fetch all available vacation packages, so our <i>db.js </i>file
will look like this<span style='letter-spacing:2.0pt'> </span>(<i>ch13/01-postgres/db.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const { Pool } = require('pg')&#13;&#10;const _ = require('lodash')&#13;&#10;&#13;&#10;const { credentials } = require('./config')&#13;&#10;&#13;&#10;const { connectionString } = credentials.postgres&#13;&#10;const pool = new Pool({ connectionString })&#13;&#10;&#13;&#10;module.exports = { getVacations: async () =&gt; {&#13;&#10;const { rows } = await pool.query('SELECT * FROM VACATIONS')&#13;&#10;return rows.map(row =&gt; {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection267>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Adding_Data"></a><a
name="_bookmark593"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: const vacation = _.mapKeys(row, (v, k) =&gt; _.camelCase(k)) vacation.price = parseFloat(vacation.price.replace(/^\$/, '')) vacation.location = {&#13;&#10;search: vacation.locationSearch, coordinates: {&#13;&#10;lat: vacation.locationLat, lng: vacation.locationLng,&#13;&#10;},&#13;&#10;}&#13;&#10;return vacation&#13;&#10;})&#13;&#10;}&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>Short and sweet! Were exporting a single method called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>getVacations </span><span
style='color:#333333'>that does as advertised. It also uses Lodashs </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>mapKeys<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>camelCase </span><span
style='color:#333333'>functions to convert our database properties to
camelCase.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>One thing to note is that we have to handle the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>price<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>attribute
carefully. PostgreSQLs<span style='letter-spacing:1.95pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>money<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>type
is converted<span style='letter-spacing:1.95pt'> </span>to<span
style='letter-spacing:1.95pt'> </span>an<span style='letter-spacing:1.95pt'> </span>already-formatted<span
style='letter-spacing:1.95pt'> </span>string<span style='letter-spacing:1.95pt'>
</span>by the<span style='letter-spacing:1.6pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>pg<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>library.<span
style='letter-spacing:1.7pt'> </span>And<span style='letter-spacing:1.7pt'> </span>for<span
style='letter-spacing:1.6pt'> </span>good<span style='letter-spacing:1.7pt'> </span>reason:<span
style='letter-spacing:1.6pt'> </span>as<span style='letter-spacing:1.6pt'> </span>weve<span
style='letter-spacing:1.6pt'> </span>already<span style='letter-spacing:1.7pt'>
</span>discussed, JavaScript has only recently added support for arbitrary
precision numeric types (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>BigInt</span><span style='color:#333333'>), but there isnt yet
a PostgreSQL adapter that takes advantage of that (and it might not be the most
efficient data type in any event).<span style='letter-spacing:1.6pt'> </span>We
could<span style='letter-spacing:1.6pt'> </span>change our database schema to<span
style='letter-spacing:1.6pt'> </span>use a numeric type<span style='letter-spacing:
2.0pt'> </span>instead of the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>money<span style='letter-spacing:-2.25pt'> </span></span><span
style='color:#333333'>type, but we shouldnt let our frontend choices drive our<span
style='letter-spacing:1.5pt'> </span>schema.<span style='letter-spacing:1.55pt'>
</span>We<span style='letter-spacing:1.5pt'> </span>could<span
style='letter-spacing:1.55pt'> </span>also<span style='letter-spacing:1.55pt'> </span>deal<span
style='letter-spacing:1.5pt'> </span>with<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>preformatted<span style='letter-spacing:
1.55pt'> </span>strings<span style='letter-spacing:1.5pt'> </span>that<span
style='letter-spacing:1.5pt'> </span>are being returned from </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>pg</span><span
style='color:#333333'>, but then we would have to change all of our existing<span
style='letter-spacing:1.75pt'> </span>code,<span style='letter-spacing:1.75pt'>
</span>which<span style='letter-spacing:1.75pt'> </span>is<span
style='letter-spacing:1.7pt'> </span>relying<span style='letter-spacing:1.75pt'>
</span>on<span style='letter-spacing:1.75pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>price<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>being<span
style='letter-spacing:1.75pt'> </span>a<span style='letter-spacing:1.7pt'> </span>number.<span
style='letter-spacing:1.75pt'> </span>Furthermore, that approach would
undermine our ability to do numeric calculations on<span style='letter-spacing:
2.0pt'> </span>the frontend (such as summing the prices of the items in your
cart). For all of these reasons, were opting to parse the string to a number
when we retrieve it from the database.</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection268>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Using_a_Database_for_Session_Storage"></a><a name="_bookmark596"></a><span
style='color:#333333'>We also take our location informationwhich is flat in
the tableand turn it into a more JavaScript-like structure. Were doing this
only to achieve parity with our MongoDB example; we could use the data
structured as it is (or modify our MongoDB example to have a flat <span
style='letter-spacing:-.1pt'>structure).</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The last thing we need to learn to do with PostgreSQL is
to update data, so lets fill in the vacation in season listener feature<a
name="_bookmark594"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Adding<span
style='letter-spacing:-.2pt'> Data</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark595"></a><span style='color:#333333'>As<span style='letter-spacing:
1.65pt'> </span>with<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>MongoDB<span style='letter-spacing:1.65pt'>
</span>example,<span style='letter-spacing:1.75pt'> </span>well<span
style='letter-spacing:1.65pt'> </span>use<span style='letter-spacing:1.65pt'> </span>our<span
style='letter-spacing:1.65pt'> </span>vacation<span style='letter-spacing:
1.75pt'> </span>in<span style='letter-spacing:1.75pt'> </span>season listener
example. Well start by adding the following data definition to the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>createScript<span
style='letter-spacing:-.6pt'> </span></span><span style='color:#333333'>string
in <i>db-init.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: CREATE TABLE IF NOT EXISTS vacation_in_season_listeners ( email varchar(200) NOT NULL,&#13;&#10;sku varchar(20) NOT NULL, PRIMARY KEY (email, sku)&#13;&#10;);&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Remember that we took care to write <i>db-init.js </i>in
a nondestructive fashion so we could run it at any time. So we can just run it
again to create the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vacation_in_season_listeners<span style='letter-spacing:-1.95pt'>
</span></span><span style='color:#333333'>table.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>we<span style='letter-spacing:.45pt'> </span>can<span
style='letter-spacing:.5pt'> </span>modify<span style='letter-spacing:.55pt'> </span><i>db.js<span
style='letter-spacing:.5pt'> </span></i>to<span style='letter-spacing:.5pt'> </span>include<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.45pt'> </span>method<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.55pt'> </span>update<span
style='letter-spacing:.45pt'> </span>this<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>table:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = {&#13;&#10;//...&#13;&#10;addVacationInSeasonListener: async (email, sku) =&gt; { await pool.query(&#13;&#10;'INSERT INTO vacation_in_season_listeners (email, sku) ' +&#13;&#10;'VALUES ($1, $2) ' +&#13;&#10;'ON CONFLICT DO NOTHING',&#13;&#10;[email, sku]&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection269>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: )&#13;&#10;},&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>PostgreSQLs<span style='letter-spacing:1.9pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>ON<span
style='letter-spacing:2.0pt'> </span>CONFLICT<span style='letter-spacing:-1.7pt'>
</span></span><span style='color:#333333'>clause<span style='letter-spacing:
1.8pt'> </span>essentially<span style='letter-spacing:1.9pt'> </span>enables<span
style='letter-spacing:1.8pt'> </span>upserts.<span style='letter-spacing:1.9pt'>
</span>In<span style='letter-spacing:1.9pt'> </span>this case,<span
style='letter-spacing:1.45pt'> </span>if<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>exact<span style='letter-spacing:1.4pt'> </span>combination<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.4pt'> </span>email<span
style='letter-spacing:1.4pt'> </span>and<span style='letter-spacing:1.45pt'> </span>SKU<span
style='letter-spacing:1.4pt'> </span>is<span style='letter-spacing:1.4pt'> </span>already<span
style='letter-spacing:1.45pt'> </span>present,<span style='letter-spacing:1.45pt'>
</span>the user has already registered to be notified, so we dont need to do
anything.<span style='letter-spacing:4.0pt'> </span>If we had other columns in
this table (such as the date of last registration), we might want to use a more
sophisticated </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>ON CONFLICT<span style='letter-spacing:-2.2pt'> </span></span><span
style='color:#333333'>clause (see the </span><a href="http://bit.ly/3724FJI"><span
style='color:#070707'>PostgreSQL INSERT documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for more
information). Note also that this<span style='letter-spacing:1.4pt'> </span>behavior<span
style='letter-spacing:1.4pt'> </span>is<span style='letter-spacing:1.4pt'> </span>dependent<span
style='letter-spacing:1.4pt'> </span>on<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>way<span style='letter-spacing:1.45pt'> </span>we<span
style='letter-spacing:1.4pt'> </span>defined<span style='letter-spacing:1.45pt'>
</span>the<span style='letter-spacing:1.4pt'> </span>table.<span
style='letter-spacing:1.45pt'> </span>We<span style='letter-spacing:1.4pt'> </span>made
email and SKU a composite primary key, meaning that there cant be any
duplicates, which in turn necessitated the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>ON CONFLICT<span style='letter-spacing:
-2.25pt'> </span></span><span style='color:#333333'>clause (otherwise, the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>INSERT<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>command
would result in an error the second time a user tried<span style='letter-spacing:
4.0pt'> </span>to register for a notification on the same vacation).</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now weve seen a complete example of hooking up two types
of<span style='letter-spacing:4.0pt'> </span>databases, an object database and
an RDBMS. It should be clear that the function of the database is the same:
storing, retrieving, and updating data in a consistent and scalable fashion.
Because the function is the same, we were able to create an abstraction layer
so we could choose a different database technology. The last thing we might
need a database for is for persistent session storage, which we hinted at in </span><a
href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Using<span
style='letter-spacing:-.3pt'> </span>a<span style='letter-spacing:-.2pt'> </span>Database<span
style='letter-spacing:-.2pt'> </span>for<span style='letter-spacing:-.2pt'> </span>Session<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Stor<a
name="_bookmark597"></a>age</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark598"></a><span style='color:#333333'>As we discussed in </span><a
href="#_bookmark393"><span style='color:#070707'>Chapter 9</span></a><span
style='color:#333333'>, using a memory store for session data is unsuitable in
a production environment. Fortunately, its easy to use a database as a session
store.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>While<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.6pt'> </span>could<span
style='letter-spacing:.65pt'> </span>use<span style='letter-spacing:.6pt'> </span>our<span
style='letter-spacing:.6pt'> </span>existing<span style='letter-spacing:.65pt'>
</span>MongoDB<span style='letter-spacing:.6pt'> </span>or<span
style='letter-spacing:.6pt'> </span>PostgreSQL<span style='letter-spacing:.6pt'>
</span>database<span style='letter-spacing:.6pt'> </span>for<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.5pt'>a</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection270>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:77.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>session<span style='letter-spacing:1.6pt'> </span>store,<span
style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:1.55pt'> </span>full-blown<span
style='letter-spacing:1.6pt'> </span>database<span style='letter-spacing:1.55pt'>
</span>is<span style='letter-spacing:1.55pt'> </span>overkill<span
style='letter-spacing:1.55pt'> </span>for<span style='letter-spacing:1.55pt'> </span>session<span
style='letter-spacing:1.6pt'> </span>storage,<span style='letter-spacing:1.6pt'>
</span>which is a perfect use case for a key-value database. <a
name="_bookmark599"></a>As I write this, the most popular key-value databases
for session stores are </span><a href="https://redis.io/"><span
style='color:#070707'>Redis</span></a><span style='color:#070707'> </span><span
style='color:#333333'>and </span><a href="https://memcached.org/"><span
style='color:#070707'>Memcached</span></a><span style='color:#333333'>. In
keeping with the other examples in this chapter, well be using a free online
service to provide a Redis database.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Start by heading over to </span><a
href="https://redislabs.com/"><span style='color:#070707'>Redis Labs</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and create an
account. Then create a free subscription and plan. Choose Cache for the plan
and give the database a name; you can leave the rest of the settings at their
defaults.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Youll reach a View Database screen, and, as I write
this, the critical information doesnt populate for a few seconds, so be
patient. What youll want<span style='letter-spacing:1.55pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>Endpoint<span
style='letter-spacing:1.55pt'> </span>field<span style='letter-spacing:1.65pt'>
</span>and<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>Redis<span style='letter-spacing:1.55pt'>
</span>Password<span style='letter-spacing:1.65pt'> </span>under<span
style='letter-spacing:1.55pt'> </span>Access<span style='letter-spacing:1.55pt'>
</span>Control &amp; Security (its hidden by default, but theres a little
button next to it that will show it). Take these and put them in your</span></p>

<p class=MsoNormal style='margin-top:.15pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>.credentials.development.json<span style='letter-spacing:2.55pt'>
</span></span></i><span style='font-size:14.0pt;color:#333333;letter-spacing:
-.1pt'>file:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &quot;redis&quot;: {&#13;&#10;&quot;url&quot;: &quot;redis://:&lt;YOUR PASSWORD&gt;@&lt;YOUR ENDPOINT&gt;&quot;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:90.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Note the slightly odd URL: normally there
would be a username before the colon preceding your password, but Redis allows
connection with a password only; the colon that separates username from
password is still required, however.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><span
style='color:#333333'>Well be using a package called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>connect-redis<span
style='letter-spacing:-2.3pt'> </span></span><span style='color:#333333'>to
provide Redis session storage. Once youve installed it (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm install
connect-redis</span><span style='color:#333333'>), we can set it up in our main
application file. We still use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>expression-session</span><span style='color:#333333'>,<span
style='letter-spacing:2.0pt'> </span>but now we pass a new property to it, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>store</span><span
style='color:#333333'>, which configures it to use a database. Note that we
have to pass </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>expressSession<span style='letter-spacing:-1.85pt'> </span></span><span
style='color:#333333'>to the function</span></p>

</div>

<span style='font-size:11.0pt;line-height:123%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection271>

<p class=MsoNormal style='margin-top:3.1pt;margin-right:103.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='font-size:14.0pt;line-height:131%;color:#333333'>returned from </span><span
style='font-size:14.0pt;line-height:131%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>connect-redis<span style='letter-spacing:-1.85pt'> </span></span><span
style='font-size:14.0pt;line-height:131%;color:#333333'>to get the constructor:
this is a pretty common quirk of session stores (<i>ch13/00-mongodb/meadowlark.js
</i>or <i>ch13/01-postgres/meadowlark.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const expressSession = require('express-session')&#13;&#10;const RedisStore = require('connect-redis')(expressSession)&#13;&#10;&#13;&#10;app.use(cookieParser(credentials.cookieSecret)) app.use(expressSession({&#13;&#10;resave: false, saveUninitialized: false,&#13;&#10;secret: credentials.cookieSecret, store: new RedisStore({&#13;&#10;url: credentials.redis.url,&#13;&#10;logErrors: true, // highly recommended!&#13;&#10;}),&#13;&#10;}))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets use our newly minted session store for something
useful. Imagine we want to be able to display vacation prices in different
currencies.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Furthermore,<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.55pt'> </span>want<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.55pt'> </span>site<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.55pt'> </span>remember<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.5pt'> </span>users<span
style='letter-spacing:.55pt'> </span>currency<span style='letter-spacing:.6pt'>
</span><span style='letter-spacing:-.1pt'>preference.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Well start by adding a currency picker at the bottom of
our vacations <span style='letter-spacing:-.1pt'>page:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;hr&gt;&#13;&#10;&lt;p&gt;Currency:&#13;&#10;&lt;a href=&quot;/set-currency/USD&quot; class=&quot;currency {{currencyUSD}}&quot;&gt;USD&lt;/a&gt; |&#13;&#10;&lt;a href=&quot;/set-currency/GBP&quot; class=&quot;currency {{currencyGBP}}&quot;&gt;GBP&lt;/a&gt; |&#13;&#10;&lt;a href=&quot;/set-currency/BTC&quot; class=&quot;currency {{currencyBTC}}&quot;&gt;BTC&lt;/a&gt;&#13;&#10;&lt;/p&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Now heres a little CSS
(you can put this inline in your <i>views/layouts/main.handlebars </i>file or
link to a CSS file in your <i>public </i><span style='letter-spacing:-.1pt'>directory):</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: a.currency {"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection272>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image024.gif"
alt="Text Box: text-decoration: none;&#13;&#10;}&#13;&#10;.currency.selected { font-weight: bold; font-size: 150%;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Lastly, well add a
route handler to set the currency and modify our route handler for <i>/vacations
</i>to display prices in the current currency (<i>ch13/00-
mongodb/lib/handlers.js </i>or <i>ch13/01-postgres/lib/handlers.js </i>in the
companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: exports.setCurrency = (req, res) =&gt; { req.session.currency = req.params.currency return res.redirect(303, '/vacations')&#13;&#10;}&#13;&#10;&#13;&#10;function convertFromUSD(value, currency) {&#13;&#10;switch(currency) {&#13;&#10;case 'USD': return value * 1&#13;&#10;case 'GBP': return value * 0.79 case 'BTC': return value * 0.000078 default: return NaN&#13;&#10;}&#13;&#10;}&#13;&#10;&#13;&#10;exports.listVacations = (req, res) =&gt; {&#13;&#10;Vacation.find({ available: true }, (err, vacations) =&gt; {&#13;&#10;const currency = req.session.currency || 'USD'&#13;&#10;const context = { currency: currency,&#13;&#10;vacations: vacations.map(vacation =&gt; {&#13;&#10;return {&#13;&#10;sku: vacation.sku, name: vacation.name,&#13;&#10;description: vacation.description, inSeason: vacation.inSeason,&#13;&#10;price: convertFromUSD(vacation.price, currency), qty: vacation.qty,&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection273>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="_bookmark600"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: })&#13;&#10;}&#13;&#10;switch(currency){&#13;&#10;case 'USD': context.currencyUSD = 'selected'; break case 'GBP': context.currencyGBP = 'selected'; break case 'BTC': context.currencyBTC = 'selected'; break&#13;&#10;}&#13;&#10;res.render('vacations', context)&#13;&#10;})&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Youll<span
style='letter-spacing:.4pt'> </span>also<span style='letter-spacing:.45pt'> </span>have<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.45pt'> </span>add<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.4pt'> </span>route<span
style='letter-spacing:.4pt'> </span>for<span style='letter-spacing:.45pt'> </span>setting<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.45pt'> </span>currency<span
style='letter-spacing:.45pt'> </span>in<span style='letter-spacing:.4pt'> </span><i><span
style='letter-spacing:-.1pt'>meadowlark.js</span></i><span style='letter-spacing:
-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:19.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.45pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/set-currency/:currency'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:3.7pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>handlers</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>setCurrency</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:80.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This isnt a great way to perform currency conversion, of
course. We<span style='letter-spacing:4.0pt'> </span>would want to utilize a
third-party currency conversion API to make sure our rates are up-to-date. But
this will suffice for demonstration purposes. You<span style='letter-spacing:
1.8pt'> </span>can<span style='letter-spacing:1.8pt'> </span>now<span
style='letter-spacing:1.7pt'> </span>switch<span style='letter-spacing:1.8pt'> </span>between<span
style='letter-spacing:1.8pt'> </span>the<span style='letter-spacing:1.7pt'> </span>various<span
style='letter-spacing:1.7pt'> </span>currencies<span style='letter-spacing:
1.7pt'> </span>andgo<span style='letter-spacing:1.8pt'> </span>ahead<span
style='letter-spacing:1.8pt'> </span>and try<span style='letter-spacing:1.7pt'>
</span>itstop<span style='letter-spacing:1.7pt'> </span>and<span
style='letter-spacing:1.7pt'> </span>restart<span style='letter-spacing:1.6pt'>
</span>your<span style='letter-spacing:1.6pt'> </span>server.<span
style='letter-spacing:1.7pt'> </span>Youll<span style='letter-spacing:1.6pt'> </span>find<span
style='letter-spacing:1.7pt'> </span>it<span style='letter-spacing:1.6pt'> </span>remembers<span
style='letter-spacing:1.6pt'> </span>your currency<span style='letter-spacing:
1.95pt'> </span>preference! If you<span style='letter-spacing:1.95pt'> </span>clear
your cookies,<span style='letter-spacing:1.95pt'> </span>the currency<span
style='letter-spacing:1.95pt'> </span>preference will be forgotten. Youll
notice that now weve lost our pretty currency formatting; its now more
complicated, and I will leave that as an exercise for the reader.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Another readers exercise would be to make the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>set-currency<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>route
general-purpose to make it more useful. Currently, it will always redirect to
the vacations page, but what if you wanted to use it on a shopping cart page?
See if you<span style='letter-spacing:1.3pt'> </span>can<span style='letter-spacing:
1.3pt'> </span>think<span style='letter-spacing:1.3pt'> </span>of one or two<span
style='letter-spacing:1.3pt'> </span>ways of solving<span style='letter-spacing:
1.3pt'> </span>this problem.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>If you look in your database, youll find theres a new
collection called <i>sessions</i>. If you explore that collection, youll find
a document with your session ID (property </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>sid</span><span style='color:#333333'>) and your currency
preference.</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection274>

<h2 style='margin-top:3.95pt'><a name="_bookmark601"></a><span
style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve certainly covered a lot of ground in this chapter.
For most web applications, the database is at the heart of what makes the
application useful. Designing and tuning databases is a vast topic that could
span many books, but I hope this has given you the basic tools you need to
connect two types of databases and move data around<a name="_bookmark602"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have this fundamental piece in place, were
going to revisit routing and the importance it plays in web applications.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection275>

<h1><a name="14._Routing"></a><a name="_bookmark603"></a>Chapter<span
style='letter-spacing:.55pt'> </span>14.<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Routing</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark604"></a><span style='color:#333333'>Routing is one of the most
important aspects of your website or web<span style='letter-spacing:2.0pt'> </span>service;
fortunately, routing in Express is simple, flexible, and robust. <i>Routing </i>is
the mechanism by which requests (as specified by a URL and HTTP method) are
routed to the code that handles them. As weve already noted,<span
style='letter-spacing:1.35pt'> </span>routing<span style='letter-spacing:1.35pt'>
</span>used<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.3pt'> </span>file<span
style='letter-spacing:1.3pt'> </span>based<span style='letter-spacing:1.35pt'> </span>and<span
style='letter-spacing:1.35pt'> </span>simple.<span style='letter-spacing:1.35pt'>
</span>For<span style='letter-spacing:1.3pt'> </span>example,<span
style='letter-spacing:1.35pt'> </span>if<span style='letter-spacing:1.3pt'> </span>you<span
style='letter-spacing:1.35pt'> </span>put the file <i>foo/about.html </i>on
your website, you would access it from the browser with the path <i>/foo/about.html</i>.
Simple but inflexible. And, in case you<span style='letter-spacing:1.6pt'> </span>hadnt<span
style='letter-spacing:1.55pt'> </span>noticed,<span style='letter-spacing:1.6pt'>
</span>having<span style='letter-spacing:1.6pt'> </span><i>html<span
style='letter-spacing:1.55pt'> </span></i>in<span style='letter-spacing:1.6pt'>
</span>your<span style='letter-spacing:1.55pt'> </span>URL<span
style='letter-spacing:1.55pt'> </span>is<span style='letter-spacing:1.55pt'> </span>extremely<span
style='letter-spacing:1.6pt'> </span>pass<span style='letter-spacing:1.55pt'> </span>these
<span style='letter-spacing:-.1pt'>days.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark605"></a><span style='color:#333333'>Before we dive into the
technical aspects of routing with Express, we<span style='letter-spacing:2.0pt'>
</span>should discuss the concept of <i>information architecture </i>(IA). IA
refers to<span style='letter-spacing:4.0pt'> </span>the conceptual organization
of your content. Having an extensible (but not overcomplicated)<span
style='letter-spacing:1.9pt'> </span>IA<span style='letter-spacing:1.9pt'> </span>before<span
style='letter-spacing:1.9pt'> </span>you<span style='letter-spacing:1.95pt'> </span>begin<span
style='letter-spacing:1.95pt'> </span>thinking<span style='letter-spacing:1.95pt'>
</span>about<span style='letter-spacing:1.9pt'> </span>routing<span
style='letter-spacing:1.95pt'> </span>will<span style='letter-spacing:1.9pt'> </span>pay
huge dividends down the line.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark606"></a><span style='color:#333333'>One of the most intelligent
and timeless essays on IA is by Tim Berners- Lee, who practically <i>invented
the internet</i>. You can (and should) read it now: </span><a
href="http://www.w3.org/Provider/Style/URI.html"><i><span style='color:#070707'>http://www.w3.org/Provider/Style/URI.html</span></i></a><span
style='color:#333333'>. It was written in 1998. Let that sink in for a minute;
theres not much that was written on internet technology in 1998 that is just
as true today as it was then.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>From that essay, here is the lofty responsibility we are
being asked to take <span style='letter-spacing:-.2pt'>on:</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:62.2pt'><i><span style='font-size:14.0pt;
color:#333333'>It<span style='letter-spacing:.4pt'> </span>is<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.4pt'> </span>duty<span
style='letter-spacing:.4pt'> </span>of<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.45pt'> </span>Webmaster<span style='letter-spacing:.4pt'>
</span>to<span style='letter-spacing:.45pt'> </span>allocate<span
style='letter-spacing:.45pt'> </span>URIs<span style='letter-spacing:.4pt'> </span>which<span
style='letter-spacing:.45pt'> </span>you<span style='letter-spacing:.5pt'> </span>will<span
style='letter-spacing:.4pt'> </span>be<span style='letter-spacing:.4pt'> </span>able<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.25pt'>to</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection276>

<p class=MsoNormal style='margin-top:3.85pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:62.15pt;margin-bottom:.0001pt;line-height:106%'><i><span
style='font-size:14.0pt;line-height:106%;color:#333333'>stand by in 2 years, in
20 years, in 200 years. This needs thought, and organization, and commitment.</span></i></p>

<p class=MsoBodyText style='margin-top:3.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:304.75pt;margin-bottom:.0001pt'><span style='color:#333333'>Tim<span
style='letter-spacing:1.3pt'> </span>Berners-<span style='letter-spacing:-.25pt'>Lee</span></span></p>

<p class=MsoBodyText style='margin-top:14.1pt;margin-right:75.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark607"></a><span style='color:#333333'>I like to think
that if web design ever required professional licensing, like other kinds of
engineering, that we would take an oath to that effect. (The astute reader of
that article will find humor in the fact that the URL to that article ends with
<i>.html</i>.)</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>To make an analogy (that may sadly be lost on the younger
audience), imagine that every two years your favorite library completely
reordered<span style='letter-spacing:4.0pt'> </span>the Dewey decimal system.
You would walk into the library one day and you wouldnt be able to find
anything. Thats exactly what happens when you redesign your URL structure.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Put some serious thought into your URLs. Will they still
make sense in 20 years? (200 years may be a bit of a stretch: who knows if
well even be using URLs by then. Still, I admire the dedication of thinking
that far into the future.) Carefully consider the breakdown of your content.
Categorize things logically, and try not to paint yourself into a corner. Its
a science,<span style='letter-spacing:2.0pt'> </span>but its also an art.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Perhaps most important, work with others to design your
URLs. Even if<span style='letter-spacing:4.0pt'> </span>you are the best
information architect for miles around, you might be surprised at how people
look at the same content with a different perspective. Im not saying that you
should try for an IA that makes sense from <i>everyones </i>perspective
(because that is usually quite impossible), but being able to see the problem
from multiple perspectives will give you<span style='letter-spacing:2.0pt'> </span>better
ideas and expose the flaws in your own IA.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Here<span
style='letter-spacing:.45pt'> </span>are<span style='letter-spacing:.5pt'> </span>some<span
style='letter-spacing:.5pt'> </span>suggestions<span style='letter-spacing:
.5pt'> </span>to<span style='letter-spacing:.55pt'> </span>help<span
style='letter-spacing:.55pt'> </span>you<span style='letter-spacing:.55pt'> </span>achieve<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.5pt'> </span>lasting<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.25pt'>IA:</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection277>

<p class=MsoNormal style='margin-top:3.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Never<span style='letter-spacing:.55pt'> </span>expose<span
style='letter-spacing:.55pt'> </span>technical<span style='letter-spacing:.55pt'>
</span>details<span style='letter-spacing:.55pt'> </span>in<span
style='letter-spacing:.6pt'> </span>your<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.2pt'>URLs</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Have you ever been to a website, noticed that the URL
ended in <i>.asp</i>, and thought that the website was hopelessly out-of-date?
Remember that, once upon a time, ASP was cutting-edge. Though it pains me to
say it, so too shall fall JavaScript and JSON and Node and Express. I hope its
not for many, many productive years, but time is not often kind to technology.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Avoid<span style='letter-spacing:.75pt'> </span>meaningless<span
style='letter-spacing:.65pt'> </span>information<span style='letter-spacing:
.75pt'> </span>in<span style='letter-spacing:.75pt'> </span>your<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.2pt'>URLs</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Think carefully about every word in your URL. If it
doesnt mean anything, leave it out. For example, it always makes me cringe
when websites use the word <i>home </i>in URLs. Your root URL <i>is </i>your
home page. You dont need to additionally have URLs like <i>/home/directions </i>and
<i>/home/contact</i>.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Avoid<span style='letter-spacing:.65pt'> </span>needlessly<span
style='letter-spacing:.65pt'> </span>long<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.2pt'>URLs</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>All things being equal, a short URL is better than a
longer URL. However, you should not try to make URLs short at the expense of
clarity or SEO. Abbreviations are tempting, but think carefully about them.
They should be common and ubiquitous before you immortalize them in a URL.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Be<span style='letter-spacing:.5pt'> </span>consistent<span
style='letter-spacing:.5pt'> </span>with<span style='letter-spacing:.6pt'> </span>word<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>separators</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Its quite common to separate words with hyphens, and a
little less common to do so with underscores. Hyphens are generally considered
more aesthetically pleasing than underscores, and most SEO experts recommend
them. Whether you choose hyphens or underscores, be consistent in their use.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Never<span style='letter-spacing:.6pt'> </span>use<span
style='letter-spacing:.65pt'> </span>whitespace<span style='letter-spacing:
.65pt'> </span>or<span style='letter-spacing:.65pt'> </span>untypable<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>characters</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Whitespace in a URL is not recommended. It will usually
just be converted to a plus sign (+), leading to confusion. It should be
obvious that you should avoid untypable characters, and I caution you strongly
against using any characters other than alphanumeric characters, numbers,
dashes, and underscores. It may feel clever at the time, but</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection278>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark612"></a><span style='color:#333333'>clever has a way of not
standing the test of time. Obviously, if your website is not for an English
audience, you may use non-English characters (using percent codes), though that
can cause headaches if you ever want to localize your website.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Use<span style='letter-spacing:.5pt'> </span>lowercase<span
style='letter-spacing:.55pt'> </span>for<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>URLs</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>This one will cause some debate. There are those who feel
that mixed case in URLs is not only acceptable, but preferable. I dont want to
get<span style='letter-spacing:2.0pt'> </span>in a religious debate over this,
but I will point out that the advantage of lowercase is that it can always
automatically be generated by code. If youve<span style='letter-spacing:1.5pt'>
</span>ever<span style='letter-spacing:1.5pt'> </span>had<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>go<span
style='letter-spacing:1.55pt'> </span>through<span style='letter-spacing:1.55pt'>
</span>a<span style='letter-spacing:1.5pt'> </span>website<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.55pt'> </span>sanitize<span
style='letter-spacing:1.5pt'> </span>thousands<span style='letter-spacing:1.5pt'>
</span>of links or do string comparisons, you will appreciate this argument. I
personally<span style='letter-spacing:2.0pt'> </span>feel<span
style='letter-spacing:2.0pt'> </span>that<span style='letter-spacing:2.0pt'> </span>lowercase<span
style='letter-spacing:2.0pt'> </span>URLs<span style='letter-spacing:2.0pt'> </span>are<span
style='letter-spacing:2.0pt'> </span>more<span style='letter-spacing:2.0pt'> </span>aesthetically<span
style='letter-spacing:2.0pt'> </span>pleasing, but in the end, this decision is
up to yo<a name="_bookmark609"></a>u<a name="_bookmark608"></a>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:9.55pt'><a name="Routes_and_SEO"></a><a
name="_bookmark610"></a><span style='color:#8E0011'>Routes<span
style='letter-spacing:-.2pt'> </span>and<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.25pt'>SEO</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark611"></a><span style='color:#333333'>If<span style='letter-spacing:
1.45pt'> </span>you<span style='letter-spacing:1.5pt'> </span>want<span
style='letter-spacing:1.45pt'> </span>your<span style='letter-spacing:1.45pt'> </span>website<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.5pt'> </span>be<span
style='letter-spacing:1.45pt'> </span>discoverable<span style='letter-spacing:
1.45pt'> </span>(and<span style='letter-spacing:1.5pt'> </span>most<span
style='letter-spacing:1.45pt'> </span>people<span style='letter-spacing:1.45pt'>
</span>do),<span style='letter-spacing:1.5pt'> </span>then you need to think
about SEO and how your URLs can affect it. In<span style='letter-spacing:2.0pt'>
</span>particular, if there are certain keywords that are important<i>and it
makes sense</i>consider making them part of the URL. For example, Meadowlark
Travel<span style='letter-spacing:1.8pt'> </span>offers<span style='letter-spacing:
1.8pt'> </span>several<span style='letter-spacing:1.8pt'> </span>Oregon<span
style='letter-spacing:1.9pt'> </span>Coast<span style='letter-spacing:1.8pt'> </span>vacations.<span
style='letter-spacing:1.9pt'> </span>To<span style='letter-spacing:1.9pt'> </span>ensure<span
style='letter-spacing:1.8pt'> </span>high<span style='letter-spacing:1.9pt'> </span>search
engine<span style='letter-spacing:1.55pt'> </span>ranking<span
style='letter-spacing:1.6pt'> </span>for<span style='letter-spacing:1.55pt'> </span>these<span
style='letter-spacing:1.55pt'> </span>vacations,<span style='letter-spacing:
1.6pt'> </span>we<span style='letter-spacing:1.55pt'> </span>use<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>string<span
style='letter-spacing:1.6pt'> </span>Oregon<span style='letter-spacing:1.6pt'>
</span>Coast<span style='letter-spacing:1.55pt'> </span>in the title, header,
body, and meta description, and the URLs start with</span></p>

<p class=MsoNormal style='margin-top:.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>/vacations/oregon-coast</span></i><span style='font-size:14.0pt;
color:#333333'>.<span style='letter-spacing:.85pt'> </span>The<span
style='letter-spacing:.8pt'> </span>Manzanita<span style='letter-spacing:.8pt'>
</span>vacation<span style='letter-spacing:.85pt'> </span>package<span
style='letter-spacing:.8pt'> </span>can<span style='letter-spacing:.85pt'> </span>be<span
style='letter-spacing:.8pt'> </span>found<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.25pt'>at</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>/vacations/oregon-coast/manzanita</span></i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>. If, to shorten the
URL, we simply used <i>/vacations/manzanita</i>, we would be losing out on
valuable SEO.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:71.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>That<span
style='letter-spacing:1.5pt'> </span>said,<span style='letter-spacing:1.6pt'> </span>resist<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>temptation<span
style='letter-spacing:1.6pt'> </span>to<span style='letter-spacing:1.6pt'> </span>carelessly<span
style='letter-spacing:1.6pt'> </span>jam<span style='letter-spacing:1.5pt'> </span>keywords<span
style='letter-spacing:1.5pt'> </span>into<span style='letter-spacing:1.6pt'> </span>URLs<span
style='letter-spacing:1.5pt'> </span>in an<span style='letter-spacing:1.6pt'> </span>attempt<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>improve<span
style='letter-spacing:1.55pt'> </span>your<span style='letter-spacing:1.55pt'> </span>rankings.<span
style='letter-spacing:1.6pt'> </span>It<span style='letter-spacing:1.55pt'> </span>will<span
style='letter-spacing:1.55pt'> </span>fail.<span style='letter-spacing:1.6pt'> </span>For<span
style='letter-spacing:1.55pt'> </span>example,<span style='letter-spacing:1.6pt'>
</span>changing the Manzanita vacation URL to <i>/vacations/oregon-coast-portland-and-
hood-river/oregon-coast/manzanita<span style='letter-spacing:1.25pt'> </span></i>in<span
style='letter-spacing:1.25pt'> </span>an<span style='letter-spacing:1.25pt'> </span>effort
to<span style='letter-spacing:1.25pt'> </span>say<span style='letter-spacing:
1.25pt'> </span>Oregon<span style='letter-spacing:1.25pt'> </span>Coast one</span></p>

</div>

<span style='font-size:14.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection279>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>more time, and also work the Portland and Hood River
keywords in at the same time, is wrong-headed. It flies in the face of good IA
and will likely backfire.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Subdomains</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark613"></a><span style='color:#333333'>Along with the path,
subdomains are the other part of the URL that is commonly used to route
requests. Subdomains are best reserved for significantly<span style='letter-spacing:
2.0pt'> </span>different<span style='letter-spacing:2.0pt'> </span>parts<span
style='letter-spacing:2.0pt'> </span>of<span style='letter-spacing:2.0pt'> </span>your<span
style='letter-spacing:2.0pt'> </span>applicationfor<span style='letter-spacing:
2.0pt'> </span>example,<span style='letter-spacing:2.0pt'> </span>a<span
style='letter-spacing:2.0pt'> </span>REST API (<i>api.meadowlarktravel.com</i>)
or an admin interface (<i>admin.meadowlarktravel.com</i>). Sometimes subdomains
are used for technical reasons. For example, if we were to build our blog with<span
style='letter-spacing:4.0pt'> </span>WordPress (while the rest of our site uses
Express), it can be easier to use <i>blog.meadowlarktravel.com </i>(a better
solution would be to use a proxy server, such as NGINX). There are usually SEO
consequences to<span style='letter-spacing:2.0pt'> </span>partitioning your
content using subdomains, which is why you should generally reserve them for
areas of your site that arent important to SEO, such as admin areas and APIs.
Keep this in mind and make sure theres no other option before using a
subdomain for content that is important to your SEO plan.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='font-size:14.0pt;line-height:130%;color:#333333'>The routing mechanism
in Express does not take subdomains into account by default: </span><span
style='font-size:14.0pt;line-height:130%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get(</span><i><span style='font-size:14.0pt;line-height:
130%;font-family:"Courier New";color:#333333'>/about</span></i><span
style='font-size:14.0pt;line-height:130%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>)<span style='letter-spacing:-1.0pt'> </span></span><span
style='font-size:14.0pt;line-height:130%;color:#333333'>will handle requests
for </span><a href="http://meadowlarktravel.com/about"><i><span
style='font-size:14.0pt;line-height:130%;color:#333333;letter-spacing:-.1pt;
text-decoration:none'>http://meadowlarktravel.com/about</span></i><span
style='font-size:14.0pt;line-height:130%;color:#333333;letter-spacing:-.1pt;
text-decoration:none'>,</span></a><span style='font-size:14.0pt;line-height:
130%;color:#333333;letter-spacing:-.1pt'> </span><a
href="http://www.meadowlarktravel.com/about"><i><span style='font-size:14.0pt;
line-height:130%;color:#333333;text-decoration:none'>http://www.meadowlarktravel.com/about</span></i><span
style='font-size:14.0pt;line-height:130%;color:#333333;text-decoration:none'>,</span></a><span
style='font-size:14.0pt;line-height:130%;color:#333333'> and </span><a
href="http://admin.meadowlarktravel.com/about"><i><span style='font-size:14.0pt;
line-height:130%;color:#333333;text-decoration:none'>http://admin.meadowlarktravel.com/about</span></i><span
style='font-size:14.0pt;line-height:130%;color:#333333;text-decoration:none'>.</span></a><span
style='font-size:14.0pt;line-height:130%;color:#333333'> If you want to handle
a subdomain separately, you can use a package called </span><span
style='font-size:14.0pt;line-height:130%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vhost<span style='letter-spacing:-1.8pt'> </span></span><span
style='font-size:14.0pt;line-height:130%;color:#333333'>(for virtual host,
which comes from an Apache mechanism commonly used for handling subdomains).
First, install the package (</span><span style='font-size:14.0pt;line-height:
130%;font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm install vhost</span><span
style='font-size:14.0pt;line-height:130%;color:#333333'>).</span></p>

<p class=MsoBodyText style='margin-top:.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>To<span
style='letter-spacing:.6pt'> </span>test<span style='letter-spacing:.6pt'> </span>domain-based<span
style='letter-spacing:.6pt'> </span>routing<span style='letter-spacing:.65pt'> </span>on<span
style='letter-spacing:.6pt'> </span>your<span style='letter-spacing:.6pt'> </span>dev<span
style='letter-spacing:.6pt'> </span>machine,<span style='letter-spacing:.65pt'>
</span>youll<span style='letter-spacing:.55pt'> </span>need<span
style='letter-spacing:.65pt'> </span>some<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>way</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection280>

<p class=MsoNormal style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Route_Handlers_Are_Middleware"></a><a name="_bookmark616"></a><span
style='font-size:14.0pt;line-height:133%;color:#333333'>to fake domain names.
Fortunately, this is what your <i>hosts file </i>is for. On macOS<span
style='letter-spacing:1.45pt'> </span>and<span style='letter-spacing:1.55pt'> </span>Linux<span
style='letter-spacing:1.55pt'> </span>machines,<span style='letter-spacing:
1.55pt'> </span>it<span style='letter-spacing:1.45pt'> </span>can<span
style='letter-spacing:1.55pt'> </span>be<span style='letter-spacing:1.45pt'> </span>found<span
style='letter-spacing:1.55pt'> </span>at<span style='letter-spacing:1.45pt'> </span><i>/etc/hosts</i>,<span
style='letter-spacing:1.55pt'> </span>and<span style='letter-spacing:1.55pt'> </span>on
Windows,<span style='letter-spacing:2.0pt'> </span>its<span style='letter-spacing:
2.0pt'> </span>at<span style='letter-spacing:2.0pt'> </span><i>c:\windows\system32\drivers\etc\hosts</i>.<span
style='letter-spacing:2.0pt'> </span>Add<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>following to your hosts file (you will
need admin privileges to edit it):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: 127.0.0.1 admin.meadowlark.local&#13;&#10;127.0.0.1 meadowlark.local&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>This tells your computer to treat </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>meadowlark.local<span
style='letter-spacing:-1.35pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>admin.meadowlark.local<span
style='letter-spacing:-1.55pt'> </span></span><span style='color:#333333'>just
like regular internet domains but to map them to localhost (127.0.0.1). We use
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>.local<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>top-level
domain so as not to get confused (you could use </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>.com<span style='letter-spacing:-2.8pt'>
</span></span><span style='color:#333333'>or any other internet domain, but<span
style='letter-spacing:2.0pt'> </span>it would override the real domain, which
can lead to frustration).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:100.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark614"></a><span style='color:#333333'>Then you can use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vhost<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>middleware
to use domain-aware routing (<i>ch14/00-subdomains.js </i>in the companion
repo):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: // create &quot;admin&quot; subdomain...this should appear&#13;&#10;// before all your other routes&#13;&#10;var admin = express.Router() app.use(vhost('admin.meadowlark.local', admin))&#13;&#10;&#13;&#10;// create admin routes; these can be defined anywhere&#13;&#10;admin.get('*', (req, res) =&gt; res.send('Welcome, Admin!'))&#13;&#10;&#13;&#10;// regular routes&#13;&#10;app.get('*', (req, res) =&gt; res.send('Welcome, User!'))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><a
name="_bookmark615"></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>express.Router()<span style='letter-spacing:-1.45pt'> </span></span><span
style='color:#333333'>essentially<span style='letter-spacing:2.0pt'> </span>creates
a new instance of the Express<span style='letter-spacing:2.0pt'> </span>router.
You can treat this instance just like your original instance (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app</span><span
style='color:#333333'>).<span style='letter-spacing:4.0pt'> </span>You can add
routes and middleware just as you would to </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>app</span><span style='color:#333333'>.
However, it wont do anything until you add it to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app</span><span
style='color:#333333'>. We add it through </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>vhost</span><span style='color:#333333'>, which binds that
router instance to that subdomain.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image069.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection281>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image020.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:9.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Route<span
style='letter-spacing:-.25pt'> </span>Handlers<span style='letter-spacing:-.2pt'>
</span>Are<span style='letter-spacing:-.2pt'> </span><span style='letter-spacing:
-.1pt'>Middleware</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="_bookmark619"></a><span style='color:#333333'>Weve already seen basic
routing of matching a given path. <a name="_bookmark618"></a>But what does </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.get(\'/foo',
...)<span style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>actually
<i>do</i>? As we saw in </span><a href="#_bookmark427"><span style='color:#070707'>Chapter
10</span></a><span style='color:#333333'>, its simply a specialized piece of
middleware, down to having a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>method passed in. Lets look at some more sophisticated
examples (<i>ch14/01-fifty- fifty.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/fifty-fifty', (req, res, next) =&gt; { if(Math.random() &lt; 0.5) return next() res.send('sometimes this')&#13;&#10;})&#13;&#10;app.get('/fifty-fifty', (req,res) =&gt; { res.send('and sometimes that')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:73.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>In the previous example, we have two handlers for the
same route. Normally, the first one would win, but in this case, the first one
is going to pass<span style='letter-spacing:1.55pt'> </span>approximately<span
style='letter-spacing:1.6pt'> </span>half<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>time,<span style='letter-spacing:1.6pt'> </span>giving<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>second<span
style='letter-spacing:1.6pt'> </span>one<span style='letter-spacing:1.55pt'> </span>a<span
style='letter-spacing:1.55pt'> </span>chance.<span style='letter-spacing:1.6pt'>
</span>We dont even<span style='letter-spacing:1.4pt'> </span>have to<span
style='letter-spacing:1.4pt'> </span>use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.get<span style='letter-spacing:-2.2pt'> </span></span><span
style='color:#333333'>twice: you<span style='letter-spacing:1.4pt'> </span>can<span
style='letter-spacing:1.4pt'> </span>use as many<span style='letter-spacing:
1.4pt'> </span>handlers as you want for a single </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>app.get<span style='letter-spacing:
-2.15pt'> </span></span><span style='color:#333333'>call. Heres an example
that has an approximately equal chance of three different responses (<i>ch14/02-red-
green-blue.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: app.get('/rgb',&#13;&#10;(req, res, next) =&gt; {&#13;&#10;// about a third of the requests will return &quot;red&quot; if(Math.random() &lt; 0.33) return next() res.send('red')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection282>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: },&#13;&#10;(req, res, next) =&gt; {&#13;&#10;// half of the remaining 2/3 of requests (so another third)&#13;&#10;// will return &quot;green&quot; if(Math.random() &lt; 0.5) return next() res.send('green')&#13;&#10;},&#13;&#10;function(req, res){&#13;&#10;// and the last third returns &quot;blue&quot;&#13;&#10;res.send('blue')&#13;&#10;},&#13;&#10;)&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>While this may not seem particularly useful at first, it
allows you to create generic functions that can be used in any of your routes.
For example, lets say we have a mechanism that shows special offers on certain
pages. The special offers change frequently, and theyre not shown on every
page. We can create a function to inject the specials into the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.locals<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>property
(which youll remember from </span><a href="#_bookmark309"><span
style='color:#070707'>Chapter 7</span></a><span style='color:#333333'>) (<i>ch14/03-specials.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: async function specials(req, res, next) { res.locals.special = await getSpecialsFromDatabase() next()&#13;&#10;}&#13;&#10;&#13;&#10;app.get('/page-with-specials', specials, (req, res) =&gt; res.render('page-with-specials')&#13;&#10;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>We could also implement an authorization mechanism with
this approach. Lets say our user authorization code sets a session variable
called </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.session.authorized</span><span
style='color:#333333'>. We can use the following to make a reusable
authorization filter (<i>ch14/04-authorizer.js </i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: function authorize(req, res, next) {&#13;&#10;if(req.session.authorized) return next()&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection283>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image024.gif"
alt="Text Box: res.render('not-authorized')&#13;&#10;}&#13;&#10;app.get('/public', () =&gt; res.render('public')) app.get('/secret', authorize, () =&gt; res.render('secret'))&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:9.5pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="Route_Paths_and_Regular_Expressions"></a><a
name="_bookmark620"></a><span style='color:#8E0011'>Route<span
style='letter-spacing:-.3pt'> </span>Paths<span style='letter-spacing:-.2pt'> </span>and<span
style='letter-spacing:-.2pt'> </span>Regular<span style='letter-spacing:-.2pt'>
</span><span style='letter-spacing:-.1pt'>Expressions</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:72.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark621"></a><span style='color:#333333'>When you specify a path
(like <i>/foo</i>) in your route, its eventually converted to<span
style='letter-spacing:2.0pt'> </span>a<span style='letter-spacing:1.95pt'> </span>regular<span
style='letter-spacing:1.95pt'> </span>expression<span style='letter-spacing:
2.0pt'> </span>by<span style='letter-spacing:2.0pt'> </span>Express.<span
style='letter-spacing:2.0pt'> </span>Some<span style='letter-spacing:1.95pt'> </span>regular<span
style='letter-spacing:1.95pt'> </span>expression metacharacters are available
in route paths: </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>+</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>?</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>*</span><span style='color:#333333'>, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>(</span><span
style='color:#333333'>, and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>)</span><span style='color:#333333'>. Lets look at a couple<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>examples.<span
style='letter-spacing:1.5pt'> </span>Lets<span style='letter-spacing:1.45pt'> </span>say<span
style='letter-spacing:1.5pt'> </span>you<span style='letter-spacing:1.5pt'> </span>want<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>URLs<span
style='letter-spacing:1.45pt'> </span><i>/user<span style='letter-spacing:1.45pt'>
</span></i>and<span style='letter-spacing:1.45pt'> </span><i>/username<span
style='letter-spacing:1.45pt'> </span></i>to be handled by the same route:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/user(name)?'</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:1.0pt'> </span>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:1.05pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:1.05pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:1.05pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'user'</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;background:#FBFBFB'>))</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>One of my favorite novelty websitesnow sadly defunctwas
</span><a href="http://khaaan.com/"><i><span style='color:#333333;text-decoration:
none'>http://khaaan.com</span></i><span style='color:#333333;text-decoration:
none'>.</span></a><span style='color:#333333'> All it was was everyones
favorite starship captain belting his most iconic line. Useless, but made me
smile every time. Lets say we want to make our own KHAAAAAAAAN page but we
dont want our users to have to remember if its 2 <i>a</i>s or 3 or 10. The
following will get the job done:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>get</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/khaa+n'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:.9pt'> </span>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>req</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>,<span style='letter-spacing:.9pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>res</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>)<span style='letter-spacing:.9pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=&gt;<span style='letter-spacing:.9pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>res</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>render</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'khaaan'</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;background:#FBFBFB'>))</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Not<span
style='letter-spacing:.55pt'> </span>all<span style='letter-spacing:.55pt'> </span>normal<span
style='letter-spacing:.55pt'> </span>regex<span style='letter-spacing:.65pt'> </span>metacharacters<span
style='letter-spacing:.55pt'> </span>have<span style='letter-spacing:.55pt'> </span>meaning<span
style='letter-spacing:.6pt'> </span>in<span style='letter-spacing:.65pt'> </span>route<span
style='letter-spacing:.55pt'> </span>paths,<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>though</span></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>only the ones listed earlier. This is important, because
periods, which<span style='letter-spacing:4.0pt'> </span>are normally a regex
metacharacter meaning any character, can be used in routes unescaped.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, if you really need the full power of regular
expressions for your route, that is supported:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection284>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Organizing_Routes"></a><a
name="_bookmark624"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: app.get(/crazy|mad(ness)?|lunacy/, (req,res) =&gt; res.render('madness')&#13;&#10;)&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I have yet to find a good reason for using regex
metacharacters in my route paths, much less full regexes, but its good to be
aware the functionality is there.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Route_Parameters"></a><a name="_bookmark622"></a><span
style='color:#8E0011'>Route<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Parameters</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark623"></a><span style='color:#333333'>While regex routes may find
little day-to-day use in your Expression toolbox, youll most likely be using
route parameters quite frequently. In short, its a way to turn part of your
route into a variable parameter. Lets<span style='letter-spacing:2.0pt'> </span>say
in our website we want to have a page for each staff member. We have<span
style='letter-spacing:4.0pt'> </span>a<span style='letter-spacing:1.5pt'> </span>database<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.5pt'> </span>staff<span
style='letter-spacing:1.5pt'> </span>members<span style='letter-spacing:1.5pt'>
</span>with<span style='letter-spacing:1.6pt'> </span>bios<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.6pt'> </span>pictures.<span
style='letter-spacing:1.6pt'> </span>As<span style='letter-spacing:1.5pt'> </span>our<span
style='letter-spacing:1.5pt'> </span>company grows, it becomes more and more
unwieldy to add a new route for each<span style='letter-spacing:4.0pt'> </span>staff
member. Lets see how route parameters can help us (<i>ch14/05-staff.js<span
style='letter-spacing:2.0pt'> </span></i>in the companion repo):</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const staff = {&#13;&#10;mitch: { name: &quot;Mitch&quot;,&#13;&#10;bio: 'Mitch is the man to have at your back in a bar fight.' }, madeline: { name: &quot;Madeline&quot;, bio: 'Madeline is our Oregon expert.' }, walt: { name: &quot;Walt&quot;, bio: 'Walt is our Oregon Coast expert.' },&#13;&#10;}&#13;&#10;&#13;&#10;app.get('/staff/:name', (req, res, next) =&gt; {&#13;&#10;const info = staff[req.params.name]&#13;&#10;if(!info) return next()	// will eventually fall through to 404&#13;&#10;res.render('05-staffer', info)&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Note how we used <i>:name </i>in our route. That will
match any string (that doesnt include a forward<span style='letter-spacing:
.8pt'> </span>slash) and<span style='letter-spacing:.8pt'> </span>put it in<span
style='letter-spacing:.8pt'> </span>the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.params<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>object with</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection285>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>the key </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>name</span><span style='color:#333333'>. This is a feature we
will be using often, especially when creating a REST API. You can have multiple
parameters in our route. For example,<span style='letter-spacing:1.05pt'> </span>if
we want to<span style='letter-spacing:1.05pt'> </span>break<span
style='letter-spacing:1.05pt'> </span>up<span style='letter-spacing:1.05pt'> </span>our
staff listing<span style='letter-spacing:1.05pt'> </span>by<span
style='letter-spacing:1.05pt'> </span>city,<span style='letter-spacing:1.05pt'>
</span>we can<span style='letter-spacing:1.05pt'> </span>use this:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const staff = { portland: {&#13;&#10;mitch: { name: &quot;Mitch&quot;, bio: 'Mitch is the man to have at your back.' }, madeline: { name: &quot;Madeline&quot;, bio: 'Madeline is our Oregon expert.' },&#13;&#10;},&#13;&#10;bend: {&#13;&#10;walt: { name: &quot;Walt&quot;, bio: 'Walt is our Oregon Coast expert.' },&#13;&#10;},&#13;&#10;}&#13;&#10;&#13;&#10;app.get('/staff/:city/:name', (req, res, next) =&gt; {&#13;&#10;const cityStaff = staff[req.params.city]&#13;&#10;if(!cityStaff) return next()  // unrecognized city -&gt; 404&#13;&#10;const info = cityStaff[req.params.name]&#13;&#10;if(!info) return next()	// unrecognized staffer -&gt; 404&#13;&#10;res.render('staffer', info)&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Organizing<span
style='letter-spacing:-.4pt'> </span><span style='letter-spacing:-.1pt'>Routes</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark625"></a><span style='color:#333333'>It may be clear to you
already that it would be unwieldy to define all of our routes in the main
application file. Not only will that file grow over time, its also not a great
separation of functionality because theres a lot going on in that file already.
A simple site may have only a dozen routes or fewer, but a larger site could
have hundreds of routes.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So how to organize your routes? Well, how do you <i>want </i>to
organize your routes? Express is not opinionated about how you organize your
routes, so how you do it is limited only by your own imagination.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Ill<span
style='letter-spacing:.45pt'> </span>cover<span style='letter-spacing:.5pt'> </span>some<span
style='letter-spacing:.5pt'> </span>popular<span style='letter-spacing:.5pt'> </span>ways<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.55pt'> </span>handle<span
style='letter-spacing:.5pt'> </span>routes<span style='letter-spacing:.5pt'> </span>in<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.45pt'> </span>next<span
style='letter-spacing:.5pt'> </span>sections,<span style='letter-spacing:.55pt'>
</span>but<span style='letter-spacing:.5pt'> </span><span style='letter-spacing:
-.25pt'>at</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection286>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>the end of the day, I recommend four guiding principles
for deciding how to organize your routes:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Use<span style='letter-spacing:.55pt'> </span>named<span
style='letter-spacing:.6pt'> </span>functions<span style='letter-spacing:.55pt'>
</span>for<span style='letter-spacing:.6pt'> </span>route<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>handlers</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Writing route handlers inline by actually defining the
function that handles the route right then and there is fine for small
applications or prototyping, but it will quickly become unwieldy as your
website <span style='letter-spacing:-.1pt'>grows.</span></span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Routes<span style='letter-spacing:.5pt'> </span>should<span
style='letter-spacing:.55pt'> </span>not<span style='letter-spacing:.55pt'> </span>be<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>mysterious</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>This principle is intentionally vague because a large,
complex website may by necessity require a more complicated organizational
scheme than a 10-page website. At one end of the spectrum is simply putting<span
style='letter-spacing:4.0pt'> </span><i>all </i>of the routes for your website
in one single file so you know where they are. For large websites, this may be
undesirable, so you break the routes out by functional areas. However, even
then, it should be clear where you should go to look for a given route. When
you need to fix something, the last thing you want to do is have to spend an
hour figuring<span style='letter-spacing:1.55pt'> </span>out<span
style='letter-spacing:1.5pt'> </span>where<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>route<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>being<span style='letter-spacing:1.55pt'> </span>handled.<span
style='letter-spacing:1.55pt'> </span>I<span style='letter-spacing:1.5pt'> </span>had<span
style='letter-spacing:1.55pt'> </span>an<span style='letter-spacing:1.55pt'> </span>ASP.NET
MVC project at work that was a nightmare in this respect. The routes were
handled in at least 10 different places, and it wasnt logical or consistent
and was often contradictory. Even though I was intimately familiar with that
(very large) website, I still had to spend a significant amount of time
tracking down where certain URLs were handled.</span></p>

<p class=MsoNormal style='margin-top:10.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Route<span style='letter-spacing:.7pt'> </span>organization<span
style='letter-spacing:.75pt'> </span>should<span style='letter-spacing:.75pt'> </span>be<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>extensible</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If you have 20 or 30 routes now, defining them all in one
file is probably fine. What about in three years when you have 200 routes? It
can<span style='letter-spacing:1.95pt'> </span>happen.<span style='letter-spacing:
1.95pt'> </span>Whatever<span style='letter-spacing:1.85pt'> </span>method<span
style='letter-spacing:1.95pt'> </span>you<span style='letter-spacing:1.95pt'> </span>choose,<span
style='letter-spacing:1.95pt'> </span>you<span style='letter-spacing:1.95pt'> </span>should<span
style='letter-spacing:1.95pt'> </span>ensure<span style='letter-spacing:1.85pt'>
</span>you have room to grow.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Dont<span style='letter-spacing:.75pt'> </span>overlook<span
style='letter-spacing:.8pt'> </span>automatic<span style='letter-spacing:.75pt'>
</span>view-based<span style='letter-spacing:.85pt'> </span>route<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>handlers</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If your site consists of many pages that are static and
have fixed URLs, all of your routes will end up looking like this:</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection287>

<p class=MsoBodyText style='margin-top:1.65pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><a
name="Grouping_Handlers_Logically"></a><a name="_bookmark628"></a><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.get('/static/thing',
(req, res) =&gt; res.render(\'static/thing'))</span><span style='color:#333333'>.<span
style='letter-spacing:2.0pt'> </span>To<span style='letter-spacing:2.0pt'> </span>reduce<span
style='letter-spacing:2.0pt'> </span>needless<span style='letter-spacing:2.0pt'>
</span>code repetition, consider using an automatic view-based route handler.
This approach is described later in this chapter and can be used together<span
style='letter-spacing:4.0pt'> </span>with custom routes.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:10.2pt'><a name="Declaring_Routes_in_a_Module"></a><a
name="_bookmark626"></a><span style='color:#8E0011'>Declaring<span
style='letter-spacing:-.2pt'> </span>Routes<span style='letter-spacing:-.15pt'>
</span>in<span style='letter-spacing:-.2pt'> </span>a<span style='letter-spacing:
-.15pt'> </span><span style='letter-spacing:-.1pt'>Module</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark627"></a><span style='color:#333333'>The first step to
organizing our routes is getting them all into their own module. There are multiple
ways to do this. One approach is to have your module return an array of objects
containing method and handler properties.<span style='letter-spacing:1.7pt'> </span>Then<span
style='letter-spacing:1.7pt'> </span>you<span style='letter-spacing:1.7pt'> </span>could<span
style='letter-spacing:1.7pt'> </span>define the routes in<span
style='letter-spacing:1.7pt'> </span>your application<span style='letter-spacing:
1.7pt'> </span>file <span style='letter-spacing:-.1pt'>thusly:</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const routes = require('./routes.js')&#13;&#10;&#13;&#10;routes.forEach(route =&gt; app[route.method](route.handler))&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>This method has its advantages and could be well suited
to storing our<span style='letter-spacing:2.0pt'> </span>routes dynamically,
such as in a database or a JSON file. However, if you dont need that
functionality, I recommend passing the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app<span style='letter-spacing:-2.45pt'> </span></span><span
style='color:#333333'>instance to the module and letting it add the routes.
Thats the approach well take for our example. Create a file called <i>routes.js
</i>and move all of our existing routes into it:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = app =&gt; {&#13;&#10;&#13;&#10;app.get('/', (req,res) =&gt; app.render('home'))&#13;&#10;&#13;&#10;//...&#13;&#10;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>If<span
style='letter-spacing:.45pt'> </span>we<span style='letter-spacing:.45pt'> </span>just<span
style='letter-spacing:.5pt'> </span>cut<span style='letter-spacing:.45pt'> </span>and<span
style='letter-spacing:.5pt'> </span>paste,<span style='letter-spacing:.55pt'> </span>well<span
style='letter-spacing:.45pt'> </span>probably<span style='letter-spacing:.55pt'>
</span>run<span style='letter-spacing:.5pt'> </span>into<span style='letter-spacing:
.55pt'> </span>some<span style='letter-spacing:.45pt'> </span>problems.<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>For</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection288>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>example, if we have inline route handlers that use
variables or methods not available<span style='letter-spacing:1.55pt'> </span>in<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>new<span
style='letter-spacing:1.55pt'> </span>context,<span style='letter-spacing:1.6pt'>
</span>those<span style='letter-spacing:1.55pt'> </span>references<span
style='letter-spacing:1.55pt'> </span>will<span style='letter-spacing:1.55pt'> </span>now<span
style='letter-spacing:1.55pt'> </span>be<span style='letter-spacing:1.55pt'> </span>broken.<span
style='letter-spacing:1.6pt'> </span>We could add the necessary imports, but
hold off on that. Well be moving the handlers into<span style='letter-spacing:
1.65pt'> </span>their own<span style='letter-spacing:1.65pt'> </span>module
soon,<span style='letter-spacing:1.65pt'> </span>and<span style='letter-spacing:
1.65pt'> </span>well solve the problem then.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So how do we link our routes in? Simple: in <i>meadowlark.js</i>,
we simply import our routes:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>require</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'./routes'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.25pt;margin-right:91.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><span style='color:#333333'>Or we could be more explicit and add a named
import (which we name </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>addRoutes<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>to<span style='letter-spacing:-.2pt'> </span>better
reflect its nature as a function; we could also name the file this way if we
wanted):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const addRoutes = require('./routes')&#13;&#10;&#13;&#10;addRoutes(app)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Grouping<span
style='letter-spacing:-.45pt'> </span>Handlers<span style='letter-spacing:-.35pt'>
</span><span style='letter-spacing:-.1pt'>Logically</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:71.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark629"></a><span style='color:#333333'>To<span style='letter-spacing:
1.7pt'> </span>meet our first guiding<span style='letter-spacing:1.7pt'> </span>principle
(use named<span style='letter-spacing:1.7pt'> </span>functions for route<span
style='letter-spacing:2.0pt'> </span>handlers), well need somewhere to put
those handlers. One rather extreme option is to have a separate JavaScript file
for every handler. Its hard for<span style='letter-spacing:4.0pt'> </span>me
to imagine a situation in which this approach would have benefit. Its better<span
style='letter-spacing:1.85pt'> </span>to<span style='letter-spacing:1.9pt'> </span>somehow<span
style='letter-spacing:1.85pt'> </span>group<span style='letter-spacing:1.9pt'> </span>related<span
style='letter-spacing:1.9pt'> </span>functionality<span style='letter-spacing:
1.9pt'> </span>together.<span style='letter-spacing:1.9pt'> </span>That<span
style='letter-spacing:1.85pt'> </span>makes<span style='letter-spacing:1.85pt'>
</span>it easier<span style='letter-spacing:1.55pt'> </span>not<span
style='letter-spacing:1.55pt'> </span>only<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>leverage<span style='letter-spacing:1.55pt'>
</span>shared<span style='letter-spacing:1.65pt'> </span>functionality,<span
style='letter-spacing:1.65pt'> </span>but<span style='letter-spacing:1.55pt'> </span>also<span
style='letter-spacing:1.65pt'> </span>to<span style='letter-spacing:1.65pt'> </span>make<span
style='letter-spacing:1.55pt'> </span>changes in related methods.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:72.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>For now, lets group our functionality into
separate files: <i>handlers/main.js</i>, where well put the home page handler,
the about handler, and generally any handler that doesnt have another
logical home; <i>handlers/vacations.js</i>, where vacation-related handlers
will go; and so on.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection289>

<p class=MsoNormal style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Consider<span style='letter-spacing:.85pt'> </span><i><span
style='letter-spacing:-.1pt'>handlers/main.js</span></i><span style='letter-spacing:
-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const fortune = require('../lib/fortune') exports.home = (req, res) =&gt; res.render('home')&#13;&#10;exports.about = (req, res) =&gt; {&#13;&#10;const fortune = fortune.getFortune() res.render('about', { fortune })&#13;&#10;}&#13;&#10;&#13;&#10;//...&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Now<span style='letter-spacing:.45pt'> </span>lets<span
style='letter-spacing:.45pt'> </span>modify<span style='letter-spacing:.55pt'> </span><i>routes.js<span
style='letter-spacing:.45pt'> </span></i>to<span style='letter-spacing:.55pt'> </span>make<span
style='letter-spacing:.45pt'> </span>use<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>this:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const main = require('./handlers/main') module.exports = function(app) {&#13;&#10;app.get('/', main.home) app.get('/about', main.about)&#13;&#10;//...&#13;&#10;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>This<span style='letter-spacing:1.7pt'> </span>satisfies<span
style='letter-spacing:1.7pt'> </span>all<span style='letter-spacing:1.7pt'> </span>of<span
style='letter-spacing:1.7pt'> </span>our<span style='letter-spacing:1.7pt'> </span>guiding<span
style='letter-spacing:1.75pt'> </span>principles.<span style='letter-spacing:
1.75pt'> </span><i>/routes.js<span style='letter-spacing:1.7pt'> </span></i>is<span
style='letter-spacing:1.7pt'> </span><i>very </i>straightforward. Its easy to
see at a glance what routes are in your site and where they are being handled.
Weve also left ourselves plenty of room to grow. We can group related
functionality in as many different files as we need. And if <i>routes.js </i>ever
gets unwieldy, we can use the same technique again<span style='letter-spacing:
1.35pt'> </span>and<span style='letter-spacing:1.35pt'> </span>pass<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.25pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>object<span
style='letter-spacing:1.25pt'> </span>on<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>another<span style='letter-spacing:1.25pt'>
</span>module<span style='letter-spacing:1.25pt'> </span>that<span
style='letter-spacing:1.25pt'> </span>will<span style='letter-spacing:1.25pt'> </span>in<span
style='letter-spacing:1.35pt'> </span>turn register more routes (though that is
starting to veer into the overcomplicated territorymake sure you can really
justify an approach that complicated!).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Automatically<span style='letter-spacing:-.5pt'>
</span>Rendering<span style='letter-spacing:-.5pt'> </span><span
style='letter-spacing:-.1pt'>Views</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection290>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Automatically_Rendering_Views"></a><a name="_bookmark630"></a><a
name="_bookmark631"></a><span style='color:#333333'>If you ever find yourself
wishing for the days of old where you could just put an HTML file in a
directory andpresto!your website would serve it, then youre not alone. If
your website is content-heavy without a lot of functionality, you may find it a
needless hassle to add a route for every view. Fortunately, we can get around
this problem.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets say you want to add the file <i>views/foo.handlebars
</i>and just magically have it available on the route <i>/foo</i>. Lets see
how we might do that. In our application<span style='letter-spacing:1.85pt'> </span>file,<span
style='letter-spacing:1.85pt'> </span>right<span style='letter-spacing:1.75pt'>
</span>before<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.75pt'> </span>404<span style='letter-spacing:1.85pt'> </span>handler,<span
style='letter-spacing:1.85pt'> </span>add<span style='letter-spacing:1.85pt'> </span>the<span
style='letter-spacing:1.75pt'> </span>following middleware (<i>ch14/06-auto-views.js
</i>in the companion repo):</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const autoViews = {}&#13;&#10;const fs = require('fs')&#13;&#10;const { promisify } = require('util')&#13;&#10;const fileExists = promisify(fs.exists)&#13;&#10;&#13;&#10;app.use(async (req, res, next) =&gt; {&#13;&#10;const path = req.path.toLowerCase()&#13;&#10;// check cache; if it's there, render the view&#13;&#10;if(autoViews[path]) return res.render(autoViews[path])&#13;&#10;// if it's not in the cache, see if there's&#13;&#10;// a .handlebars file that matches&#13;&#10;if(await fileExists(  dirname + '/views' + path + '.handlebars')) { autoViews[path] = path.replace(/^\//, '')&#13;&#10;return res.render(autoViews[path])&#13;&#10;}&#13;&#10;// no view found; pass on to 404 handler&#13;&#10;next()&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now we can just add a <i>.handlebars </i>file to the <i>view
</i>directory and have it magically render on the appropriate path. Note that
regular routes will circumvent this mechanism (because we placed the automatic
view handler after all other routes), so if you have a route that renders a
different view for the route <i>/foo</i>, that will take precedence.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection291>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Note that this approach will run into problems if you <i>delete
</i>a view that<span style='letter-spacing:2.0pt'> </span>had been visited; it
will have been added to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>autoViews<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>object, so subsequent views will try to render it even
though its been deleted, resulting in an error. The problem could be solved by
wrapping the rendering in a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>try/catch<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>block and removing the view from </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>autoViews </span><span
style='color:#333333'>when an error is discovered; I will leave this
enhancement as a readers <span style='letter-spacing:-.1pt'>exercise.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="_bookmark632"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:73.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Routing is an important part of your project, and there
are many more possible<span style='letter-spacing:1.95pt'> </span>approaches<span
style='letter-spacing:1.95pt'> </span>to<span style='letter-spacing:2.0pt'> </span>organizing<span
style='letter-spacing:2.0pt'> </span>your<span style='letter-spacing:1.95pt'> </span>route<span
style='letter-spacing:1.95pt'> </span>handlers<span style='letter-spacing:1.95pt'>
</span>than<span style='letter-spacing:2.0pt'> </span>outlined<span
style='letter-spacing:2.0pt'> </span>here, so feel free to experiment and find
a technique that works for you and your project.<span style='letter-spacing:
1.45pt'> </span>I<span style='letter-spacing:1.4pt'> </span>encourage<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>favor<span style='letter-spacing:1.4pt'> </span>techniques<span
style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:1.4pt'> </span>are<span
style='letter-spacing:1.4pt'> </span>clear<span style='letter-spacing:1.4pt'> </span>and<span
style='letter-spacing:1.45pt'> </span>easy<span style='letter-spacing:1.45pt'> </span>to
trace. Routing is very much a map from the outside world (the client,<span
style='letter-spacing:4.0pt'> </span>usually a browser) to the server-side code
that responds to it. If that map is convoluted, it makes it difficult for you
to trace the flow of information in your application, which will hinder both
development and debugging<a name="_bookmark633"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection292>

<h1 style='margin-right:85.3pt;line-height:105%'><a
name="15._REST_APIs_and_JSON"></a><a name="_bookmark634"></a>Chapter 15. REST
APIs and <span style='letter-spacing:-.2pt'>JSON</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark635"></a><span style='color:#333333'>While we saw some REST API
examples in </span><a href="#_bookmark355"><span style='color:#070707'>Chapter
8</span></a><span style='color:#333333'>, our paradigm so<span
style='letter-spacing:4.0pt'> </span>far has mostly been process the data on
the server side and send<span style='letter-spacing:4.0pt'> </span>formatted
HTML to the client. Increasingly, this is not the default mode<span
style='letter-spacing:2.0pt'> </span>of operation for web applications.
Instead, most modern web applications are single-page applications (SPAs) that
receive all of their HTML and CSS in one static bundle and then rely on
receiving unstructured data as JSON and manipulating HTML directly. Similarly,
the importance of posting forms to communicate changes to the server is giving
way to communicating directly using HTTP requests to an API.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So its time to turn our attention to using Express to
provide API endpoints instead of preformatted HTML. This will serve us well in </span><a
href="#_bookmark665"><span style='color:#070707'>Chapter 16</span></a><span
style='color:#333333'>, when we demonstrate how our API could be used to
dynamically render an application.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, well strip down our application to
providing a coming soon HTML interface: well fill that in in </span><a
href="#_bookmark665"><span style='color:#070707'>Chapter 16</span></a><span
style='color:#333333'>. Instead, well focus on<span style='letter-spacing:
1.5pt'> </span>an<span style='letter-spacing:1.5pt'> </span>API<span
style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:1.4pt'> </span>will<span
style='letter-spacing:1.4pt'> </span>provide<span style='letter-spacing:1.4pt'>
</span>access<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>our<span style='letter-spacing:1.4pt'> </span>vacation<span
style='letter-spacing:1.5pt'> </span>database<span style='letter-spacing:1.4pt'>
</span>and<span style='letter-spacing:1.5pt'> </span>provide API support for
registering out of season listeners.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark636"></a><i><span style='color:#333333'>Web service </span></i><span
style='color:#333333'>is a general term that means any application programming
interface (API) thats accessible over HTTP. The idea of web services has been
around for quite some time, but until recently, the technologies that enabled
them were stuffy, Byzantine, and overcomplicated. There are still</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection293>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a name="Our_API"></a><a
name="_bookmark641"></a><span style='color:#333333'>systems that use those
technologies (such as SOAP and WSDL), and there are Node packages that will
help you interface with these systems. We wont be covering those, though.
Instead, we will be focused on providing so-called RESTful services, which are
much more straightforward to interface with.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark637"></a><span style='color:#333333'>The acronym <i>REST </i>stands
for <i>representational state transfer</i>, and the grammatically troubling <i>RESTful
</i>is used as an adjective to describe a web service that satisfies the
principles of REST. The formal description of REST is complicated and steeped
in computer science formality, but the basics are that REST is a stateless
connection between a client and a<span style='letter-spacing:4.0pt'> </span>server.<span
style='letter-spacing:1.6pt'> </span>The<span style='letter-spacing:1.5pt'> </span>formal<span
style='letter-spacing:1.5pt'> </span>definition<span style='letter-spacing:
1.6pt'> </span>of<span style='letter-spacing:1.5pt'> </span>REST<span
style='letter-spacing:1.5pt'> </span>also<span style='letter-spacing:1.6pt'> </span>specifies<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>service<span style='letter-spacing:1.5pt'>
</span>can be cached and that services can be layered (that is, when you use a
REST API, there may be other REST APIs beneath it).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>From a practical standpoint, the constraints of HTTP
actually make it difficult to create an API thats not RESTful; youd have to
go out of your way to establish state, for example. So our work is mostly cut
out for us.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="JSON_and_XML"></a><a name="_bookmark638"></a><span
style='color:#8E0011'>JSON<span style='letter-spacing:-.15pt'> </span>and<span
style='letter-spacing:-.1pt'> </span><span style='letter-spacing:-.25pt'>XML</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark640"></a><span style='color:#333333'>Vital to providing an API
is having a common language to speak in. Part<span style='letter-spacing:4.0pt'>
</span>of the communication is dictated for us: we must use HTTP methods to
communicate with the server. But past that, we are free to use whatever data
language we choose. Traditionally, XML has been a popular choice, and it
remains an important markup language. While XML is not particularly
complicated, <a name="_bookmark639"></a>Douglas Crockford saw that there was
room for something more lightweight, and JavaScript Object Notation (JSON) was
born. In addition to being JavaScript-friendly (though it is by no means
proprietary; it is an easy format for any language to parse), it also has the</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection294>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>advantage<span
style='letter-spacing:.5pt'> </span>of<span style='letter-spacing:.45pt'> </span>being<span
style='letter-spacing:.6pt'> </span>generally<span style='letter-spacing:.55pt'>
</span>easier<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span>write<span style='letter-spacing:.5pt'> </span>by<span
style='letter-spacing:.55pt'> </span>hand<span style='letter-spacing:.55pt'> </span>than<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>XML.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I prefer JSON over XML for most applications: theres better
JavaScript support, and its a simpler, more compact format. I recommend
focusing on JSON and providing XML only if existing systems require XML to
communicate with your app.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Our<span style='letter-spacing:-.1pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark642"></a><span style='color:#333333'>Well plan our API before
we start implementing it. In addition to listing vacations and subscribing to
in-season notifications, well add a delete vacation endpoint. Since this
is a public API, we wont actually delete the vacation.<span style='letter-spacing:
1.75pt'> </span>Well<span style='letter-spacing:1.65pt'> </span>simply<span
style='letter-spacing:1.75pt'> </span>mark<span style='letter-spacing:1.75pt'> </span>it<span
style='letter-spacing:1.65pt'> </span>as<span style='letter-spacing:1.65pt'> </span>delete<span
style='letter-spacing:1.65pt'> </span>requested<span style='letter-spacing:
1.65pt'> </span>so<span style='letter-spacing:1.75pt'> </span>an<span
style='letter-spacing:1.75pt'> </span>administrator can review. For example,
you might use this unsecured endpoint to allow vendors<span style='letter-spacing:
1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>request<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>removal<span
style='letter-spacing:1.55pt'> </span>of<span style='letter-spacing:1.55pt'> </span>vacations<span
style='letter-spacing:1.55pt'> </span>from<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>site,<span style='letter-spacing:1.6pt'> </span>which<span
style='letter-spacing:1.6pt'> </span>could then later be reviewed by an
administrator. Here are our API endpoints.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.45pt'>GET</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:.6pt'> </span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>/api/vacations</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Retrieves<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>vacations</span></span></p>

<p class=MsoNormal style='margin-top:12.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.45pt'>GET</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:.7pt'> </span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>/api/vacation/:sku</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Returns<span
style='letter-spacing:.4pt'> </span>a<span style='letter-spacing:.45pt'> </span>vacation<span
style='letter-spacing:.5pt'> </span>by<span style='letter-spacing:.5pt'> </span>its<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.25pt'>SKU</span></span></p>

<p class=MsoNormal style='margin-top:12.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>POST<span
style='letter-spacing:3.4pt'> </span>/api/vacation/:sku/notify-when-in-<span
style='letter-spacing:-.1pt'>season</span></span></i></p>

<p class=MsoBodyText style='margin-top:8.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><span
style='color:#333333'>Takes </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>email<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>as a querystring parameter and adds a notification
listener for the specified vacation</span></p>

<p class=MsoNormal style='margin-top:11.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.25pt'>DELETE</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:1.1pt'> </span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>/api/vacation/:sku</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:103%'><span
style='color:#333333'>Requests the deletion of a vacation; takes </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>email<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>(the
person requesting the deletion) and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>notes<span style='letter-spacing:-1.15pt'> </span></span><span
style='color:#333333'>as querystring parameters</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-left:20.0pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
letter-spacing:-.1pt;background:#FBFBFB'>[NOTE]</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB'> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection295>

<p class=MsoNormal style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><br clear=ALL>
<i><span style='font-size:14.0pt;color:#3F3F3F'>Example<span style='letter-spacing:
1.15pt'> </span>15-<span style='letter-spacing:-.25pt'>1.</span></span></i></p>

<p class=MsoBodyText style='margin-top:11.9pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark643"></a><span style='color:#333333'>There are many HTTP verbs
available. </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>POST<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>are the most common, followed by </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>DELETE<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>PUT</span><span
style='color:#333333'>. It has become a standard to use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>for <i>creating
</i>something, and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>PUT<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>for <i>updating </i>(or modifying) something. The English
meaning of these words doesnt support this distinction in any way, so you may
want to consider using the path to distinguish between these two operations to
avoid confusion. If you<span style='letter-spacing:4.0pt'> </span>want more
information about HTTP verbs, I recommend starting with this </span><a
href="http://bit.ly/32L4QWt"><span style='color:#070707'>Tamas Piros article</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There are many ways we could have described our API.
Here, weve<span style='letter-spacing:4.0pt'> </span>chosen to use
combinations of HTTP methods and paths to distinguish our API calls, and a mix
of querystring and body parameters for passing data. As an alternative, we
could have had different paths (such as</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><i><span
style='color:#333333'>/api/vacations/delete</span></i><span style='color:#333333'>)
with the same method.</span><a name="_bookmark644"></a><a href="#_bookmark664"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>1</span></sup></a><span
style='font-family:"Arial",sans-serif;color:#070707'> </span><span
style='color:#333333'>We could also have passed data<span style='letter-spacing:
1.3pt'> </span>in<span style='letter-spacing:1.35pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>consistent<span style='letter-spacing:
1.3pt'> </span>way.<span style='letter-spacing:1.35pt'> </span>For<span
style='letter-spacing:1.3pt'> </span>example,<span style='letter-spacing:1.35pt'>
</span>we<span style='letter-spacing:1.3pt'> </span>might<span
style='letter-spacing:1.3pt'> </span>have<span style='letter-spacing:1.3pt'> </span>chosen<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.35pt'> </span>pass<span
style='letter-spacing:1.3pt'> </span>all the necessary information for
retrieving parameters in the URL instead of using a querystring: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>DEL
/api/vacation/:id/:email/:notes</span><span style='color:#333333'>. To avoid
excessively long URLs, I recommend using the request body to pass large blocks
of data (for example, the deletion request notes).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image042.gif"
  alt="Text Box: TIP&#13;&#10;There is a popular and well-respected convention for JSON APIs, creatively named JSON:API. Its a bit verbose and repetitive for my taste, but I also believe that an imperfect standard is better than no standard at all. While were not using JSON:API for this book, you will learn everything you need to adopt the conventions laid down by JSON:API. See the JSON:API home page for more information.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>API<span
style='letter-spacing:-.25pt'> </span>Error<span style='letter-spacing:-.15pt'>
</span><span style='letter-spacing:-.1pt'>Reporting</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection296>

<p class=MsoBodyText style='margin-top:3.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="API_Error_Reporting"></a><a name="_bookmark646"></a><a name="_bookmark647"></a><span
style='color:#333333'>Error reporting in HTTP APIs is usually achieved through
HTTP status codes. If the request returns 200 (OK), the client knows the
request was successful. If the request returns 500 (Internal Server Error), the
request failed. In most applications, however, not everything can (or should
be) categorized coarsely into success or failure. For example, what if you
request something by an ID but that ID doesnt exist? This does not represent a
server error. The client has asked for something that doesnt exist. In
general, errors can be grouped into the following categories:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Catastrophic<span style='letter-spacing:1.2pt'> </span><span
style='letter-spacing:-.1pt'>errors</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.15pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark648"></a><span style='color:#333333'>Errors that result in an
unstable or unknown state for the server.<span style='letter-spacing:4.0pt'> </span>Usually,<span
style='letter-spacing:1.55pt'> </span>this<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.5pt'> </span>result<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.5pt'> </span>an<span
style='letter-spacing:1.55pt'> </span>unhandled<span style='letter-spacing:
1.55pt'> </span>exception.<span style='letter-spacing:1.55pt'> </span>The<span
style='letter-spacing:1.5pt'> </span>only<span style='letter-spacing:1.55pt'> </span>safe
way to recover from a catastrophic error is to restart the server. Ideally, any
pending requests would receive a 500 response code, but if the failure is
severe enough, the server may not be able to respond at all,<span
style='letter-spacing:4.0pt'> </span>and the request will time out.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Recoverable<span style='letter-spacing:.75pt'> </span>server<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>errors</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark649"></a><span style='color:#333333'>Recoverable errors do not
require a server restart, or any other heroic action. The error is a result of
an unexpected error condition on the server (for example, a database connection
being unavailable). The problem may be transient or permanent. A 500 response
code is appropriate in this situation.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Client<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>errors</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark650"></a><span style='color:#333333'>Client errors are a result
of the client making the mistakeusually missing<span style='letter-spacing:
1.65pt'> </span>or<span style='letter-spacing:1.55pt'> </span>invalid<span
style='letter-spacing:1.65pt'> </span>parameters.<span style='letter-spacing:
1.65pt'> </span>It<span style='letter-spacing:1.55pt'> </span>isnt<span
style='letter-spacing:1.55pt'> </span>appropriate<span style='letter-spacing:
1.55pt'> </span>to<span style='letter-spacing:1.65pt'> </span>use<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.55pt'> </span>500
response code. After all, the server has not failed. Everything is<span
style='letter-spacing:2.0pt'> </span>working normally; the client just isnt
using the API correctly. You<span style='letter-spacing:2.0pt'> </span>have a
couple of options here: you could respond with a status code of 200 and
describe the error in the response body, or you could additionally try to
describe the error with an appropriate HTTP status</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection297>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="Our_Tests"></a><a name="_bookmark656"></a><span style='color:#333333'>code.<span
style='letter-spacing:1.9pt'> </span>I<span style='letter-spacing:1.8pt'> </span>recommend<span
style='letter-spacing:1.9pt'> </span>the<span style='letter-spacing:1.8pt'> </span>latter<span
style='letter-spacing:1.8pt'> </span>approach.<span style='letter-spacing:1.9pt'>
</span>The<span style='letter-spacing:1.8pt'> </span>most<span
style='letter-spacing:1.8pt'> </span>useful<span style='letter-spacing:1.8pt'> </span>response
codes in this case are 404 (Not Found), 400 (Bad Request), and 401
(Unauthorized). Additionally, the response body should contain an explanation
of the specifics of the error. If you want to go above and beyond,<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.65pt'> </span>error<span
style='letter-spacing:1.65pt'> </span>message<span style='letter-spacing:1.65pt'>
</span>would<span style='letter-spacing:1.75pt'> </span>even<span
style='letter-spacing:1.75pt'> </span>contain<span style='letter-spacing:1.75pt'>
</span>a<span style='letter-spacing:1.65pt'> </span>link<span style='letter-spacing:
1.75pt'> </span>to documentation.<span style='letter-spacing:1.55pt'> </span>Note<span
style='letter-spacing:1.45pt'> </span>that<span style='letter-spacing:1.45pt'> </span>if<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>user<span
style='letter-spacing:1.45pt'> </span>requests<span style='letter-spacing:1.45pt'>
</span>a<span style='letter-spacing:1.45pt'> </span>list<span style='letter-spacing:
1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>things<span
style='letter-spacing:1.45pt'> </span>and theres nothing to return, this is
not an error condition. Its appropriate to simply return an empty list.</span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In our application, well be using a combination of HTTP
response codes and error messages in the body.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Cross-Origin_Resource_Sharing"></a><a name="_bookmark651"></a><span
style='color:#8E0011'>Cross-Origin<span style='letter-spacing:-.55pt'> </span>Resource<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Sharing</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:73.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark653"></a><span style='color:#333333'>If<span style='letter-spacing:
1.45pt'> </span>youre<span style='letter-spacing:1.45pt'> </span>publishing<span
style='letter-spacing:1.5pt'> </span>an<span style='letter-spacing:1.5pt'> </span>API,<span
style='letter-spacing:1.5pt'> </span>youll<span style='letter-spacing:1.45pt'>
</span>likely<span style='letter-spacing:1.5pt'> </span>want<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.5pt'> </span>make<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>API<span
style='letter-spacing:1.45pt'> </span>available to others. <a
name="_bookmark655"></a>This will result in a <i>cross-site HTTP request</i>.
Cross-site HTTP requests have been the subject of many attacks and have
therefore been restricted by the <i>same-origin policy</i>, which restricts
where scripts can be loaded from. Specifically, the protocol, domain, and port
must match. This makes<span style='letter-spacing:1.3pt'> </span>it<span
style='letter-spacing:1.3pt'> </span>impossible<span style='letter-spacing:
1.3pt'> </span>for<span style='letter-spacing:1.3pt'> </span>your<span
style='letter-spacing:1.3pt'> </span>API<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.3pt'> </span>used<span
style='letter-spacing:1.35pt'> </span>by<span style='letter-spacing:1.35pt'> </span>another<span
style='letter-spacing:1.3pt'> </span>site,<span style='letter-spacing:1.35pt'> </span>which<span
style='letter-spacing:1.35pt'> </span>is where<span style='letter-spacing:1.85pt'>
</span>cross-origin<span style='letter-spacing:1.95pt'> </span>resource<span
style='letter-spacing:1.85pt'> </span>sharing<span style='letter-spacing:1.95pt'>
</span>(CORS)<span style='letter-spacing:1.85pt'> </span>comes<span
style='letter-spacing:1.85pt'> </span>in.<span style='letter-spacing:1.95pt'> </span>CORS<span
style='letter-spacing:1.85pt'> </span>allows<span style='letter-spacing:1.85pt'>
</span>you to lift this restriction on a case-by-case basis, even allowing you
to list<span style='letter-spacing:2.0pt'> </span>which domains specifically
are allowed to access the script. <a name="_bookmark652"></a>CORS is
implemented through the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Access-Control-Allow-Origin<span style='letter-spacing:-.3pt'> </span></span><span
style='color:#333333'>header. <a name="_bookmark654"></a>The easiest way to
implement it in an Express application is to use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>cors </span><span
style='color:#333333'>package (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install cors</span><span style='color:#333333'>). To enable
CORS for your application, use <span style='letter-spacing:-.1pt'>this:</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const cors = require('cors')&#13;&#10;&#13;&#10;app.use(cors())&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Because<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.5pt'> </span>same-origin<span
style='letter-spacing:.55pt'> </span>API<span style='letter-spacing:.45pt'> </span>is<span
style='letter-spacing:.5pt'> </span>there<span style='letter-spacing:.5pt'> </span>for<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.5pt'> </span>reason<span
style='letter-spacing:.55pt'> </span>(to<span style='letter-spacing:.55pt'> </span>prevent<span
style='letter-spacing:.45pt'> </span>attacks),<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.5pt'>I</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection298>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>recommend applying CORS only where necessary. In our
case, we want to expose our entire API (but only the API), so were going to
restrict CORS<span style='letter-spacing:4.0pt'> </span>to paths starting with <i>/api</i>:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const cors = require('cors')&#13;&#10;&#13;&#10;app.use('/api', cors())&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>See the </span><a href="https://github.com/expressjs/cors"><span
style='color:#070707'>package documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>for information about more advanced use of
CORS.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Our<span style='letter-spacing:-.1pt'> Tests</span></span></h2>

<p class=MsoBodyText style='margin-top:12.75pt;margin-right:72.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark658"></a><span style='color:#333333'>If we use HTTP verbs other
than </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET</span><span
style='color:#333333'>, it can be a hassle to test our API,<span
style='letter-spacing:2.0pt'> </span>since<span style='letter-spacing:1.55pt'> </span>browsers<span
style='letter-spacing:1.55pt'> </span>only<span style='letter-spacing:1.65pt'> </span>know<span
style='letter-spacing:1.55pt'> </span>how<span style='letter-spacing:1.55pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>issue<span style='letter-spacing:1.55pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>requests<span
style='letter-spacing:1.55pt'> </span>(and<span style='letter-spacing:1.65pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>requests
for forms). There are ways around this, such as the excellent application </span><a
href="https://www.getpostman.com/"><span style='color:#070707'>Postman</span></a><span
style='color:#333333'>. However, whether or not you use such a utility, its
good to have automated tests. Before we write tests for our API, we need a way
to<span style='letter-spacing:2.0pt'> </span>actually <i>call </i>a REST API. <a
name="_bookmark657"></a>For that, well be using a Node package called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node-fetch</span><span
style='color:#333333'>, which replicates the browsers <i>fetch </i>API:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><a
href="mailto:npminstall--save-devnode-fetch@2.6.0"><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;background:#FBFBFB;
text-decoration:none'>npm<span style='letter-spacing:1.0pt'> </span>install<span
style='letter-spacing:1.05pt'> </span>--save-dev<span style='letter-spacing:
1.0pt'> </span>node-<span style='letter-spacing:-.1pt'>fetch@2.6.0</span> </span></a></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Well<span
style='letter-spacing:.4pt'> </span>put<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.45pt'> </span>tests<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.4pt'> </span>API<span
style='letter-spacing:.45pt'> </span>calls<span style='letter-spacing:.45pt'> </span>were<span
style='letter-spacing:.45pt'> </span>going<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>implement<span style='letter-spacing:.45pt'>
</span><span style='letter-spacing:-.25pt'>in</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>tests/api/api.test.js<span style='letter-spacing:1.0pt'> </span></span></i><span
style='font-size:14.0pt;color:#333333'>(<i>ch15/test/api/api.test.js<span
style='letter-spacing:1.0pt'> </span></i>in<span style='letter-spacing:1.05pt'>
</span>the<span style='letter-spacing:1.0pt'> </span>companion<span
style='letter-spacing:1.05pt'> </span><span style='letter-spacing:-.1pt'>repo):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const fetch = require('node-fetch')&#13;&#10;&#13;&#10;const baseUrl = 'http://localhost:3000'&#13;&#10;&#13;&#10;const _fetch = async (method, path, body) =&gt; {&#13;&#10;body = typeof body === 'string' ? body : JSON.stringify(body)&#13;&#10;const headers = { 'Content-Type': 'application/json' }&#13;&#10;const res = await fetch(baseUrl + path, { method, body, headers })&#13;&#10;if(res.status &lt; 200 || res.status &gt; 299)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection299>

<p class=MsoNormal style='margin-top:2.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:91.0pt;margin-bottom:.0001pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>throw<span
style='letter-spacing:.8pt'> </span>new<span style='letter-spacing:.8pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#336666'>Error</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>`API<span style='letter-spacing:.85pt'> </span>returned<span
style='letter-spacing:.8pt'> </span>status<span style='letter-spacing:.85pt'> </span></span><span
style='color:#AA0000;letter-spacing:-.1pt'>${</span><span style='color:#000087;
letter-spacing:-.1pt'>res</span><span style='letter-spacing:-.1pt'>.<span
style='color:#000087'>status</span><span style='color:#AA0000'>}</span><span
style='color:#CC3300'>`</span>)</span></span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:80.15pt;margin-bottom:.0001pt'><b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#006699'>return<span
style='letter-spacing:.75pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt'>res</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.1pt'>.<span style='color:#000087'>json</span>()</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:69.4pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif'>}</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:9.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:3.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:69.4pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>describe</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'API<span style='letter-spacing:.75pt'> </span>tests'</span>,<span
style='letter-spacing:.8pt'> </span>()<span style='letter-spacing:.75pt'> </span><span
style='color:#545454'>=&gt;<span style='letter-spacing:.8pt'> </span></span><span
style='letter-spacing:-.5pt'>{</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:80.15pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>test</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'GET<span style='letter-spacing:.85pt'> </span>/api/vacations'</span>,<span
style='letter-spacing:.85pt'> </span><span style='color:#000087'>async<span
style='letter-spacing:.85pt'> </span></span>()<span style='letter-spacing:.9pt'>
</span><span style='color:#545454'>=&gt;<span style='letter-spacing:.85pt'> </span></span><span
style='letter-spacing:-.5pt'>{</span></span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699'>const </span></b><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacations </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>= </span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>await _fetch</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'get'</span>, <span style='color:#CC3300'>'/api/vacations'</span>)
<span style='color:#000087;letter-spacing:-.1pt'>expect</span><span
style='letter-spacing:-.1pt'>(<span style='color:#000087'>vacations</span>.<span
style='color:#000087'>length</span>).<span style='color:#000087'>not</span>.<span
style='color:#000087'>toBe</span>(<span style='color:#FF6600'>0</span>)</span></span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:222.9pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699'>const </span></b><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacation0 </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>= </span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacations</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>[<span
style='color:#FF6600'>0</span>] <span style='color:#000087;letter-spacing:-.1pt'>expect</span><span
style='letter-spacing:-.1pt'>(<span style='color:#000087'>vacation0</span>.<span
style='color:#000087'>name</span>).<span style='color:#000087'>toMatch</span>(<span
style='color:#33AAAA'>/\w/</span>) </span><span style='color:#000087'>expect</span>(<b><span
style='color:#006699'>typeof </span></b><span style='color:#000087'>vacation0</span>.<span
style='color:#000087'>price</span>).<span style='color:#000087'>toBe</span>(<span
style='color:#CC3300'>'number'</span>)</span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.9pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.25pt'>})</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:80.15pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>test</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'GET<span style='letter-spacing:1.1pt'> </span>/api/vacation/:sku'</span>,<span
style='letter-spacing:1.15pt'> </span><span style='color:#000087'>async</span>()<span
style='letter-spacing:1.15pt'> </span><span style='color:#545454'>=&gt;<span
style='letter-spacing:1.15pt'> </span></span><span style='letter-spacing:-.5pt'>{</span></span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699'>const </span></b><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacations </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>= </span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>await _fetch</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'get'</span>, <span style='color:#CC3300'>'/api/vacations'</span>)
<span style='color:#000087;letter-spacing:-.1pt'>expect</span><span
style='letter-spacing:-.1pt'>(<span style='color:#000087'>vacations</span>.<span
style='color:#000087'>length</span>).<span style='color:#000087'>not</span>.<span
style='color:#000087'>toBe</span>(<span style='color:#FF6600'>0</span>)</span></span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.95pt'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.65pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacation0<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=<span style='letter-spacing:
.65pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt'>vacations</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>[<span
style='color:#FF6600'>0</span>]</span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699'>const </span></b><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacation </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>= </span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>await _fetch</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'get'</span>, <span style='color:#CC3300'>'/api/vacation/'
</span><span style='color:#545454'>+ </span><span style='color:#000087'>vacation0</span>.<span
style='color:#000087'>sku</span>) <span style='color:#000087;letter-spacing:
-.1pt'>expect</span><span style='letter-spacing:-.1pt'>(<span style='color:
#000087'>vacation</span>.<span style='color:#000087'>name</span>).<span
style='color:#000087'>toBe</span>(<span style='color:#000087'>vacation0</span>.<span
style='color:#000087'>name</span>)</span></span></p>

<p class=MsoNormal style='margin-left:80.15pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:
-.25pt'>})</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:117.9pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;text-indent:-10.8pt;line-height:
121%'><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>test</span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif'>(<span style='color:#CC3300'>'POST
/api/vacation/:sku/notify-when-in-season'</span>, <span style='color:#000087'>async</span>()
<span style='color:#545454'>=&gt; </span>{ <b><span style='color:#006699'>const
</span></b><span style='color:#000087'>vacations </span><span style='color:
#545454'>= </span><span style='color:#000087'>await _fetch</span>(<span
style='color:#CC3300'>'get'</span>, <span style='color:#CC3300'>'/api/vacations'</span>)
<span style='color:#000087;letter-spacing:-.1pt'>expect</span><span
style='letter-spacing:-.1pt'>(<span style='color:#000087'>vacations</span>.<span
style='color:#000087'>length</span>).<span style='color:#000087'>not</span>.<span
style='color:#000087'>toBe</span>(<span style='color:#FF6600'>0</span>)</span></span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.9pt'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.65pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacation0<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=<span style='letter-spacing:
.65pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt'>vacations</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>[<span
style='color:#FF6600'>0</span>]</span></p>

<p class=MsoNormal style='margin-top:2.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:69.4pt;margin-bottom:.0001pt;text-indent:21.6pt;line-height:
105%'><i><span style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>// at</span></i><i><span style='font-size:10.5pt;line-height:
105%;font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'>
</span></i><i><span style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>this<span style='letter-spacing:-.3pt'> </span></span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>m</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>o</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>m</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>e</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>n</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>t</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>,</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'> </span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>all<span style='letter-spacing:-.3pt'> </span></span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>we can<span style='letter-spacing:.05pt'> </span>do</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B;letter-spacing:-.3pt'> </span></i><i><span style='font-size:10.5pt;
line-height:105%;font-family:"Trebuchet MS",sans-serif;color:#34576B'>is<span
style='letter-spacing:-.3pt'> </span></span></i><i><span style='font-size:10.5pt;
line-height:105%;font-family:"Trebuchet MS",sans-serif;color:#34576B'>make sure<span
style='letter-spacing:.05pt'> </span>the HTTP<span style='letter-spacing:.05pt'>
</span>request</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'> </span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>is </span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.1pt'>successful</span></i></p>

<p class=MsoNormal style='margin-top:.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:69.4pt;margin-bottom:.0001pt;text-indent:21.6pt;line-height:
121%'><span style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#000087'>await _fetch</span><span style='font-size:10.5pt;line-height:
121%;font-family:"BIZ UDGothic",sans-serif'>(<span style='color:#CC3300'>'post'</span>,
<span style='color:#CC3300'>`/api/vacation/</span><span style='color:#AA0000'>${</span><span
style='color:#000087'>vacation0</span>.<span style='color:#000087'>sku</span><span
style='color:#AA0000'>}</span><span style='color:#CC3300'>/notify-when-in- <span
style='letter-spacing:-.1pt'>season`</span></span><span style='letter-spacing:
-.1pt'>,</span></span></p>

<p class=MsoNormal style='margin-left:101.75pt;line-height:12.95pt'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>{<span
style='letter-spacing:1.3pt'> </span><span style='color:#000087'>email</span><span
style='color:#545454'>:<span style='letter-spacing:1.35pt'> </span></span><span
style='color:#CC3300'>'test@meadowlarktravel.com'<span style='letter-spacing:
1.35pt'> </span></span><span style='letter-spacing:-.25pt'>})</span></span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.15pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.25pt'>})</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:80.15pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>test</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'DELETE<span style='letter-spacing:1.2pt'> </span>/api/vacation/:id'</span>,<span
style='letter-spacing:1.2pt'> </span><span style='color:#000087'>async</span>()<span
style='letter-spacing:1.2pt'> </span><span style='color:#545454'>=&gt;<span
style='letter-spacing:1.2pt'> </span></span><span style='letter-spacing:-.5pt'>{</span></span></p>

<p class=MsoNormal style='margin-top:2.8pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:91.0pt;margin-bottom:.0001pt;line-height:121%'><b><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#006699'>const </span></b><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacations </span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif;
color:#545454'>= </span><span style='font-size:10.5pt;line-height:121%;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>await _fetch</span><span
style='font-size:10.5pt;line-height:121%;font-family:"BIZ UDGothic",sans-serif'>(<span
style='color:#CC3300'>'get'</span>, <span style='color:#CC3300'>'/api/vacations'</span>)
<span style='color:#000087;letter-spacing:-.1pt'>expect</span><span
style='letter-spacing:-.1pt'>(<span style='color:#000087'>vacations</span>.<span
style='color:#000087'>length</span>).<span style='color:#000087'>not</span>.<span
style='color:#000087'>toBe</span>(<span style='color:#FF6600'>0</span>)</span></span></p>

<p class=MsoNormal style='margin-left:91.0pt;line-height:12.95pt'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699'>const<span
style='letter-spacing:.65pt'> </span></span></b><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>vacation0<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454'>=<span style='letter-spacing:
.65pt'> </span></span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt'>vacations</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.1pt'>[<span
style='color:#FF6600'>0</span>]</span></p>

<p class=MsoNormal style='margin-top:2.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:69.4pt;margin-bottom:.0001pt;text-indent:21.6pt;line-height:
105%'><i><span style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>// at</span></i><i><span style='font-size:10.5pt;line-height:
105%;font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'>
</span></i><i><span style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>this<span style='letter-spacing:-.3pt'> </span></span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>m</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>o</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>m</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>e</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>n</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B'>t</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>,</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'> </span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>all<span style='letter-spacing:-.3pt'> </span></span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>we can<span style='letter-spacing:.05pt'> </span>do</span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B;letter-spacing:-.3pt'> </span></i><i><span style='font-size:10.5pt;
line-height:105%;font-family:"Trebuchet MS",sans-serif;color:#34576B'>is<span
style='letter-spacing:-.3pt'> </span></span></i><i><span style='font-size:10.5pt;
line-height:105%;font-family:"Trebuchet MS",sans-serif;color:#34576B'>make sure<span
style='letter-spacing:.05pt'> </span>the HTTP<span style='letter-spacing:.05pt'>
</span>request</span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.3pt'> </span></i><i><span
style='font-size:10.5pt;line-height:105%;font-family:"Trebuchet MS",sans-serif;
color:#34576B'>is </span></i><i><span style='font-size:10.5pt;line-height:105%;
font-family:"Trebuchet MS",sans-serif;color:#34576B;letter-spacing:-.1pt'>successful</span></i></p>

<p class=MsoNormal style='margin-top:.85pt;margin-right:0cm;margin-bottom:0cm;
margin-left:91.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087'>await<span
style='letter-spacing:1.25pt'> </span>_fetch</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif'>(<span style='color:#CC3300'>'delete'</span>,<span
style='letter-spacing:1.25pt'> </span><span style='color:#CC3300;letter-spacing:
-.1pt'>`/api/vacation/</span><span style='color:#AA0000;letter-spacing:-.1pt'>${</span><span
style='color:#000087;letter-spacing:-.1pt'>vacation0</span><span
style='letter-spacing:-.1pt'>.<span style='color:#000087'>sku</span><span
style='color:#AA0000'>}</span><span style='color:#CC3300'>`</span>)</span></span></p>

<p class=MsoNormal style='margin-top:2.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.15pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;letter-spacing:-.25pt'>})</span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection300>

<p class=MsoNormal align=center style='margin-top:2.0pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.25pt;background:#FBFBFB'>}<a
name="Using_Express_to_Provide_an_API"></a><a name="_bookmark659"></a>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Our<span style='letter-spacing:1.5pt'> </span>test<span
style='letter-spacing:1.5pt'> </span>suite<span style='letter-spacing:1.5pt'> </span>starts<span
style='letter-spacing:1.5pt'> </span>off<span style='letter-spacing:1.5pt'> </span>with<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.5pt'> </span>helper<span
style='letter-spacing:1.5pt'> </span>function<span style='letter-spacing:1.55pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>_fetch</span><span
style='color:#333333'>,<span style='letter-spacing:1.55pt'> </span>which<span
style='letter-spacing:1.55pt'> </span>handles some common housekeeping. It will
JSON encode the body if it isnt already, add the appropriate headers, and
throw an appropriate error if the response status code isnt in the 200s.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We have a single test for each of our API endpoints. Im
not suggesting that these tests are robust or complete; even with this simple
API, we could (and should) have several tests for each endpoint. What we have
here is more of a starting point that illustrates techniques for testing an <span
style='letter-spacing:-.2pt'>API.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There are a couple of important characteristics of these
tests that deserve mention. One is that we are relying on the API being already
started and running on port 3000. A more robust test suite would find an open
port,<span style='letter-spacing:4.0pt'> </span>start the API on that port as
part of its setup, and stop it when all the tests have run. Second, this test
relies on data already being present in our API. For example, the first test
expects there to be at least one vacation, and for that<span style='letter-spacing:
1.2pt'> </span>vacation<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.25pt'> </span>have<span style='letter-spacing:1.2pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>name<span style='letter-spacing:1.2pt'> </span>and<span
style='letter-spacing:1.25pt'> </span>a<span style='letter-spacing:1.2pt'> </span>price.<span
style='letter-spacing:1.25pt'> </span>In<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>real<span style='letter-spacing:1.2pt'> </span>application,<span
style='letter-spacing:1.25pt'> </span>you<span style='letter-spacing:1.25pt'> </span>may
not be able to make these assumptions (for example, you may start with no data,
and you may want to test for allowable missing data). Again, a more robust
testing framework would have a way of setting and resetting the initial data in
the API so you could start from a known state every time.</span></p>

<p class=MsoBodyText style='margin-top:.3pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For example, you might have scripts that set up and seed
a test database, attach the API to it, and tear it down for every test run. As
we saw in </span><a href="#_bookmark165"><span style='color:#070707'>Chapter 5</span></a><span
style='color:#333333'>, testing is a large and complicated topic, and we can
only scratch the surface here.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>first<span style='letter-spacing:.5pt'> </span>test<span
style='letter-spacing:.45pt'> </span>covers<span style='letter-spacing:.5pt'> </span>our<span
style='letter-spacing:.5pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>GET<span style='letter-spacing:1.0pt'> </span>/api/vacations<span
style='letter-spacing:-3.0pt'> </span></span><span style='color:#333333'>endpoint.<span
style='letter-spacing:.55pt'> </span>It<span style='letter-spacing:.45pt'> </span>fetches<span
style='letter-spacing:.5pt'> </span>all<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>of</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection301>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>the vacations, validates that there is at least one, and
checks the first one to see if it has a name and a price. We could also
conceivably test other data properties.<span style='letter-spacing:1.5pt'> </span>Ill<span
style='letter-spacing:1.45pt'> </span>leave<span style='letter-spacing:1.45pt'>
</span>it<span style='letter-spacing:1.45pt'> </span>as<span style='letter-spacing:
1.45pt'> </span>a<span style='letter-spacing:1.45pt'> </span>readers<span
style='letter-spacing:1.45pt'> </span>exercise<span style='letter-spacing:1.45pt'>
</span>to<span style='letter-spacing:1.5pt'> </span>think<span
style='letter-spacing:1.5pt'> </span>about<span style='letter-spacing:1.45pt'> </span>which
properties are most important to test.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
131%'><span style='color:#333333'>The second test covers our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET
/api/vacation/:sku<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>endpoint. Since we dont have consistent test data, we
start by fetching all of the vacations and getting the SKU from the first one
so we can test this endpoint.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:72.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Our last two tests cover our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>POST
/api/vacation/:sku/notify-when- in-season<span style='letter-spacing:-.8pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>DELETE /api/vacation/:sku<span style='letter-spacing:-.8pt'> </span></span><span
style='color:#333333'>endpoints. Unfortunately, with our current API and
testing framework, we can do very little to verify that these endpoints are
doing what they are supposed to, so we default to invoking them and trusting
the API is doing the right thing when it doesnt return an error. If we wanted
to make these tests more robust, we would<span style='letter-spacing:2.0pt'> </span>have<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.45pt'> </span>either<span
style='letter-spacing:1.35pt'> </span>add<span style='letter-spacing:1.45pt'> </span>endpoints<span
style='letter-spacing:1.35pt'> </span>that<span style='letter-spacing:1.35pt'> </span>allow<span
style='letter-spacing:1.35pt'> </span>us<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>verify<span style='letter-spacing:1.45pt'>
</span>the<span style='letter-spacing:1.35pt'> </span>actions<span
style='letter-spacing:1.35pt'> </span>(for example, an endpoint that determined
if a given email was registered for a specific vacation) or somehow give the
tests backdoor access to our <span style='letter-spacing:-.1pt'>database.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you run the tests now, they will time out and
failbecause we havent implemented our API or even started our server. So
lets get started<a name="_bookmark660"></a>!</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='text-align:justify'><span style='color:#8E0011'>Using<span
style='letter-spacing:-.3pt'> </span>Express<span style='letter-spacing:-.2pt'>
</span>to<span style='letter-spacing:-.15pt'> </span>Provide<span
style='letter-spacing:-.2pt'> </span>an<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><a
name="_bookmark661"></a><span style='color:#333333'>Express is quite capable of
providing an API. There are various npm modules available that provide helpful
functionality (see </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>connect-rest </span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>json-api</span><span
style='color:#333333'>, for example), but I find that Express is perfectly
capable<span style='letter-spacing:2.0pt'> </span>out of the box,<span
style='letter-spacing:.8pt'> </span>and<span style='letter-spacing:.8pt'> </span>well
be sticking<span style='letter-spacing:.8pt'> </span>with<span
style='letter-spacing:.8pt'> </span>a pure Express implementation.</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection302>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Well start by creating the handlers in <i>lib/handlers.js
</i>(we could create a separate file, such as <i>lib/api.js</i>, but lets keep
things simple for now):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: exports.getVacationsApi = async (req, res) =&gt; {&#13;&#10;const vacations = await db.getVacations({ available: true }) res.json(vacations)&#13;&#10;}&#13;&#10;&#13;&#10;exports.getVacationBySkuApi = async (req, res) =&gt; {&#13;&#10;const vacation = await db.getVacationBySku(req.params.sku) res.json(vacation)&#13;&#10;}&#13;&#10;&#13;&#10;exports.addVacationInSeasonListenerApi = async (req, res) =&gt; {&#13;&#10;await db.addVacationInSeasonListener(req.params.sku, req.body.email) res.json({ message: 'success' })&#13;&#10;}&#13;&#10;&#13;&#10;exports.requestDeleteVacationApi = async (req, res) =&gt; {&#13;&#10;const { email, notes } = req.body&#13;&#10;res.status(500).json({ message: 'not yet implemented' })&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.4pt'> </span>we<span
style='letter-spacing:.4pt'> </span>hook<span style='letter-spacing:.45pt'> </span>up<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.4pt'> </span>API<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.45pt'> </span><i><span
style='letter-spacing:-.1pt'>meadowlark.js</span></i><span style='letter-spacing:
-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/api/vacations', handlers.getVacationsApi) app.get('/api/vacation/:sku', handlers.getVacationBySkuApi) app.post('/api/vacation/:sku/notify-when-in-season',&#13;&#10;handlers.addVacationInSeasonListenerApi) app.delete('/api/vacation/:sku', handlers.requestDeleteVacationApi)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Nothing here should be particularly surprising by now.
Note that were using our database abstraction layer, so it doesnt matter if
we use our MongoDB implementation or our PostgreSQL implementation (though you
will find minor inconsequential extra fields depending on the implementation,
which we could remove if necessary).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection303>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I am leaving </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>requestDeleteVacationsApi<span style='letter-spacing:-2.35pt'> </span></span><span
style='color:#333333'>as a readers exercise, mainly because this functionality
could be implemented so many different ways. The simplest approach would be to
just modify our vacation schema to<span style='letter-spacing:4.0pt'> </span>have<span
style='letter-spacing:1.5pt'> </span>delete<span style='letter-spacing:1.5pt'>
</span>requested<span style='letter-spacing:1.5pt'> </span>fields<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>just<span
style='letter-spacing:1.5pt'> </span>get<span style='letter-spacing:1.5pt'> </span>updated<span
style='letter-spacing:1.6pt'> </span>with<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>email<span style='letter-spacing:1.5pt'> </span>and
notes when the API is called. A more sophisticated approach would be to have a
separate table, like a moderation queue, that records the deletion requests
separately, referencing the vacation in question, which would<span
style='letter-spacing:4.0pt'> </span>better lend itself to administrator use.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Assuming you set up Jest correctly in </span><a
href="#_bookmark165"><span style='color:#070707'>Chapter 5</span></a><span
style='color:#333333'>, you should just be able to run </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm test</span><span
style='color:#333333'>, and the API tests will be picked up (Jest will look for
any<span style='letter-spacing:4.0pt'> </span>file that ends in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>.test.js</span><span
style='color:#333333'>). Youll see we have three passing tests and one failing
one: the incomplete </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>DELETE /api/vacation/:sku</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2><a name="_bookmark662"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I hope this chapter has left you asking, Thats it? At
this point, youre probably realizing that the primary function of Express is
to respond to HTTP requests. What the requests are forand how they respondis
entirely up to you. Do they need to respond with HTML? CSS? Plain text? JSON?
All easy to do with Express. You could even respond with binary<span
style='letter-spacing:2.0pt'> </span>file types. For example, it would not be
hard to dynamically construct and return images. In this sense, an API is just
another one of the many ways Express can respond.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the next chapter, well put this API to use by
building a single-page application, and replicate what weve done in previous
chapters in a different way<a name="_bookmark663"></a>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:67.35pt;margin-bottom:.0001pt'><a href="#_bookmark644"><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;font-family:"Arial",sans-serif;color:#070707;
letter-spacing:4.4pt'> </span><a name="_bookmark664"></a><span
style='font-size:10.5pt;color:#333333'>If<span style='letter-spacing:.3pt'> </span>your<span
style='letter-spacing:.35pt'> </span>client<span style='letter-spacing:.3pt'> </span>cant<span
style='letter-spacing:.3pt'> </span>use<span style='letter-spacing:.35pt'> </span>different<span
style='letter-spacing:.3pt'> </span>HTTP<span style='letter-spacing:.3pt'> </span>methods,<span
style='letter-spacing:.35pt'> </span>see<span style='letter-spacing:.3pt'> </span></span><a
href="http://bit.ly/2O7nr9E"><span style='font-size:10.5pt;color:#070707'>this<span
style='letter-spacing:.3pt'> </span>module</span></a><span style='font-size:
10.5pt;color:#333333'>,<span style='letter-spacing:.3pt'> </span>which<span
style='letter-spacing:.35pt'> </span>allows<span style='letter-spacing:.3pt'> </span>you<span
style='letter-spacing:.3pt'> </span>to<span style='letter-spacing:.35pt'> </span><span
style='letter-spacing:-.1pt'>fake</span></span></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection304>

<p class=MsoNormal style='margin-top:4.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:82.0pt;margin-bottom:.0001pt'><span style='font-size:10.5pt;
color:#333333'>different<span style='letter-spacing:.4pt'> </span>HTTP<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>methods.</span></span></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection305>

<h1 style='margin-right:37.5pt;line-height:105%'><a
name="16._Single-Page_Applications"></a><a
name="A_Short_History_of_Web_Application_Devel"></a><a name="_bookmark665"></a>Chapter
16. Single-Page <span style='letter-spacing:-.1pt'>Applications</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:72.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark666"></a><span style='color:#333333'>The<span style='letter-spacing:
1.35pt'> </span>term<span style='letter-spacing:1.35pt'> </span><i>single-page<span
style='letter-spacing:1.35pt'> </span>application<span style='letter-spacing:
1.4pt'> </span></i>(SPA)<span style='letter-spacing:1.35pt'> </span>is<span
style='letter-spacing:1.35pt'> </span>something<span style='letter-spacing:
1.4pt'> </span>of<span style='letter-spacing:1.35pt'> </span>a<span
style='letter-spacing:1.35pt'> </span>misnomer,<span style='letter-spacing:
1.4pt'> </span>or<span style='letter-spacing:1.35pt'> </span>it is at least
confusing two meanings of the word page. SPAs, from the<span
style='letter-spacing:2.0pt'> </span>users<span style='letter-spacing:1.65pt'>
</span>perspective,<span style='letter-spacing:1.7pt'> </span>can<span
style='letter-spacing:1.7pt'> </span>(and<span style='letter-spacing:1.7pt'> </span>usually<span
style='letter-spacing:1.7pt'> </span>do)<span style='letter-spacing:1.65pt'> </span>still<span
style='letter-spacing:1.65pt'> </span>appear<span style='letter-spacing:1.65pt'>
</span>to<span style='letter-spacing:1.7pt'> </span>have<span style='letter-spacing:
1.65pt'> </span>different pages: the home page, the Vacations page, the About
page, and so on. As a matter of fact, you could create a traditional
server-side rendered<span style='letter-spacing:4.0pt'> </span>application and
an SPA that were indistinguishable to the user.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The single page has more to do with where and how the
HTML is constructed than the users experience. In an SPA, the server delivers
a single HTML bundle when the user first loads the application,</span><a
name="_bookmark667"></a><a href="#_bookmark719"><sup><span style='font-family:
"Arial",sans-serif;color:#070707'>1</span></sup></a><span style='font-family:
"Arial",sans-serif;color:#070707'> </span><span style='color:#333333'>and any
changes in the UI (which may appear as different pages to the user) are the
result of JavaScript manipulating the DOM in response to user activity or
network events.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>SPAs still need to communicate frequently with the
server, but HTML is usually only sent as part of that first request. After
that, only JSON data and static assets are transferred between the client and
server.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Understanding the reason for this now-dominant approach
to web application development requires a little history.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-right:85.3pt;line-height:102%'><span style='color:#8E0011'>A
Short History of Web Application <span style='letter-spacing:-.1pt'>Development</span></span></h2>

</div>

<span style='font-size:11.0pt;line-height:102%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection306>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark668"></a><span style='color:#333333'>The way we approach web
development has undergone a massive shift in the last 10 years, but one thing
has remained relatively consistent: the components involved in a website or web
application. Namely:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:15931392'><span style='left:0px;position:absolute;
left:169px;top:-228373px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:15931904'><span style='left:0px;position:absolute;
left:169px;top:-228373px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>HTML and the Document Object Model (DOM) <span
style='letter-spacing:-.1pt'>JavaScript</span></span></p>

<p class=MsoBodyText style='margin-left:105.35pt;line-height:16.1pt'><span
style='position:relative;z-index:15932416'><span style='left:0px;position:absolute;
left:169px;top:-228454px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333;letter-spacing:-.25pt'>CSS</span></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15932928'><span style='left:0px;position:absolute;left:169px;
top:-228475px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Static<span style='letter-spacing:.6pt'> </span>assets<span
style='letter-spacing:.65pt'> </span>(generally<span style='letter-spacing:
.7pt'> </span>multimedia:<span style='letter-spacing:.65pt'> </span>images<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.7pt'> </span>videos,<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>etc.)</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Put together by a browser, these components are what
provide the user <span style='letter-spacing:-.1pt'>experience.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:88.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>How </span></i><span style='color:#333333'>that
experience is constructed, however, started shifting drastically around 2012.
Today, the dominant paradigm for web development is <i>single-page applications</i>,
or SPAs.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark669"></a><span style='color:#333333'>To understand SPAs, we need
to understand what to contrast them with, so were going to go even further
back in time, to 1998, the year before the<span style='letter-spacing:2.0pt'> </span>term
Web 2.0 was first whispered, and eight years before jQuery was <span
style='letter-spacing:-.1pt'>introduced.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In 1998, the dominant method for delivering web
applications was for web servers<span style='letter-spacing:1.75pt'> </span>to<span
style='letter-spacing:1.85pt'> </span>send<span style='letter-spacing:1.85pt'> </span>HTML,<span
style='letter-spacing:1.85pt'> </span>CSS,<span style='letter-spacing:1.85pt'> </span>JavaScript,<span
style='letter-spacing:1.85pt'> </span>and<span style='letter-spacing:1.85pt'> </span>multimedia<span
style='letter-spacing:1.75pt'> </span>assets<span style='letter-spacing:1.75pt'>
</span><i>in response to every request</i>. Imagine youre watching TV, and you
want to change the channel. The metaphorical equivalent here is that you would<span
style='letter-spacing:2.0pt'> </span>have<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>throw<span style='letter-spacing:1.3pt'> </span>away<span
style='letter-spacing:1.35pt'> </span>your<span style='letter-spacing:1.3pt'> </span>TV,<span
style='letter-spacing:1.35pt'> </span>go<span style='letter-spacing:1.35pt'> </span>buy<span
style='letter-spacing:1.35pt'> </span>another<span style='letter-spacing:1.3pt'>
</span>one,<span style='letter-spacing:1.35pt'> </span>schlep<span
style='letter-spacing:1.35pt'> </span>it<span style='letter-spacing:1.3pt'> </span>into<span
style='letter-spacing:1.35pt'> </span>your house, and set it upjust to change
the channel (navigate to a different<span style='letter-spacing:2.0pt'> </span>page,
even on the same site).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>problem<span style='letter-spacing:.45pt'>
</span>with<span style='letter-spacing:.55pt'> </span>this<span
style='letter-spacing:.45pt'> </span>approach<span style='letter-spacing:.55pt'>
</span>is<span style='letter-spacing:.45pt'> </span>that<span style='letter-spacing:
.45pt'> </span>theres<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.45pt'> </span>lot<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.45pt'> </span>overhead<span style='letter-spacing:.5pt'>
</span><span style='letter-spacing:-.1pt'>involved.</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection307>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Sometimes<span style='letter-spacing:1.9pt'> </span>the<span
style='letter-spacing:1.9pt'> </span>HTMLor<span style='letter-spacing:1.9pt'>
</span>large<span style='letter-spacing:1.9pt'> </span>chunks<span
style='letter-spacing:1.9pt'> </span>of<span style='letter-spacing:1.9pt'> </span>itwouldnt<span
style='letter-spacing:1.9pt'> </span>change<span style='letter-spacing:1.9pt'> </span>at<span
style='letter-spacing:1.9pt'> </span>all. The CSS changed even less. Browsers
mitigated some of this overhead<span style='letter-spacing:4.0pt'> </span>cost
by caching assets, but the pace of innovation in web applications was straining
this model.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In 1999, the term Web 2.0 was coined to try to describe
the richness of experience that people were beginning to expect from websites.
The years between 1999 and 2012 saw technological advancements that were laying
the groundwork for SPAs.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Clever<span style='letter-spacing:1.4pt'> </span>web<span
style='letter-spacing:1.45pt'> </span>developers<span style='letter-spacing:
1.4pt'> </span>began<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>realize<span style='letter-spacing:1.4pt'>
</span>that<span style='letter-spacing:1.4pt'> </span>if<span style='letter-spacing:
1.4pt'> </span>they<span style='letter-spacing:1.45pt'> </span>were<span
style='letter-spacing:1.4pt'> </span>going<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>keep their users engaged, the overhead of
shipping the entire website every time the user wanted to (metaphorically)
change the channel was unacceptable. These developers realized that not every
change in an application required information<span style='letter-spacing:1.85pt'>
</span>from<span style='letter-spacing:1.8pt'> </span>the<span
style='letter-spacing:1.8pt'> </span>server,<span style='letter-spacing:1.85pt'>
</span>and<span style='letter-spacing:1.85pt'> </span>not<span
style='letter-spacing:1.8pt'> </span>every<span style='letter-spacing:1.85pt'> </span>change<span
style='letter-spacing:1.8pt'> </span>that<span style='letter-spacing:1.8pt'> </span>required
information from the server needed the entire application just to deliver a
small change.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this period from 1999 to 2012, pages were still
generally pages: when<span style='letter-spacing:4.0pt'> </span>you first went
to a website, you got the HTML, the CSS, and the static assets. When you
navigated to a different page, you would get different HTML, different static
assets, and sometimes different CSS. However, on each page, the page itself
might change in response to user interaction, and instead of asking the server
for a whole new application, JavaScript would change the DOM directly. If
information needed to be fetched from the server,<span style='letter-spacing:
1.55pt'> </span>that<span style='letter-spacing:1.45pt'> </span>information<span
style='letter-spacing:1.55pt'> </span>was<span style='letter-spacing:1.45pt'> </span>sent<span
style='letter-spacing:1.45pt'> </span>in<span style='letter-spacing:1.55pt'> </span>XML<span
style='letter-spacing:1.45pt'> </span>or<span style='letter-spacing:1.45pt'> </span>JSON,<span
style='letter-spacing:1.55pt'> </span>without<span style='letter-spacing:1.45pt'>
</span>all<span style='letter-spacing:1.45pt'> </span>the attendant HTML. It
was, once again, up to the JavaScript to interpret the data and change the user
interface accordingly. In 2006, jQuery was introduced,<span style='letter-spacing:
2.0pt'> </span>which<span style='letter-spacing:2.0pt'> </span>significantly<span
style='letter-spacing:2.0pt'> </span>eased<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>burden<span style='letter-spacing:2.0pt'> </span>of<span
style='letter-spacing:2.0pt'> </span>DOM<span style='letter-spacing:2.0pt'> </span>manipulation
<i>and </i>dealing with network requests.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection308>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Many of these changes were being driven by the increasing
power of computers andby extensionbrowsers, Web developers were finding<span
style='letter-spacing:4.0pt'> </span>that more and more of the work to make a
website or web application look pretty could be done directly on the users
computer instead of being done on the server and then sent to the user.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This shift in approach went into overdrive in the late
2000s, when smartphones were introduced. Now, not only were browsers capable of
doing more, but people wanted to access web applications <i>over wireless
networks</i>. Suddenly, the overhead cost of sending data went up, making it
even more attractive to ship as little as possible over the network, and let
the browser do as much work as possible.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>By 2012, it was common practice to try to send as little
information as possible over the network, and do as much as possible in the
browser. Like the primordial soup giving rise to the first life, this rich
environment provided the conditions for the natural evolution of the this
technique: the single-page application.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The idea is simple enough: for any given web application,
the HTML, JavaScript, and CSS (if any) are shipped <i>exactly once</i>. Once
the browser<span style='letter-spacing:2.0pt'> </span>has the HTML, it is up to
the JavaScript to make all changes to the DOM<span style='letter-spacing:4.0pt'>
</span>to make the user feel that they are navigating to a different page. No
more does the server need to send different HTML when you navigate from the
home page to the Vacations page, for example.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Of course the server is still involved: its still
responsible for providing up- to-date data, and being the single source of
truth in a multiuser<span style='letter-spacing:2.0pt'> </span>application.
But in an SPA architecture, the way the application appears to the user is no
longer the concern of the server: its the concern of</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection309>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="SPA_Technologies"></a><a
name="_bookmark670"></a><span style='color:#333333'>JavaScript<span
style='letter-spacing:.55pt'> </span>and<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.6pt'> </span>frameworks<span style='letter-spacing:.55pt'>
</span>that<span style='letter-spacing:.55pt'> </span>enable<span
style='letter-spacing:.6pt'> </span>this<span style='letter-spacing:.55pt'> </span>clever<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>illusion.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While Angular is generally considered the first SPA
framework, it has been joined by many others: React, Vue, and Ember being the
most prominent among Angulars competition.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:82.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If<span style='letter-spacing:1.35pt'> </span>you<span
style='letter-spacing:1.45pt'> </span>are<span style='letter-spacing:1.35pt'> </span>new<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.45pt'> </span>development,<span
style='letter-spacing:1.45pt'> </span>SPAs<span style='letter-spacing:1.35pt'> </span>may<span
style='letter-spacing:1.45pt'> </span>be<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.35pt'> </span>only<span style='letter-spacing:1.45pt'> </span>frame<span
style='letter-spacing:1.35pt'> </span>of reference, making this simply some
interesting history. But if youre a veteran, you may find the shift confusing
and jarring. Whichever group<span style='letter-spacing:4.0pt'> </span>you fall
into, this chapter is designed to help you understand how web applications are
delivered<span style='letter-spacing:.75pt'> </span>as SPAs,<span
style='letter-spacing:.75pt'> </span>and<span style='letter-spacing:.75pt'> </span>what
the role of Express is in<span style='letter-spacing:.75pt'> </span>that.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This history is relevant to Express because the role of
the server has changed during this shift in web development techniques. When
the first edition of this book was published, Express was still commonly used
to serve multi-page applications (along with the APIs that supported Web
2.0like functionality). Now Express is almost entirely used to serve SPAs,
development servers, and APIs, reflecting the changing nature of web
development.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Interestingly,<span style='letter-spacing:1.45pt'> </span>there<span
style='letter-spacing:1.4pt'> </span>are<span style='letter-spacing:1.4pt'> </span>still<span
style='letter-spacing:1.4pt'> </span>valid<span style='letter-spacing:1.45pt'> </span>reasons<span
style='letter-spacing:1.4pt'> </span>for<span style='letter-spacing:1.4pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>web<span style='letter-spacing:1.45pt'> </span>application<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>able to serve a specific page (instead of
the generic page, which will be reformatted by the browser). While this may
seem like we are coming full- circle, or throwing away the gains of SPAs, the
technique to do this better mirrors the architecture of SPAs. Called <i>server-side
rendering </i>(SSR), this technique allows the servers to use the same code
that the browser uses to create individual pages to increase first-page load.
The key here is that the server<span style='letter-spacing:1.45pt'> </span>doesnt<span
style='letter-spacing:1.45pt'> </span>have<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.55pt'> </span>do<span style='letter-spacing:1.55pt'> </span>much<span
style='letter-spacing:1.55pt'> </span>thinking:<span style='letter-spacing:
1.45pt'> </span>it<span style='letter-spacing:1.45pt'> </span>simply<span
style='letter-spacing:1.55pt'> </span>uses<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>same techniques as the browser to
generate a specific page. This kind of SSR is usually done to enhance
first-page loading experience, and to support</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection310>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>search engine optimization. Its a more advanced topic
that we wont be covering here, but you should be aware of the
practice.f1603.450</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have some insight into how and why SPAs came
into being, lets look at the SPA frameworks that are available today<a
name="_bookmark671"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>SPA<span style='letter-spacing:-.1pt'>
Technologies</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark672"></a><span
style='color:#333333'>There<span style='letter-spacing:.55pt'> </span>are<span
style='letter-spacing:.6pt'> </span>many<span style='letter-spacing:.6pt'> </span>choices<span
style='letter-spacing:.6pt'> </span>for<span style='letter-spacing:.6pt'> </span>SPA<span
style='letter-spacing:.55pt'> </span>technologies<span style='letter-spacing:
.6pt'> </span><span style='letter-spacing:-.2pt'>now:</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:10.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark673"></a><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>React</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>For the moment, React seems to be the king of the SPA
hill, though there are former greats (Angular) on one side of it, and ambitious
usurpers (Vue) on the other side. Sometime in 2018, React surpassed Angular in
usage statics. React is an open source library, but it started its life as a
Facebook project, and Facebook is still an active<span style='letter-spacing:
2.0pt'> </span>contributor. Well be using React for our Meadowlark Travel
refactor.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark674"></a><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>Angular</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:72.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>By most accounts, the original SPA, Googles Angular
became massively<span style='letter-spacing:1.85pt'> </span>popular<span
style='letter-spacing:1.8pt'> </span>but<span style='letter-spacing:1.8pt'> </span>was<span
style='letter-spacing:1.8pt'> </span>eventually<span style='letter-spacing:
1.85pt'> </span>dethroned<span style='letter-spacing:1.85pt'> </span>by<span
style='letter-spacing:1.85pt'> </span>React.<span style='letter-spacing:1.85pt'>
</span>In<span style='letter-spacing:1.85pt'> </span>late 2014, Angular
announced version 2, which was a massive change from the first version, and
alienated many existing users and scared off new ones.<span style='letter-spacing:
1.9pt'> </span>I<span style='letter-spacing:1.8pt'> </span>believe<span
style='letter-spacing:1.8pt'> </span>this<span style='letter-spacing:1.8pt'> </span>shift<span
style='letter-spacing:1.8pt'> </span>(while<span style='letter-spacing:1.8pt'> </span>probably<span
style='letter-spacing:1.9pt'> </span>necessary)<span style='letter-spacing:
1.8pt'> </span>contributed<span style='letter-spacing:1.9pt'> </span>to React<span
style='letter-spacing:1.5pt'> </span>eventually<span style='letter-spacing:
1.6pt'> </span>outpacing<span style='letter-spacing:1.6pt'> </span>Angular.<span
style='letter-spacing:1.6pt'> </span>Another<span style='letter-spacing:1.5pt'>
</span>reason<span style='letter-spacing:1.6pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>Angular<span
style='letter-spacing:1.5pt'> </span>is a much larger framework than React.
This has advantages and disadvantages:<span style='letter-spacing:2.0pt'> </span>Angular<span
style='letter-spacing:2.0pt'> </span>provides<span style='letter-spacing:2.0pt'>
</span>a<span style='letter-spacing:2.0pt'> </span>much<span style='letter-spacing:
2.0pt'> </span>more<span style='letter-spacing:2.0pt'> </span>complete<span
style='letter-spacing:2.0pt'> </span>architecture for<span style='letter-spacing:
1.8pt'> </span>building<span style='letter-spacing:1.85pt'> </span>full<span
style='letter-spacing:1.8pt'> </span>applications,<span style='letter-spacing:
1.85pt'> </span>and<span style='letter-spacing:1.85pt'> </span>theres<span
style='letter-spacing:1.8pt'> </span>always<span style='letter-spacing:1.8pt'> </span>a<span
style='letter-spacing:1.8pt'> </span>clear<span style='letter-spacing:1.8pt'> </span>Angular
way to do things, whereas frameworks like React and Vue leave a lot more up to
personal choice and creativity. Regardless of which<span style='letter-spacing:
4.0pt'> </span>approach is better, bigger frameworks are more ponderous and
slow to evolve, which gave React an innovation edge.</span></p>

<p class=MsoNormal style='margin-top:10.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark675"></a><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>Vue.js</span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection311>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>An upstart challenger to React, and the brainchild of a
single developer, Evan You. In a remarkably short time, it has gained an
impressive following, and it is extremely well-liked by its adherents, but it
is still far behind Reacts runaway popularity. I have had some experience with
Vue, and I appreciate its clear documentation and lightweight approach, but I
have come to prefer Reacts architecture and philosophy.</span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark676"></a><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>Ember</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Like Angular, Ember offers a comprehensive application
framework. Theres a large and active development community and, while not as
innovative as React or Vue, it offers a lot of functionality and clarity. I
have found I far prefer lighter frameworks, and have stuck with React for this
reason.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark677"></a><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>Polymer</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>I have no experience with Polymer, but it is backed by
Google, which lends it credibility. People seem to be curious about what
Polymer is bringing to the table, but I havent seen a lot of people rushing to
adopt <span style='letter-spacing:-.2pt'>it.</span></span></p>

<p class=MsoBodyText style='margin-top:12.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre looking for a robust out-of-the-box framework,
and you dont<span style='letter-spacing:4.0pt'> </span>mind coloring within
the lines, you should consider Angular or Ember. If you want room for creative
expression and innovation, I recommend React or Vue. I dont yet know where
Polymer fits in yet, but its worth keeping<span style='letter-spacing:4.0pt'> </span>an
eye on.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that weve seen the players, lets move forward with
React, and refactor Meadowlark Travel as an SPA!</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Creating<span
style='letter-spacing:-.2pt'> </span>a<span style='letter-spacing:-.2pt'> </span>React<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.25pt'>App</span></span></h2>

<p class=MsoBodyText style='margin-top:12.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><a
name="_bookmark678"></a><span style='color:#333333'>The best way to get started
with a React app is to use the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>create-react- app<span style='letter-spacing:-2.25pt'> </span></span><span
style='color:#333333'>(CRA) utility, which creates all of the boilerplate,
developer tooling,</span></p>

</div>

<span style='font-size:11.0pt;line-height:123%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection312>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="Creating_a_React_App"></a><a name="_bookmark679"></a><span
style='color:#333333'>and provides a minimal starter application that you can
build on. Furthermore, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>create-react-app<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>will keep its configuration up-to-date so you can focus
on building your application instead of on framework<span style='letter-spacing:
4.0pt'> </span>tooling. That said, if you ever reach the point where you need
to configure your tooling, you can eject your application: youll lose the
ability to<span style='letter-spacing:4.0pt'> </span>keep up-to-date with the
latest CRA tooling, but youll have full control over all of the application
configuration.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Unlike what weve been doing so far, where all of our
application artifacts lived alongside our Express application, SPAs are best
thought of as a completely separate, independent application. To that end,
well have <i>two </i>application roots instead of one. For clarity, when Im
referring to the directory<span style='letter-spacing:1.75pt'> </span>where<span
style='letter-spacing:1.65pt'> </span>your<span style='letter-spacing:1.65pt'> </span>Express<span
style='letter-spacing:1.65pt'> </span>application<span style='letter-spacing:
1.75pt'> </span>lives,<span style='letter-spacing:1.75pt'> </span>Ill<span
style='letter-spacing:1.65pt'> </span>say<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.65pt'> </span><i>server<span style='letter-spacing:
1.65pt'> </span>root</i>, and for the directory where your React application
lives, Ill say the <i>client root</i>. The <i>application root </i>is where
both of those directories now live.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>So go to your application root and create a directory
called <i>server</i>; this is where your Express server will live. Dont create
a directory for your client app; CRA will do that for us.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:72.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark680"></a><span style='color:#333333'>Before we run CRA, we
should install </span><a href="https://yarnpkg.com/"><span style='color:#070707'>Yarn</span></a><span
style='color:#333333'>. Yarn is a package manager<span style='letter-spacing:
4.0pt'> </span>like npmactually, yarn is mostly a drop-in replacement for npm.
Its not mandatory for React development, but it is the de facto standard, and
not using<span style='letter-spacing:1.8pt'> </span>it<span style='letter-spacing:
1.7pt'> </span>would<span style='letter-spacing:1.8pt'> </span>be<span
style='letter-spacing:1.7pt'> </span>swimming<span style='letter-spacing:1.8pt'>
</span>upstream.<span style='letter-spacing:1.8pt'> </span>There<span
style='letter-spacing:1.7pt'> </span>are<span style='letter-spacing:1.7pt'> </span>some<span
style='letter-spacing:1.7pt'> </span>minor<span style='letter-spacing:1.7pt'> </span>differences
in usage between Yarn and npm, but the only one youll probably notice is that
you run </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>yarn
add<span style='letter-spacing:-2.3pt'> </span></span><span style='color:#333333'>instead
of </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm
install</span><span style='color:#333333'>. To install Yarn, simply follow </span><a
href="http://bit.ly/2xHZ2Cx"><span style='color:#070707'>the Yarn installation
instructions</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Once<span
style='letter-spacing:.6pt'> </span>youve<span style='letter-spacing:.6pt'> </span>installed<span
style='letter-spacing:.65pt'> </span>Yarn,<span style='letter-spacing:.65pt'> </span>run<span
style='letter-spacing:.7pt'> </span>the<span style='letter-spacing:.6pt'> </span>following<span
style='letter-spacing:.65pt'> </span>from<span style='letter-spacing:.6pt'> </span>your<span
style='letter-spacing:.6pt'> </span>application<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>root:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>yarn<span style='letter-spacing:.8pt'> </span>create<span
style='letter-spacing:.8pt'> </span>react-app<span style='letter-spacing:.8pt'>
</span><span style='letter-spacing:-.1pt'>clien<a name="React_Basics"></a><a
name="_bookmark681"></a>t</span> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection313>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Now go into your client directory and type </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>yarn start</span><span
style='color:#333333'>. After a few seconds, youll see a new browser window
pop up, with your React app running in it!</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Go ahead and leave the terminal window running. CRA has
really good support for hot reloading, so when you make changes in your
source code, it will get built <i>very </i>quickly and the browser will
automatically reload. Once you get used to it, you wont be able to live
without it.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>React<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Basics</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:97.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark682"></a><span style='color:#333333'>React has
excellent documentation, which I wont re-create here. So if youre new to
React, start with the </span><a href="http://bit.ly/36VdKUq"><span
style='color:#070707'>Intro to React</span></a><span style='color:#070707'> </span><span
style='color:#333333'>tutorial, and then the </span><a
href="http://bit.ly/2KgT939"><span style='color:#070707'>Main Concepts</span></a><span
style='color:#070707'> </span><span style='color:#333333'>guide.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark683"></a><span style='color:#333333'>Youll<span
style='letter-spacing:1.65pt'> </span>find<span style='letter-spacing:1.75pt'> </span>that<span
style='letter-spacing:1.65pt'> </span>React<span style='letter-spacing:1.65pt'>
</span>is<span style='letter-spacing:1.65pt'> </span>organized<span
style='letter-spacing:1.75pt'> </span>around<span style='letter-spacing:1.75pt'>
</span><i>components</i>,<span style='letter-spacing:1.75pt'> </span>which<span
style='letter-spacing:1.75pt'> </span>are<span style='letter-spacing:1.65pt'> </span>the
main building blocks of React. Everything the user sees or interacts with is
generally a component in React. Lets take a look at <i>client/src/App.js </i>(the
contents of yours may differ slightlyCRA does change over time):</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: import React from 'react'; import logo from './logo.svg'; import './App.css';&#13;&#10;&#13;&#10;function App() {&#13;&#10;return (&#13;&#10;&lt;div className=&quot;App&quot;&gt;&#13;&#10;&lt;header className=&quot;App-header&quot;&gt;&#13;&#10;&lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;&#13;&#10;&lt;p&gt;&#13;&#10;Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.&#13;&#10;&lt;/p&gt;&#13;&#10;&lt;a&#13;&#10;className=&quot;App-link&quot; href=&quot;https://reactjs.org&quot; target=&quot;_blank&quot;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection314>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: rel=&quot;noopener noreferrer&quot;&#13;&#10;&gt;&#13;&#10;Learn React&#13;&#10;&lt;/a&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;);&#13;&#10;}&#13;&#10;&#13;&#10;export default App;&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark684"></a><span style='color:#333333'>One of the core concepts in
React is that the UI is generated by <i>functions</i>. And<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.55pt'> </span>simplest<span
style='letter-spacing:1.55pt'> </span>React<span style='letter-spacing:1.55pt'>
</span>component<span style='letter-spacing:1.55pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>just<span style='letter-spacing:1.55pt'> </span>a<span
style='letter-spacing:1.55pt'> </span>function<span style='letter-spacing:1.65pt'>
</span>that<span style='letter-spacing:1.55pt'> </span>returns<span
style='letter-spacing:1.55pt'> </span>HTML, as we see here. You may be looking
at this and thinking that it isnt valid JavaScript; it looks like HTML is
mixed in! The reality is a little more complicated.<span style='letter-spacing:
1.9pt'> </span>React,<span style='letter-spacing:1.9pt'> </span>by<span
style='letter-spacing:1.9pt'> </span>default,<span style='letter-spacing:1.9pt'>
</span>enables<span style='letter-spacing:1.85pt'> </span>a<span
style='letter-spacing:1.85pt'> </span>superset<span style='letter-spacing:1.85pt'>
</span>of<span style='letter-spacing:1.85pt'> </span>JavaScript<span
style='letter-spacing:1.85pt'> </span>called JSX. JSX allows you to write what
looks like HTML. Its not <i>actually </i>HTML; it creates React elements, and
the purpose of a React element is to (eventually) correspond to a DOM element.</span></p>

<p class=MsoBodyText><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>At the end of the day, however, you can think of it as
HTML. Here, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>App<span style='letter-spacing:-2.95pt'> </span></span><span
style='color:#333333'>is<span style='letter-spacing:4.0pt'> </span>a function<span
style='letter-spacing:1.2pt'> </span>that will render the HTML corresponding<span
style='letter-spacing:1.2pt'> </span>to<span style='letter-spacing:1.2pt'> </span>the
JSX it returns.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>A couple of things to note: since JSX is close tobut not
exactly<span style='letter-spacing:4.0pt'> </span>HTML, there are some subtle
differences. You may have already noticed<span style='letter-spacing:2.0pt'> </span>we
use </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>className<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>instead
of </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>class</span><span
style='color:#333333'>, which is because </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>class<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>is a reserved word in JavaScript.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>All you have to do to specify HTML is to start an HTML
element<span style='letter-spacing:4.0pt'> </span>anywhere an expression is
expected. You can also go back to JavaScript with curly braces within the
HTML. For example:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const value = Math.floor(Math.random()*6) + 1&#13;&#10;const html = &lt;div&gt;You rolled a {value}!&lt;/div&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection315>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>In<span
style='letter-spacing:.5pt'> </span>this<span style='letter-spacing:.5pt'> </span>example,<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;div&gt;<span
style='letter-spacing:-3.05pt'> </span></span><span style='color:#333333'>starts<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.5pt'> </span>HTML,<span
style='letter-spacing:.5pt'> </span>and<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.45pt'> </span>curly<span style='letter-spacing:.55pt'> </span>brackets<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>around</span></span></p>

<p class=MsoBodyText style='margin-top:4.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>value<span
style='letter-spacing:-2.7pt'> </span></span><span style='color:#333333'>drop
back into JavaScript to provide the number stored in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>value</span><span
style='color:#333333'>. We could have just as easily inlined the calculation:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.85pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>html<span style='letter-spacing:.85pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.85pt'> </span>&lt;</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>div</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#545454;background:#FBFBFB'>&gt;</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>You<span
style='letter-spacing:.85pt'> </span>rolled<span style='letter-spacing:.85pt'> </span>a<span
style='letter-spacing:.9pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>{</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#336666;
background:#FBFBFB'>Math</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>floor</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#336666;background:#FBFBFB'>Math</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>.</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>random</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>()</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>*</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600;background:#FBFBFB'>6</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>)<span
style='letter-spacing:.85pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454;background:#FBFBFB'>+<span
style='letter-spacing:.85pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#FF6600;letter-spacing:-.1pt;
background:#FBFBFB'>1</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>}</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
letter-spacing:-.1pt;background:#FBFBFB'>!&lt;</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#AA0000;letter-spacing:-.1pt;
background:#FBFBFB'>/div<a name="The_Home_Page"></a><a name="_bookmark685"></a>&gt;</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#AA0000;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Any valid JavaScript expression can be contained within
curly brackets within JSXincluding other HTML elements! A common use case of
this<span style='letter-spacing:2.0pt'> </span>is rendering lists:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const colors = ['red', 'green', 'blue']&#13;&#10;const html = (&#13;&#10;&lt;ul&gt;&#13;&#10;{colors.map(color =&gt;&#13;&#10;&lt;li key={color}&gt;{color}&lt;/li&gt;&#13;&#10;)}&#13;&#10;&lt;/ul&gt;&#13;&#10;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>A couple of things to note about this example. First,
note that we mapped over our colors to return the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;li&gt;<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>elements.
This is critical: JSX works entirely by evaluating <i>expressions</i>. So the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;ul&gt;<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>has to
contain either an expression or an array of expressions. If you changed the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>map<span
style='letter-spacing:-2.15pt'> </span></span><span style='color:#333333'>to a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>forEach</span><span
style='color:#333333'>, you would find that the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>&lt;li&gt;<span style='letter-spacing:
-2.4pt'> </span></span><span style='color:#333333'>elements would not get
rendered. Second, note that the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;li&gt;<span style='letter-spacing:-2.15pt'> </span></span><span
style='color:#333333'>elements receive a property </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>key</span><span
style='color:#333333'>: this is a performance concession. For React to know
when to re-render the<span style='letter-spacing:2.0pt'> </span>elements in an
array, it needs a unique key for each element. Since our array elements are
unique, we just used that value, but commonly you would use a an ID orif
nothing else is availablethe index of the item<span style='letter-spacing:
4.0pt'> </span>in the array.</span></p>

<p class=MsoBodyText><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>I<span
style='letter-spacing:.45pt'> </span>encourage<span style='letter-spacing:.45pt'>
</span>you<span style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:
.55pt'> </span>play<span style='letter-spacing:.5pt'> </span>around<span
style='letter-spacing:.55pt'> </span>with<span style='letter-spacing:.5pt'> </span>some<span
style='letter-spacing:.45pt'> </span>of<span style='letter-spacing:.5pt'> </span>these<span
style='letter-spacing:.45pt'> </span>examples<span style='letter-spacing:.45pt'>
</span>in<span style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:
.5pt'> </span>JSX<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.25pt'>in</span></span></p>

<p class=MsoNormal style='margin-top:4.6pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>client/src/App.js<span style='letter-spacing:.5pt'> </span></span></i><span
style='font-size:14.0pt;color:#333333'>before<span style='letter-spacing:.55pt'>
</span>moving<span style='letter-spacing:.6pt'> </span>on.<span
style='letter-spacing:.6pt'> </span>If<span style='letter-spacing:.55pt'> </span>youve<span
style='letter-spacing:.5pt'> </span>left<span style='letter-spacing:.55pt'> </span></span><span
style='font-size:14.0pt;font-family:"BIZ UDGothic",sans-serif;color:#333333'>yarn<span
style='letter-spacing:1.15pt'> </span>start<span style='letter-spacing:-3.0pt'>
</span></span><span style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>running,</span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection316>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>every time you save your changes, they will be
automatically reflected in the browser, which should speed up your learning
cycle.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark686"></a><span style='color:#333333'>We<span style='letter-spacing:
1.3pt'> </span>have<span style='letter-spacing:1.3pt'> </span>one<span
style='letter-spacing:1.3pt'> </span>more<span style='letter-spacing:1.3pt'> </span>topic<span
style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:1.35pt'> </span>touch<span
style='letter-spacing:1.35pt'> </span>on<span style='letter-spacing:1.35pt'> </span>before<span
style='letter-spacing:1.3pt'> </span>we<span style='letter-spacing:1.3pt'> </span>move<span
style='letter-spacing:1.3pt'> </span>on<span style='letter-spacing:1.35pt'> </span>from<span
style='letter-spacing:1.3pt'> </span>React basics, and that concept is <i>state</i>.
Every component can have its own state, which basically means that data
associated with the component that can change. A shopping cart is a great
example of this. A shopping cart components state would contain a list of
items; as you add and remove items from the cart, the components state is
changing. It may seem like an overly<span style='letter-spacing:1.5pt'> </span>simple<span
style='letter-spacing:1.4pt'> </span>or<span style='letter-spacing:1.4pt'> </span>obvious<span
style='letter-spacing:1.4pt'> </span>concept,<span style='letter-spacing:1.5pt'>
</span>but<span style='letter-spacing:1.4pt'> </span>most<span
style='letter-spacing:1.4pt'> </span>of<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>details<span style='letter-spacing:1.4pt'>
</span>of<span style='letter-spacing:1.4pt'> </span>making<span
style='letter-spacing:1.5pt'> </span>a React application come down to
effectively designing and managing the state<span style='letter-spacing:1.4pt'>
</span>of<span style='letter-spacing:1.4pt'> </span>your<span style='letter-spacing:
1.4pt'> </span>components.<span style='letter-spacing:1.5pt'> </span>Well<span
style='letter-spacing:1.4pt'> </span>see<span style='letter-spacing:1.4pt'> </span>an<span
style='letter-spacing:1.5pt'> </span>example<span style='letter-spacing:1.4pt'>
</span>of<span style='letter-spacing:1.4pt'> </span>state<span
style='letter-spacing:1.4pt'> </span>when<span style='letter-spacing:1.5pt'> </span>we<span
style='letter-spacing:1.4pt'> </span>tackle the Vacations page.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Lets<span
style='letter-spacing:.55pt'> </span>move<span style='letter-spacing:.55pt'> </span>on<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.6pt'> </span>create<span
style='letter-spacing:.55pt'> </span>our<span style='letter-spacing:.55pt'> </span>Meadowlark<span
style='letter-spacing:.6pt'> </span>Travel<span style='letter-spacing:.55pt'> </span>home<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>page.</span></span></p>

<p class=MsoBodyText><span style='font-size:21.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>The<span style='letter-spacing:-.15pt'> </span>Home<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.2pt'>Page</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark687"></a><span style='color:#333333'>Recall from our Handlebars
views that we had a main layout file that established the primary look and
feel of our website. Lets start by focusing on whats in the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;body&gt;<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>tag
(except the scripts):</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;div class=&quot;container&quot;&gt;&#13;&#10;&lt;header&gt;&#13;&#10;&lt;h1&gt;Meadowlark Travel&lt;/h1&gt;&#13;&#10;&lt;a href=&quot;/&quot;&gt;&lt;img src=&quot;/img/logo.png&quot; alt=&quot;Meadowlark Travel Logo&quot;&gt;&lt;/a&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;{{{body}}}&#13;&#10;&lt;/div&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This will be pretty easy to refactor into a React
component. First, we copy our own<span style='letter-spacing:1.65pt'> </span>logo<span
style='letter-spacing:1.65pt'> </span>into<span style='letter-spacing:1.65pt'> </span>the
<i>client/src </i>directory.<span style='letter-spacing:1.65pt'> </span>Why<span
style='letter-spacing:1.65pt'> </span>not the <i>public </i>directory?</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For small or commonly used graphical items, it may be
more efficient to inline them in<span style='letter-spacing:1.5pt'> </span>the
JavaScript bundle,<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>the bundler that you<span
style='letter-spacing:1.5pt'> </span>got with</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection317>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a name=Routing></a><a
name="_bookmark689"></a><span style='color:#333333'>CRA will make an
intelligent choice about that. The example app you got from CRA placed its logo
directly in the <i>client/src </i>directory, but I still like collecting image
assets in a subdirectory, so put our logo (<i>logo.png</i>) in <i><span
style='letter-spacing:-.1pt'>client/src/img/logo.png</span></i><span
style='letter-spacing:-.1pt'>.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The only other tricky bit is what to do about </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>{{{body}}}</span><span
style='color:#333333'>? In our views,<span style='letter-spacing:4.0pt'> </span>this
is where another view would be renderedthe content for the specific page
youre on. We can replicate the same basic idea in React. Since all content is
rendered in the form of components, were just going to render another
component here. Well start with an empty Home component and build that out in
a moment:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: import React from 'react'&#13;&#10;import logo from './img/logo.png'&#13;&#10;import './App.css'&#13;&#10;&#13;&#10;function Home() {&#13;&#10;return (&lt;i&gt;coming soon&lt;/i&gt;)&#13;&#10;}&#13;&#10;&#13;&#10;function App() {&#13;&#10;return (&#13;&#10;&lt;div className=&quot;container&quot;&gt;&#13;&#10;&lt;header&gt;&#13;&#10;&lt;h1&gt;Meadowlark Travel&lt;/h1&gt;&#13;&#10;&lt;img src={logo} alt=&quot;Meadowlark Travel Logo&quot; /&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;&lt;Home /&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;export default App&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:86.4pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark688"></a><span style='color:#333333'>Were using the
same approach that the sample app did for CSS: we can simply create a CSS file
and import it. So we can edit that file and apply whatever styles we need to.
Well keep things basic for this example,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection318>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>though nothing fundamental has changed in the way we
style HTML with CSS, so we still have all the tools were used to.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image056.gif"
  alt="Text Box: NOTE&#13;&#10;CRA sets up linting for you, and as you progress through this chapter, youll probably see warnings (both in the CRA terminal output and in your browsers JavaScript console). This is only because were adding things incrementally; by the time we reach the end of this chapter, there should be no more warningsif there are, make sure you havent missed a step! You can also check the companion repository.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F;letter-spacing:-.1pt'>Routing</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark691"></a><span style='color:#333333'>The core concept of routing
we learned about in </span><a href="#_bookmark603"><span style='color:#070707'>Chapter
14</span></a><span style='color:#070707'> </span><span style='color:#333333'>hasnt<span
style='letter-spacing:4.0pt'> </span>changed: were still using the URL path to
determine what part of the interface the user is seeing. The difference is that
its up to the client application to handle that. Changing the UI based on the
route is the client apps responsibility: if the navigation requires new or
updated data from<span style='letter-spacing:4.0pt'> </span>the server, thats
fine, and its up to the client app to request that from the <span
style='letter-spacing:-.1pt'>server.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark692"></a><span style='color:#333333'>There are a lot of options
forand a lot of strong opinions aboutrouting </span><a
href="http://bit.ly/32GvAXK"><span style='color:#333333;text-decoration:none'>in
React apps. However, there is a dominant library for routing: </span><span
style='color:#070707'>React</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Router</span><span style='color:#333333;
text-decoration:none'>. Theres quite a lot I dont like about React Router,
but its so</span></a><span style='color:#333333'> common that youre bound to
come across it. Furthermore, it is a good option to get something basic up and
running, and for those two reasons, well be using it here.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Well get started by installing the DOM version of React
Router (theres also a version for React Native, for mobile development):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>yarn<span style='letter-spacing:1.2pt'> </span>add<span
style='letter-spacing:1.2pt'> </span>react-router-<span style='letter-spacing:
-.25pt'>dom</span> </span></p>

</div>

<span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection319>

<p class=MsoBodyText style='margin-left:69.4pt;line-height:1.0pt'></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now well hook up the router, and add an About and a Not
Found page. Well also link the site logo back to the home page:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: import React from 'react'&#13;&#10;import {&#13;&#10;BrowserRouter as Router, Switch,&#13;&#10;Route, Link&#13;&#10;} from 'react-router-dom'&#13;&#10;import logo from './img/logo.png'&#13;&#10;import './App.css'&#13;&#10;&#13;&#10;function Home() {&#13;&#10;return (&#13;&#10;&lt;div&gt;&#13;&#10;&lt;h2&gt;Welcome to Meadowlark Travel&lt;/h2&gt;&#13;&#10;&lt;p&gt;Check out our &quot;&lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt;&quot; page!&lt;/p&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;function About() {&#13;&#10;return (&lt;i&gt;coming soon&lt;/i&gt;)&#13;&#10;}&#13;&#10;&#13;&#10;function NotFound() {&#13;&#10;return (&lt;i&gt;Not Found&lt;/i&gt;)&#13;&#10;}&#13;&#10;&#13;&#10;function App() {&#13;&#10;return (&#13;&#10;&lt;Router&gt;&#13;&#10;&lt;div className=&quot;container&quot;&gt;&#13;&#10;&lt;header&gt;&#13;&#10;&lt;h1&gt;Meadowlark Travel&lt;/h1&gt;&#13;&#10;&lt;Link to=&quot;/&quot;&gt;&lt;img src={logo} alt=&quot;Meadowlark Travel Logo&quot; /&gt;&lt;/Link&gt;&#13;&#10;&lt;/header&gt;&#13;&#10;&lt;Switch&gt;&#13;&#10;&lt;Route path=&quot;/&quot; exact component={Home} /&gt;&#13;&#10;&lt;Route path=&quot;/about&quot; exact component={About} /&gt;&#13;&#10;&lt;Route component={NotFound} /&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection320>

<p class=MsoBodyText style='margin-left:69.4pt'><a
name="Vacations_PageVisual_Design"></a><a name="_bookmark693"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image066.gif"
alt="Text Box: &lt;/Switch&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/Router&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;export default App&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>first<span style='letter-spacing:.45pt'> </span>thing<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.5pt'> </span>notice<span
style='letter-spacing:.45pt'> </span>is<span style='letter-spacing:.5pt'> </span>that<span
style='letter-spacing:.45pt'> </span>were<span style='letter-spacing:.45pt'> </span>wrapping<span
style='letter-spacing:.55pt'> </span>our<span style='letter-spacing:.45pt'> </span>entire<span
style='letter-spacing:.45pt'> </span>application<span style='letter-spacing:
.55pt'> </span>in<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.5pt'>a</span></span></p>

<p class=MsoBodyText style='margin-top:4.6pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;Router&gt;<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>component.
This is what enables the routing, as you might expect. Inside </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;Router&gt;</span><span
style='color:#333333'>, we can use </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;Route&gt;<span style='letter-spacing:-2.65pt'> </span></span><span
style='color:#333333'>to conditionally render a component based on the URL
path. Weve placed our content routes inside a </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>&lt;Switch&gt;<span style='letter-spacing:
-1.9pt'> </span></span><span style='color:#333333'>component: this ensures that
only <i>one </i>of the components contained therein gets rendered.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>There are some subtle differences between the routing weve
done with Express<span style='letter-spacing:1.6pt'> </span>and<span
style='letter-spacing:1.7pt'> </span>React<span style='letter-spacing:1.6pt'> </span>Router.<span
style='letter-spacing:1.7pt'> </span>In<span style='letter-spacing:1.7pt'> </span>Express,<span
style='letter-spacing:1.7pt'> </span>we<span style='letter-spacing:1.6pt'> </span>would<span
style='letter-spacing:1.7pt'> </span>render<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.6pt'> </span>page according to the first successful
match (or the 404 page if one couldnt be found). With React Router, the path
is simply a hint to determine what combination of components should display.
In this way, its more flexible than routing with Express. Because of this,
React Router routes behave by default as if they have an asterisk (</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>*</span><span
style='color:#333333'>) at the end. That is, the route </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/<span
style='letter-spacing:-2.9pt'> </span></span><span style='color:#333333'>would,
by default, match <i>every </i>page (since they all start with a forward
slash).</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:16.25pt'><span
style='color:#333333'>Because<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.45pt'> </span>this,<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.45pt'> </span>use<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.45pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>exact<span style='letter-spacing:-3.05pt'> </span></span><span
style='color:#333333'>property<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>make<span style='letter-spacing:.45pt'> </span>this<span
style='letter-spacing:.45pt'> </span>route<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>behave</span></span></p>

<p class=MsoBodyText style='margin-top:4.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>more<span
style='letter-spacing:.55pt'> </span>like<span style='letter-spacing:.55pt'> </span>an<span
style='letter-spacing:.65pt'> </span>Express<span style='letter-spacing:.55pt'>
</span>route.<span style='letter-spacing:.65pt'> </span>Similarly,<span
style='letter-spacing:.6pt'> </span>without<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>exact<span style='letter-spacing:-2.95pt'> </span></span><span
style='color:#333333'>property,<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.25pt'>the</span></span></p>

<p class=MsoBodyText style='margin-top:4.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/about<span
style='letter-spacing:-1.6pt'> </span></span><span style='color:#333333'>route
would also match </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>/about/contact</span><span style='color:#333333'>, which is
probably not what we want.<span style='letter-spacing:1.5pt'> </span>For your
main<span style='letter-spacing:1.5pt'> </span>content routing,<span
style='letter-spacing:1.5pt'> </span>its likely<span style='letter-spacing:
1.5pt'> </span>that youll want all of your routes (except the Not Found route)
to have </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>exact</span><span
style='color:#333333'>. Otherwise, you will have to make sure to arrange them
correctly within the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;Switch&gt; </span><span style='color:#333333'>so they match
in the correct order.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><span
style='color:#333333'>The second thing to notice is the use of </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;Link&gt;</span><span
style='color:#333333'>. You might be wondering why we dont just use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;a&gt;<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>tags.
The problem with </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;a&gt;<span style='letter-spacing:-2.2pt'> </span></span><span
style='color:#333333'>tags is that</span></p>

</div>

<span style='font-size:11.0pt;line-height:123%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection321>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark696"></a><span style='color:#333333'>without some extra workthe
browser will dutifully treat them as going elsewhere even if its on the same
site, and it will result in a new HTTP request to the serverand the HTML and
the CSS will be downloaded again, defeating the SPA agenda. It will <i>work </i>in
the sense that when the page loads, React Router will do the right thing, but
it wont be as fast or efficient, invoking unnecessary network requests. Seeing
the difference is actually an instructive exercise that should drive home the
nature of SPAs. As an experiment, create two navigation elements, one using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;Link&gt;<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>and
another using </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;a&gt;</span><span style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: &lt;Link to=&quot;/&quot;&gt;Home (SPA)&lt;/Link&gt;&#13;&#10;&lt;a href=&quot;/&quot;&gt;Home (reload)&lt;/Link&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Then<span style='letter-spacing:1.45pt'> </span>open<span
style='letter-spacing:1.45pt'> </span>your<span style='letter-spacing:1.4pt'> </span>dev<span
style='letter-spacing:1.45pt'> </span>tools,<span style='letter-spacing:1.45pt'>
</span>open<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>Network<span style='letter-spacing:1.45pt'>
</span>tab,<span style='letter-spacing:1.45pt'> </span>clear<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>traffic,<span
style='letter-spacing:1.45pt'> </span>and click Preserve log (on Chrome). Now
click the Home (SPA) link and notice theres no network traffic at all. Click
the Home (reload) link and</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>observe<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.45pt'> </span>network<span
style='letter-spacing:.45pt'> </span>traffic.<span style='letter-spacing:.5pt'>
</span>And<span style='letter-spacing:.5pt'> </span>that,<span
style='letter-spacing:.45pt'> </span>in<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.45pt'> </span>nutshell,<span style='letter-spacing:.45pt'>
</span>is<span style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:
.4pt'> </span>nature<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.4pt'> </span>an<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.2pt'>SP<a name="_bookmark694"></a>A.</span></span></p>

<p class=MsoBodyText><span style='font-size:21.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Vacations<span style='letter-spacing:-.5pt'> </span>PageVisual<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Design</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark695"></a><span style='color:#333333'>So far weve just been
building a pure frontend applicationso where does Express come in? Our server
is still the single source of truth. In particular, it maintains the database
of vacations that we want to display on<span style='letter-spacing:1.55pt'> </span>our<span
style='letter-spacing:1.45pt'> </span>site.<span style='letter-spacing:1.55pt'>
</span>Fortunately,<span style='letter-spacing:1.55pt'> </span>weve<span
style='letter-spacing:1.45pt'> </span>already<span style='letter-spacing:1.55pt'>
</span>done<span style='letter-spacing:1.45pt'> </span>most<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>work<span style='letter-spacing:1.55pt'> </span>in
</span><a href="#_bookmark634"><span style='color:#070707'>Chapter 15</span></a><span
style='color:#333333'>: we exposed an API that will return our vacations in
JSON format, ready for use in a React application.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Before we hook those two things up, however, lets go
ahead and build<span style='letter-spacing:2.0pt'> </span>our Vacations page.
There wont be any vacations to render, but lets not let that stop us.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection322>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In the previous section, we included all of the content
pages in <i>client/src/App.js</i>, which is generally considered poor practice:
its more conventional for each component to live in its own file. So well take
the time to break our </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacations<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>component out into its own component.</span></p>

<p class=MsoNormal style='margin-left:55.0pt;line-height:15.85pt'><span
style='font-size:14.0pt;color:#333333'>Create<span style='letter-spacing:.35pt'>
</span>the<span style='letter-spacing:.4pt'> </span>file<span style='letter-spacing:
.35pt'> </span><i><span style='letter-spacing:-.1pt'>client/src/Vacations.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: import React, { useState, useEffect } from 'react'&#13;&#10;import { Link } from 'react-router-dom'&#13;&#10;&#13;&#10;function Vacations() {&#13;&#10;const [vacations, setVacations] = useState([])&#13;&#10;return (&#13;&#10;&lt;&gt;&#13;&#10;&lt;h2&gt;Vacations&lt;/h2&gt;&#13;&#10;&lt;div className=&quot;vacations&quot;&gt;&#13;&#10;{vacations.map(vacation =&gt;&#13;&#10;&lt;div key={vacation.sku}&gt;&#13;&#10;&lt;h3&gt;{vacation.name}&lt;/h3&gt;&#13;&#10;&lt;p&gt;{vacation.description}&lt;/p&gt;&#13;&#10;&lt;span className=&quot;price&quot;&gt;{vacation.price}&lt;/span&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;)}&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;export default Vacations&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="_bookmark697"></a><span style='color:#333333'>What we have so far is
pretty simple: were just returning a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;div&gt;<span style='letter-spacing:-2.25pt'> </span></span><span
style='color:#333333'>that contains additional </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>&lt;div&gt;<span style='letter-spacing:
-1.65pt'> </span></span><span style='color:#333333'>elements, each of which
represents a vacation.<span style='letter-spacing:2.0pt'> </span>So where is
this </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vacations<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>variable
coming from? In this example, were using a newer feature of React, called <i>React
hooks</i>. Prior to hooks, if a component wanted to have its own state (in this
case, a list of vacations), you had to use a class implementation. Hooks enable
us to have function- based components that have their own state. In our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacations<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>function,<span
style='letter-spacing:4.0pt'> </span>we call </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>useState<span style='letter-spacing:
-2.35pt'> </span></span><span style='color:#333333'>to set up our state. Note
we pass an empty array to</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection323>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>useState</span><span
style='color:#333333'>:<span style='letter-spacing:1.45pt'> </span>that<span
style='letter-spacing:1.45pt'> </span>will<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.45pt'> </span>initial<span
style='letter-spacing:1.45pt'> </span>value<span style='letter-spacing:1.45pt'>
</span>of<span style='letter-spacing:1.45pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vacations<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>in<span
style='letter-spacing:1.55pt'> </span>state<span style='letter-spacing:1.45pt'>
</span>(well discuss how we populate that shortly). What </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>setState<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>returns
is an array containing the state value itself (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>vacations</span><span
style='color:#333333'>) and a way to update the state <span style='letter-spacing:
-.1pt'>(</span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>setVacations</span><span style='color:#333333;
letter-spacing:-.1pt'>).</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>You may wonder why we cant modify </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vacations<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>directly:
its just an array, so couldnt we call </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>push<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>to add vacations to it? We could, but this would be
defeating the very purpose of Reacts state management system, which ensures
consistency, performance, and communication between <span style='letter-spacing:
-.1pt'>components.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>You may also be wondering about what looks like an empty
component (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;&gt;&lt;/&gt;</span><span style='color:#333333'>)
surrounding our vacations. This is called a </span><a
href="http://bit.ly/2ryneVj"><i><span style='color:#070707'>fragment</span></i></a><span
style='color:#333333'>. The fragment is necessary because every component must
render a single element. In our case, we have two elements, the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;h2&gt;<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>and
the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;div&gt;</span><span
style='color:#333333'>. The fragment simply provides a transparent root
element in which to contain these two elements so we can render a single
element.</span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Lets add our </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacations<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>component to our application, even though there arent
yet any vacations to show. In <i>client/src/App.js</i>, first import your
vacations page:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>import<span style='letter-spacing:.8pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>Vacations<span style='letter-spacing:.8pt'> </span>from<span
style='letter-spacing:.8pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'./Vacations<a name="Vacations_PageServer_Integration"></a><a
name="_bookmark698"></a>'</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'> </span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Then<span
style='letter-spacing:.4pt'> </span>all<span style='letter-spacing:.35pt'> </span>we<span
style='letter-spacing:.35pt'> </span>have<span style='letter-spacing:.35pt'> </span>to<span
style='letter-spacing:.4pt'> </span>do<span style='letter-spacing:.4pt'> </span>is<span
style='letter-spacing:.35pt'> </span>create<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.35pt'> </span>route<span style='letter-spacing:.35pt'> </span>for<span
style='letter-spacing:.35pt'> </span>it<span style='letter-spacing:.35pt'> </span>in<span
style='letter-spacing:.45pt'> </span>our<span style='letter-spacing:.35pt'> </span>routers<span
style='letter-spacing:.35pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>&lt;Switch&gt;</span></p>

<p class=MsoBodyText style='margin-top:5.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>component:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;Switch&gt;&#13;&#10;&lt;Route path=&quot;/&quot; exact component={Home} /&gt;&#13;&#10;&lt;Route path=&quot;/about&quot; exact component={About} /&gt;&#13;&#10;&lt;Route path=&quot;/vacations&quot; exact component={Vacations} /&gt;&#13;&#10;&lt;Route component={NotFound} /&gt;&#13;&#10;&lt;/Switch&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection324>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Go ahead and save that; your application should
automatically reload, and you can navigate to your <i>/vacations </i>page,
though there isnt much interesting to see yet. Now that we have most of the
client infrastructure in place, lets turn our attention to integrating with
Express.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Vacations<span style='letter-spacing:-.6pt'> </span>PageServer<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Integration</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark699"></a><span style='color:#333333'>Weve<span
style='letter-spacing:1.55pt'> </span>already<span style='letter-spacing:1.65pt'>
</span>done<span style='letter-spacing:1.55pt'> </span>most<span
style='letter-spacing:1.55pt'> </span>of<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>work<span style='letter-spacing:1.65pt'> </span>necessary<span
style='letter-spacing:1.65pt'> </span>for<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>Vacations<span style='letter-spacing:
1.55pt'> </span>page; we have an API endpoint that gets vacations from the
database and returns them<span style='letter-spacing:1.2pt'> </span>in<span
style='letter-spacing:1.3pt'> </span>JSON<span style='letter-spacing:1.2pt'> </span>format.<span
style='letter-spacing:1.2pt'> </span>Now<span style='letter-spacing:1.2pt'> </span>we<span
style='letter-spacing:1.2pt'> </span>have<span style='letter-spacing:1.2pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>figure<span style='letter-spacing:1.2pt'> </span>out<span
style='letter-spacing:1.2pt'> </span>how<span style='letter-spacing:1.2pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>get<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>server and the client communicating.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We can start with our work from </span><a
href="#_bookmark634"><span style='color:#070707'>Chapter 15</span></a><span
style='color:#333333'>; we dont need to add anything to it, but we can take
some things away that we no longer need. We can remove the following:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15940096'><span style='left:0px;position:absolute;
left:169px;top:-244875px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image045.gif"></span></span><span
style='color:#333333'>Handlebars and views support (well leave the static
middleware, though, for reasons well see later).</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15940608'><span style='left:0px;position:absolute;
left:169px;top:-244930px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Cookies and sessions (our SPA may still use cookies, but
it no longer needs the servers help hereand we think about sessions in a
completely different way).</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15941120'><span style='left:0px;position:absolute;
left:169px;top:-245016px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>All routes that render a view (we obviously keep the API
routes, <span style='letter-spacing:-.1pt'>however).</span></span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This leaves us with a much simplified server. So what do
we do with it now? The first thing we have to do is address the fact that weve
been using port 3000, and the CRA development server also uses port 3000 by
default. We could change either, so Im going to arbitrarily suggest changing
the Express port. I usually use 3033just because I like the sound of that
number. Youll recall that we set the default port in our <i>meadowlark.js</i>,
so we just need to change it:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection325>

<p class=MsoNormal align=center style='margin-top:2.0pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
background:#FBFBFB'>const<span style='letter-spacing:.7pt'> </span></span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>port<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#545454;
background:#FBFBFB'>=<span style='letter-spacing:.75pt'> </span></span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>process</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>.</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>env</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>PORT<span
style='letter-spacing:.75pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454;background:#FBFBFB'>||<span
style='letter-spacing:.7pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#FF6600;letter-spacing:-.2pt;
background:#FBFBFB'>3033</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#FF6600;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We could, of course, use an environment variable to
control it, but since were going to frequently use it together with our SPA
dev server, we might as well change the code.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that both servers are running, we can communicate
between them. But how? In our React app, we could do something like this:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>fetch</span><span style='font-size:
10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;letter-spacing:-.1pt;background:#FBFBFB'>'http://localhost:3033/api/vacations'</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>)</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.25pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>The problem with that approach is that were going to be
making requests like that all over our applicationand now were embedding </span><i><u><span
style='font-family:"Courier New";color:#070707'>http://localhost:3033</span></u></i><i><span
style='font-family:"Courier New";color:#070707;letter-spacing:-2.45pt'> </span></i><span
style='color:#333333'>all over the placewhich isnt going to work in
production, and it may not work on your colleagues computer because maybe it
needs to use different ports, and maybe the port needs to be different for the
testing serversand on and on. Using this approach is asking for a
configuration headache. Yes, you could store the base URL as<span
style='letter-spacing:4.0pt'> </span>a variable that you use everywhere, but
theres a better way.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In the ideal world, from your applications perspective,
everythings<span style='letter-spacing:4.0pt'> </span>hosted from the same
place: its the same protocol, host, and port to get<span style='letter-spacing:
4.0pt'> </span>the HTML, the static assets, and the API. It simplifies a lot of
things and ensures consistency in your source code. If everythings coming from
the same place, you can simply omit the protocol, host and port, and just call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fetch(</span><i><span
style='font-family:"Courier New";color:#333333'>/api/vacations</span></i><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>)</span><span
style='color:#333333'>. Its a nice approach, and fortunately very easy to do!</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The configuration for CRA comes with <i>proxy </i>support,
allowing you to pass web requests on to your API. Edit your <i>client/package.json
</i>file, and add the following:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection326>

<p class=MsoNormal align=center style='margin-top:2.0pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#CC3300;
background:#FBFBFB'>&quot;proxy&quot;</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#545454;background:#FBFBFB'>:<span
style='letter-spacing:.95pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>&quot;http://localhost:3033&quot;</span><a
name="Sending_Information_to_the_Server"></a><a name="_bookmark700"></a><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>,</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>It doesnt matter where you add it. I usually put it
between </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&quot;private&quot;<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&quot;dependencies&quot;<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>just<span
style='letter-spacing:1.4pt'> </span>because<span style='letter-spacing:1.4pt'>
</span>I<span style='letter-spacing:1.4pt'> </span>like<span style='letter-spacing:
1.4pt'> </span>to<span style='letter-spacing:1.45pt'> </span>see<span
style='letter-spacing:1.4pt'> </span>it<span style='letter-spacing:1.4pt'> </span>high<span
style='letter-spacing:1.45pt'> </span>in<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>file.<span style='letter-spacing:1.45pt'> </span>Nowas
long as your Express server is running on port 3033your CRA development server
will pass API requests through<span style='letter-spacing:1.05pt'> </span>to<span
style='letter-spacing:1.05pt'> </span>your Express server.</span></p>

<p class=MsoBodyText><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Now that that configuration is in place, lets use an <i>effect
</i>(another React hook) to fetch and update vacation data. Heres the entire </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacations </span><span
style='color:#333333'>component with the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>useEffect<span style='letter-spacing:-.4pt'> </span></span><span
style='color:#333333'>hook:</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: function Vacations() {&#13;&#10;// set up state&#13;&#10;const [vacations, setVacations] = useState([])&#13;&#10;&#13;&#10;// fetch initial data&#13;&#10;useEffect(() =&gt; { fetch('/api/vacations')&#13;&#10;.then(res =&gt; res.json())&#13;&#10;.then(setVacations)&#13;&#10;}, [])&#13;&#10;&#13;&#10;return (&#13;&#10;&lt;&gt;&#13;&#10;&lt;h2&gt;Vacations&lt;/h2&gt;&#13;&#10;&lt;div className=&quot;vacations&quot;&gt;&#13;&#10;{vacations.map(vacation =&gt;&#13;&#10;&lt;div key={vacation.sku}&gt;&#13;&#10;&lt;h3&gt;{vacation.name}&lt;/h3&gt;&#13;&#10;&lt;p&gt;{vacation.description}&lt;/p&gt;&#13;&#10;&lt;span className=&quot;price&quot;&gt;{vacation.price}&lt;/span&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;)}&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark701"></a><span
style='color:#333333'>As<span style='letter-spacing:.55pt'> </span>before,<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>useState<span style='letter-spacing:-2.9pt'> </span></span><span
style='color:#333333'>is<span style='letter-spacing:.55pt'> </span>configuring<span
style='letter-spacing:.65pt'> </span>our<span style='letter-spacing:.55pt'> </span>component<span
style='letter-spacing:.6pt'> </span>state<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.65pt'> </span>have<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.5pt'>a</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection327>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>vacations<span
style='letter-spacing:-2.45pt'> </span></span><span style='color:#333333'>array,
with a companion setter. Now weve added </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>useEffect</span><span style='color:#333333'>, which calls our
API to retrieve vacations, and then calls that setter asynchronously. Note that
we pass in an empty array as the second argument to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>useEffect</span><span
style='color:#333333'>; this is a signal to React that this effect should be
run only once, when the component is mounted. On the surface, that may seem
like an odd way to signal that, but once you learn more about hooks, youll<span
style='letter-spacing:1.55pt'> </span>see<span style='letter-spacing:1.55pt'> </span>that<span
style='letter-spacing:1.55pt'> </span>its<span style='letter-spacing:1.55pt'> </span>actually<span
style='letter-spacing:1.6pt'> </span>quite<span style='letter-spacing:1.55pt'> </span>consistent.<span
style='letter-spacing:1.6pt'> </span>To<span style='letter-spacing:1.6pt'> </span>learn<span
style='letter-spacing:1.6pt'> </span>more<span style='letter-spacing:1.55pt'> </span>about<span
style='letter-spacing:1.55pt'> </span>hooks, see the </span><a
href="http://bit.ly/34MGSeK"><span style='color:#070707'>React hooks
documentation</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Hooks are relatively newthey were added in version 16.8
in February 2019so even if you have some experience with React, you may not be
familiar with hooks. I firmly believe that hooks are an excellent innovation in<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.35pt'> </span>React<span
style='letter-spacing:1.35pt'> </span>architecture,<span style='letter-spacing:
1.45pt'> </span>and,<span style='letter-spacing:1.45pt'> </span>while<span
style='letter-spacing:1.35pt'> </span>they<span style='letter-spacing:1.45pt'> </span>may<span
style='letter-spacing:1.45pt'> </span>seem<span style='letter-spacing:1.35pt'> </span>alien<span
style='letter-spacing:1.45pt'> </span>at<span style='letter-spacing:1.35pt'> </span>first,<span
style='letter-spacing:1.45pt'> </span>youll find that they actually simplify
your components and reduce some of the trickier state-related mistakes that
people commonly make.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that weve learned how to retrieve data from the
server, lets turn our attention to sending information the other way.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Sending<span style='letter-spacing:-.25pt'> </span>Information<span
style='letter-spacing:-.25pt'> </span>to<span style='letter-spacing:-.25pt'> </span>the<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Server</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark702"></a><span style='color:#333333'>We already have an API
endpoint to make cha<a name="_bookmark703"></a>nges on the server; we have an
endpoint to be emailed when is back in season. Lets go ahead and modify our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacations<span
style='letter-spacing:-1.75pt'> </span></span><span style='color:#333333'>component
to show a sign-up form for vacations that are out of season. In true React
fashion, well create two new components: well break out the individual
vacation view into </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacation </span><span style='color:#333333'>and a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>NotifyWhenInSeason<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>component.
We could do it all in one, but the recommended approach to React development is
to have many specific- purpose components instead of gigantic multipurpose
components (for the sake of brevity, however, we are going to stop short of
putting these</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection328>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>components<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.5pt'> </span>their<span
style='letter-spacing:.45pt'> </span>own<span style='letter-spacing:.5pt'> </span>files:<span
style='letter-spacing:.45pt'> </span>Ill<span style='letter-spacing:.4pt'> </span>leave<span
style='letter-spacing:.45pt'> </span>that<span style='letter-spacing:.45pt'> </span>as<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>readers<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>exercise):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: import React, { useState, useEffect } from 'react'&#13;&#10;&#13;&#10;function NotifyWhenInSeason({ sku }) {&#13;&#10;return (&#13;&#10;&lt;&gt;&#13;&#10;&lt;i&gt;Notify me when this vacation is in season:&lt;/i&gt;&#13;&#10;&lt;input type=&quot;email&quot; placeholder=&quot;(your email)&quot; /&gt;&#13;&#10;&lt;button&gt;OK&lt;/button&gt;&#13;&#10;&lt;/&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;function Vacation({ vacation }) {&#13;&#10;return (&#13;&#10;&lt;div key={vacation.sku}&gt;&#13;&#10;&lt;h3&gt;{vacation.name}&lt;/h3&gt;&#13;&#10;&lt;p&gt;{vacation.description}&lt;/p&gt;&#13;&#10;&lt;span className=&quot;price&quot;&gt;{vacation.price}&lt;/span&gt;&#13;&#10;{!vacation.inSeason &amp;&amp;&#13;&#10;&lt;div&gt;&#13;&#10;&lt;p&gt;&lt;i&gt;This vacation is not currently in season.&lt;/i&gt;&lt;/p&gt;&#13;&#10;&lt;NotifyWhenInSeason sky={vacation.sku} /&gt;&#13;&#10;&lt;/div&gt;&#13;&#10;}&#13;&#10;&lt;/div&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;function Vacations() {&#13;&#10;const [vacations, setVacations] = useState([]) useEffect(() =&gt; {&#13;&#10;fetch('/api/vacations')&#13;&#10;.then(res =&gt; res.json())&#13;&#10;.then(setVacations)&#13;&#10;}, [])&#13;&#10;return (&#13;&#10;&lt;&gt;&#13;&#10;&lt;h2&gt;Vacations&lt;/h2&gt;&#13;&#10;&lt;div className=&quot;vacations&quot;&gt;&#13;&#10;{vacations.map(vacation =&gt;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection329>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: &lt;Vacation key={vacation.sku} vacation={vacation} /&gt;&#13;&#10;)}&#13;&#10;&lt;/div&gt;&#13;&#10;&lt;/&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;&#13;&#10;export default Vacations&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Now, if you have any vacations that have </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>inSeason<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>false<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>(and
you will, unless you changed your database or initialization scripts), you will
update the form. Now lets hook up our button to make the API call.</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:16.75pt'><span
style='color:#333333'>Modify<span style='letter-spacing:.7pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>NotifyWhenInSeason</span><span
style='color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: function NotifyWhenInSeason({ sku }) {&#13;&#10;const [registeredEmail, setRegisteredEmail] = useState(null)&#13;&#10;const [email, setEmail] = useState('')&#13;&#10;function onSubmit(event) { fetch(`/api/vacation/${sku}/notify-when-in-season`, {&#13;&#10;method: 'POST',&#13;&#10;body: JSON.stringify({ email }),&#13;&#10;headers: { 'Content-Type': 'application/json' },&#13;&#10;})&#13;&#10;.then(res =&gt; {&#13;&#10;if(res.status &lt; 200 || res.status &gt; 299)&#13;&#10;return alert('We had a problem processing this...please try&#13;&#10;again.')&#13;&#10;setRegisteredEmail(email)&#13;&#10;})&#13;&#10;event.preventDefault()&#13;&#10;}&#13;&#10;if(registeredEmail) return (&#13;&#10;&lt;i&gt;You will be notified at {registeredEmail} when&#13;&#10;this vacation is back in season!&lt;/i&gt;&#13;&#10;)&#13;&#10;return (&#13;&#10;&lt;form onSubmit={onSubmit}&gt;&#13;&#10;&lt;i&gt;Notify me when this vacation is in season:&lt;/i&gt;&#13;&#10;&lt;input&#13;&#10;type=&quot;email&quot;&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection330>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="State_Management"></a><a
name="_bookmark705"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: placeholder=&quot;(your email)&quot; value={email}&#13;&#10;onChange={({ target: { value } }) =&gt; setEmail(value)}&#13;&#10;/&gt;&#13;&#10;&lt;button type=&quot;submit&quot;&gt;OK&lt;/button&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;)&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark704"></a><span style='color:#333333'>Were choosing here to have
the component track two different values: the email address as the user types
it, and the final value after they press OK. The former is a technique known as
<i>controlled components</i>, and you can read more about it on the </span><a
href="http://bit.ly/2X9P9qh"><span style='color:#070707'>React forms
documentation</span></a><span style='color:#333333'>. The latter were keeping
track of so we can know when the user took the action of pressing OK<span
style='letter-spacing:1.3pt'> </span>so<span style='letter-spacing:1.35pt'> </span>we<span
style='letter-spacing:1.3pt'> </span>can<span style='letter-spacing:1.35pt'> </span>change<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.3pt'> </span>UI<span
style='letter-spacing:1.3pt'> </span>accordingly.<span style='letter-spacing:
1.3pt'> </span>We<span style='letter-spacing:1.3pt'> </span>could<span
style='letter-spacing:1.35pt'> </span>have<span style='letter-spacing:1.3pt'> </span>also<span
style='letter-spacing:1.35pt'> </span>had<span style='letter-spacing:1.35pt'> </span>a
simple<span style='letter-spacing:1.5pt'> </span>boolean<span style='letter-spacing:
1.6pt'> </span>registered,<span style='letter-spacing:1.5pt'> </span>but<span
style='letter-spacing:1.5pt'> </span>this<span style='letter-spacing:1.5pt'> </span>allows<span
style='letter-spacing:1.5pt'> </span>our<span style='letter-spacing:1.5pt'> </span>UI<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.6pt'> </span>remind<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.5pt'> </span>user
what email they registered with.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>We also had to do a little more work with our API
communication: we had to specify the method (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>POST</span><span style='color:#333333'>),
encode the body as JSON, and specify the content type.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Note that we make a decision about which UI to return. If
the user has already registered, we return a simple message, and if they
havent, we render the form. This is a very common pattern in React.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whew! It seems like a lot of work for that small bit of
functionalityand pretty crude functionality at that. Our error-handling if
theres something wrong<span style='letter-spacing:1.55pt'> </span>with<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.5pt'> </span>API<span
style='letter-spacing:1.5pt'> </span>call<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>functional,<span style='letter-spacing:
1.55pt'> </span>but<span style='letter-spacing:1.5pt'> </span>less<span
style='letter-spacing:1.5pt'> </span>than<span style='letter-spacing:1.55pt'> </span>user-friendly,<span
style='letter-spacing:1.55pt'> </span>and while the component will remember which
vacations weve signed up for,<span style='letter-spacing:4.0pt'> </span>it
will do so only while were on this page. If we navigate away and come back,
well see the form again.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection331>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:71.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There are steps we could take to make this code a little
more palatable. For starters, we might write an API wrapper that will handle
the messy details<span style='letter-spacing:4.0pt'> </span>of encoding input
and determining errors; that will certainly pay dividends<span
style='letter-spacing:2.0pt'> </span>as we use more and more API endpoints.
There are also many popular<span style='letter-spacing:4.0pt'> </span>form-processing
frameworks for React that go a long way to ease the<span style='letter-spacing:
4.0pt'> </span>burden of form processing.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Addressing the problem of remembering what vacations
the user has signed<span style='letter-spacing:1.25pt'> </span>up<span
style='letter-spacing:1.25pt'> </span>for<span style='letter-spacing:1.2pt'> </span>is<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.2pt'> </span>little<span
style='letter-spacing:1.2pt'> </span>trickier.<span style='letter-spacing:1.2pt'>
</span>What<span style='letter-spacing:1.2pt'> </span>would<span
style='letter-spacing:1.25pt'> </span>really<span style='letter-spacing:1.25pt'>
</span>serve<span style='letter-spacing:1.2pt'> </span>us<span
style='letter-spacing:1.2pt'> </span>would<span style='letter-spacing:1.25pt'> </span>be<span
style='letter-spacing:1.2pt'> </span>a way<span style='letter-spacing:1.8pt'> </span>for<span
style='letter-spacing:1.7pt'> </span>our<span style='letter-spacing:1.7pt'> </span>vacation<span
style='letter-spacing:1.8pt'> </span>objects<span style='letter-spacing:1.7pt'>
</span>to<span style='letter-spacing:1.8pt'> </span>have<span style='letter-spacing:
1.7pt'> </span>that<span style='letter-spacing:1.7pt'> </span>information<span
style='letter-spacing:1.8pt'> </span>available<span style='letter-spacing:1.7pt'>
</span>(whether or not the user had registered). However, our special-purpose
component doesnt know anything about the vacation; its only given the SKU. In
the next section, well talk about <i>state management</i>, which points to a
solution to that problem<a name="_bookmark706"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>State<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Management</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark707"></a><span style='color:#333333'>Most of the architectural
work that goes into planning and designing a React application is focused
around state managementand not usually the state management of single
components, but how they share and coordinate state. Our sample application
does share some state: the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacations<span style='letter-spacing:-1.6pt'> </span></span><span
style='color:#333333'>component passes down a vacation object to the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacation </span><span
style='color:#333333'>component, and the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Vacation<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>component in turn passes down the vacations SKU to the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>NotifyWhenInSeason<span
style='letter-spacing:-1.7pt'> </span></span><span style='color:#333333'>listener.
But so far, our information is only flowing <i>down </i>the tree; what happens
when information needs to go back <i>up</i>?</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>The most common approach is to pass functions around that
are responsible for updating state. For example, the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacations<span
style='letter-spacing:-2.4pt'> </span></span><span style='color:#333333'>component
might have a function for modifying a vacation, which it could pass to</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection332>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="Deployment_Options"></a><a name="_bookmark711"></a><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacation</span><span
style='color:#333333'>, which could in turn be passed down to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>NotifyWhenInSeason</span><span
style='color:#333333'>. When </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>NotifyWhenInSeason<span style='letter-spacing:-2.45pt'> </span></span><span
style='color:#333333'>calls it to modify the vacation, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Vacations</span><span
style='color:#333333'>, at the top of the tree, would recognize that things had
changed, which would cause it to re-render, which in turns causes all of its
descendants to re- <span style='letter-spacing:-.1pt'>render.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It sounds exhausting and complicated, and sometimes it
can be, but there are techniques that can help. They are so varied and
sometimes complex that we cant completely cover them here (nor is this a book about
React), but I can point you to some further reading:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:12.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://redux.js.org/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Redux</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.15pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark708"></a><span style='color:#333333'>Redux<span
style='letter-spacing:1.55pt'> </span>is<span style='letter-spacing:1.5pt'> </span>usually<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.5pt'> </span>first<span
style='letter-spacing:1.5pt'> </span>thing<span style='letter-spacing:1.55pt'> </span>that<span
style='letter-spacing:1.5pt'> </span>comes<span style='letter-spacing:1.5pt'> </span>to<span
style='letter-spacing:1.55pt'> </span>peoples<span style='letter-spacing:1.5pt'>
</span>minds<span style='letter-spacing:1.5pt'> </span>when they think about
comprehensive state management for React applications. It was one of the first
formalized state management architectures, and it is still incredibly popular.
In concept, it is<span style='letter-spacing:2.0pt'> </span>extremely simple,
and it is still the state management framework that I prefer. Even if you dont
end up choosing Redux, I recommend you watch the </span><a
href="https://egghead.io/courses/getting-started-with-redux"><span
style='color:#070707'>free tutorial videos</span></a><span style='color:#070707'>
</span><span style='color:#333333'>by its creator, Dan Abramov.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://mobx.js.org/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.2pt'>MobX</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark709"></a><span style='color:#333333'>MobX came along after
Redux. It has gained an impressive following in a short amount of time and is
probably the second most popular<span style='letter-spacing:4.0pt'> </span>state
container, behind Redux. MobX can certainly result in code that seems easier to
write, but I still feel that Redux has an edge in providing a good framework as
your application scales, even with its increased boilerplate.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a
href="https://www.apollographql.com/"><i><span style='font-size:14.0pt;
color:#070707;letter-spacing:-.1pt'>Apollo</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:87.15pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark710"></a><span style='color:#333333'>Apollo isnt a state
management library <i>per se</i>, but the way its used often takes the place of
one. Its essentially a frontend interface for </span><a
href="https://graphql.org/"><span style='color:#070707'>GraphQL</span></a><span
style='color:#333333'>--an alternative to REST APIsthat offers a lot of
integration with React. If youre using GraphQL (or interested in it),</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection333>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt'><span style='color:#333333'>its<span
style='letter-spacing:.55pt'> </span>definitely<span style='letter-spacing:
.65pt'> </span>worth<span style='letter-spacing:.65pt'> </span>looking<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>into.</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a
href="https://reactjs.org/docs/context.html"><i><span style='font-size:14.0pt;
color:#070707'>React<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Context</span></span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark712"></a><span style='color:#333333'>React itself has gotten<span
style='letter-spacing:1.55pt'> </span>into<span style='letter-spacing:1.55pt'> </span>the
game by<span style='letter-spacing:1.55pt'> </span>providing<span
style='letter-spacing:1.55pt'> </span>the Context API, now built into React. It
accomplishes some of the same things that Redux does with less boilerplate.
However, I feel that React Context is less robust and that Redux is a better
choice for applications as they <span style='letter-spacing:-.1pt'>grow.</span></span></p>

<p class=MsoBodyText style='margin-top:12.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When you start out with React, you can essentially ignore
the complexities of state management across your application, but pretty
quickly youll realize<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>need<span style='letter-spacing:1.45pt'> </span>for<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>more<span
style='letter-spacing:1.4pt'> </span>organized<span style='letter-spacing:1.45pt'>
</span>way<span style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:
1.45pt'> </span>manage<span style='letter-spacing:1.4pt'> </span>state.<span
style='letter-spacing:1.4pt'> </span>When<span style='letter-spacing:1.45pt'> </span>you
reach<span style='letter-spacing:1.4pt'> </span>that<span style='letter-spacing:
1.3pt'> </span>point,<span style='letter-spacing:1.4pt'> </span>youll<span
style='letter-spacing:1.3pt'> </span>want<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.4pt'> </span>look<span style='letter-spacing:1.4pt'> </span>into<span
style='letter-spacing:1.4pt'> </span>some<span style='letter-spacing:1.3pt'> </span>of<span
style='letter-spacing:1.3pt'> </span>these<span style='letter-spacing:1.3pt'> </span>options<span
style='letter-spacing:1.3pt'> </span>and<span style='letter-spacing:1.4pt'> </span>pick
one that resonates with you.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Deployment<span style='letter-spacing:-.4pt'> </span><span
style='letter-spacing:-.1pt'>Options</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark713"></a><span style='color:#333333'>So<span style='letter-spacing:
2.0pt'> </span>far,<span style='letter-spacing:2.0pt'> </span>weve<span
style='letter-spacing:2.0pt'> </span>been<span style='letter-spacing:2.0pt'> </span>using<span
style='letter-spacing:2.0pt'> </span>CRAs<span style='letter-spacing:2.0pt'> </span>built-in<span
style='letter-spacing:2.0pt'> </span>development<span style='letter-spacing:
2.0pt'> </span>serverwhich really<span style='letter-spacing:1.6pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>best<span
style='letter-spacing:1.55pt'> </span>choice<span style='letter-spacing:1.55pt'>
</span>for<span style='letter-spacing:1.55pt'> </span>development,<span
style='letter-spacing:1.6pt'> </span>and<span style='letter-spacing:1.6pt'> </span>I<span
style='letter-spacing:1.55pt'> </span>recommend<span style='letter-spacing:
1.6pt'> </span>sticking<span style='letter-spacing:1.6pt'> </span>with it.
However, when it comes time for deployment, its not a suitable choice.
Fortunately, CRA comes loaded with a build script that creates a bundle
optimized for production, and then you have many options. When youre ready to
create a deployment bundle, simply run </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>yarn build</span><span style='color:#333333'>, and a <i>build </i>directory
will be created. All of the assets in the <i>build </i>directory are static<span
style='letter-spacing:2.0pt'> </span>and can be deployed anywhere.</span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark714"></a><span style='color:#333333'>My current deployment of
choice is to put the CRA build in an AWS S3 bucket with </span><a
href="https://amzn.to/3736fuT"><span style='color:#070707'>Static Website
Hosting</span></a><span style='color:#070707'> </span><span style='color:#333333'>turned
on. This is far from the only option: every major cloud provider and CDN offers
something similar.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark715"></a><span style='color:#333333'>In this configuration, we
have to create routing so that the API calls are routed to your Express server
and your static bundle is served from a</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection334>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>CDN. For my AWS deployments, I use </span><a
href="https://amzn.to/2KglZRb"><span style='color:#070707'>AWS CloudFront</span></a><span
style='color:#070707'> </span><span style='color:#333333'>to perf</span><a
href="https://oreil.ly/ROqku"><span style='color:#333333;text-decoration:none'>orm
this</span></a><span style='color:#333333'> routing; the static assets are
served from the aforementioned S3 b</span><a href="https://oreil.ly/ROqku"><span
style='color:#333333;text-decoration:none'>ucket,</span></a><span
style='color:#333333;letter-spacing:2.0pt'> </span><span style='color:#333333'>and
the API requests are routed to either an Express server on an </span><a
href="https://oreil.ly/ROqku"><span style='color:#333333;text-decoration:none'>EC2</span></a><span
style='color:#333333'> instance, or on a Lambda.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Another option is to let Express do the whole thing. This
has the advantage of being able to consolidate your entire application ont</span><a
href="https://oreil.ly/ROqku"><span style='color:#333333;text-decoration:none'>o
a</span></a><span style='color:#333333;letter-spacing:2.0pt'> </span><span
style='color:#333333'>single server, which makes for a pretty simple
deployment, and m</span><a href="https://oreil.ly/ROqku"><span
style='color:#333333;text-decoration:none'>akes</span></a><span
style='color:#333333'> management easy. It may not be ideal for scalability or
performan</span><a href="https://oreil.ly/ROqku"><span style='color:#333333;
text-decoration:none'>ce, but</span></a><span style='color:#333333'> its a
valid choice for small applications.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>To<span style='letter-spacing:1.75pt'> </span>serve<span
style='letter-spacing:1.7pt'> </span>your<span style='letter-spacing:1.7pt'> </span>application<span
style='letter-spacing:1.75pt'> </span>entirely<span style='letter-spacing:1.75pt'>
</span>from<span style='letter-spacing:1.7pt'> </span>Express,<span
style='letter-spacing:1.75pt'> </span>simply<span style='letter-spacing:1.75pt'>
</span>take<span style='letter-spacing:1.7pt'> </span>con</span><a
href="https://oreil.ly/ROqku"><span style='color:#333333;text-decoration:none'>tents<span
style='letter-spacing:1.7pt'> </span>of</span></a><span style='color:#333333'>
the <i>build </i>directory that was created when you ran </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>yarn build</span><span
style='color:#333333'>, a</span><a href="https://oreil.ly/ROqku"><span
style='color:#333333;text-decoration:none'>nd copy it</span></a><span
style='color:#333333'> into the <i>public </i>directory in your Express
application. As long as y</span><a href="https://oreil.ly/ROqku"><span
style='color:#333333;text-decoration:none'>ou have</span></a><span
style='color:#333333'> your static middleware linked in, it will automatically
serve the <i>in</i></span><a href="https://oreil.ly/ROqku"><i><span
style='color:#333333;text-decoration:none'>dex.html</span></i></a><i><span
style='color:#333333'> </span></i><span style='color:#333333'>file, which is
all you need.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Go ahead and try it: if your Express server is still
running on port </span><a href="https://oreil.ly/ROqku"><span style='color:
#333333;text-decoration:none'>3033,</span></a><span style='color:#333333'> you
should be able to visit <i>http://localhost:3033 </i>and see the same
application that your CRA dev server is providing!</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: NOTE&#13;&#10;In case youre wondering how CRAs dev server works, it uses a package called webpack-dev- server, which uses Express under the hood! So it all comes back to Express in the end!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This chapter has only scratched the surface of React, and
the tech</span><a href="https://oreil.ly/ROqku"><span style='color:#333333;
text-decoration:none'>nologies</span></a><span style='color:#333333'> that
swirl around<span style='letter-spacing:.7pt'> </span>it. If you<span
style='letter-spacing:.7pt'> </span>want to<span style='letter-spacing:.7pt'> </span>take
a deeper dive into<span style='letter-spacing:.7pt'> </span>React,<span
style='letter-spacing:.7pt'> </span></span><a href="https://oreil.ly/ROqku"><i><span
style='color:#070707'>Learning</span></i></a></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection335>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark718"></a><i><u><span style='color:#070707'>React</span></u><span
style='color:#070707'> </span></i><span style='color:#333333'>by Alex Banks and
Eve Porcello (OReilly) is a great place to start. This book also covers state
management with Redux (however, it does not currently cover hooks). The </span><a
href="http://bit.ly/37377Qb"><span style='color:#070707'>official React
documentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>is also comprehensive and well-written.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:71.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>SPAs have certainly changed the way we think about and
deliver web applications, and have enabled significant performance
improvements, especially<span style='letter-spacing:1.6pt'> </span>on<span
style='letter-spacing:1.6pt'> </span>mobile.<span style='letter-spacing:1.6pt'>
</span>Even<span style='letter-spacing:1.6pt'> </span>though<span
style='letter-spacing:1.6pt'> </span>Express<span style='letter-spacing:1.5pt'>
</span>was<span style='letter-spacing:1.5pt'> </span>written<span
style='letter-spacing:1.6pt'> </span>in<span style='letter-spacing:1.6pt'> </span>an<span
style='letter-spacing:1.6pt'> </span>era<span style='letter-spacing:1.5pt'> </span>when
most HTML was still substantially rendered on the server, it has certainly not
made Express obsolete. Quite the contrary, the need to provide APIs to
single-page applications has, if anything, given Express new life!</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It should also be clear from reading this chapter that
its really all the same game: data getting sent back and forth between
browsers and servers. Its only the nature of that data thats changed, and
getting used to changing HTML through dynamic DOM manipulation.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:82.0pt;margin-bottom:.0001pt;text-indent:-14.65pt;line-height:
106%'><a href="#_bookmark667"><span style='font-size:10.5pt;line-height:106%;
font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;line-height:106%;font-family:"Arial",sans-serif;
color:#070707;letter-spacing:5.1pt'> </span><a name="_bookmark719"></a><span
style='font-size:10.5pt;line-height:106%;color:#333333'>For performance
reasons, the bundle might be split int<a name="_bookmark720"></a>o chunks
that are loaded as needed (called <i>lazy loading</i>), but the principle is
the same.</span></p>

</div>

<span style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection336>

<h1><a name="Performance_Considerations"></a><a name="_bookmark728"></a><a
name="17._Static_Content"></a><a name="_bookmark721"></a>Chapter<span
style='letter-spacing:.55pt'> </span>17.<span style='letter-spacing:.6pt'> </span>Static<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Content</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark722"></a><i><span style='color:#333333'>Static content </span></i><span
style='color:#333333'>refers to the resources your app will be serving that
dont change on a per-request basis. Here are the usual suspects:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Multimedia</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.1pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><a name="_bookmark723"></a><span style='color:#333333'>Images, videos,
and audio files. Its quite possible to generate image files on the fly, of
course (and video and audio, though thats far less common), but most
multimedia resources are static.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.2pt'>HTML</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:77.5pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark724"></a><span style='color:#333333'>If our web application is
using views to render dynamic HTML, it wouldnt generally qualify as static
HTML (though for performance reasons,<span style='letter-spacing:1.7pt'> </span>you<span
style='letter-spacing:1.7pt'> </span>may<span style='letter-spacing:1.7pt'> </span>dynamically<span
style='letter-spacing:1.7pt'> </span>generate<span style='letter-spacing:1.65pt'>
</span>HTML,<span style='letter-spacing:1.7pt'> </span>cache<span
style='letter-spacing:1.65pt'> </span>it,<span style='letter-spacing:1.7pt'> </span>and<span
style='letter-spacing:1.7pt'> </span>serve<span style='letter-spacing:1.65pt'> </span>it
as a static resource). SPA applications, as weve seen, commonly send<span
style='letter-spacing:4.0pt'> </span>a single, static HTML file to the client,
which is the most common reason<span style='letter-spacing:1.5pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>treat<span style='letter-spacing:1.45pt'> </span>HTML<span
style='letter-spacing:1.45pt'> </span>as<span style='letter-spacing:1.45pt'> </span>a<span
style='letter-spacing:1.45pt'> </span>static<span style='letter-spacing:1.45pt'>
</span>resource.<span style='letter-spacing:1.5pt'> </span>Note<span
style='letter-spacing:1.45pt'> </span>that<span style='letter-spacing:1.45pt'> </span>requiring<span
style='letter-spacing:1.5pt'> </span>the client to use an <i>.html </i>extension
is not very modern, so most servers<span style='letter-spacing:4.0pt'> </span>now
allow static HTML resources to be served without the extension<span
style='letter-spacing:2.0pt'> </span>(so </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>/foo<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>/foo.html<span style='letter-spacing:-1.65pt'> </span></span><span
style='color:#333333'>would return the same content).</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.25pt'>CSS</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark726"></a><span style='color:#333333'>Even<span style='letter-spacing:
1.5pt'> </span>if<span style='letter-spacing:1.45pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>use<span style='letter-spacing:1.45pt'> </span>an<span
style='letter-spacing:1.5pt'> </span>abstracted<span style='letter-spacing:
1.5pt'> </span>CSS<span style='letter-spacing:1.45pt'> </span>language<span
style='letter-spacing:1.45pt'> </span>like<span style='letter-spacing:1.45pt'> </span>LESS,<span
style='letter-spacing:1.5pt'> </span>Sass,<span style='letter-spacing:1.5pt'> </span>or
Stylus, at the e<a name="_bookmark725"></a>nd of the day, your browser needs
plain CSS, which is a static resource.</span><a href="#_bookmark759"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>1</span></sup></a></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>JavaScript</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark727"></a><span style='color:#333333'>Just because the server is
running JavaScript doesnt mean there wont be client-side JavaScript.
Client-side JavaScript is considered a static resource. Of course, now the line
is starting to get a bit hazy: what if there was common code that we wanted to
use on the backend and</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection337>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>client side? There are ways to solve this problem, but at
the end of the day, the JavaScript that gets sent to the client is generally
static.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Binary<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>downloads</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark729"></a><span style='color:#333333'>This is the catchall
category: any PDFs, ZIP files, Word documents, installers, and the like.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image070.gif"
  alt="Text Box: NOTE&#13;&#10;If you are building an API only, there may be no static resources. If thats the case, you may skip this chapter.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt;text-align:justify'><span style='color:#8E0011'>Performance<span
style='letter-spacing:-.5pt'> </span><span style='letter-spacing:-.1pt'>Considerations</span></span></h2>

<p class=MsoNormal style='margin-top:13.65pt;margin-right:81.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark730"></a><span style='font-size:14.0pt;line-height:
133%;color:#333333'>The way you handle static resources significantly impacts
the real-world performance of your website, especially if your site is
multimedia-heavy. The two primary performance considerations are <i>reducing
the number of requests </i>and <i>reducing content size</i>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark731"></a><span style='color:#333333'>Of the two, reducing the
number of (HTTP) requests is more critical, especially for mobile (the overhead
of making an HTTP request is significantly higher over a cellular network).
Reducing the number of requests can be accomplished in two ways: combining
resources and browser caching.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark732"></a><span style='color:#333333'>Combining resources is
primarily an architectural and frontend concern: as much as possible, small
images should be combined into a single sprite.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Then use CSS to set the offset and size to display only
the portion of the image you want. For creating sprites, I highly recommend the
free service </span><a href="http://bit.ly/33GYvwm"><span style='color:#070707'>SpritePad</span></a><span
style='color:#333333'>. It makes generating sprites incredibly easy, and it
generates the CSS for you as well. Nothing could be easier. SpritePads free</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection338>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>functionality is probably all youll ever need, but if
you find yourself creating a lot of sprites, you might find their premium
offerings worth it.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark733"></a><span style='color:#333333'>Browser caching helps
reduce HTTP requests by storing commonly used static resources in the clients
browser. Though browsers go to great<span style='letter-spacing:2.0pt'> </span>lengths
to make caching as automatic as possible, its not magic: theres a lot you can
and should do to enable browser caching of your static <span style='letter-spacing:
-.1pt'>resources.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, we can increase performance by reducing the size
of static resources. Some techniques are <a name="_bookmark734"></a><i>lossless
</i>(size reduction can be achieved without losing any data), and some
techniques are <i>lossy </i>(size reduction is achieved by reducing the quality
of static resources). Lossless techniques include minification of JavaScript
and CSS, and optimizing PNG images. Lossy techniques include increasing JPEG
and video compression levels. Well be discussing minification and bundling
(which also reduces HTTP requests) in this chapter.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: TIP&#13;&#10;The importance of reducing HTTP requests will diminish over time as HTTP/2 becomes more commonplace. One of the primary improvements in HTTP/2 is request and response multiplexing, which reduces the overhead of fetching multiple resources in parallel. See Introduction to HTTP/2 by Ilya Grigorikfor more information.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011'>Content<span
style='letter-spacing:-.35pt'> </span>Delivery<span style='letter-spacing:-.3pt'>
</span><span style='letter-spacing:-.1pt'>Networks</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark735"></a><span style='color:#333333'>When you move your website
into production, the static resources must be hosted<span style='letter-spacing:
1.5pt'> </span>on<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>internet<span style='letter-spacing:1.4pt'>
</span><i>somewhere</i>.<span style='letter-spacing:1.5pt'> </span>You<span
style='letter-spacing:1.5pt'> </span>may<span style='letter-spacing:1.5pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>used<span style='letter-spacing:1.5pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>hosting<span style='letter-spacing:1.5pt'>
</span>them<span style='letter-spacing:1.4pt'> </span>on the same server where
all your dynamic HTML is generated.<span style='letter-spacing:1.1pt'> </span>Our
example</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection339>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="Designing_for_CDNs"></a><a name="Server-Rendered_Website"></a><a
name="_bookmark739"></a><a name="Content_Delivery_Networks"></a><a
name="_bookmark736"></a><span style='color:#333333'>so far has also taken this
approach: the Node/Express server we spin up when we type </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node meadowlark.js<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>serves
all of the HTML as well as static resources. However, if you want to maximize
the performance of<span style='letter-spacing:4.0pt'> </span>your<span
style='letter-spacing:1.1pt'> </span>site<span style='letter-spacing:1.1pt'> </span>(or<span
style='letter-spacing:1.1pt'> </span>allow<span style='letter-spacing:1.1pt'> </span>for<span
style='letter-spacing:1.1pt'> </span>doing<span style='letter-spacing:1.2pt'> </span>so<span
style='letter-spacing:1.2pt'> </span>in<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.1pt'> </span>future),<span style='letter-spacing:1.2pt'>
</span>you<span style='letter-spacing:1.2pt'> </span>will<span
style='letter-spacing:1.1pt'> </span>want<span style='letter-spacing:1.1pt'> </span>to<span
style='letter-spacing:1.2pt'> </span>make<span style='letter-spacing:1.1pt'> </span>it
easy to host your static resources on a <i>content delivery network </i>(CDN).
A CDN is a server thats optimized<span style='letter-spacing:1.65pt'> </span>for
delivering<span style='letter-spacing:1.65pt'> </span>static resources.<span
style='letter-spacing:1.65pt'> </span>It<span style='letter-spacing:2.0pt'> </span>leverages
special headers (that well learn about soon) that enable browser <span
style='letter-spacing:-.1pt'>caching.</span></span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark737"></a><span style='color:#333333'>CDNs also can enable <i>geographic
optimization </i>(often called <i>edge<span style='letter-spacing:2.0pt'> </span>caching</i>);
that is, they can deliver your static content from a server that is geographically
closer to your client. While the internet is very fast indeed (not operating at
the speed of light, exactly, but close enough), it is still faster to<span
style='letter-spacing:1.6pt'> </span>deliver data over a hundred<span
style='letter-spacing:1.6pt'> </span>miles than<span style='letter-spacing:
1.6pt'> </span>a thousand.<span style='letter-spacing:1.6pt'> </span>Individual
time savings may be small, but if you multiply across all of your users,
requests, and resources, it adds up fast.</span></p>

<p class=MsoBodyText><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Most of your static resources will be referenced in HTML
views (</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;link&gt;
</span><span style='color:#333333'>elements to CSS files, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;script&gt;<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>references
to JavaScript files, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>&lt;img&gt;<span style='letter-spacing:-2.25pt'> </span></span><span
style='color:#333333'>tags referencing images, and multimedia embedding tags).
It is also common to have static references in CSS, usually the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>background-image<span
style='letter-spacing:-1.4pt'> </span></span><span style='color:#333333'>property.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:93.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>Lastly, static resources are sometimes referenced in
JavaScript, such as JavaScript code that dynamically changes or inserts </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;img&gt;<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>tags
or the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>background-image<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>property.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image029.gif"
  alt="Text Box: NOTE&#13;&#10;You generally dont have to worry about cross-domain resource sharing (CORS) when using a CDN. External resources loaded in HTML arent subject to CORS policy: you have to enable CORS only for resources that are loaded via Ajax (see Chapter 15).&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection340>

<h2 style='margin-top:3.95pt'><span style='color:#8E0011'>Designing<span
style='letter-spacing:-.25pt'> </span>for<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.2pt'>CDNs</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark740"></a><span style='color:#333333'>The architecture of your
site will influence how you use a CDN. Most CDNs let you configure routing
rules to determine where to send<span style='letter-spacing:4.0pt'> </span>incoming
requests. While you can get arbitrarily sophisticated with those routing rules,
it usually boils down to sending requests for static assets to one location
(usually provided by your CDN) and requests for dynamic endpoints (like dynamic
pages or API endpoints) to another.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:94.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>Choosing and configuring a CDN is a big
topic, which I wont get into here, but I will arm you with background
knowledge that will help you configure your CDN of choice.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The easiest approach to structuring your application is
to make it easy to distinguish dynamic from static assets to make the CDN
routing rules as simple as possible. While its possible to do this using
subdomains (dynamic assets are served from </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>meadowlark.com</span><span
style='color:#333333'>, and static assets are served from </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static.meadowlark.com</span><span
style='color:#333333'>, for example), this approach has extra complications and
makes local development more difficult. The easier approach is to use the
request paths: everything that starts with</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/public/<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>is a
static asset, and everything else is dynamic, for example. The approach may be
different if youre generating your content with Express or using<span
style='letter-spacing:.9pt'> </span>Express to<span style='letter-spacing:.9pt'>
</span>provide an<span style='letter-spacing:.9pt'> </span>API for a
single-page application.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<h3 style='text-align:justify'><span style='color:#3F3F3F'>Server-Rendered<span
style='letter-spacing:-.65pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark741"></a><span style='color:#333333'>If youre using Express to
render your dynamic HTML, its easier to say, Everything that starts with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/static/<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>is a
static asset, and everything else<span style='letter-spacing:2.0pt'> </span>is<span
style='letter-spacing:1.85pt'> </span>dynamic.<span style='letter-spacing:
1.85pt'> </span>With<span style='letter-spacing:1.95pt'> </span>this<span
style='letter-spacing:1.85pt'> </span>approach,<span style='letter-spacing:
1.95pt'> </span>all<span style='letter-spacing:1.85pt'> </span>of<span
style='letter-spacing:1.85pt'> </span>your<span style='letter-spacing:1.85pt'> </span>(dynamically<span
style='letter-spacing:1.95pt'> </span>generated) URLs would be whatever you
want them to be (as long as they dont start with </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/static/</span><span
style='color:#333333'>, of course!), and all of your static assets will be
prefixed</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection341>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>with<span
style='letter-spacing:.4pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>/static/</span><span style='color:#333333;
letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;img src=&quot;/static/img/meadowlark-logo-1.png&quot; alt=&quot;Meadowlark Logo&quot;&gt; Welcome to &lt;a href=&quot;/about&quot;&gt;Meadowlark Travel&lt;/a&gt;."></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark742"></a><span style='color:#333333'>So far in this book, weve
been using the Express </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>static<span style='letter-spacing:-2.8pt'> </span></span><span
style='color:#333333'>middleware as if<span style='letter-spacing:2.0pt'> </span>it
were hosting all of the static assets at the root. That is, if we put a static
asset <i>foo.png </i>in the <i>public </i>directory, we reference it with the
URL path</span></p>

<p class=MsoNormal style='margin-top:.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><i><span
style='font-size:14.0pt;line-height:130%;color:#333333'>/foo.png</span></i><span
style='font-size:14.0pt;line-height:130%;color:#333333'>, not <i>/static/foo.png</i>.
We could, of course, create a subdirectory <i>static </i>inside our existing <i>public
</i>directory, so <i>/public/static/foo.png </i>would have the URL <i>/static/foo.png
</i>but that seems a little silly. Fortunately, the </span><span
style='font-size:14.0pt;line-height:130%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>static<span style='letter-spacing:-2.15pt'> </span></span><span
style='font-size:14.0pt;line-height:130%;color:#333333'>middleware saves us
from that silliness. All we have to do is specify a different path when we call
</span><span style='font-size:14.0pt;line-height:130%;font-family:"BIZ UDGothic",sans-serif;
color:#333333'>app.use</span><span style='font-size:14.0pt;line-height:130%;
color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
background:#FBFBFB'>app</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;background:#FBFBFB'>.</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;background:#FBFBFB'>use</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'>(</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#CC3300;background:#FBFBFB'>'/static'</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;background:#FBFBFB'>,<span
style='letter-spacing:2.0pt'> </span></span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt;
background:#FBFBFB'>express</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;background:#FBFBFB'>.</span><b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#006699;
letter-spacing:-.1pt;background:#FBFBFB'>static</span></b><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#CC3300;letter-spacing:-.1pt;
background:#FBFBFB'>'public'</span><span style='font-size:10.5pt;font-family:
"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;background:#FBFBFB'>)<a
name="Caching_Static_Assets"></a><a name="_bookmark743"></a>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText><span style='font-size:11.0pt;font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:8.2pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now we can use the same URL structure in our development
environment that we will in production. If were careful about keeping our <i>public
</i>directory<span style='letter-spacing:1.45pt'> </span>in<span
style='letter-spacing:1.45pt'> </span>sync<span style='letter-spacing:1.35pt'> </span>with<span
style='letter-spacing:1.45pt'> </span>whats<span style='letter-spacing:1.35pt'>
</span>in<span style='letter-spacing:1.45pt'> </span>our<span style='letter-spacing:
1.35pt'> </span>CDN,<span style='letter-spacing:1.45pt'> </span>we<span
style='letter-spacing:1.35pt'> </span>can<span style='letter-spacing:1.45pt'> </span>reference<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.35pt'> </span>same
static<span style='letter-spacing:1.85pt'> </span>assets<span style='letter-spacing:
1.85pt'> </span>in<span style='letter-spacing:1.95pt'> </span>both<span
style='letter-spacing:1.95pt'> </span>places,<span style='letter-spacing:1.95pt'>
</span>and<span style='letter-spacing:1.95pt'> </span>move<span
style='letter-spacing:1.85pt'> </span>seamlessly<span style='letter-spacing:
1.95pt'> </span>between<span style='letter-spacing:1.95pt'> </span>development
and production.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When we configure routing for our CDN (youll have to
consult your CDNs documentation for this), your routing will look like this:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=551 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image071.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Single-Page<span
style='letter-spacing:-.55pt'> </span><span style='letter-spacing:-.1pt'>Applications</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection342>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Single-Page_Applications"></a><a name="_bookmark744"></a><a
name="_bookmark745"></a><span style='color:#333333'>Single-page<span
style='letter-spacing:1.8pt'> </span>applications<span style='letter-spacing:
1.8pt'> </span>will<span style='letter-spacing:1.8pt'> </span>typically<span
style='letter-spacing:1.9pt'> </span>be<span style='letter-spacing:1.8pt'> </span>the<span
style='letter-spacing:1.8pt'> </span>opposite<span style='letter-spacing:1.8pt'>
</span>of<span style='letter-spacing:1.8pt'> </span>a<span style='letter-spacing:
1.8pt'> </span>server- rendered website: only the API will be routed to your
server (for example, any request prefixed with <i>/api</i>), and everything
else will be rerouted to<span style='letter-spacing:4.0pt'> </span>your static
file store.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>As we saw in </span><a href="#_bookmark665"><span
style='color:#070707'>Chapter 16</span></a><span style='color:#333333'>, you
will have some way to create a production bundle for your application, which
will include all of the static resources, which youll upload to your CDN. Then
all you have to do is make sure routing to your API is configured correctly. So
your routing will look like <span style='letter-spacing:-.1pt'>this:</span></span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=551 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image071.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that weve seen how we might structure an application
so we can seamlessly move from development to production, lets turn our
attention to whats actually happening with caching and how it improves <span
style='letter-spacing:-.1pt'>performance<a name="_bookmark746"></a>.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Caching<span style='letter-spacing:-.3pt'> </span>Static<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Assets</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark747"></a><span style='color:#333333'>Whether youre using
Express to serve static assets or using a CDN, its helpful to understand the
HTTP response headers your browser uses to determine when and how to cache
static assets:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>Expires</span></i><i><span
style='font-size:14.0pt;color:#333333'>/</span></i><i><span style='font-size:
14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333'>Cache-<span
style='letter-spacing:-.1pt'>Control</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark748"></a><span style='color:#333333'>These two headers tell your
browser the maximum amount of time a resource can be cached. They are taken
seriously by the browser: if</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection343>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:72.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>they inform the browser to cache something for a month,
it simply<span style='letter-spacing:4.0pt'> </span>wont re-download it for a
month, as long as it stays in the cache. Its important<span style='letter-spacing:
1.65pt'> </span>to<span style='letter-spacing:1.75pt'> </span>understand<span
style='letter-spacing:1.75pt'> </span>that<span style='letter-spacing:1.65pt'> </span>a<span
style='letter-spacing:1.65pt'> </span>browser<span style='letter-spacing:1.65pt'>
</span>may<span style='letter-spacing:1.75pt'> </span>remove<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.65pt'> </span>image<span
style='letter-spacing:1.65pt'> </span>from the cache prematurely, for reasons
you have no control over. For example, the user could clear the cache manually,
or the browser could clear<span style='letter-spacing:1.45pt'> </span>your<span
style='letter-spacing:1.45pt'> </span>resource<span style='letter-spacing:1.45pt'>
</span>to<span style='letter-spacing:1.55pt'> </span>make<span
style='letter-spacing:1.45pt'> </span>room<span style='letter-spacing:1.45pt'> </span>for<span
style='letter-spacing:1.45pt'> </span>other<span style='letter-spacing:1.45pt'>
</span>resources<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>user<span style='letter-spacing:1.45pt'> </span>is
visiting more frequently. You need one only of these headers, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Expires<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>is<span
style='letter-spacing:1.5pt'> </span>more<span style='letter-spacing:1.5pt'> </span>broadly<span
style='letter-spacing:1.6pt'> </span>supported,<span style='letter-spacing:
1.6pt'> </span>so<span style='letter-spacing:1.6pt'> </span>its<span
style='letter-spacing:1.5pt'> </span>preferable<span style='letter-spacing:
1.5pt'> </span>to<span style='letter-spacing:1.6pt'> </span>use<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>one.
If the resource is in the cache, and it has not expired yet, the browser<span
style='letter-spacing:2.0pt'> </span>will not issue a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>request
at all, which improves performance, especially on mobile.</span></p>

<p class=MsoNormal style='margin-top:11.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>Last-</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>M</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>o</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>d</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>f</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>i</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>e</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>d</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.15pt'>/</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>E</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.15pt'>T</span></i><i><span
style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;
letter-spacing:-.15pt'>a</span></i><i><span style='font-size:14.0pt;font-family:
"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>g</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="_bookmark749"></a><span style='color:#333333'>These two tags provide a
versioning of sorts: if the browser needs to fetch the resource, it will
examine these tags <i>before </i>downloading the content. A </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>GET<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>request
is still issued to the server, but if the values returned by these headers
satisfy the browser that the resource hasnt changed, it will not proceed to
download the file. As the name<span style='letter-spacing:2.0pt'> </span>indicates,
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Last-Modified<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>allows
you to specify the date the resource was last modified. </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>ETag<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>allows
you to use an arbitrary string, which is usually a version string or a content
hash.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>When serving static resources, you should use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Expires<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>header
<i>and </i>either </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Last-Modified<span style='letter-spacing:-2.35pt'> </span></span><span
style='color:#333333'>or </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>ETag</span><span style='color:#333333'>. The Express built-in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>static<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>middleware
sets </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Cache-Control</span><span
style='color:#333333'>, but doesnt handle either </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>Last-Modified<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>ETag</span><span
style='color:#333333'>. So, while its suitable for development, its not a
great solution for <span style='letter-spacing:-.1pt'>deployment.</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you choose to host your static resources on a CDN,
such as Amazon CloudFront, Microsoft Azure, Fastly, Cloudflare, Akamai, or
StackPath, the advantage is that they will handle most of these details for
you. You will be able to fine-tune the details, but the defaults provided by
any of these services are usually good out of the box.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection344>

<h2 style='margin-top:3.95pt'><a name="_bookmark754"></a><a
name="Changing_Your_Static_Content"></a><a name="_bookmark750"></a><span
style='color:#8E0011'>Changing<span style='letter-spacing:-.35pt'> </span>Your<span
style='letter-spacing:-.25pt'> </span>Static<span style='letter-spacing:-.25pt'>
</span><span style='letter-spacing:-.1pt'>Content</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark751"></a><span style='color:#333333'>Caching significantly
improves the performance of your website, but it<span style='letter-spacing:
4.0pt'> </span>isnt without its consequences. In particular, if you change any
of your<span style='letter-spacing:2.0pt'> </span>static resources, clients may
not see them until the cached versions expire<span style='letter-spacing:4.0pt'>
</span>in your browser. Google recommends you cache for a month, preferably a
year. Imagine a user who uses your website every day on the same<span
style='letter-spacing:4.0pt'> </span>browser: that person might not see your
updates for a whole year!</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:72.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Clearly this is an undesirable situation, and you cant
just tell your users to clear their cache. The solution is cache busting. <a
name="_bookmark752"></a><i>Cache busting </i>is a<span style='letter-spacing:
4.0pt'> </span>technique for giving you control of when your users browser is
forced to<span style='letter-spacing:2.0pt'> </span>re-download an asset.
Usually this amounts to versioning the asset (<i>main.2.css </i>or <i>main.css?version=2</i>)
or adding some kind of hash (<i>main.e16b7e149dccfcc399e025e0c454bf77.css</i>).
Whatever technique you use,<span style='letter-spacing:1.55pt'> </span>when<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.55pt'> </span>update
the asset,<span style='letter-spacing:1.55pt'> </span>the resource name
changes,<span style='letter-spacing:1.55pt'> </span>and<span style='letter-spacing:
1.55pt'> </span>the browser knows it needs to download it.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We can do the same thing with our multimedia assets.
Lets take our logo, for<span style='letter-spacing:1.9pt'> </span>example<span
style='letter-spacing:1.9pt'> </span>(<i>/static/img/meadowlark_logo.png</i>).<span
style='letter-spacing:2.0pt'> </span>If<span style='letter-spacing:1.9pt'> </span>we<span
style='letter-spacing:1.9pt'> </span>host<span style='letter-spacing:1.9pt'> </span>it<span
style='letter-spacing:1.9pt'> </span>on<span style='letter-spacing:2.0pt'> </span>a<span
style='letter-spacing:1.9pt'> </span>CDN for maximum performance, specifying an
expiration of one year, and then change the logo, your users may not see the
updated logo for up to a year. However, if you rename your logo <i>/static/img/meadowlark_logo-1.png<span
style='letter-spacing:4.0pt'> </span></i>(and reflect that name change in your
HTML), the browser will be forced<span style='letter-spacing:4.0pt'> </span>to
download it, because it looks like a new resource.</span></p>

<p class=MsoBodyText><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:99.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>If youre using a single-page application framework, such
as </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>create-
react-app<span style='letter-spacing:-2.05pt'> </span></span><span
style='color:#333333'>or similar, they will provide a build step that will
create production-ready resource bundles that have hashes appended.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark753"></a><span
style='color:#333333'>If<span style='letter-spacing:.45pt'> </span>youre<span
style='letter-spacing:.5pt'> </span>starting<span style='letter-spacing:.55pt'>
</span>from<span style='letter-spacing:.45pt'> </span>scratch,<span
style='letter-spacing:.55pt'> </span>youll<span style='letter-spacing:.5pt'> </span>probably<span
style='letter-spacing:.55pt'> </span>want<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>look<span style='letter-spacing:.55pt'> </span>into<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.45pt'> </span><i><span
style='letter-spacing:-.1pt'>bundler</span></i></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection345>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>(which is what the SPA frameworks use under the hood).
Bundlers combine your JavaScript, CSS, and some other types of static assets
into<span style='letter-spacing:2.0pt'> </span>as few as possible, and minify
the result (making it as small as possible). Bundler configuration is a big
topic, but fortunately there is a lot of good documentation out there. The most
popular bundlers available right now are as follows:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:12.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://webpack.js.org/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Webpack</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark755"></a><span style='color:#333333'>Webpack was one of the
first bundlers to really take off, and it still maintains a huge following.
Its very sophisticated, but that sophistication comes at a cost: the learning
curve is steep. However, its good to at least know the basics.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://parceljs.org/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Parcel</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark756"></a><span style='color:#333333'>Parcel is the newcomer, and
it has made a big splash. Its extremely well-documented, extremely fast, and,
best of all, has the shortest learning curve. If youre looking to get the job
done quickly, without a lot of fuss, start here.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://rollupjs.org/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Rollup</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark757"></a><span style='color:#333333'>Rollup sits somewhere
between Webpack and Parcel. Like Webpack, its very robust and has a lot of
features. However, it is easier to get started with than Webpack, and not as
simple as Parcel.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:9.7pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For what seems like such a simple thing, static resources
can be a lot of trouble. However, they probably represent the bulk of the data
actually being transferred to your visitors, so spending some time optimizing
them will yield substantial payoff.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>A<span
style='letter-spacing:.45pt'> </span>viable<span style='letter-spacing:.5pt'> </span>solution<span
style='letter-spacing:.55pt'> </span>to<span style='letter-spacing:.55pt'> </span>static<span
style='letter-spacing:.5pt'> </span>assets<span style='letter-spacing:.5pt'> </span>not<span
style='letter-spacing:.45pt'> </span>previously<span style='letter-spacing:
.55pt'> </span>mentioned<span style='letter-spacing:.55pt'> </span>is<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>simply</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection346>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>host your static resources on a CDN from the start, and
always use the full URL to the resource in your views and CSS. This has the
advantage of simplicity,<span style='letter-spacing:1.45pt'> </span>but<span
style='letter-spacing:1.4pt'> </span>if<span style='letter-spacing:1.4pt'> </span>you<span
style='letter-spacing:1.45pt'> </span>ever<span style='letter-spacing:1.4pt'> </span>want<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.45pt'> </span>spend<span
style='letter-spacing:1.45pt'> </span>a<span style='letter-spacing:1.4pt'> </span>weekend<span
style='letter-spacing:1.45pt'> </span>hackathon<span style='letter-spacing:
1.45pt'> </span>at<span style='letter-spacing:1.4pt'> </span>that cabin in the
woods without internet access, youd be in trouble!</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Elaborate bundling and minification is another area in
which you can save time if the payoff isnt worth it for your application. In
particular, if your site<span style='letter-spacing:.9pt'> </span>includes<span
style='letter-spacing:.9pt'> </span>only<span style='letter-spacing:.95pt'> </span>one<span
style='letter-spacing:.9pt'> </span>or<span style='letter-spacing:.9pt'> </span>two<span
style='letter-spacing:.95pt'> </span>JavaScript<span style='letter-spacing:
.9pt'> </span>files,<span style='letter-spacing:.95pt'> </span>and<span
style='letter-spacing:.95pt'> </span>all<span style='letter-spacing:.9pt'> </span>of<span
style='letter-spacing:.9pt'> </span>your<span style='letter-spacing:.9pt'> </span>CSS<span
style='letter-spacing:.9pt'> </span>lives<span style='letter-spacing:.9pt'> </span>in
a single file, you could probably skip bundling altogether, but real-world
applications have a tendency to grow over time.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whatever technique you choose to use to serve your static
resources, I highly recommend hosting them separately, preferably on a CDN. If
it sounds like a hassle to you, let me assure that its not nearly as difficult
as<span style='letter-spacing:4.0pt'> </span>it sounds, especially if you spend
a little time on your deployment system, so deploying static resources to one
location and your application to<span style='letter-spacing:4.0pt'> </span>another
is automatic.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:72.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre concerned about the hosting costs of CDNs, I
encourage you to take a look at what youre paying now for hosting. Most
hosting providers essentially<span style='letter-spacing:1.65pt'> </span>charge<span
style='letter-spacing:1.55pt'> </span>for<span style='letter-spacing:1.55pt'> </span>bandwidth,<span
style='letter-spacing:1.65pt'> </span>even<span style='letter-spacing:1.65pt'> </span>if<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.65pt'> </span>dont<span
style='letter-spacing:1.55pt'> </span>know<span style='letter-spacing:1.55pt'> </span>it.<span
style='letter-spacing:1.65pt'> </span>However,<span style='letter-spacing:1.65pt'>
</span>if all of a sudden your site is mentioned on Slashdot, and you get
Slashdotted, you may find yourself with a hosting bill you didnt expect. CDN
hosting is usually set up so that you pay for what you use. To give<span
style='letter-spacing:4.0pt'> </span>you<span style='letter-spacing:1.55pt'> </span>an<span
style='letter-spacing:1.55pt'> </span>example,<span style='letter-spacing:1.55pt'>
</span>a<span style='letter-spacing:1.5pt'> </span>website<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>I<span
style='letter-spacing:1.5pt'> </span>once<span style='letter-spacing:1.5pt'> </span>managed<span
style='letter-spacing:1.55pt'> </span>for<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.5pt'> </span>medium-sized regional company, which used
about 20 GB a month of bandwidth, paid<span style='letter-spacing:2.0pt'> </span>only
a few dollars per month to host static resources (and it was a very media-heavy
site).</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>The<span
style='letter-spacing:.55pt'> </span>performance<span style='letter-spacing:
.55pt'> </span>gains<span style='letter-spacing:.55pt'> </span>you<span
style='letter-spacing:.65pt'> </span>realize<span style='letter-spacing:.55pt'>
</span>by<span style='letter-spacing:.6pt'> </span>hosting<span
style='letter-spacing:.65pt'> </span>your<span style='letter-spacing:.55pt'> </span>static<span
style='letter-spacing:.55pt'> </span>resources<span style='letter-spacing:.55pt'>
</span>on<span style='letter-spacing:.65pt'> </span><span style='letter-spacing:
-.5pt'>a</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection347>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>CDN are significant, and the cost and inconvenience of
doing so is minimal, so I highly recommend going this route<a
name="_bookmark758"></a>.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:82.0pt;margin-bottom:.0001pt;text-indent:-14.65pt;line-height:
106%'><a href="#_bookmark725"><span style='font-size:10.5pt;line-height:106%;
font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;line-height:106%;font-family:"Arial",sans-serif;
color:#070707;letter-spacing:5.1pt'> </span><a name="_bookmark759"></a><span
style='font-size:10.5pt;line-height:106%;color:#333333'>It is possible to use
uncompiled LESS in a browser, with some JavaScript magic. There are performance
consequences to this approach, so I dont recommend it.</span></p>

</div>

<span style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection348>

<h1><a name="Generating_Your_Own_Certificate"></a><a name="_bookmark763"></a><a
name="18._Security"></a><a name=HTTPS></a><a name="_bookmark760"></a>Chapter<span
style='letter-spacing:.55pt'> </span>18.<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Security</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark761"></a><span style='color:#333333'>Most websites and
applications these days have some kind of security requirement. If you are
allowing people to log in, or if youre storing personally<span
style='letter-spacing:2.0pt'> </span>identifiable<span style='letter-spacing:
2.0pt'> </span>information<span style='letter-spacing:2.0pt'> </span>(PII),<span
style='letter-spacing:2.0pt'> </span>youll<span style='letter-spacing:2.0pt'> </span>want<span
style='letter-spacing:2.0pt'> </span>to<span style='letter-spacing:2.0pt'> </span>implement
security for your site. In this chapter, well be discussing <i>HTTP Secure </i>(HTTPS),
which establishes a foundation on which you can build a secure website, and
authentication mechanisms, with a focus on third-party <span style='letter-spacing:
-.1pt'>authentication.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Security is a big topic that could fill up an entire
book. For that reason, our focus is going to be on leveraging existing
authentication modules.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Writing your own authentication system is certainly
possible, but is a large and<span style='letter-spacing:2.0pt'> </span>complicated<span
style='letter-spacing:2.0pt'> </span>undertaking.<span style='letter-spacing:
2.0pt'> </span>Furthermore,<span style='letter-spacing:2.0pt'> </span>there<span
style='letter-spacing:2.0pt'> </span>are<span style='letter-spacing:2.0pt'> </span>good<span
style='letter-spacing:2.0pt'> </span>reasons<span style='letter-spacing:2.0pt'>
</span>to prefer a third-party login approach, which we will discuss later in
this <span style='letter-spacing:-.1pt'>chapter.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>HTTPS</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark762"></a><span style='color:#333333'>The first step in providing
secure services is using HTTPS. The nature of the internet makes it possible
for a third party to intercept packets being transmitted between clients and
servers. HTTPS encrypts those packets, making it extremely difficult for an
attacker to get access to the information being transmitted. (I say very
difficult, not impossible, because theres no such thing as perfect
security. However, HTTPS is considered sufficiently secure for banking,
corporate security, and <span style='letter-spacing:-.1pt'>healthcare.)</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection349>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You can think of HTTPS as sort of a foundation for
securing your website.<span style='letter-spacing:2.0pt'> </span>It does not
provide authentication, but it lays the groundwork for authentication. For
example, your authentication system probably involves transmitting a password;
if that password is transmitted unencrypted, no amount<span style='letter-spacing:
2.0pt'> </span>of<span style='letter-spacing:2.0pt'> </span>authentication<span
style='letter-spacing:2.0pt'> </span>sophistication<span style='letter-spacing:
2.0pt'> </span>will<span style='letter-spacing:2.0pt'> </span>secure<span
style='letter-spacing:2.0pt'> </span>your<span style='letter-spacing:2.0pt'> </span>system.<span
style='letter-spacing:2.0pt'> </span>Security is<span style='letter-spacing:
1.05pt'> </span>as<span style='letter-spacing:1.05pt'> </span>strong<span
style='letter-spacing:1.15pt'> </span>as<span style='letter-spacing:1.05pt'> </span>the<span
style='letter-spacing:1.05pt'> </span>weakest<span style='letter-spacing:1.05pt'>
</span>link,<span style='letter-spacing:1.15pt'> </span>and<span
style='letter-spacing:1.15pt'> </span>the<span style='letter-spacing:1.05pt'> </span>first<span
style='letter-spacing:1.05pt'> </span>link<span style='letter-spacing:1.15pt'> </span>in<span
style='letter-spacing:1.15pt'> </span>that<span style='letter-spacing:1.05pt'> </span>chain<span
style='letter-spacing:1.15pt'> </span>is<span style='letter-spacing:1.05pt'> </span>the
network protocol.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark764"></a><span style='color:#333333'>The HTTPS protocol is based
on the server having a <i>public-key certificate</i>, sometimes called an SSL
certificate. The current standard format for SSL certificates is called <i>X.509</i>.
The idea behind certificates is that there are <i>certificate authorities </i>(CAs)
that issue certificates. A certificate authority makes <i>trusted root certificates
</i>available to browser vendors. Browsers include<span style='letter-spacing:
1.65pt'> </span>these<span style='letter-spacing:1.65pt'> </span>trusted<span
style='letter-spacing:1.7pt'> </span>root<span style='letter-spacing:1.65pt'> </span>certificates<span
style='letter-spacing:1.65pt'> </span>when<span style='letter-spacing:1.7pt'> </span>you<span
style='letter-spacing:1.7pt'> </span>install<span style='letter-spacing:1.65pt'>
</span>a<span style='letter-spacing:1.65pt'> </span>browser,<span
style='letter-spacing:1.7pt'> </span>and thats what establishes the chain of
trust between the CA and the browser. For this chain<span style='letter-spacing:
1.3pt'> </span>to<span style='letter-spacing:1.3pt'> </span>work,<span
style='letter-spacing:1.3pt'> </span>your server must use a certificate issued<span
style='letter-spacing:1.3pt'> </span>by<span style='letter-spacing:1.3pt'> </span>a
CA.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>The upshot of this is that to provide HTTPS,
you need a certificate from a CA, so how does one go about acquiring such a
thing? Broadly speaking, you can generate your own, get one from a free CA, or
purchase one from<span style='letter-spacing:4.0pt'> </span>a commercial CA.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='text-align:justify'><span style='color:#3F3F3F'>Generating<span
style='letter-spacing:-.25pt'> </span>Your<span style='letter-spacing:-.3pt'> </span>Own<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Certificate</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark765"></a><span style='color:#333333'>Generating your own
certificate is easy, but generally suitable only for development and testing
purposes (and possibly for intranet deployment). Because of the hierarchical
nature established by certificate authorities, browsers will trust only
certificates generated by a known CA (and thats probably not you). If your
website uses a certificate from a CA thats not known to the browser, the
browser will warn you in very alarming</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection350>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>language that youre establishing a secure connection with
an unknown (and therefore untrusted) entity. In development and testing, this
is fine:<span style='letter-spacing:2.0pt'> </span>you and your team know that
you generated your own certificate, and you expect this behavior from browsers.
If you were to deploy such a website<span style='letter-spacing:4.0pt'> </span>to
production for consumption by the public, they would turn away in <span
style='letter-spacing:-.1pt'>droves.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: NOTE&#13;&#10;If you control the distribution and installation of browsers, you can automatically install your own root certificate when you install the browser. This will prevent people using that browser from being warned when they connect to your website. This is not trivial to set up, however, and applies only to environments in which you control the browser(s) being used. Unless you have a very solid reason to take this approach, its generally more trouble than its worth.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark766"></a><span style='color:#333333'>To generate your own
certificate, youll need an OpenSSL implementation. </span><a
href="#_bookmark767"><span style='color:#070707'>Table 18-1</span></a><span
style='color:#070707'> </span><span style='color:#333333'>shows how to acquire
an implementation.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><a name="_bookmark767"></a><i><span
style='font-size:14.0pt'>Table<span style='letter-spacing:.65pt'> </span>18-1.<span
style='letter-spacing:.75pt'> </span>Acquiring<span style='letter-spacing:.75pt'>
</span>an<span style='letter-spacing:.7pt'> </span>implementation<span
style='letter-spacing:.75pt'> </span>for<span style='letter-spacing:.7pt'> </span>different<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>platforms</span></span></i></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=551 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image072.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><i><span style='font-size:10.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image069.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection351>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image073.gif"></span></p>

<p class=MsoBodyText><i><span style='font-size:10.0pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:10.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once youve installed OpenSSL, you can generate a private
key and a public certificate:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout meadowlark.pem&#13;&#10;-out meadowlark.crt&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You will be asked for some details, such as your country
code, city, and state, <a name="_bookmark768"></a>fully qualified domain name (<i>FQDN</i>,
also called <i>common name </i>or <i>fully qualified hostname</i>), and email
address. Since this certificate is for development/testing purposes, the values
you provide are not particularly important (in fact, theyre all optional, but
leaving them out will result in a certificate that will be regarded with even
more suspicion by a browser).</span></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The common name (FQDN) is what the browser uses to
identify the domain. So if youre using <i>localhost</i>, you can use that for
your FQDN, or you can use the IP address of the server, or the server name, if
available. The encryption will still work if the common name and domain you use
in the URL dont match,<span style='letter-spacing:1.6pt'> </span>but your
browser will give you<span style='letter-spacing:1.6pt'> </span>an<span
style='letter-spacing:1.6pt'> </span>additional<span style='letter-spacing:
2.0pt'> </span>warning about the discrepancy.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>If youre curious about the details of this command, you
can read about them<span style='letter-spacing:1.55pt'> </span>on<span
style='letter-spacing:1.65pt'> </span>the<span style='letter-spacing:1.55pt'> </span></span><a
href="http://bit.ly/2q64psm"><span style='color:#070707'>OpenSSL<span
style='letter-spacing:1.55pt'> </span>documentation<span style='letter-spacing:
1.65pt'> </span>page</span></a><span style='color:#333333'>.<span
style='letter-spacing:1.65pt'> </span>It<span style='letter-spacing:1.55pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>worth<span style='letter-spacing:1.65pt'>
</span>pointing<span style='letter-spacing:1.65pt'> </span>out<span
style='letter-spacing:1.55pt'> </span>that the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>-nodes<span style='letter-spacing:
-2.1pt'> </span></span><span style='color:#333333'>option doesnt have anything
to do with Node, or even the<span style='letter-spacing:2.0pt'> </span>plural
word nodes: it actually means no DES, meaning the private key<span
style='letter-spacing:2.0pt'> </span>is not DES-encrypted.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><a name="_bookmark769"></a><span
style='font-size:14.0pt;color:#333333'>The<span style='letter-spacing:.55pt'> </span>result<span
style='letter-spacing:.55pt'> </span>of<span style='letter-spacing:.55pt'> </span>this<span
style='letter-spacing:.55pt'> </span>command<span style='letter-spacing:.6pt'> </span>is<span
style='letter-spacing:.55pt'> </span>two<span style='letter-spacing:.65pt'> </span>files,<span
style='letter-spacing:.6pt'> </span><i>meadowlark.pem<span style='letter-spacing:
.55pt'> </span></i><span style='letter-spacing:-.25pt'>and</span></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection352>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Purchasing_a_Certificate"></a><a name="_bookmark773"></a><i><span
style='color:#333333'>meadowlark.crt</span></i><span style='color:#333333'>.
The Privacy-Enhanced Electronic Mail (PEM) file is your private<span
style='letter-spacing:1.3pt'> </span>key,<span style='letter-spacing:1.4pt'> </span>and<span
style='letter-spacing:1.4pt'> </span>should<span style='letter-spacing:1.4pt'> </span>not<span
style='letter-spacing:1.3pt'> </span>be<span style='letter-spacing:1.3pt'> </span>made<span
style='letter-spacing:1.3pt'> </span>available<span style='letter-spacing:1.3pt'>
</span>to<span style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:
1.3pt'> </span>client.<span style='letter-spacing:1.4pt'> </span>The<span
style='letter-spacing:1.3pt'> </span>CRT<span style='letter-spacing:1.3pt'> </span>file
is the self-signed certificate that will be sent to the browser to establish a
secure connection.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Alternatively, there are websites that will provide free
self-signed certificates, such as </span><a href="http://bit.ly/354ClEL"><span
style='color:#070707'>this one</span></a><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Using_a_Free_Certificate_Authority"></a><a name="_bookmark770"></a><span
style='color:#3F3F3F'>Using<span style='letter-spacing:-.3pt'> </span>a<span
style='letter-spacing:-.25pt'> </span>Free<span style='letter-spacing:-.25pt'> </span>Certificate<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Authority</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark771"></a><span style='color:#333333'>HTTPS is based on trust,
and its an unfortunate reality that one of the easiest ways to gain trust on
the internet is to buy it. And its not all snake oil,<span style='letter-spacing:
2.0pt'> </span>either:<span style='letter-spacing:2.0pt'> </span>establishing<span
style='letter-spacing:2.0pt'> </span>the<span style='letter-spacing:2.0pt'> </span>security<span
style='letter-spacing:2.0pt'> </span>infrastructure,<span style='letter-spacing:
2.0pt'> </span>insuring<span style='letter-spacing:2.0pt'> </span>certificates,
and maintaining relationships with browser vendors is expensive.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Buying<span style='letter-spacing:1.75pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>certificate<span style='letter-spacing:
1.7pt'> </span>is<span style='letter-spacing:1.7pt'> </span>not<span
style='letter-spacing:1.7pt'> </span>your<span style='letter-spacing:1.7pt'> </span>only<span
style='letter-spacing:1.75pt'> </span>legitimate<span style='letter-spacing:
1.7pt'> </span>option<span style='letter-spacing:1.75pt'> </span>for<span
style='letter-spacing:1.7pt'> </span>production- ready certificates: </span><a
name="_bookmark772"></a><a href="https://letsencrypt.org/"><span
style='color:#070707'>Lets Encrypt</span></a><span style='color:#333333'>, a
free, automated CA based on open source, has become a great option. As a matter
of fact, unless youre<span style='letter-spacing:4.0pt'> </span>already
invested in an infrastructure that offers free or inexpensive certificates<span
style='letter-spacing:1.55pt'> </span>as<span style='letter-spacing:1.55pt'> </span>its<span
style='letter-spacing:1.55pt'> </span>part<span style='letter-spacing:1.55pt'> </span>of<span
style='letter-spacing:1.55pt'> </span>your<span style='letter-spacing:1.55pt'> </span>hosting<span
style='letter-spacing:1.6pt'> </span>(AWS,<span style='letter-spacing:1.6pt'> </span>for<span
style='letter-spacing:1.55pt'> </span>example),<span style='letter-spacing:
1.6pt'> </span>Lets<span style='letter-spacing:1.55pt'> </span>Encrypt is a
great option. The only downside to Lets Encrypt is that the maximum lifetime
for their certificates is 90 days. This downside is offset by the fact that
Lets Encrypt makes it very easy to automatically renew the<span
style='letter-spacing:2.0pt'> </span>certificates, and recommends setting up an
automated process to do so<span style='letter-spacing:4.0pt'> </span>every 60
days to ensure the certificates dont expire.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>All of the major certificate vendors (such as Comodo and
Symantec) offer free trial certificates that last anywhere from 30 to 90 days.
This is a valid option if you want to test a commercial certificate, but you
will need to purchase a certificate before the trial period is up if you want
to ensure continuity of service.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection353>

<h3 style='margin-top:3.65pt'><span style='color:#3F3F3F'>Purchasing<span
style='letter-spacing:-.25pt'> </span>a<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Certificate</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark774"></a><span style='color:#333333'>Currently, 90% of the
approximately 50 root certificates distributed with every major browser are
owned by four companies: Symantec (which purchased VeriSign), Comodo Group, Go
Daddy, and GlobalSign.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Purchasing directly from a CA can be quite expensive: it
usually starts around $300 per year (though some offer certificates for less
than $100 per year). A less expensive option is going through a reseller, from
whom you can get an SSL certificate for as little as $10 per year or less.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Its important to understand exactly what it is youre
paying for, and why you would pay $10, $150, or $300 (or more) for a
certificate. The first important point to understand is that there is no
difference whatsoever in the level of encryption offered between a $10
certificate and a $1,500 certificate. This is something that expensive
certificate authorities would rather you not know: their marketing tries hard
to obscure this fact.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you choose to go with a commercial certificate vendor,
I recommend the following three considerations in making your choice:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Customer<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>support</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If you ever have problems with your certificate, whether
it be browser support (customers will let you know if your certificate is
flagged by their browser as not trustworthy), installation issues, or renewal<span
style='letter-spacing:4.0pt'> </span>hassles, you will appreciate good customer
support. This is one reason you might purchase a more expensive certificate.
Often, your hosting provider will resell certificates, and in my experience,
they provide a higher level of customer support, because they want to keep you
as a hosting client as well.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Single-domain,<span style='letter-spacing:1.15pt'> </span>multisubdomain,<span
style='letter-spacing:1.15pt'> </span>wildcard,<span style='letter-spacing:
1.15pt'> </span>and<span style='letter-spacing:1.15pt'> </span>multidomain<span
style='letter-spacing:1.15pt'> </span><span style='letter-spacing:-.1pt'>certificates</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark775"></a><span
style='color:#333333'>The<span style='letter-spacing:.6pt'> </span>most<span
style='letter-spacing:.6pt'> </span>inexpensive<span style='letter-spacing:
.65pt'> </span>certificates<span style='letter-spacing:.6pt'> </span>are<span
style='letter-spacing:.65pt'> </span>usually<span style='letter-spacing:.7pt'> </span><i>single<span
style='letter-spacing:.6pt'> </span>domain</i>.<span style='letter-spacing:
.7pt'> </span>That<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>may</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection354>

<p class=MsoNormal style='margin-top:3.6pt;margin-right:74.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;color:#333333'>not sound so bad, but
remember that it means that if you purchase a certificate for <i>meadowlarktravel.com</i>,
then the certificate will not work for<span style='letter-spacing:1.85pt'> </span></span><a
href="http://www.meadowlarktravel.com/"><i><span style='font-size:14.0pt;
line-height:111%;color:#333333;text-decoration:none'>www.meadowlarktravel.com</span></i><span
style='font-size:14.0pt;line-height:111%;color:#333333;text-decoration:none'>,</span></a><span
style='font-size:14.0pt;line-height:111%;color:#333333;letter-spacing:1.95pt'> </span><span
style='font-size:14.0pt;line-height:111%;color:#333333'>or<span
style='letter-spacing:1.85pt'> </span>vice<span style='letter-spacing:1.85pt'> </span>versa.<span
style='letter-spacing:1.95pt'> </span>For<span style='letter-spacing:1.85pt'> </span>this<span
style='letter-spacing:1.85pt'> </span>reason,<span style='letter-spacing:1.95pt'>
</span>I<span style='letter-spacing:1.85pt'> </span>tend to avoid single-domain
certificates, though it can be a good option for the extremely budget conscious
(you can always set up redirects to funnel requests to the proper domain). <i>Multisubdomain
certificates </i>are good in that you can purchase a single certificate that
covers <i>meadowlarktravel.com</i>, </span><a href="http://www.meadowlark.com/"><i><span
style='font-size:14.0pt;line-height:111%;color:#333333;text-decoration:none'>www.meadowlark.com</span></i><span
style='font-size:14.0pt;line-height:111%;color:#333333;text-decoration:none'>,</span></a><span
style='font-size:14.0pt;line-height:111%;color:#333333'> <i>blog.meadowlarktravel.com</i>,
<i>shop.meadowlarktravel.com</i>, etc. The downside is that you have to know in
advance what subdomains you want to use.</span></p>

<p class=MsoBodyText style='margin-top:6.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If <a name="_bookmark776"></a>you see yourself adding or
using different subdomains over the<span style='letter-spacing:4.0pt'> </span>course
of a year (that need to support HTTPS), you might be better off going with a <i>wildcard
</i>certificate, which are generally more expensive. But they will work for <i>any
</i>subdomain, and you never have to specify what the subdomains are.</span></p>

<p class=MsoNormal style='margin-top:7.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;color:#333333'>Lastly, there are <i>multidomain
certificates</i>, which, like wildcard certificates, tend to be more expensive.
These certificates support<span style='letter-spacing:4.0pt'> </span>whole
multiple domains so, for example, you could have <i>meadowlarktravel.com</i>, <i>meadowlarktravel.us</i>,
<i>meadowlarktravel.com</i>, and the <i>www </i>variants.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Domain,<span style='letter-spacing:.9pt'> </span>organization,<span
style='letter-spacing:.95pt'> </span>and<span style='letter-spacing:.9pt'> </span>extended<span
style='letter-spacing:.9pt'> </span>validation<span style='letter-spacing:.95pt'>
</span><span style='letter-spacing:-.1pt'>certificates</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark777"></a><span style='color:#333333'>There are three kinds of
certificates: domain, organization, and<span style='letter-spacing:4.0pt'> </span>extended<span
style='letter-spacing:2.0pt'> </span>validation.<span style='letter-spacing:
2.0pt'> </span><i>Domain<span style='letter-spacing:2.0pt'> </span>certificates</i>,<span
style='letter-spacing:2.0pt'> </span>as<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span>name<span style='letter-spacing:2.0pt'> </span>indicates,
simply provide confidence that youre doing business with the <i>domain </i>that
you think you are. <i>Organization certificates</i>, on the other hand, provide
some assurance about the actual organization youre dealing with.<span
style='letter-spacing:2.0pt'> </span>Theyre<span style='letter-spacing:1.95pt'>
</span>more<span style='letter-spacing:1.95pt'> </span>difficult<span
style='letter-spacing:1.95pt'> </span>to<span style='letter-spacing:2.0pt'> </span>get:<span
style='letter-spacing:1.95pt'> </span>theres<span style='letter-spacing:1.95pt'>
</span>usually<span style='letter-spacing:2.0pt'> </span>paperwork involved,<span
style='letter-spacing:1.85pt'> </span>and<span style='letter-spacing:1.85pt'> </span>you<span
style='letter-spacing:1.85pt'> </span>must<span style='letter-spacing:1.8pt'> </span>provide<span
style='letter-spacing:1.8pt'> </span>things<span style='letter-spacing:1.8pt'> </span>like<span
style='letter-spacing:1.8pt'> </span>state<span style='letter-spacing:1.8pt'> </span>and/or<span
style='letter-spacing:1.8pt'> </span>federal business name records, physical
addresses, etc. Different certificate vendors will require different
documentation, so make sure to ask your certificate vendor whats required to
get one of these certificates.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;color:#333333'>Lastly are <i>extended
validation certificates</i>, which are the Rolls Royce of<span
style='letter-spacing:.5pt'> </span>SLL<span style='letter-spacing:.5pt'> </span>certificates.<span
style='letter-spacing:.55pt'> </span>They<span style='letter-spacing:.55pt'> </span>are<span
style='letter-spacing:.5pt'> </span>like<span style='letter-spacing:.5pt'> </span>organization<span
style='letter-spacing:.6pt'> </span>certificates<span style='letter-spacing:
.5pt'> </span>in<span style='letter-spacing:.55pt'> </span>that<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.2pt'>they</span></span></p>

</div>

<span style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection355>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>verify the existence of the organization, but they
require a higher standard of proof, and can even require expensive audits to
establish your data security practices (though this seems to be increasingly
rare). They can be had for as little as $150 for a single domain.</span></p>

<p class=MsoBodyText style='margin-top:7.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>I recommend either the less expensive domain certificates
or the extended validation certificates. Organization certificates, while they
verify the existence of your organization, are not displayed any differently
than browsers, so in my experience, unless the user actually examines the
certificate (which is rare), there will be no apparent difference between this
and a domain certificate. Extended validation certificates, on the other hand,
usually display some clues to users that they are dealing with a legitimate
business (such as the URL bar being displayed in green, and the organization
name being displayed next to the SSL icon).</span></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:72.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark778"></a><span style='color:#333333'>If<span style='letter-spacing:
1.2pt'> </span>youve<span style='letter-spacing:1.2pt'> </span>dealt<span
style='letter-spacing:1.2pt'> </span>with<span style='letter-spacing:1.25pt'> </span>SSL<span
style='letter-spacing:1.2pt'> </span>certificates<span style='letter-spacing:
1.2pt'> </span>before,<span style='letter-spacing:1.25pt'> </span>you<span
style='letter-spacing:1.25pt'> </span>might<span style='letter-spacing:1.2pt'> </span>be<span
style='letter-spacing:1.2pt'> </span>wondering<span style='letter-spacing:1.25pt'>
</span>why I didnt mention certificate insurance. Ive omitted that price
differentiator because essentially its insurance against something thats
almost impossible. The idea is that if someone suffers financial loss due to a
transaction on your website, and they can <i>prove it was due to inadequate encryption</i>,
the insurance is there to cover your damages. While it is certainly possible
that, if your application involves financial transactions, someone<span
style='letter-spacing:1.55pt'> </span>may<span style='letter-spacing:1.6pt'> </span>attempt<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>take<span
style='letter-spacing:1.55pt'> </span>legal<span style='letter-spacing:1.55pt'>
</span>action<span style='letter-spacing:1.6pt'> </span>against<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.6pt'> </span>for<span
style='letter-spacing:1.55pt'> </span>financial<span style='letter-spacing:
1.55pt'> </span>loss, the<span style='letter-spacing:1.55pt'> </span>likelihood<span
style='letter-spacing:1.6pt'> </span>of<span style='letter-spacing:1.55pt'> </span>it<span
style='letter-spacing:1.55pt'> </span>being<span style='letter-spacing:1.6pt'> </span>due<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>inadequate<span
style='letter-spacing:1.55pt'> </span>encryption<span style='letter-spacing:
1.6pt'> </span>is<span style='letter-spacing:1.55pt'> </span>essentially<span
style='letter-spacing:1.6pt'> </span>zero. If I were to attempt to seek damages
from a company due to financial loss linked to their online services, the
absolute last approach I would take is to attempt to prove that the SSL
encryption was broken. If youre faced with two certificates that differ only
in price and insurance coverage, buy the cheaper certificate.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark779"></a><span style='color:#333333'>The process of purchasing a
certificate starts with the creation of a private key (as we did previously for
the self-signed certificate). You will then</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection356>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="A_Note_on_Ports"></a><a name="_bookmark783"></a><span style='color:#333333'>generate<span
style='letter-spacing:1.7pt'> </span>a<span style='letter-spacing:1.7pt'> </span><i>certificate<span
style='letter-spacing:1.7pt'> </span>signing<span style='letter-spacing:1.8pt'>
</span>request<span style='letter-spacing:1.7pt'> </span></i>(CSR)<span
style='letter-spacing:1.7pt'> </span>that<span style='letter-spacing:1.7pt'> </span>will<span
style='letter-spacing:1.7pt'> </span>be<span style='letter-spacing:1.7pt'> </span>uploaded<span
style='letter-spacing:1.8pt'> </span>during the certificate purchase process
(the certificate issuer will provide instructions for doing this). Note that
the certificate issuer never has access to your private key, nor is your
private key transmitted over the internet, which<span style='letter-spacing:
1.45pt'> </span>protects<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>security<span style='letter-spacing:1.45pt'>
</span>of<span style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:
1.4pt'> </span>private<span style='letter-spacing:1.4pt'> </span>key.<span
style='letter-spacing:1.45pt'> </span>The<span style='letter-spacing:1.4pt'> </span>issuer<span
style='letter-spacing:1.4pt'> </span>will<span style='letter-spacing:1.4pt'> </span>then<span
style='letter-spacing:1.45pt'> </span>send you the certificate, which will have
an extension of <i>.crt</i>, <i>.cer</i>, or <i>.der </i>(the certificate<span
style='letter-spacing:1.65pt'> </span>will<span style='letter-spacing:1.65pt'> </span>be<span
style='letter-spacing:1.65pt'> </span>in<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.65pt'> </span>format<span style='letter-spacing:1.65pt'>
</span>called<span style='letter-spacing:1.7pt'> </span>Distinguished<span
style='letter-spacing:1.7pt'> </span>Encoding<span style='letter-spacing:1.7pt'>
</span>Rules<span style='letter-spacing:1.65pt'> </span>or DER, hence the less
common <i>.der </i>extension). You will also receive any certificates<span
style='letter-spacing:1.4pt'> </span>in<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>certificate<span style='letter-spacing:
1.4pt'> </span>chain.<span style='letter-spacing:1.5pt'> </span>It<span
style='letter-spacing:1.4pt'> </span>is<span style='letter-spacing:1.4pt'> </span>safe<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.5pt'> </span>email<span
style='letter-spacing:1.4pt'> </span>this<span style='letter-spacing:1.4pt'> </span>certificate
because it wont work without the private key you generated.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><a name="Enabling_HTTPS_for_Your_Express_App"></a><a
name="_bookmark780"></a><span style='color:#3F3F3F'>Enabling<span
style='letter-spacing:-.35pt'> </span>HTTPS<span style='letter-spacing:-.25pt'>
</span>for<span style='letter-spacing:-.25pt'> </span>Your<span
style='letter-spacing:-.25pt'> </span>Express<span style='letter-spacing:-.25pt'>
App</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark781"></a><span style='color:#333333'>You can modify your Express
app to serve your website ove<a name="_bookmark782"></a>r HTTPS. In practice
and in production, this is extremely uncommon, which well learn about in the
next section. However, for advanced applications, testing, and your own
understanding of HTTPS, its useful to know how to serve <span
style='letter-spacing:-.1pt'>HTTPS.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once you have your private key and certificate, using
them in your app is easy. Lets revisit how weve been creating our server:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: app.listen(app.get('port'), () =&gt; {&#13;&#10;console.log(`Express started in ${app.get('env')} mode ` +&#13;&#10;`on port + ${app.get('port')}.`)&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Switching over to HTTPS is simple. I recommend that you
put your private key and SSL cert in a subdirectory called <i>ssl </i>(though
its quite common to keep it in your project root). Then you just use the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>https </span><span
style='color:#333333'>module instead of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>http</span><span style='color:#333333'>, and pass an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>options<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>object
along to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>createServer<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>method:</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection357>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=558 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image074.gif"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>Thats all there is to
it. Assuming youre still running your server on port 3000, you can now connect
to </span><i><u><span style='font-size:14.0pt;line-height:133%;color:#070707'>https://localhost:3000</span></u></i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>. If you try to connect
to </span><i><u><span style='font-size:14.0pt;line-height:133%;color:#070707'>http://localhost:3000</span></u></i><span
style='font-size:14.0pt;line-height:133%;color:#333333'>, it will simply time
out.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>A<span style='letter-spacing:-.05pt'> </span>Note<span
style='letter-spacing:-.1pt'> </span>on<span style='letter-spacing:-.05pt'> </span><span
style='letter-spacing:-.1pt'>Ports</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark784"></a><span style='color:#333333'>Whether you know it or not,
when you visit a website, youre <i>always </i>connecting to a specific port,
even though its not specified in the URL. If you dont specify a port, port 80
is assumed for HTTP. As a matter of fact, most browsers will simply not display
the port number if you explicitly specify<span style='letter-spacing:2.0pt'> </span>port<span
style='letter-spacing:2.0pt'> </span>80.<span style='letter-spacing:2.0pt'> </span>For<span
style='letter-spacing:2.0pt'> </span>example,<span style='letter-spacing:2.0pt'>
</span>navigate<span style='letter-spacing:2.0pt'> </span>to<span
style='letter-spacing:2.0pt'> </span></span><i><u><span style='color:#070707'>http://www.apple.com:80</span></u></i><span
style='color:#333333'>; chances are, when the page loads, the browser will
simply strip off the <i>:80</i>. Its still connecting on port 80; its just
implicit.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark785"></a><span style='color:#333333'>Similarly, theres a
standard port for HTTPS, 443. Browser behavior is similar: if you connect to </span><i><u><span
style='color:#070707'>https://www.google.com:443</span></u></i><span
style='color:#333333'>, most browsers will simply<span style='letter-spacing:
1.65pt'> </span>not display<span style='letter-spacing:1.65pt'> </span>the <i>:443</i>,<span
style='letter-spacing:1.65pt'> </span>but thats the port theyre connecting<span
style='letter-spacing:1.65pt'> </span>over.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>If<span
style='letter-spacing:.45pt'> </span>youre<span style='letter-spacing:.45pt'> </span>not<span
style='letter-spacing:.45pt'> </span>using<span style='letter-spacing:.5pt'> </span>port<span
style='letter-spacing:.45pt'> </span>80<span style='letter-spacing:.55pt'> </span>for<span
style='letter-spacing:.45pt'> </span>HTTP<span style='letter-spacing:.45pt'> </span>or<span
style='letter-spacing:.45pt'> </span>port<span style='letter-spacing:.45pt'> </span>443<span
style='letter-spacing:.5pt'> </span>for<span style='letter-spacing:.45pt'> </span>HTTPS,<span
style='letter-spacing:.55pt'> </span>youll<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>have</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection358>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>to explicitly specify the port <i>and </i>the protocol to
connect correctly. Theres no way to run HTTP and HTTPS on the same port
(technically, its<span style='letter-spacing:2.0pt'> </span>possible,<span
style='letter-spacing:1.55pt'> </span>but<span style='letter-spacing:1.5pt'> </span>theres<span
style='letter-spacing:1.5pt'> </span>no<span style='letter-spacing:1.55pt'> </span>good<span
style='letter-spacing:1.55pt'> </span>reason<span style='letter-spacing:1.55pt'>
</span>to<span style='letter-spacing:1.55pt'> </span>do<span style='letter-spacing:
1.55pt'> </span>it,<span style='letter-spacing:1.55pt'> </span>and<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.5pt'> </span>implementation
would be very complicated).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you want to run your HTTP app on port 80, or your
HTTPS app on port 443<span style='letter-spacing:1.4pt'> </span>so<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.4pt'> </span>dont<span
style='letter-spacing:1.35pt'> </span>have<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.4pt'> </span>specify<span style='letter-spacing:1.4pt'>
</span>the<span style='letter-spacing:1.35pt'> </span>port<span
style='letter-spacing:1.35pt'> </span>explicitly,<span style='letter-spacing:
1.4pt'> </span>you<span style='letter-spacing:1.4pt'> </span>have<span
style='letter-spacing:1.35pt'> </span>two<span style='letter-spacing:1.4pt'> </span>things
to consider. First is that many systems already have a default web server
running on port 80.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The other thing to know is that on most operating
systems, ports 11023 require elevated privileges to open. For example, <a
name="_bookmark786"></a>on a Linux or macOS machine, if you attempt to start
your app on port 80, it will probably fail with an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>EACCES<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>error.
To run on port 80 or 443 (or any port under 1024), youll need to elevate your
privileges by using the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>sudo<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>command. If you dont have administrator rights, you will
be unable to start the server directly on port 80 or 443.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Unless youre managing your own servers, you probably
dont have root access to your hosted account: so what happens when you want to
run on port 80 or 443? Generally, hosting providers have some kind of proxy
service that runs with elevated privileges that will pass requests through to
your<span style='letter-spacing:1.55pt'> </span>app,<span style='letter-spacing:
1.6pt'> </span>which<span style='letter-spacing:1.6pt'> </span>is<span
style='letter-spacing:1.55pt'> </span>running<span style='letter-spacing:1.6pt'>
</span>on<span style='letter-spacing:1.6pt'> </span>a<span style='letter-spacing:
1.55pt'> </span>nonprivileged<span style='letter-spacing:1.6pt'> </span>port.<span
style='letter-spacing:1.6pt'> </span>Well<span style='letter-spacing:1.55pt'> </span>learn<span
style='letter-spacing:1.6pt'> </span>more about this in the next section.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>HTTPS<span style='letter-spacing:-.2pt'> </span>and<span
style='letter-spacing:-.1pt'> Proxies</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark787"></a><span style='color:#333333'>As weve seen, its very
easy to use HTTPS with Express, and for development, it will work fine.
However, when you want to scale your site out to handle more traffic, you will
want to use a proxy server such as NGINX (see </span><a href="#_bookmark499"><span
style='color:#070707'>Chapter 12</span></a><span style='color:#333333'>). If
your site is running in a shared hosting</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection359>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="HTTPS_and_Proxies"></a><a name="_bookmark788"></a><span style='color:
#333333'>environment, it is almost certain that there will be a proxy server
that will route requests to your application.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre using a proxy server, then the client (the
users browser) will communicate with the <i>proxy server</i>, not your server.
The proxy server, in turn,<span style='letter-spacing:1.75pt'> </span>will<span
style='letter-spacing:1.65pt'> </span>most<span style='letter-spacing:1.65pt'> </span>likely<span
style='letter-spacing:1.75pt'> </span>communicate<span style='letter-spacing:
1.65pt'> </span>with<span style='letter-spacing:1.75pt'> </span>your<span
style='letter-spacing:1.65pt'> </span>app<span style='letter-spacing:1.75pt'> </span>over<span
style='letter-spacing:1.65pt'> </span>regular<span style='letter-spacing:1.65pt'>
</span>HTTP (since your app and the proxy server will be running together on a
trusted network). You will often hear people say that the HTTPS <i>terminates </i>at
the proxy server, or that the proxy is performing SSL termination.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For the most part, once you or your hosting provider has
correctly configured the proxy server to handle HTTPS requests, you wont need
to do any additional work. The exception to that rule is if your application
needs to handle both secure and insecure requests.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There are three solutions to this problem. The first is
simply to configure your proxy to redirect all HTTP traffic to HTTPS, in
essence forcing all communication with your application to be over HTTPS. This
approach is becoming much more common, and its certainly an easy solution to
the <span style='letter-spacing:-.1pt'>problem.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:73.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark789"></a><span style='color:#333333'>The second approach is to
somehow communicate the protocol used in the client-proxy communication to the
server. The usual way to communicate this is through the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>X-Forwarded-Proto<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>header.
For example, to set this header in NGINX:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>proxy_set_header<span style='letter-spacing:1.85pt'> </span>X-Forwarded-Proto<span
style='letter-spacing:1.9pt'> </span><span style='letter-spacing:-.1pt'>$scheme<a
name="Cross-Site_Request_Forgery"></a><a name="_bookmark790"></a>;</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Then,<span
style='letter-spacing:.45pt'> </span>in<span style='letter-spacing:.45pt'> </span>your<span
style='letter-spacing:.45pt'> </span>app,<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.5pt'> </span>could<span style='letter-spacing:.45pt'> </span>test<span
style='letter-spacing:.4pt'> </span>to<span style='letter-spacing:.5pt'> </span>see<span
style='letter-spacing:.4pt'> </span>if<span style='letter-spacing:.4pt'> </span>the<span
style='letter-spacing:.45pt'> </span>protocol<span style='letter-spacing:.4pt'>
</span>was<span style='letter-spacing:.4pt'> </span><span style='letter-spacing:
-.1pt'>HTTPS:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: app.get('/', (req, res) =&gt; {&#13;&#10;// the following is essentially&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection360>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: // equivalent to: if(req.secure)&#13;&#10;if(req.headers['x-forwarded-proto'] === 'https') { res.send('line is secure')&#13;&#10;} else {&#13;&#10;res.send('you are insecure!')&#13;&#10;}&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image017.gif"
  alt="Text Box: CAUTION&#13;&#10;In NGINX, there is a separate server configuration block for HTTP and HTTPS. If you fail to set the X-Forwarded-Protocol in the configuration block corresponding to HTTP, you open yourself up to the possibility of a client spoofing the header and thereby fooling your application into thinking that the connection is secure even though it isnt. If you take this approach, make sure you always set the X-Forwarded-Protocol header.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>When<span style='letter-spacing:2.0pt'> </span>youre<span
style='letter-spacing:2.0pt'> </span>using<span style='letter-spacing:2.0pt'> </span>a<span
style='letter-spacing:2.0pt'> </span>proxy,<span style='letter-spacing:2.0pt'> </span>Express<span
style='letter-spacing:2.0pt'> </span>provides<span style='letter-spacing:2.0pt'>
</span>some<span style='letter-spacing:2.0pt'> </span>convenience properties
that make the proxy more transparent (as if you werent using one, without
sacrificing the benefits). To take advantage of that, tell<span
style='letter-spacing:4.0pt'> </span>Express to trust the proxy by using </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>app.enable('trust
proxy')</span><span style='color:#333333'>. Once you do, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.protocol</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>req.secure</span><span style='color:#333333'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.ip<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>will
refer to the clients connection to the proxy, not to your app<a
name="_bookmark791"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Cross-Site<span
style='letter-spacing:-.4pt'> </span>Request<span style='letter-spacing:-.35pt'>
</span><span style='letter-spacing:-.1pt'>Forgery</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark792"></a><i><span style='color:#333333'>Cross-site request
forgery </span></i><span style='color:#333333'>(CSRF) attacks exploit the fact
that users generally trust their browser and visit multiple sites in the same
session. In<span style='letter-spacing:4.0pt'> </span>a CSRF attack, script on
a malicious site makes requests of another site: if you are logged in on the
other site, the malicious site can successfully<span style='letter-spacing:
2.0pt'> </span>access secure data from another site.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark793"></a><span
style='color:#333333'>To<span style='letter-spacing:.45pt'> </span>prevent<span
style='letter-spacing:.45pt'> </span>CSRF<span style='letter-spacing:.45pt'> </span>attacks,<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.45pt'> </span>must<span
style='letter-spacing:.45pt'> </span>have<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.4pt'> </span>way<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>make<span style='letter-spacing:.45pt'> </span>sure<span
style='letter-spacing:.4pt'> </span>a<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>request</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection361>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><a
name=Authentication></a><a name="_bookmark794"></a><span style='color:#333333'>legitimately
came from your website. The way we do this is to pass a<span style='letter-spacing:
4.0pt'> </span>unique token to the browser. When the browser then submits a
form, the server checks to make sure the token matches. The </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>csurf<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>middleware
will handle the token creation and verification for you; all youll have to do
is make sure the token is included in requests to the server. Install the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>csurf </span><span
style='color:#333333'>middleware (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install csurf</span><span style='color:#333333'>); then link
it in and add a token to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>res.locals</span><span style='color:#333333'>.<span
style='letter-spacing:1.6pt'> </span>Make<span style='letter-spacing:1.55pt'> </span>sure<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.6pt'> </span>link<span
style='letter-spacing:1.6pt'> </span>in<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>csurf<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>middleware<span style='letter-spacing:1.55pt'> </span>after<span
style='letter-spacing:1.55pt'> </span>you<span style='letter-spacing:1.6pt'> </span>link
in </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>body-parser</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>cookie-parser</span><span style='color:#333333'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-session</span><span
style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: // this must come after we link in body-parser,&#13;&#10;// cookie-parser, and express-session&#13;&#10;const csrf = require('csurf')&#13;&#10;&#13;&#10;app.use(csrf({ cookie: true })) app.use((req, res, next) =&gt; {&#13;&#10;res.locals._csrfToken = req.csrfToken() next()&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:125%'><span
style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>csurf<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>middleware adds the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>csrfToken<span style='letter-spacing:-2.6pt'> </span></span><span
style='color:#333333'>method to the request object. We dont have to assign it
to </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.locals</span><span
style='color:#333333'>; we could just pass </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>req.csrfToken()<span style='letter-spacing:
-1.9pt'> </span></span><span style='color:#333333'>explicitly to every view
that needs it, but this is generally less work.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image032.gif"
  alt="Text Box: NOTE&#13;&#10;Note that the package itself is called csurf, but most of the variables and methods are csrf, without the u. Its easy to get tripped up here, so mind your vowels!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Now on all of your forms (and AJAX calls), youll have to
provide a field called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>_csrf</span><span style='color:#333333'>, which must match the
generated token. Lets see how we would add this to one of our forms:</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection362>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: &lt;form action=&quot;/newsletter&quot; method=&quot;POST&quot;&gt;&#13;&#10;&lt;input type=&quot;hidden&quot; name=&quot;_csrf&quot; value=&quot;{{_csrfToken}}&quot;&gt; Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt;&#13;&#10;Email: &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;&lt;br&gt;&#13;&#10;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&#13;&#10;&lt;/form&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>The </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>csurf<span style='letter-spacing:-2.7pt'> </span></span><span
style='color:#333333'>middleware will handle the rest: if the body contains
fields, but no valid </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>_csrf<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>field, it will raise an error (make sure you have an
error<span style='letter-spacing:2.0pt'> </span>route in your middleware!). Go
ahead and remove the hidden field and see what happens.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;If you have an API, you probably dont want the csurf middleware interfering with it. If you want to restrict access to your API from other websites, you should look into the API key functionality of an API library like connect-rest. To prevent csurf from interfering with your middleware, link it in before you link in csurf.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Authentication</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark795"></a><span style='color:#333333'>Authentication is a big,
complicated topic. Unfortunately, its also a vital part of most nontrivial web
applications. The most important piece of wisdom I can impart to you is <i>dont
try to do it yourself</i>. If you look at your business card and it doesnt say
Security Expert, you probably arent prepared for the complex considerations
involved in designing a secure authentication system.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Im not saying that you shouldnt try to understand the
security systems in your application. Im just recommending that you dont try
to build it yourself. Feel free to study the open source code of the
authentication techniques<span style='letter-spacing:1.65pt'> </span>Im<span
style='letter-spacing:1.65pt'> </span>going<span style='letter-spacing:1.75pt'>
</span>to<span style='letter-spacing:1.75pt'> </span>recommend.<span
style='letter-spacing:1.75pt'> </span>It<span style='letter-spacing:1.65pt'> </span>will<span
style='letter-spacing:1.65pt'> </span>certainly<span style='letter-spacing:
1.75pt'> </span>give<span style='letter-spacing:1.65pt'> </span>you<span
style='letter-spacing:1.75pt'> </span>some insight as to why you might not want
to take on this task unaided!</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection363>

<h3 style='margin-top:3.25pt'><a name="Third-Party_Authentication"></a><a
name="_bookmark798"></a><a name="Authentication_Versus_Authorization"></a><a
name="_bookmark796"></a><span style='color:#3F3F3F'>Authentication<span
style='letter-spacing:-.55pt'> </span>Versus<span style='letter-spacing:-.45pt'>
</span><span style='letter-spacing:-.1pt'>Authorization</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark797"></a><span style='color:#333333'>While the two terms are
often used interchangeably, there is a difference. <i>Authentication </i>refers
to verifying users identities. That is, they are who they say they are. <i>Authorization
</i>refers to determining what a user is authorized to access, modify, or view.
For example, customers might be authorized to access their account information,
whereas a Meadowlark Travel employee would be authorized to access another
persons account information or sales notes.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image023.gif"
  alt="Text Box: NOTE&#13;&#10;Authentication is often abbreviated as authN and authorization as authZ.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Usually (but not always), authentication comes first, and
then authorization is determined. Authorization can be very simple
(authorized/not authorized), broad (user/administrator), or very fine- grained,
specifying read, write, delete, and update privileges against different account
types. The complexity of your authorization system is dependent on the type of
application youre writing.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Because authorization is so dependent on the details of
your application, Ill be giving only a rough outline in this book, using a
very broad authentication scheme (customer/employee). I will often use the
abbreviation auth, but only when it is clear from the context whether it
means authentication or authorization, or when it doesnt matter.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>The<span style='letter-spacing:-.25pt'> </span>Problem<span
style='letter-spacing:-.25pt'> </span>with<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Passwords</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection364>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="The_Problem_with_Passwords"></a><a name="_bookmark799"></a><a
name="_bookmark800"></a><span style='color:#333333'>The problem with passwords
is that every security system is only as strong as its weakest link. And
passwords require the user to invent a password and theres your weakest link.
Humans are notoriously bad at coming up with<span style='letter-spacing:1.6pt'>
</span>secure<span style='letter-spacing:1.5pt'> </span>passwords.<span
style='letter-spacing:1.6pt'> </span>In<span style='letter-spacing:1.6pt'> </span>an<span
style='letter-spacing:1.6pt'> </span>analysis<span style='letter-spacing:1.5pt'>
</span>of<span style='letter-spacing:1.5pt'> </span>security<span
style='letter-spacing:1.6pt'> </span>breaches<span style='letter-spacing:1.5pt'>
</span>in<span style='letter-spacing:1.6pt'> </span>2018,<span
style='letter-spacing:1.6pt'> </span>the most popular password is 123456.
password is second. Even in the security conscious year of 2018, people are
still choosing abysmally bad passwords. Having password policies requiring, for
example, a capital<span style='letter-spacing:4.0pt'> </span>letter, a number,
and a punctuation mark is just going to result in a<span style='letter-spacing:
4.0pt'> </span>password of Password1!.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Even analyzing passwords against a list of common
passwords doesnt do much to stop the problem. Then people start writing down
their higher- quality passwords on notepads, leaving them in unencrypted files
on their computers, or emailing them to themselves.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>At the end of the day, its a problem that you, the app
designer, cannot do much to fix. However, there are things you can do that
promote more<span style='letter-spacing:4.0pt'> </span>secure passwords. One is
to pass the buck and rely on a third party for authentication.<span
style='letter-spacing:1.65pt'> </span>The<span style='letter-spacing:1.65pt'> </span>other<span
style='letter-spacing:1.65pt'> </span>is<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.7pt'> </span>make<span style='letter-spacing:1.65pt'> </span>your<span
style='letter-spacing:1.65pt'> </span>login<span style='letter-spacing:1.7pt'> </span>system<span
style='letter-spacing:1.65pt'> </span>friendly<span style='letter-spacing:1.7pt'>
</span>to password management services, like 1Password, Bitwarden, and
LastPass.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Third-Party<span style='letter-spacing:-.55pt'>
</span><span style='letter-spacing:-.1pt'>Authentication</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark801"></a><span style='color:#333333'>Third-party authentication
takes advantage of the fact that pretty much everyone on the internet has an
account on at least one major service, such as Google, Facebook, Twitter, or
LinkedIn. All of these services provide a mechanism to authenticate and identify
your users through their service.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image030.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection365>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=578 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image064.gif"></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.7pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Third-party authentication has three major advantages.
First, your authentication burden is lowered. You do not have to worry about
authenticating individual users, only interacting with a trusted third party.
The second advantage is that it reduces <i>password fatigue</i>: the stress
associated with having too many accounts. I use </span><a
href="http://lastpass.com/"><span style='color:#070707'>LastPass</span></a><span
style='color:#333333'>, and I just checked<span style='letter-spacing:1.7pt'> </span>my<span
style='letter-spacing:1.7pt'> </span>password<span style='letter-spacing:1.7pt'>
</span>vault:<span style='letter-spacing:1.6pt'> </span>I<span
style='letter-spacing:1.6pt'> </span>have<span style='letter-spacing:1.6pt'> </span>almost<span
style='letter-spacing:1.6pt'> </span>400<span style='letter-spacing:1.7pt'> </span>passwords.<span
style='letter-spacing:1.7pt'> </span>As<span style='letter-spacing:1.6pt'> </span>a
technology professional, I may have more than your average internet user, but
its not uncommon for even a casual internet user to have dozens or<span
style='letter-spacing:2.0pt'> </span>even<span style='letter-spacing:2.0pt'> </span>hundreds<span
style='letter-spacing:2.0pt'> </span>of<span style='letter-spacing:2.0pt'> </span>accounts.<span
style='letter-spacing:2.0pt'> </span>Lastly,<span style='letter-spacing:2.0pt'>
</span>third-party<span style='letter-spacing:2.0pt'> </span>authentication<span
style='letter-spacing:2.0pt'> </span>is <i>frictionless</i>: it allows your
users to start using your site more quickly, with credentials they<span
style='letter-spacing:1.45pt'> </span>already<span style='letter-spacing:1.45pt'>
</span>have.<span style='letter-spacing:1.45pt'> </span>Often,<span
style='letter-spacing:1.45pt'> </span>if users see that they<span
style='letter-spacing:1.45pt'> </span>have to<span style='letter-spacing:1.45pt'>
</span>create yet <i>another </i>username and password, they will simply move
on.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you dont use a password manager, the chances are,
youre using the same password for most of those sites (most people have a
secure password they use for banking and the like, and an insecure password
they use for everything else). The problem with this approach is that if<span
style='letter-spacing:4.0pt'> </span>even <i>one </i>of the sites you use that
password for is breached, and your password becomes known, then hackers will
try using that same password with other services. Its like putting all of your
eggs in one basket.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Third-party authentication has its downsides. Hard as it
is to believe, there <i>are </i>folks out there who dont have an account on
Google, Facebook, Twitter, or LinkedIn. Then, among the people who <i>do </i>have
such accounts, suspicion<span style='letter-spacing:1.5pt'> </span>(or a desire
for privacy) may<span style='letter-spacing:1.5pt'> </span>make them unwilling<span
style='letter-spacing:1.5pt'> </span>to<span style='letter-spacing:1.5pt'> </span>use
those</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection366>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Authentication_Versus_Registration_and_t"></a><a name="_bookmark805"></a><span
style='color:#333333'>credentials to log onto your website. Many websites solve
this particular problem by encouraging users to use an existing account, but
those who dont have them (or are unwilling to use them to access your service)
can create a new login for your service.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Storing_Users_in_Your_Database"></a><a name="_bookmark803"></a><span
style='color:#3F3F3F'>Storing<span style='letter-spacing:-.2pt'> </span>Users<span
style='letter-spacing:-.2pt'> </span>in<span style='letter-spacing:-.15pt'> </span>Your<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Database</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark804"></a><span style='color:#333333'>Whether<span
style='letter-spacing:1.3pt'> </span>or<span style='letter-spacing:1.3pt'> </span>not<span
style='letter-spacing:1.3pt'> </span>you<span style='letter-spacing:1.4pt'> </span>rely<span
style='letter-spacing:1.35pt'> </span>on<span style='letter-spacing:1.4pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>third<span style='letter-spacing:1.4pt'> </span>party<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.4pt'> </span>authenticate<span
style='letter-spacing:1.3pt'> </span>your<span style='letter-spacing:1.3pt'> </span>users,<span
style='letter-spacing:1.4pt'> </span>you will want to store a record of users
in your own database. For example, if youre using Facebook for authentication,
that only verifies a users<span style='letter-spacing:2.0pt'> </span>identity.
If you need to save settings specific to that user, you cant reasonably use
Facebook for that: you have to store information about that user in your own
database. Also, you probably want to associate an email address with your
users, and they may not wish to use the same email address they use for
Facebook (or whatever third-party authentication service you use). Lastly,
storing user information in your database allows you to perform authentication
yourself, should you wish to provide that <span style='letter-spacing:-.1pt'>option.</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>So<span style='letter-spacing:.45pt'> </span>lets<span
style='letter-spacing:.35pt'> </span>create<span style='letter-spacing:.4pt'> </span>a<span
style='letter-spacing:.4pt'> </span>model<span style='letter-spacing:.4pt'> </span>for<span
style='letter-spacing:.4pt'> </span>our<span style='letter-spacing:.4pt'> </span>users,<span
style='letter-spacing:.4pt'> </span><i><span style='letter-spacing:-.1pt'>models/user.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const mongoose = require('mongoose')&#13;&#10;&#13;&#10;const userSchema = mongoose.Schema({ authId: String,&#13;&#10;name: String, email: String, role: String, created: Date,&#13;&#10;})&#13;&#10;&#13;&#10;const User = mongoose.model('User', userSchema) module.exports = User&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection367>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name=Passport></a><a name="_bookmark809"></a><span style='color:#333333'>And
modify <i>db.js </i>with the appropriate abstractions (if youre using
PostgreSQL, Ill leave it as an exercise to hook up this abstraction):</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const User = require('./models/user')&#13;&#10;&#13;&#10;module.exports = {&#13;&#10;//...&#13;&#10;getUserById: async id =&gt; User.findById(id), getUserByAuthId: async authId =&gt; User.findOne({ authId }), addUser: async data =&gt; new User(data).save(),&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><a
name="_bookmark806"></a><span style='color:#333333'>Recall that every object in
a MongoDB database has its own unique ID, stored in its </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>_id<span
style='letter-spacing:-2.25pt'> </span></span><span style='color:#333333'>property.
However, that ID is controlled by MongoDB, and we need some way to map a user
record to a third-party ID, so we have our own ID property, called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>authId</span><span
style='color:#333333'>. Since well be using multiple authentication
strategies, that ID will be a combination of a strategy type and a third-party
ID, to prevent collisions. For example, a Facebook user might have an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>authId<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>of </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>facebook:525764102</span><span
style='color:#333333'>, whereas a Twitter user would have an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>authId<span
style='letter-spacing:-.7pt'> </span></span><span style='color:#333333'>of </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>twitter:376841763</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>We<span
style='letter-spacing:.45pt'> </span>will<span style='letter-spacing:.5pt'> </span>be<span
style='letter-spacing:.45pt'> </span>using<span style='letter-spacing:.55pt'> </span>two<span
style='letter-spacing:.5pt'> </span>roles<span style='letter-spacing:.5pt'> </span>in<span
style='letter-spacing:.5pt'> </span>our<span style='letter-spacing:.5pt'> </span>example:<span
style='letter-spacing:.45pt'> </span>customer<span style='letter-spacing:
.5pt'> </span>and<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>employee.</span></span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:21.0pt'>&nbsp;</span></p>

<h3 style='margin-right:37.5pt;line-height:101%'><span style='color:#3F3F3F'>Authentication<span
style='letter-spacing:-.15pt'> </span>Versus<span style='letter-spacing:-.2pt'>
</span>Registration<span style='letter-spacing:-.15pt'> </span>and<span
style='letter-spacing:-.15pt'> </span>the<span style='letter-spacing:-.2pt'> </span>User
<span style='letter-spacing:-.1pt'>Experience</span></span></h3>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark807"></a><span style='color:#333333'>Authentication refers to
verifying a users identity, either with a trusted third party, or through
credentials youve provided the user (such as a username and password).
Registration is the process by which a user gets an account on your site (from
our perspective, registration is when we create a user record in the database).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark808"></a><span
style='color:#333333'>When<span style='letter-spacing:.45pt'> </span>users<span
style='letter-spacing:.4pt'> </span>join<span style='letter-spacing:.45pt'> </span>your<span
style='letter-spacing:.4pt'> </span>site<span style='letter-spacing:.4pt'> </span>for<span
style='letter-spacing:.4pt'> </span>the<span style='letter-spacing:.4pt'> </span>first<span
style='letter-spacing:.4pt'> </span>time,<span style='letter-spacing:.45pt'> </span>it<span
style='letter-spacing:.4pt'> </span>should<span style='letter-spacing:.45pt'> </span>be<span
style='letter-spacing:.4pt'> </span>clear<span style='letter-spacing:.4pt'> </span>to<span
style='letter-spacing:.45pt'> </span>them<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.2pt'>that</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection368>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>theyre registering. Using a third-party authentication
system, we could register them without their knowledge if they successfully
authenticate through the third party. This is not generally considered a good
practice,<span style='letter-spacing:4.0pt'> </span>and<span style='letter-spacing:
1.4pt'> </span>it<span style='letter-spacing:1.35pt'> </span>should<span
style='letter-spacing:1.4pt'> </span>be<span style='letter-spacing:1.35pt'> </span>clear<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.4pt'> </span>users<span
style='letter-spacing:1.35pt'> </span>that<span style='letter-spacing:1.35pt'> </span>theyre<span
style='letter-spacing:1.35pt'> </span>registering<span style='letter-spacing:
1.4pt'> </span>for<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.35pt'> </span>site (whether theyre authenticating
through a third party or not), and provide a clear mechanism for canceling
their membership.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark810"></a><span style='color:#333333'>One user experience
situation to consider is third-party confusion. If a user registers in January
for your service using Facebook, then returns in July,<span style='letter-spacing:
1.45pt'> </span>and<span style='letter-spacing:1.45pt'> </span>is<span
style='letter-spacing:1.4pt'> </span>confronted<span style='letter-spacing:
1.45pt'> </span>with<span style='letter-spacing:1.45pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>screen<span style='letter-spacing:1.45pt'>
</span>offering<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>choices<span style='letter-spacing:1.4pt'>
</span>of<span style='letter-spacing:1.4pt'> </span>logging<span
style='letter-spacing:1.45pt'> </span>in with Facebook, Twitter, Google, or
LinkedIn, the user may very well have forgotten what registration service was
originally used. This is one of the pitfalls of third-party authentication, and
there is precious little you can do about it. Its another good reason to ask
the user to provide an email<span style='letter-spacing:2.0pt'> </span>address:
this way, you can give the user an option to look up their account by email,
and send an email to that address specifying what service was<span
style='letter-spacing:2.0pt'> </span>used for authentication.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If<span style='letter-spacing:1.2pt'> </span>you<span
style='letter-spacing:1.3pt'> </span>feel<span style='letter-spacing:1.2pt'> </span>that<span
style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:1.3pt'> </span>have<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.2pt'> </span>firm<span
style='letter-spacing:1.2pt'> </span>grasp<span style='letter-spacing:1.3pt'> </span>on<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.2pt'> </span>social<span
style='letter-spacing:1.2pt'> </span>networks<span style='letter-spacing:1.2pt'>
</span>your<span style='letter-spacing:1.2pt'> </span>users use, you can ease
this problem by having a primary authentication service. For example, if you
feel pretty confident that the majority of your users<span style='letter-spacing:
4.0pt'> </span>have a Facebook account, you could have a big button that says,
Log in with<span style='letter-spacing:1.65pt'> </span>Facebook.<span
style='letter-spacing:1.55pt'> </span>Then,<span style='letter-spacing:1.65pt'>
</span>using<span style='letter-spacing:1.65pt'> </span>smaller<span
style='letter-spacing:1.55pt'> </span>buttons<span style='letter-spacing:1.55pt'>
</span>or<span style='letter-spacing:1.55pt'> </span>even<span
style='letter-spacing:1.65pt'> </span>just<span style='letter-spacing:1.55pt'> </span>text<span
style='letter-spacing:1.55pt'> </span>links,<span style='letter-spacing:1.65pt'>
</span>say, or log in with Google, Twitter, or LinkedIn. This approach can
cut down on the instance of third-party confusion.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Passport</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark811"></a><i><span style='color:#333333'>Passport </span></i><span
style='color:#333333'>is a very popular and robust authentication module for
Node/Express.<span style='letter-spacing:.9pt'> </span>It is not tied<span
style='letter-spacing:.9pt'> </span>to<span style='letter-spacing:.9pt'> </span>any<span
style='letter-spacing:.9pt'> </span>one authentication<span style='letter-spacing:
.9pt'> </span>mechanism; rather,<span style='letter-spacing:.9pt'> </span>it</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection369>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>is based on the idea of pluggable authentication <i>strategies
</i>(including a local strategy if you dont want to use third-party
authentication).</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Understanding the flow of authentication information can
be overwhelming, so well start with just one authentication mechanism and add
more later.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The detail thats important to understand is that, with
third-party authentication, your app <i>never receives a password</i>. That is
handled entirely by the third party. This is a good thing: its putting the
burden of secure handling and storage of passwords on the third party.</span><a
name="_bookmark812"></a><a href="#_bookmark826"><sup><span style='font-family:
"Arial",sans-serif;color:#070707'>1</span></sup></a></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:11.5pt;
font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The whole process, then, relies on redirects (it must, if
your application is never to receive the users third-party password). At
first, you might be confused about why you can pass <i>localhost </i>URLs to
the third party and<span style='letter-spacing:2.0pt'> </span>still
successfully authenticate (after all, the third-party server handling<span
style='letter-spacing:4.0pt'> </span>your request doesnt know about <i>your
localhost</i>). It works because the<span style='letter-spacing:4.0pt'> </span>third
party simply instructs <i>your browser </i>to redirect, and your browser is
inside your network, and can therefore redirect to local addresses.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The basic flow is shown in </span><a href="#_bookmark813"><span
style='color:#070707'>Figure 18-1</span></a><span style='color:#333333'>. This
diagram shows the important flow<span style='letter-spacing:1.8pt'> </span>of<span
style='letter-spacing:1.8pt'> </span>functionality,<span style='letter-spacing:
1.9pt'> </span>making<span style='letter-spacing:1.9pt'> </span>it<span
style='letter-spacing:1.8pt'> </span>clear<span style='letter-spacing:1.8pt'> </span>that<span
style='letter-spacing:1.8pt'> </span>the<span style='letter-spacing:1.8pt'> </span>authentication<span
style='letter-spacing:1.9pt'> </span>actually occurs on the third-party
website. Enjoy the simplicity of the diagram things are about to get a lot
more complicated.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:128.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><span style='color:#333333'>When you use Passport, there are four steps
that your app will be responsible for. Consider a more detailed view of the
third-party authentication flow, as shown in </span><a href="#_bookmark814"><span
style='color:#070707'>Figure 18-2</span></a><span style='color:#333333'>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection370>

<p class=MsoBodyText style='margin-left:65.8pt'><a name="_bookmark814"></a><span
style='font-size:10.0pt'><img border=0 width=547 height=677 id=image17.jpeg
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image075.jpg"></span></p>

<p class=MsoNormal align=center style='margin-top:3.15pt;margin-right:15.9pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><a
name="_bookmark813"></a><i><span style='font-size:10.5pt'>Figure<span
style='letter-spacing:.6pt'> </span>18-1.<span style='letter-spacing:.65pt'> </span>Third-party<span
style='letter-spacing:.65pt'> </span>authentication<span style='letter-spacing:
.65pt'> </span><span style='letter-spacing:-.2pt'>flow</span></span></i></p>

<p class=MsoBodyText style='margin-top:.2pt'><i><span style='font-size:11.5pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For<span style='letter-spacing:1.7pt'> </span>simplicity,<span
style='letter-spacing:1.75pt'> </span>we<span style='letter-spacing:1.7pt'> </span>are<span
style='letter-spacing:1.7pt'> </span>using<span style='letter-spacing:1.75pt'> </span>Meadowlark<span
style='letter-spacing:1.75pt'> </span>Travel<span style='letter-spacing:1.7pt'>
</span>to<span style='letter-spacing:1.75pt'> </span>represent<span
style='letter-spacing:1.7pt'> </span>your<span style='letter-spacing:1.7pt'> </span>app,
and Facebook for the third-party authentication mechanism. </span><a
href="#_bookmark814"><span style='color:#070707'>Figure 18-2</span></a><span
style='color:#070707'> </span><span style='color:#333333'>illustrates<span
style='letter-spacing:1.4pt'> </span>how<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>user<span style='letter-spacing:1.4pt'> </span>goes<span
style='letter-spacing:1.4pt'> </span>from<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>login<span style='letter-spacing:1.5pt'> </span>page<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>secure<span style='letter-spacing:1.4pt'> </span>Account
Info page (the Account Info page is just used for illustration purposes: this
could be any page on your website that requires authentication).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection371>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This diagram shows detail you dont normally think about,
but is<span style='letter-spacing:4.0pt'> </span>important to understand in
this context. In particular, when you visit a URL, <i>you </i>arent making the
request of the server: the browser is actually doing that. That said, the
browser can do three things: make an HTTP request, display the response, and
perform a redirect (which is essentially making another request and displaying
another responsewhich in turn could be another redirect).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In the Meadowlark column, you can see the four steps your
application is actually responsible for. Fortunately, well be leveraging
Passport (and pluggable strategies) to perform the details of those steps;
otherwise, this book would be much, much longer.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection372>

<p class=MsoBodyText style='margin-left:65.5pt'><span style='position:relative;
z-index:-1667148800'><span style='left:0px;position:absolute;left:367px;
top:-286087px;width:192px;height:1px'><img width=192 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image076.jpg"></span></span><span
style='position:relative;z-index:-1667148288'><span style='left:0px;position:
absolute;left:188px;top:-286087px;width:139px;height:1px'><img width=139
height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image077.jpg"></span></span><span
style='font-size:10.0pt'><img width=548 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image078.gif"></span></p>

</div>

<span style='font-size:10.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection373>

<p class=MsoNormal align=center style='margin-top:4.15pt;margin-right:15.85pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><i><span
style='font-size:10.5pt'>Figure<span style='letter-spacing:.45pt'> </span>18-2.<span
style='letter-spacing:.5pt'> </span>Detailed<span style='letter-spacing:.5pt'> </span>view<span
style='letter-spacing:.5pt'> </span>of<span style='letter-spacing:.5pt'> </span>third-party<span
style='letter-spacing:.5pt'> </span>authentication<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.2pt'>flow</span></span></i></p>

<p class=MsoBodyText style='margin-top:.2pt'><i><span style='font-size:11.5pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Before we get into implementation details, lets consider
each of the steps in a little more detail:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Login<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.2pt'>page</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>The login page is where the user can choose the login
method. If<span style='letter-spacing:4.0pt'> </span>youre using a third-party
authentication, its usually just a button or a link. If youre using local
authentication, it will include username and password fields. If the user
attempts to access a URL requiring authentication (such as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/account<span
style='letter-spacing:-1.5pt'> </span></span><span style='color:#333333'>in our
example) without being<span style='letter-spacing:2.0pt'> </span>logged in,
this is probably the page you will want to redirect to (alternatively, you
could redirect to a Not Authorized page with a link to the login page).</span></p>

<p class=MsoNormal style='margin-top:10.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Construct<span style='letter-spacing:1.1pt'> </span>authentication<span
style='letter-spacing:1.15pt'> </span><span style='letter-spacing:-.1pt'>request</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>In this step, youll be constructing a request to be sent
to a third party (via a redirect). The details of this request are complicated
and specific to<span style='letter-spacing:1.9pt'> </span>the<span
style='letter-spacing:1.8pt'> </span>authentication<span style='letter-spacing:
1.8pt'> </span>strategy.<span style='letter-spacing:1.8pt'> </span>Passport<span
style='letter-spacing:1.8pt'> </span>(and<span style='letter-spacing:1.9pt'> </span>the<span
style='letter-spacing:1.8pt'> </span>strategy<span style='letter-spacing:1.9pt'>
</span>plugin)<span style='letter-spacing:1.8pt'> </span>will be<span
style='letter-spacing:1.55pt'> </span>doing<span style='letter-spacing:1.65pt'>
</span>all<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>heavy<span style='letter-spacing:1.65pt'>
</span>lifting<span style='letter-spacing:1.65pt'> </span>here.<span
style='letter-spacing:1.55pt'> </span>The<span style='letter-spacing:1.55pt'> </span>auth<span
style='letter-spacing:1.65pt'> </span>request<span style='letter-spacing:1.55pt'>
</span>includes protection<span style='letter-spacing:2.0pt'> </span>against
man-in-the-middle attacks,<span style='letter-spacing:2.0pt'> </span>as well as
other vectors<span style='letter-spacing:2.0pt'> </span>an<span
style='letter-spacing:1.7pt'> </span>attacker<span style='letter-spacing:1.65pt'>
</span>might<span style='letter-spacing:1.65pt'> </span>exploit.<span
style='letter-spacing:1.65pt'> </span>Usually<span style='letter-spacing:1.7pt'>
</span>the<span style='letter-spacing:1.65pt'> </span>auth<span
style='letter-spacing:1.7pt'> </span>request<span style='letter-spacing:1.65pt'>
</span>is<span style='letter-spacing:1.65pt'> </span>short-lived,<span
style='letter-spacing:1.7pt'> </span>so you<span style='letter-spacing:1.35pt'>
</span>cant<span style='letter-spacing:1.25pt'> </span>store<span
style='letter-spacing:1.25pt'> </span>it<span style='letter-spacing:1.25pt'> </span>and<span
style='letter-spacing:1.35pt'> </span>expect<span style='letter-spacing:1.25pt'>
</span>to<span style='letter-spacing:1.35pt'> </span>use<span style='letter-spacing:
1.25pt'> </span>it<span style='letter-spacing:1.25pt'> </span>later:<span
style='letter-spacing:1.25pt'> </span>this<span style='letter-spacing:1.25pt'> </span>helps<span
style='letter-spacing:1.25pt'> </span>prevent<span style='letter-spacing:1.25pt'>
</span>attacks by limiting the window in which an attacker has time to act.
This is where you can request additional information from the third-party
authorization mechanism. For example, its common to request the users name,
and possibly email address. Keep in mind that the more information<span
style='letter-spacing:1.6pt'> </span>you<span style='letter-spacing:1.6pt'> </span>request<span
style='letter-spacing:1.55pt'> </span>from<span style='letter-spacing:1.55pt'> </span>users,<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>less<span
style='letter-spacing:1.55pt'> </span>likely<span style='letter-spacing:1.6pt'>
</span>they<span style='letter-spacing:1.6pt'> </span>are<span
style='letter-spacing:1.55pt'> </span>to authorize your application.</span></p>

<p class=MsoNormal style='margin-top:10.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Verify<span style='letter-spacing:.85pt'> </span>authentication<span
style='letter-spacing:1.0pt'> </span><span style='letter-spacing:-.1pt'>response</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Assuming the user authorized your application, youll get
back a valid auth<span style='letter-spacing:1.5pt'> </span>response<span
style='letter-spacing:1.45pt'> </span>from<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.45pt'> </span>third<span style='letter-spacing:1.5pt'> </span>party,<span
style='letter-spacing:1.5pt'> </span>which<span style='letter-spacing:1.5pt'> </span>is<span
style='letter-spacing:1.45pt'> </span>proof<span style='letter-spacing:1.45pt'>
</span>of<span style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:
1.45pt'> </span>users identity. Once again, the details of this validation are
complicated and will be handled by Passport (and the strategy plugin). If the
auth</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection374>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>response indicates that the user is not authorized (if
invalid credentials were entered, or your application wasnt authorized by the
user), you would then redirect to an appropriate page (either back to the login<span
style='letter-spacing:4.0pt'> </span>page, or to a Not Authorized or Unable to
Authorize page). Included in the auth<span style='letter-spacing:1.2pt'> </span>response
will be an<span style='letter-spacing:1.2pt'> </span>ID for the user that is
unique <i>to<span style='letter-spacing:1.2pt'> </span>that<span
style='letter-spacing:2.0pt'> </span>specific third party</i>, as well as any
additional details you requested in step 2. To enable step 4, we must
remember that the user is<span style='letter-spacing:2.0pt'> </span>authorized.
The usual way to do this is to set a session variable containing<span
style='letter-spacing:1.8pt'> </span>the<span style='letter-spacing:1.7pt'> </span>users<span
style='letter-spacing:1.7pt'> </span>ID,<span style='letter-spacing:1.8pt'> </span>indicating<span
style='letter-spacing:1.8pt'> </span>that<span style='letter-spacing:1.7pt'> </span>this<span
style='letter-spacing:1.7pt'> </span>session<span style='letter-spacing:1.8pt'>
</span>has<span style='letter-spacing:1.7pt'> </span>been authorized (cookies
can also be used, though I recommend using <span style='letter-spacing:-.1pt'>sessions).</span></span></p>

<p class=MsoNormal style='margin-top:10.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Verify<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>authorization</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:72.7pt;margin-bottom:
0cm;margin-left:76.6pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>In step 3, we stored a user ID in the session. The
presence of that user<span style='letter-spacing:2.0pt'> </span>ID allows us to
retrieve a user object from the database that contains information about what
the user is authorized to do. In this manner, we dont have to authenticate
with the third party for every request (which would<span style='letter-spacing:
1.5pt'> </span>result<span style='letter-spacing:1.45pt'> </span>in<span
style='letter-spacing:1.5pt'> </span>a<span style='letter-spacing:1.45pt'> </span>slow<span
style='letter-spacing:1.45pt'> </span>and<span style='letter-spacing:1.5pt'> </span>painful<span
style='letter-spacing:1.45pt'> </span>user<span style='letter-spacing:1.45pt'> </span>experience).<span
style='letter-spacing:1.45pt'> </span>This<span style='letter-spacing:1.45pt'> </span>task<span
style='letter-spacing:1.5pt'> </span>is simple, and we no longer need Passport
for this: we have our own user object that contains our own authentication
rules. (If that object isnt available,<span style='letter-spacing:1.65pt'> </span>it<span
style='letter-spacing:1.6pt'> </span>indicates<span style='letter-spacing:1.6pt'>
</span>the<span style='letter-spacing:1.6pt'> </span>request<span
style='letter-spacing:1.6pt'> </span>isnt<span style='letter-spacing:1.6pt'> </span>authorized,<span
style='letter-spacing:1.65pt'> </span>and<span style='letter-spacing:1.65pt'> </span>we<span
style='letter-spacing:1.6pt'> </span>can<span style='letter-spacing:1.65pt'> </span>redirect
to the login or Not Authorized page.)</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;Using Passport for authentication is a fair amount of work, as youll see in this chapter. However, authentication is an important part of your application, and I feel that it is wise to invest some time in getting it right. There are projects such as LockIt that try to provide a more off the shelf solution. Another increasingly popular option is Auth0, which is very robust but isnt as easy to set up as LockIt. To make the most effective use of LockIt or Auth0 (or similar solutions), however, it behooves you to understand the details of authentication and authorization, which is what this chapter is designed to do. Also, if you ever need to customize an authentication solution, Passport is a great place to start.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<h4 align=left style='margin-top:11.0pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.6pt'>SETTING</span><span style='color:
#545454;letter-spacing:2.65pt'> </span><span style='color:#545454'>UP<span
style='letter-spacing:2.65pt'> </span><span style='letter-spacing:.5pt'>PASSPORT</span></span></h4>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection375>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark816"></a><span style='color:#333333'>To keep things simple,
well start with a single authentication provider. Arbitrarily, well choose
Facebook. Before we can set up Passport and the Facebook strategy, well need
to do a little configuration in Facebook. For Facebook authentication, youll need
a <i>Facebook app</i>. If you already have<span style='letter-spacing:4.0pt'> </span>a
suitable Facebook app, you can use that, or you can create a new one
specifically for authentication. If possible, you should use your
organizations official Facebook account to create the app. That is, if you worked
for Meadowlark Travel, you would use the Meadowlark Travel Facebook account to
create the app (you can always add your personal Facebook account as an
administrator of the app for ease of<span style='letter-spacing:4.0pt'> </span>administration).
For testing purposes, its fine to use your own Facebook account, but using a
personal account for production will appear unprofessional and suspicious to
your users.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The details of Facebook app administration seem to change
fairly frequently, so I am not going to explain the details here. Consult the </span><a
href="http://bit.ly/372bc7c"><span style='color:#070707'>Facebook developer
documentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>if you need details on creating and administering your
app.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>For development and testing purposes, you will need to
associate the development/testing domain name with the app. Facebook allows you
to use <i>localhost </i>(and port numbers), which is great for testing
purposes.</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Alternatively, you can specify a local IP address, which
can be helpful if youre using a virtualized server, or another server on your
network for testing. The important thing is that the URL you enter into your
browser to test the app (for example, <i>http://localhost:3000</i>) is
associated with the Facebook<span style='letter-spacing:1.8pt'> </span>app.<span
style='letter-spacing:1.8pt'> </span>Currently,<span style='letter-spacing:
1.8pt'> </span>you<span style='letter-spacing:1.8pt'> </span>can<span
style='letter-spacing:1.8pt'> </span>associate<span style='letter-spacing:1.7pt'>
</span>only<span style='letter-spacing:1.8pt'> </span>one<span
style='letter-spacing:1.7pt'> </span>domain<span style='letter-spacing:1.8pt'> </span>with<span
style='letter-spacing:1.8pt'> </span>your app:<span style='letter-spacing:1.2pt'>
</span>if<span style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:
1.25pt'> </span>need<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.25pt'> </span>be<span style='letter-spacing:1.2pt'> </span>able<span
style='letter-spacing:1.2pt'> </span>to<span style='letter-spacing:1.25pt'> </span>use<span
style='letter-spacing:1.2pt'> </span>multiple<span style='letter-spacing:1.2pt'>
</span>domains,<span style='letter-spacing:1.25pt'> </span>you<span
style='letter-spacing:1.25pt'> </span>will<span style='letter-spacing:1.2pt'> </span>have<span
style='letter-spacing:1.2pt'> </span>to create multiple apps (for example, you
could have Meadowlark Dev, Meadowlark Test, and Meadowlark Staging; your
production app can</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection376>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>simply<span
style='letter-spacing:.65pt'> </span>be<span style='letter-spacing:.65pt'> </span>called<span
style='letter-spacing:.65pt'> </span>Meadowlark<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>Travel).</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once youve configured your app, you will need its unique
app ID, and its app secret, both of which can be found on the Facebook app
management page for that app.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image031.gif"
  alt="Text Box: TIP&#13;&#10;One of the biggest frustrations youll probably face is receiving a message from Facebook such as Given URL is not allowed by the Application configuration. This indicates that the hostname and port in the callback URL do not match what youve configured in your app. If you look at the URL in your browser, you will see the encoded URL, which should give you a clue. For example, if Im using 192.168.0.103:3443, and I get that message, I look at the URL. If I see redirect_uri=https%3A%2F%2F192.68.0.103%3A3443%2F auth%2Ffacebook%2Fcallback in the querystring, I can quickly spot the mistake: I used 68 instead of 168 in my hostname.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.6pt'> </span>lets<span style='letter-spacing:.6pt'> </span>install<span
style='letter-spacing:.65pt'> </span>Passport<span style='letter-spacing:.6pt'>
</span>and<span style='letter-spacing:.7pt'> </span>the<span style='letter-spacing:
.6pt'> </span>Facebook<span style='letter-spacing:.7pt'> </span>authentication<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>strategy:</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.45pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>npm<span style='letter-spacing:1.05pt'> </span>install<span
style='letter-spacing:1.1pt'> </span>passport<span style='letter-spacing:1.1pt'>
</span>passport-<span style='letter-spacing:-.1pt'>facebook</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Before were done, theres going to be a lot of
authentication code (especially if were supporting multiple strategies), and
we dont want to clutter up <i>meadowlark.js </i>with all that code. Instead,
well create a module called <i>lib/auth.js</i>. This is going to be a large
file, so were going to take it piece by piece (see <i>ch18 </i>in the
companion repo for the finished example). Well start with the imports and two
methods that Passport requires, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>serializeUser<span style='letter-spacing:-.95pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>deserializeUser</span><span style='color:#333333'>:</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const passport = require('passport')&#13;&#10;const FacebookStrategy = require('passport-facebook').Strategy&#13;&#10;&#13;&#10;const db = require('../db')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection377>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: passport.serializeUser((user, done) =&gt; done(null, user._id))&#13;&#10;&#13;&#10;passport.deserializeUser((id, done) =&gt; { db.getUserById(id)&#13;&#10;.then(user =&gt; done(null, user))&#13;&#10;.catch(err =&gt; done(err, null))&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Passport uses </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>serializeUser<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>and </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>deserializeUser<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>to map requests to the authenticated user, allowing you
to use whatever storage method you want. In our case, we are only going to
store our database ID (the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>_id </span><span style='color:#333333'>property) in the session.
The way were using the ID here makes serialize and deserialize soft of
into misnomers: were actually just storing a user ID in the session. Then,
when needed, we can get a user object by finding that ID in the database.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Once these two methods are implemented, as long as there
is an active session, and the user has successfully authenticated, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.session.passport.user<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>will
be the corresponding user object as retrieved from the database.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:79.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Next, were going to choose what to export. To enable
Passports functionality, well need to do two distinct activities: initialize
Passport,<span style='letter-spacing:4.0pt'> </span>and register routes that
will handle authentication and the redirected callbacks from our third-party
authentication services. We dont want to combine<span style='letter-spacing:
1.55pt'> </span>these<span style='letter-spacing:1.55pt'> </span>two<span
style='letter-spacing:1.6pt'> </span>in<span style='letter-spacing:1.6pt'> </span>one<span
style='letter-spacing:1.55pt'> </span>function<span style='letter-spacing:1.6pt'>
</span>because<span style='letter-spacing:1.55pt'> </span>in<span
style='letter-spacing:1.6pt'> </span>our<span style='letter-spacing:1.55pt'> </span>main<span
style='letter-spacing:1.6pt'> </span>application<span style='letter-spacing:
1.6pt'> </span>file, we may want to choose when Passport is linked into the
middleware chain (remember that order is significant when adding middleware).
So, instead<span style='letter-spacing:4.0pt'> </span>of<span style='letter-spacing:
1.55pt'> </span>having<span style='letter-spacing:1.6pt'> </span>our<span
style='letter-spacing:1.55pt'> </span>module<span style='letter-spacing:1.55pt'>
</span>export<span style='letter-spacing:1.55pt'> </span>function<span
style='letter-spacing:1.6pt'> </span>that<span style='letter-spacing:1.55pt'> </span>does<span
style='letter-spacing:1.55pt'> </span>either<span style='letter-spacing:1.55pt'>
</span>of<span style='letter-spacing:1.55pt'> </span>these<span
style='letter-spacing:1.55pt'> </span>things, were going to have it return a
function that returns an object that has the methods we need. Why not just
return an object to start with? Because we need<span style='letter-spacing:
.5pt'> </span>to<span style='letter-spacing:.55pt'> </span>bake<span
style='letter-spacing:.45pt'> </span>in<span style='letter-spacing:.55pt'> </span>some<span
style='letter-spacing:.45pt'> </span>configuration<span style='letter-spacing:
.55pt'> </span>values.<span style='letter-spacing:.5pt'> </span>Also,<span
style='letter-spacing:.55pt'> </span>since<span style='letter-spacing:.45pt'> </span>we<span
style='letter-spacing:.5pt'> </span>need<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.5pt'> </span>link<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>the</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection378>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Passport middleware into our application, a function is an
easy way to pass in the Express application object:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: module.exports = (app, options) =&gt; {&#13;&#10;// if success and failure redirects aren't specified,&#13;&#10;// set some reasonable defaults&#13;&#10;if(!options.successRedirect) options.successRedirect = '/account' if(!options.failureRedirect) options.failureRedirect = '/login' return {&#13;&#10;init: function() { /* TODO */ }, registerRoutes: function() { /* TODO */ },&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Before we get into the details of the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>init<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>registerRoutes<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>methods,
lets look at how well use this module (hopefully that will make this business
of returning a function that returns an object a little more clear):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const createAuth = require('./lib/auth')&#13;&#10;&#13;&#10;// ...other app configuration&#13;&#10;&#13;&#10;const auth = createAuth(app, {&#13;&#10;// baseUrl is optional; it will default to localhost if you omit it;&#13;&#10;// it can be helpful to set this if you're not working on&#13;&#10;// your local machine.	For example, if you were using a staging server,&#13;&#10;// you might set the BASE_URL environment variable to&#13;&#10;// https://staging.meadowlark.com baseUrl: process.env.BASE_URL, providers: credentials.authProviders, successRedirect: '/account', failureRedirect: '/unauthorized',&#13;&#10;})&#13;&#10;&#13;&#10;// auth.init() links in Passport middleware:&#13;&#10;auth.init()&#13;&#10;&#13;&#10;// now we can specify our auth routes:&#13;&#10;auth.registerRoutes()&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection379>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Notice that, in addition to specifying the success and
failure redirect paths, we also specify a property called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>providers</span><span
style='color:#333333'>, which weve externalized in the<span style='letter-spacing:
1.5pt'> </span>credentials<span style='letter-spacing:1.5pt'> </span>file<span
style='letter-spacing:1.5pt'> </span>(see<span style='letter-spacing:1.5pt'> </span></span><a
href="#_bookmark542"><span style='color:#070707'>Chapter<span style='letter-spacing:
1.5pt'> </span>13</span></a><span style='color:#333333'>).<span
style='letter-spacing:1.55pt'> </span>Well<span style='letter-spacing:1.5pt'> </span>need<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>add<span
style='letter-spacing:1.55pt'> </span>the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>authProviders<span style='letter-spacing:-.6pt'> </span></span><span
style='color:#333333'>property to <i>.credentials.development.json</i>:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &quot;authProviders&quot;: {&#13;&#10;&quot;facebook&quot;: {&#13;&#10;&quot;appId&quot;: &quot;your_app_id&quot;,&#13;&#10;&quot;appSecret&quot;: &quot;your_app_secret&quot;&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: TIP&#13;&#10;Another reason to bundle our authentication code in a module like this is that we can reuse it for other projects; as a matter of fact, there are already some authentication packages that do essentially what were doing here. However, its important to understand the details of whats going on, so even if you end up using a module someone else wrote, this will help you understand everything thats going on in your authentication flow.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:11.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>lets<span style='letter-spacing:.5pt'> </span>take<span
style='letter-spacing:.45pt'> </span>care<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.5pt'> </span>our<span style='letter-spacing:.45pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>init<span
style='letter-spacing:-3.0pt'> </span></span><span style='color:#333333'>method<span
style='letter-spacing:.55pt'> </span>(previously<span style='letter-spacing:
.55pt'> </span>a<span style='letter-spacing:.45pt'> </span>TODO<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.55pt'> </span><i><span
style='letter-spacing:-.1pt'>auth.js</span></i><span style='letter-spacing:
-.1pt'>):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: init: function() {&#13;&#10;var config = options.providers&#13;&#10;&#13;&#10;// configure Facebook strategy&#13;&#10;passport.use(new FacebookStrategy({ clientID: config.facebook.appId, clientSecret: config.facebook.appSecret,&#13;&#10;callbackURL: (options.baseUrl || '') + '/auth/facebook/callback',&#13;&#10;}, (accessToken, refreshToken, profile, done) =&gt; { const authId = 'facebook:' + profile.id db.getUserByAuthId(authId)&#13;&#10;.then(user =&gt; {&#13;&#10;if(user) return done(null, user) db.addUser({&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection380>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: authId: authId,&#13;&#10;name: profile.displayName, created: new Date(),&#13;&#10;role: 'customer',&#13;&#10;})&#13;&#10;.then(user =&gt; done(null, user))&#13;&#10;.catch(err =&gt; done(err, null))&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;if(err) return done(err, null);&#13;&#10;})&#13;&#10;}))&#13;&#10;&#13;&#10;app.use(passport.initialize()) app.use(passport.sessionp))&#13;&#10;},&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>This is a pretty dense bit of code, but most of it is
actually just Passport boilerplate. The important bit is inside the function
that gets passed to the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>FacebookStrategy<span style='letter-spacing:-2.45pt'> </span></span><span
style='color:#333333'>instance. When this function gets called (after the user
has successfully authenticated), the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>profile<span style='letter-spacing:-.85pt'> </span></span><span
style='color:#333333'>parameter contains<span style='letter-spacing:4.0pt'> </span>information
about the Facebook user. Most important, it includes a<span style='letter-spacing:
2.0pt'> </span>Facebook ID: thats what well use to associate a Facebook
account to our own<span style='letter-spacing:1.7pt'> </span>user<span
style='letter-spacing:1.65pt'> </span>object.<span style='letter-spacing:1.65pt'>
</span>Note<span style='letter-spacing:1.65pt'> </span>that<span
style='letter-spacing:1.65pt'> </span>we<span style='letter-spacing:1.65pt'> </span>namespace<span
style='letter-spacing:1.65pt'> </span>our<span style='letter-spacing:1.65pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>authId<span
style='letter-spacing:-1.85pt'> </span></span><span style='color:#333333'>property<span
style='letter-spacing:1.7pt'> </span>by prefixing </span><i><span
style='font-family:"Courier New";color:#333333'>facebook:</span></i><span
style='color:#333333'>. Slight as the chance may be, this prevents the
possibility of a Facebook ID colliding with a Twitter or Google ID (it also
allows us to examine user models to see what authentication method a user<span
style='letter-spacing:2.0pt'> </span>is using, which could be useful). If the
database already contains an entry<span style='letter-spacing:4.0pt'> </span>for
this namespaced ID, we simply return it (this is when </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>serializeUser </span><span
style='color:#333333'>gets called, which will put our own user ID into the
session). If no user record<span style='letter-spacing:1.2pt'> </span>is
returned,<span style='letter-spacing:1.2pt'> </span>we create a new user object
and<span style='letter-spacing:1.2pt'> </span>save it to<span style='letter-spacing:
1.2pt'> </span>the database.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The last thing we have to do is create our </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>registerRoutes<span
style='letter-spacing:-2.75pt'> </span></span><span style='color:#333333'>method
(dont worry, this one is much shorter):</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection381>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: registerRoutes: () =&gt; {&#13;&#10;app.get('/auth/facebook', (req, res, next) =&gt; {&#13;&#10;if(req.query.redirect) req.session.authRedirect = req.query.redirect passport.authenticate('facebook')(req, res, next)&#13;&#10;})&#13;&#10;app.get('/auth/facebook/callback', passport.authenticate('facebook',&#13;&#10;{ failureRedirect: options.failureRedirect }), (req, res) =&gt; {&#13;&#10;// we only get here on successful authentication&#13;&#10;const redirect = req.session.authRedirect&#13;&#10;if(redirect) delete req.session.authRedirect res.redirect(303, redirect || options.successRedirect)&#13;&#10;}&#13;&#10;)&#13;&#10;},&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:75.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Now we have the path <i>/auth/facebook</i>; visiting this
path will automatically redirect the visitor to Facebooks authentication
screen (this is done by </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>passport.authenticate('facebook)</span><span style='color:#333333'>),
step 2 in </span><a href="#_bookmark813"><span style='color:#070707'>Figure
18-1</span></a><span style='color:#333333'>. Note that we<span
style='letter-spacing:1.4pt'> </span>check<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>see<span style='letter-spacing:1.4pt'> </span>if<span
style='letter-spacing:1.4pt'> </span>theres<span style='letter-spacing:1.4pt'>
</span>a<span style='letter-spacing:1.4pt'> </span>querystring<span
style='letter-spacing:1.45pt'> </span>parameter<span style='letter-spacing:
1.4pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>redirect</span><span style='color:#333333'>;<span
style='letter-spacing:1.4pt'> </span>if<span style='letter-spacing:1.4pt'> </span>there<span
style='letter-spacing:1.4pt'> </span>is, we save it in the session. This is so
we can automatically redirect to the intended destination after completing
authentication. Once the user authorizes with Twitter, the browser will be
redirected back to your site specifically, to the <i>/auth/facebook/callback </i>path
(with the optional<span style='letter-spacing:2.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>redirect<span
style='letter-spacing:-1.2pt'> </span></span><span style='color:#333333'>querystring
indicating where the user was originally).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Also on the querystring are authentication tokens that
Passport will verify.<span style='letter-spacing:4.0pt'> </span>If the
verification fails, Passport will redirect the browser to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>options.failureRedirect</span><span
style='color:#333333'>. If the verification is successful, Passport will call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>next</span><span
style='color:#333333'>, which is where your application comes back in. Note how
the middleware is chained in the handler for <i>/auth/facebook/callback</i>: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>passport.authenticate<span
style='letter-spacing:-1.7pt'> </span></span><span style='color:#333333'>is<span
style='letter-spacing:1.8pt'> </span>called<span style='letter-spacing:1.85pt'>
</span>first.<span style='letter-spacing:1.85pt'> </span>If<span
style='letter-spacing:1.8pt'> </span>it<span style='letter-spacing:1.8pt'> </span>calls<span
style='letter-spacing:1.8pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next</span><span style='color:#333333'>,<span style='letter-spacing:
1.85pt'> </span>control<span style='letter-spacing:1.8pt'> </span>passes over<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.6pt'> </span>your<span
style='letter-spacing:1.55pt'> </span>function,<span style='letter-spacing:
1.6pt'> </span>which<span style='letter-spacing:1.6pt'> </span>then<span
style='letter-spacing:1.6pt'> </span>redirects<span style='letter-spacing:1.55pt'>
</span>to<span style='letter-spacing:1.6pt'> </span>either<span
style='letter-spacing:1.55pt'> </span>the<span style='letter-spacing:1.55pt'> </span>original<span
style='letter-spacing:1.55pt'> </span>location or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>options.successRedirect</span><span
style='color:#333333'>, if the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>redirect<span style='letter-spacing:-.75pt'> </span></span><span
style='color:#333333'>querystring parameter</span></p>

</div>

<span style='font-size:11.0pt;line-height:128%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection382>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Role-Based_Authorization"></a><a
name="_bookmark817"></a><span style='color:#333333'>wasnt<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>specified.</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image056.gif"
  alt="Text Box: TIP&#13;&#10;Omitting the redirect querystring parameter can simplify your authentication routes, which may be tempting if you have only one URL that requires authentication. However, having this functionality available will eventually come in handy and provide a better user experience. No doubt youve experienced this yourself before: youve found the page you want, and youre instructed to log in. You do, and youre redirected to a default page, and you have to navigate back to the original page. Its not a very satisfying user experience.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:77.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>The<span style='letter-spacing:1.45pt'> </span>magic<span
style='letter-spacing:1.45pt'> </span>that<span style='letter-spacing:1.45pt'> </span>Passport<span
style='letter-spacing:1.45pt'> </span>is<span style='letter-spacing:1.45pt'> </span>doing<span
style='letter-spacing:1.5pt'> </span>during<span style='letter-spacing:1.5pt'> </span>this<span
style='letter-spacing:1.45pt'> </span>process<span style='letter-spacing:1.45pt'>
</span>is<span style='letter-spacing:1.45pt'> </span>saving<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.45pt'> </span>user
(in our case, just a database user ID) to the session. This is a good thing,
because the browser is <i>redirecting</i>, which is a different HTTP request:
without having that information in the session, we wouldnt have any way<span
style='letter-spacing:2.0pt'> </span>to know that the user had been
authenticated! Once a user has been successfully authenticated, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>req.session.passport.user<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>will
be set, and thats how future requests will know that the user has been<span
style='letter-spacing:1.5pt'> </span>authenticated.</span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Lets look at our </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>/account<span style='letter-spacing:-2.85pt'> </span></span><span
style='color:#333333'>handler to see how it checks to make sure the user is
authenticated (this route handler will be in our main application<span
style='letter-spacing:2.0pt'> </span>file, or in a separate routing module, not
in <i>/lib/auth.js</i>):</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: app.get('/account', (req, res) =&gt; {&#13;&#10;if(!req.user)&#13;&#10;return res.redirect(303, '/unauthorized') res.render('account', { username: req.user.name })&#13;&#10;})&#13;&#10;// we also need an 'unauthorized' page&#13;&#10;app.get('/unauthorized', (req, res) =&gt; { res.status(403).render('unauthorized')&#13;&#10;})&#13;&#10;// and a way to logout&#13;&#10;app.get('/logout', (req, res) =&gt; {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection383>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: req.logout() res.redirect('/')&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now only authenticated users will see the account page;
everyone else will be redirected to a Not Authorized pag<a name="_bookmark819"></a>e<a
name="_bookmark818"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Role-Based<span
style='letter-spacing:-.35pt'> </span><span style='letter-spacing:-.1pt'>Authorization</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark820"></a><span style='color:#333333'>So far, were not
technically doing any authorization (were only differentiating between
authorized and unauthorized users). However, lets say we want only customers
to see their account views (employees might have an entirely different view
where they can see user account<span style='letter-spacing:2.0pt'> </span><span
style='letter-spacing:-.1pt'>information).</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:83.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
128%'><span style='color:#333333'>Remember that in a single route, you can have
multiple functions, which get<span style='letter-spacing:-.1pt'> </span>called
in order. Lets create a function called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>customerOnly<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>that will allow only customers:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const customerOnly = (req, res, next) =&gt; {&#13;&#10;if(req.user &amp;&amp; req.user.role === 'customer') return next()&#13;&#10;// we want customer-only pages to know they need to logon&#13;&#10;res.redirect(303, '/unauthorized')&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets also create am </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>employeeOnly<span style='letter-spacing:
-1.9pt'> </span></span><span style='color:#333333'>function that will operate a
little differently. Lets say we have a path <i>/sales </i>that we want to be
available<span style='letter-spacing:4.0pt'> </span>only to employees.
Furthermore, we dont want nonemployees to even be aware of its existence, even
if they stumble on it by accident. If a potential attacker went to the <i>/sales
</i>path, and saw a Not Authorized page, that is a little<span
style='letter-spacing:1.65pt'> </span>information<span style='letter-spacing:
1.75pt'> </span>that<span style='letter-spacing:1.65pt'> </span>might<span
style='letter-spacing:1.65pt'> </span>make<span style='letter-spacing:1.65pt'> </span>an<span
style='letter-spacing:1.75pt'> </span>attack<span style='letter-spacing:1.75pt'>
</span>easier<span style='letter-spacing:1.65pt'> </span>(simply<span
style='letter-spacing:1.75pt'> </span>by<span style='letter-spacing:1.75pt'> </span>knowing
that the page is there). So, for a little added security, we want<span
style='letter-spacing:4.0pt'> </span>nonemployees to<span style='letter-spacing:
1.5pt'> </span>see a regular 404<span style='letter-spacing:1.5pt'> </span>page
when<span style='letter-spacing:1.5pt'> </span>they<span style='letter-spacing:
1.5pt'> </span>visit the <i>/sales </i>page,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection384>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a
name="Adding_Authentication_Providers"></a><a name="_bookmark821"></a><span
style='color:#333333'>giving<span style='letter-spacing:.65pt'> </span>potential<span
style='letter-spacing:.6pt'> </span>attackers<span style='letter-spacing:.6pt'>
</span>nothing<span style='letter-spacing:.7pt'> </span>to<span
style='letter-spacing:.65pt'> </span>work<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>with:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const employeeOnly = (req, res, next) =&gt; {&#13;&#10;if(req.user &amp;&amp; req.user.role === 'employee') return next()&#13;&#10;// we want employee-only authorization failures to be &quot;hidden&quot;, to&#13;&#10;// prevent potential hackers from even knowing that such a page exists&#13;&#10;next('route')&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Calling </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>next('route)<span style='letter-spacing:-3.25pt'> </span></span><span
style='color:#333333'>will not simply execute the next handler in the route: it
will skip this route altogether. Assuming theres not a route further on down
the line that will handle </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>/account</span><span style='color:#333333'>, this will
eventually pass to the 404 handler, giving us the desired result.</span></p>

<p class=MsoBodyText><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Heres<span
style='letter-spacing:.4pt'> </span>how<span style='letter-spacing:.4pt'> </span>easy<span
style='letter-spacing:.45pt'> </span>it<span style='letter-spacing:.4pt'> </span>is<span
style='letter-spacing:.4pt'> </span>to<span style='letter-spacing:.45pt'> </span>put<span
style='letter-spacing:.4pt'> </span>these<span style='letter-spacing:.4pt'> </span>functions<span
style='letter-spacing:.4pt'> </span>to<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.2pt'>use:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: // customer routes&#13;&#10;&#13;&#10;app.get('/account', customerOnly, (req, res) =&gt; { res.render('account', { username: req.user.name })&#13;&#10;})&#13;&#10;app.get('/account/order-history', customerOnly, (req, res) =&gt; { res.render('account/order-history')&#13;&#10;})&#13;&#10;app.get('/account/email-prefs', customerOnly, (req, res) =&gt; { res.render('account/email-prefs')&#13;&#10;})&#13;&#10;&#13;&#10;// employer routes&#13;&#10;&#13;&#10;app.get('/sales', employeeOnly, (req, res) =&gt; { res.render('sales')&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It should be clear that role-based authorization can be
as simple or as complicated as you wish. For example, what if you want to allow
multiple roles? You could use the following function and route:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection385>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: const allow = roles =&gt; (req, res, next) =&gt; {&#13;&#10;if(req.user &amp;&amp; roles.split(',').includes(req.user.role)) return next() res.redirect(303, '/unauthorized')&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Hopefully that example gives you an idea of how creative
you can be with role-based authorization. You could even authorize on other
properties,<span style='letter-spacing:2.0pt'> </span>such<span
style='letter-spacing:1.25pt'> </span>as the length<span style='letter-spacing:
1.25pt'> </span>of time a user has been<span style='letter-spacing:1.25pt'> </span>a
member or how many<span style='letter-spacing:2.0pt'> </span>vacations that
user has booked with you<a name="_bookmark822"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Adding<span
style='letter-spacing:-.4pt'> </span>Authentication<span style='letter-spacing:
-.4pt'> </span><span style='letter-spacing:-.1pt'>Providers</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark823"></a><span style='color:#333333'>Now that our framework is
in place, adding more authentication providers<span style='letter-spacing:2.0pt'>
</span>is easy. Lets say we want to authenticate with Google. Before we start
adding code, youll have to set up a project on your Google account.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Go to your </span><a href="http://bit.ly/2KcY1X0"><span
style='color:#070707'>Google Developers Console</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and choose a project
from the navigation bar (if you dont already have a project, click New Project
and follow the instructions. Once youve selected a project, click Enable APIs
and Services and enable Cloud Identity API. Click Credentials, and then Create
Credentials, and choose OAuth client ID, and then Web application. Enter
the appropriate URLs for your app: for testing you can use <i>http://localhost:3000
</i>for the authorized origins, and <i>http://localhost:3000/auth/google/callback
</i>for authorized redirect URIs.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>Once you have got everything set up on the Google side,
run </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm
install passport-google-oauth20</span><span style='color:#333333'>, and add the
following code to <i><span style='letter-spacing:-.1pt'>lib/auth.js</span></i><a
name="_bookmark824"></a><span style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: // configure Google strategy&#13;&#10;passport.use(new GoogleStrategy({ clientID: config.google.clientID,&#13;&#10;clientSecret: config.google.clientSecret,&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection386>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: callbackURL: (options.baseUrl || '') + '/auth/google/callback',&#13;&#10;}, (token, tokenSecret, profile, done) =&gt; { const authId = 'google:' + profile.id db.getUserByAuthId(authId)&#13;&#10;.then(user =&gt; {&#13;&#10;if(user) return done(null, user) db.addUser({&#13;&#10;authId: authId,&#13;&#10;name: profile.displayName, created: new Date(),&#13;&#10;role: 'customer',&#13;&#10;})&#13;&#10;.then(user =&gt; done(null, user))&#13;&#10;.catch(err =&gt; done(err, null))&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;console.log('whoops, there was an error: ', err.message)&#13;&#10;if(err) return done(err, null);&#13;&#10;})&#13;&#10;}))&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>And<span
style='letter-spacing:.65pt'> </span>the<span style='letter-spacing:.6pt'> </span>following<span
style='letter-spacing:.65pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>registerRoutes<span style='letter-spacing:-2.9pt'> </span></span><span
style='color:#333333;letter-spacing:-.1pt'>method:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: app.get('/auth/google', (req, res, next) =&gt; {&#13;&#10;if(req.query.redirect) req.session.authRedirect = req.query.redirect passport.authenticate('google', { scope: ['profile'] })(req, res, next)&#13;&#10;})&#13;&#10;app.get('/auth/google/callback', passport.authenticate('google',&#13;&#10;{ failureRedirect: options.failureRedirect }), (req, res) =&gt; {&#13;&#10;// we only get here on successful authentication&#13;&#10;const redirect = req.session.authRedirect&#13;&#10;if(redirect) delete req.session.authRedirect&#13;&#10;res.redirect(303, req.query.redirect || options.successRedirect)&#13;&#10;}&#13;&#10;)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection387>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark825"></a><span style='color:#333333'>Congratulations on making
it through the most intricate chapter! Its unfortunate that such an important
feature (authentication and<span style='letter-spacing:4.0pt'> </span>authorization)
is so complicated, but in a world rife with security threats,<span
style='letter-spacing:4.0pt'> </span>its<span style='letter-spacing:2.0pt'> </span>an<span
style='letter-spacing:2.0pt'> </span>unavoidable<span style='letter-spacing:
2.0pt'> </span>complexity.<span style='letter-spacing:2.0pt'> </span>Fortunately,<span
style='letter-spacing:2.0pt'> </span>projects<span style='letter-spacing:2.0pt'>
</span>like<span style='letter-spacing:2.0pt'> </span>Passport<span
style='letter-spacing:2.0pt'> </span>(and the excellent authentication schemes
based on it) lessen our burden somewhat.<span style='letter-spacing:1.3pt'> </span>Still,<span
style='letter-spacing:1.35pt'> </span>I<span style='letter-spacing:1.3pt'> </span>encourage<span
style='letter-spacing:1.3pt'> </span>you<span style='letter-spacing:1.35pt'> </span>not<span
style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:1.35pt'> </span>give<span
style='letter-spacing:1.3pt'> </span>short<span style='letter-spacing:1.3pt'> </span>shrift<span
style='letter-spacing:1.3pt'> </span>to<span style='letter-spacing:1.35pt'> </span>this<span
style='letter-spacing:1.3pt'> </span>area<span style='letter-spacing:1.3pt'> </span>of
your application: exercising diligence in the area of security will make you<span
style='letter-spacing:4.0pt'> </span>a good<span style='letter-spacing:1.15pt'>
</span>internet citizen.<span style='letter-spacing:1.15pt'> </span>Your users
may<span style='letter-spacing:1.15pt'> </span>never thank<span
style='letter-spacing:1.15pt'> </span>you<span style='letter-spacing:1.15pt'> </span>for
it,<span style='letter-spacing:1.15pt'> </span>but woe be to the owners of an
application who allow user data to be compromised because of poor security.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoNormal style='margin-top:8.15pt;margin-right:81.4pt;margin-bottom:
0cm;margin-left:82.0pt;margin-bottom:.0001pt;text-align:justify;text-indent:
-14.65pt;line-height:106%'><a href="#_bookmark812"><span style='font-size:10.5pt;
line-height:106%;font-family:"Arial",sans-serif;color:#070707'>1</span></a><span
style='font-size:10.5pt;line-height:106%;font-family:"Arial",sans-serif;
color:#070707;letter-spacing:5.1pt'> </span><a name="_bookmark826"></a><span
style='font-size:10.5pt;line-height:106%;color:#333333'>It is unlikely that the
third <a name="_bookmark827"></a>party is storing passwords either. A password
can be verified by storing something called a <i>salted hash</i>, which is a
one-way transformation of the password. That is, once you generate a hash from
a password, you cant recover the password. <i>Salting </i>the hash provides
additional protection against certain kinds of attacks.</span></p>

</div>

<span style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection388>

<h1 style='margin-right:123.8pt;line-height:105%'><a name="Searching_for_Tweets"></a><a
name="_bookmark831"></a><a name="19._Integrating_with_Third-Party_APIs"></a><a
name="Social_Media"></a><a name="_bookmark828"></a>Chapter 19. Integrating with
Third-Party APIs</h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark829"></a><span style='color:#333333'>Increasingly, successful
websites are not completely standalone. To engage existing users and find new
users, integration with social networking is a must. To provide store locators
or other location-aware services, using geolocation and mapping services is
essential. It doesnt stop there: more and more organizations are realizing
that providing an API helps expand their service and makes it more useful.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter, well be discussing the two most common
integration needs: social media and geolocation.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Social<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Media</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark830"></a><span style='color:#333333'>Social media is a great way
to promote your product or service: if thats your goal, the ability for your
users to easily share your content on social media sites is essential. As I
write this, the dominant social networking services are Facebook, Twitter,
Instagram, and YouTube. Sites like Pinterest and Flickr have their place, but
they are usually a little more audience specific (for example, if your website
is about DIY crafting, you would absolutely want to support Pinterest). Laugh if
you will, but I<span style='letter-spacing:4.0pt'> </span>predict that MySpace
will make a comeback. Its site redesign is inspired, and its worth noting that
MySpace is built on Node.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Social<span style='letter-spacing:-.35pt'> </span>Media<span
style='letter-spacing:-.25pt'> </span>Plugins<span style='letter-spacing:-.25pt'>
</span>and<span style='letter-spacing:-.2pt'> </span>Site<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Performance</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection389>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Social_Media_Plugins_and_Site_Performanc"></a><a name="_bookmark832"></a><a
name="_bookmark833"></a><span style='color:#333333'>Most social media
integration is a frontend affair. You reference the appropriate JavaScript
files in your page, and it enables both incoming content (the top three stories
from your Facebook page, for example) and outgoing content (the ability to
tweet about the page youre on, for example). While this often represents the
easiest path to social media integration, it comes at a cost: Ive seen page
load times double or even triple thanks to the additional HTTP requests. If
page performance is important to you (and it should be, especially for mobile
users), you<span style='letter-spacing:2.0pt'> </span>should carefully consider
how you integrate social media.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>That said, the code that enables a Facebook Like button
or a Tweet button leverages in-browser cookies to post on the users behalf.
Moving this functionality to the backend would be difficult (and, in some
instances, impossible). So if that is functionality you need, linking in the
appropriate third-party library is your best option, even though it can affect
your page <span style='letter-spacing:-.1pt'>performance.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Searching<span style='letter-spacing:-.3pt'> </span>for<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Tweets</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark834"></a><span style='color:#333333'>Lets<span
style='letter-spacing:1.25pt'> </span>say<span style='letter-spacing:1.3pt'> </span>that<span
style='letter-spacing:1.25pt'> </span>we<span style='letter-spacing:1.25pt'> </span>want<span
style='letter-spacing:1.25pt'> </span>to<span style='letter-spacing:1.3pt'> </span>mention<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.25pt'> </span>top<span
style='letter-spacing:1.3pt'> </span>10<span style='letter-spacing:1.3pt'> </span>most<span
style='letter-spacing:1.25pt'> </span>recent<span style='letter-spacing:1.25pt'>
</span>tweets<span style='letter-spacing:1.25pt'> </span>that contain the
hashtags #Oregon #travel. We could use a frontend component<span
style='letter-spacing:2.0pt'> </span>to do this, but it will involve additional
HTTP requests. Furthermore, if we do it on the backend, we have the option of
caching the tweets for performance. Also, if we do the searching on the
backend, we can blacklist uncharitable tweets, which would be more difficult
on the <span style='letter-spacing:-.1pt'>frontend.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Twitter, like Facebook, allows you to create <i>apps</i>.
Its something of a misnomer: a Twitter app doesnt <i>do </i>anything (in the
traditional sense). Its more like a set of credentials that you<span
style='letter-spacing:1.2pt'> </span>can<span style='letter-spacing:1.2pt'> </span>use
to<span style='letter-spacing:1.2pt'> </span>create the actual app<span
style='letter-spacing:1.2pt'> </span>on</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection390>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>your site. The easiest and most portable way to access
the Twitter API is to create an app and use it to get access tokens.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark835"></a><span style='color:#333333'>Create a Twitter app by
going to </span><a href="http://dev.twitter.com/"><i><span style='color:#070707'>http://dev.twitter.com</span></i></a><span
style='color:#333333'>. Make sure youre logged on, and click your username in
the navigation bar, and then Apps. Click Create an app, and follow the
instructions. Once you have an application, youll see that you now have a <i>consumer
API key </i>and an <i>API secret<span style='letter-spacing:1.35pt'> </span>key</i>.<span
style='letter-spacing:1.45pt'> </span>The<span style='letter-spacing:1.35pt'> </span>API<span
style='letter-spacing:1.35pt'> </span>secret<span style='letter-spacing:1.35pt'>
</span>key,<span style='letter-spacing:1.45pt'> </span>as<span
style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:1.35pt'> </span>name<span
style='letter-spacing:1.35pt'> </span>indicates,<span style='letter-spacing:
1.45pt'> </span>should<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.35pt'> </span>kept secret: do not ever include this in
responses sent to the client. If a third<span style='letter-spacing:4.0pt'> </span>party
were to get access to this secret, they could make requests on behalf<span
style='letter-spacing:4.0pt'> </span>of your application, which could have
unfortunate consequences for you if the use is malicious.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now that we have a consumer API key and secret key, we
can communicate with the Twitter REST API.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>To<span
style='letter-spacing:.45pt'> </span>keep<span style='letter-spacing:.5pt'> </span>our<span
style='letter-spacing:.45pt'> </span>code<span style='letter-spacing:.45pt'> </span>tidy,<span
style='letter-spacing:.5pt'> </span>well<span style='letter-spacing:.45pt'> </span>put<span
style='letter-spacing:.4pt'> </span>our<span style='letter-spacing:.45pt'> </span>Twitter<span
style='letter-spacing:.45pt'> </span>code<span style='letter-spacing:.45pt'> </span>in<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.4pt'> </span>module<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>called</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>lib/twitter.js</span></i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const https = require('https') module.exports = twitterOptions =&gt; { return {&#13;&#10;search: async (query, count) =&gt; {&#13;&#10;// TODO&#13;&#10;}&#13;&#10;}&#13;&#10;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This pattern should be starting to become familiar to
you. Our module exports a function into which the caller passes a configuration
object.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection391>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Whats returned is an object containing methods. In this
way, we can add functionality to our module. Currently, were only providing a </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>search </span><span
style='color:#333333'>method. Heres how we will be using the library:</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const twitter = require('./lib/twitter')({ consumerApiKey: credentials.twitter.consumerApiKey, apiSecretKey: credentials.twitter.apiSecretKey,&#13;&#10;})&#13;&#10;&#13;&#10;const tweets = await twitter.search('#Oregon #travel', 10)&#13;&#10;// tweets will be in result.statuses&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>(Dont<span
style='letter-spacing:.55pt'> </span>forget<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.65pt'> </span>put<span style='letter-spacing:.6pt'> </span>a<span
style='letter-spacing:.55pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>twitter<span style='letter-spacing:-2.9pt'> </span></span><span
style='color:#333333'>property<span style='letter-spacing:.65pt'> </span>with<span
style='letter-spacing:.65pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>consumerApiKey<span style='letter-spacing:-2.9pt'> </span></span><span
style='color:#333333;letter-spacing:-.25pt'>and</span></p>

<p class=MsoNormal style='margin-top:4.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"BIZ UDGothic",sans-serif;color:#333333'>apiSecretKey<span
style='letter-spacing:-2.4pt'> </span></span><span style='font-size:14.0pt;
color:#333333'>in<span style='letter-spacing:1.15pt'> </span>your<span
style='letter-spacing:1.15pt'> </span><i>.credentials.development.json<span
style='letter-spacing:1.15pt'> </span></i><span style='letter-spacing:-.1pt'>file.)</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:19.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Before we implement the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>search<span style='letter-spacing:
-1.7pt'> </span></span><span style='color:#333333'>method, we must provide some
functionality<span style='letter-spacing:1.95pt'> </span>to<span
style='letter-spacing:1.95pt'> </span>authenticate<span style='letter-spacing:
1.85pt'> </span>ourselves<span style='letter-spacing:1.85pt'> </span>to<span
style='letter-spacing:1.95pt'> </span>Twitter.<span style='letter-spacing:1.95pt'>
</span>The<span style='letter-spacing:1.85pt'> </span>process<span
style='letter-spacing:1.85pt'> </span>is<span style='letter-spacing:1.85pt'> </span>simple:
we use HTTPS to request an access token based on our consumer key and consumer
secret. We only have to do this once: currently, Twitter does not expire access
tokens (though you can invalidate them manually). Since we dont want to
request an access token every time, well cache the access token so we can
reuse it.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>The way weve constructed our module allows us to create
private functionality thats not available to the caller. Specifically, the
only thing thats available to the caller is </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>module.exports</span><span
style='color:#333333'>. Since were returning a function, only that function is
available to the caller. Calling that function results in an object, and only
the properties of that object are available to the caller. So were going to
create a variable </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>accessToken</span><span style='color:#333333'>, which well use
to cache our access token, and a </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>getAccessToken<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>function that will<span style='letter-spacing:2.0pt'> </span>get
the access token. The first time its called, it will make a Twitter API
request to get the access token. Subsequent calls will simply return the</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection392>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>value<span
style='letter-spacing:.4pt'> </span>of<span style='letter-spacing:.4pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>accessToken</span><span
style='color:#333333;letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: const https = require('https') module.exports = function(twitterOptions) {&#13;&#10;// this variable will be invisible outside of this module&#13;&#10;let accessToken = null&#13;&#10;&#13;&#10;// this function will be invisible outside of this module&#13;&#10;const getAccessToken = async () =&gt; {&#13;&#10;if(accessToken) return accessToken&#13;&#10;// TODO: get access token&#13;&#10;}&#13;&#10;&#13;&#10;return {&#13;&#10;search: async (query, count) =&gt; {&#13;&#10;// TODO&#13;&#10;}&#13;&#10;}&#13;&#10;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>We mark </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>getAccessToken<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>as async because we may have to make an HTTP request to
the Twitter API (if there isnt a cached token). Now that weve established the
basic structure, lets implement </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>getAccessToken</span><span style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const getAccessToken = async () =&gt; {&#13;&#10;if(accessToken) return accessToken&#13;&#10;&#13;&#10;const bearerToken = Buffer( encodeURIComponent(twitterOptions.consumerApiKey) + ':' + encodeURIComponent(twitterOptions.apiSecretKey)&#13;&#10;).toString('base64')&#13;&#10;&#13;&#10;const options = {&#13;&#10;hostname: 'api.twitter.com', port: 443,&#13;&#10;method: 'POST',&#13;&#10;path: '/oauth2/token?grant_type=client_credentials', headers: {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection393>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Rendering_Tweets"></a><a
name="_bookmark836"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: 'Authorization': 'Basic ' + bearerToken,&#13;&#10;},&#13;&#10;}&#13;&#10;&#13;&#10;return new Promise((resolve, reject) =&gt; https.request(options, res =&gt; {&#13;&#10;let data = ''&#13;&#10;res.on('data', chunk =&gt; data += chunk) res.on('end', () =&gt; {&#13;&#10;const auth = JSON.parse(data)&#13;&#10;if(auth.token_type !== 'bearer')&#13;&#10;return reject(new Error('Twitter auth failed.')) accessToken = auth.access_token&#13;&#10;return resolve(accessToken)&#13;&#10;})&#13;&#10;}).end()&#13;&#10;)&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
href="http://bit.ly/2KcJ4EA"><span style='color:#333333;text-decoration:none'>The
details of constructing this call are available on </span><span
style='color:#070707'>Twitters developer</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>documentation<span
style='letter-spacing:2.0pt'> </span>page<span style='letter-spacing:2.0pt'> </span>for<span
style='letter-spacing:2.0pt'> </span>application-only<span style='letter-spacing:
2.0pt'> </span>authentication</span><span style='color:#333333;text-decoration:
none'>.<span style='letter-spacing:2.0pt'> </span>Basically,<span
style='letter-spacing:2.0pt'> </span>we</span></a><span style='color:#333333'>
have<span style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:
1.8pt'> </span>construct<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>bearer<span style='letter-spacing:1.7pt'> </span>token<span
style='letter-spacing:1.8pt'> </span>thats<span style='letter-spacing:1.7pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>base64-encoded<span style='letter-spacing:
1.8pt'> </span>combination<span style='letter-spacing:1.8pt'> </span>of the<span
style='letter-spacing:1.85pt'> </span>consumer<span style='letter-spacing:1.85pt'>
</span>key<span style='letter-spacing:1.9pt'> </span>and<span style='letter-spacing:
1.9pt'> </span>consumer<span style='letter-spacing:1.85pt'> </span>secret.<span
style='letter-spacing:1.9pt'> </span>Once<span style='letter-spacing:1.85pt'> </span>weve<span
style='letter-spacing:1.85pt'> </span>constructed<span style='letter-spacing:
1.9pt'> </span>that token,<span style='letter-spacing:1.9pt'> </span>we<span
style='letter-spacing:1.8pt'> </span>can<span style='letter-spacing:1.9pt'> </span>call<span
style='letter-spacing:1.8pt'> </span>the<span style='letter-spacing:1.8pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/oauth2/token<span
style='letter-spacing:-1.7pt'> </span></span><span style='color:#333333'>API<span
style='letter-spacing:1.8pt'> </span>with<span style='letter-spacing:1.9pt'> </span>the<span
style='letter-spacing:1.8pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Authorization </span><span style='color:#333333'>header<span
style='letter-spacing:1.55pt'> </span>containing<span style='letter-spacing:
1.6pt'> </span>the<span style='letter-spacing:1.55pt'> </span>bearer<span
style='letter-spacing:1.55pt'> </span>token<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>request<span style='letter-spacing:1.55pt'>
</span>an<span style='letter-spacing:1.6pt'> </span>access<span
style='letter-spacing:1.55pt'> </span>token.<span style='letter-spacing:1.6pt'>
</span>Note<span style='letter-spacing:1.55pt'> </span>that we must use HTTPS:
if you attempt to make this call over HTTP, you are transmitting your secret
key unencrypted, and the API will simply hang up on you.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Once we receive the full response from the API (we listen
for the </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>end
</span><span style='color:#333333'>event of the response stream), we can parse
the JSON, make sure the token type is </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>bearer</span><span style='color:#333333'>, and be on our merry
way. We cache the access token, and then invoke the callback.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Now<span
style='letter-spacing:.45pt'> </span>that<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.5pt'> </span>have<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.5pt'> </span>mechanism<span style='letter-spacing:.5pt'>
</span>for<span style='letter-spacing:.5pt'> </span>obtaining<span
style='letter-spacing:.55pt'> </span>an<span style='letter-spacing:.55pt'> </span>access<span
style='letter-spacing:.5pt'> </span>token,<span style='letter-spacing:.55pt'> </span>we<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>can</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection394>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>make<span
style='letter-spacing:.45pt'> </span>API<span style='letter-spacing:.5pt'> </span>calls.<span
style='letter-spacing:.55pt'> </span>So<span style='letter-spacing:.55pt'> </span>lets<span
style='letter-spacing:.5pt'> </span>implement<span style='letter-spacing:.5pt'>
</span>our<span style='letter-spacing:.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>search<span
style='letter-spacing:-3.0pt'> </span></span><span style='color:#333333;
letter-spacing:-.1pt'>method<a name="_bookmark837"></a>:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.35pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: search: async (query, count) =&gt; {&#13;&#10;const accessToken = await getAccessToken()&#13;&#10;const options = {&#13;&#10;hostname: 'api.twitter.com', port: 443,&#13;&#10;method: 'GET',&#13;&#10;path: '/1.1/search/tweets.json?q=' + encodeURIComponent(query) + '&amp;count=' + (count || 10),&#13;&#10;headers: {&#13;&#10;'Authorization': 'Bearer ' + accessToken,&#13;&#10;},&#13;&#10;}&#13;&#10;return new Promise((resolve, reject) =&gt; https.request(options, res =&gt; {&#13;&#10;let data = ''&#13;&#10;res.on('data', chunk =&gt; data += chunk) res.on('end', () =&gt; resolve(JSON.parse(data)))&#13;&#10;}).end()&#13;&#10;)&#13;&#10;},&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Rendering<span
style='letter-spacing:-.35pt'> </span><span style='letter-spacing:-.1pt'>Tweets</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark838"></a><span style='color:#333333'>Now we have the ability to
search tweetsso how do we display them on our site? Largely, its up to you,
but there are some things to consider.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Twitter has an interest in making sure its data is used
in a manner consistent with the brand. To that end, it does have </span><a
href="http://bit.ly/32ET4N2"><span style='color:#070707'>display requirements</span></a><span
style='color:#333333'>, which employ functional elements you must include to
display a tweet.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>There is some wiggle room in the requirements (for
example, if youre displaying on a device that doesnt support images, you
dont have to include the avatar image), but for the most part, youll end up
with something that looks very much like an embedded tweet. Its a lot of</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection395>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>work, and there is a way around itbut it involves
linking to Twitters widget library, which is the very HTTP request were
trying to avoid.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark839"></a><span style='color:#333333'>If you need to display
tweets, your best bet is to use the Twitter widget library,<span
style='letter-spacing:1.65pt'> </span>even<span style='letter-spacing:1.65pt'> </span>though<span
style='letter-spacing:1.65pt'> </span>it<span style='letter-spacing:1.6pt'> </span>incurs<span
style='letter-spacing:1.6pt'> </span>an<span style='letter-spacing:1.65pt'> </span>extra<span
style='letter-spacing:1.6pt'> </span>HTTP<span style='letter-spacing:1.6pt'> </span>request.<span
style='letter-spacing:1.65pt'> </span>For<span style='letter-spacing:1.6pt'> </span>more
complicated use of the API, youll still have to access the REST API from the
backend, so you will probably end up using the REST API in concert with
frontend scripts.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lets continue with our example: we want to display the
top 10 tweets that mention the hashtags #Oregon #travel. Well use the REST API
to search for the tweets and the Twitter widget library to display them. Since
we<span style='letter-spacing:4.0pt'> </span>dont want to run up against usage
limits (or slow down our server), well cache the tweets and the HTML to
display them for 15 minutes.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>Well start by modifying our Twitter library to include a
method </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>embed</span><span
style='color:#333333'>, which gets the HTML to display a tweet. Note were
using an npm library </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>querystringify<span style='letter-spacing:-2.55pt'> </span></span><span
style='color:#333333'>to construct a querystring from an object, so dont
forget to </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>npm
install querystringify<span style='letter-spacing:-2.55pt'> </span></span><span
style='color:#333333'>and import it (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>const qs = require( querystringify )</span><span
style='color:#333333'>), and then add the following function to the export of <i>lib/twitter.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: embed: async (url, options = {}) =&gt; { options.url = url&#13;&#10;const accessToken = await getAccessToken()&#13;&#10;const requestOptions = { hostname: 'api.twitter.com', port: 443,&#13;&#10;method: 'GET',&#13;&#10;path: '/1.1/statuses/oembed.json?' + qs.stringify(options), headers: {&#13;&#10;'Authorization': 'Bearer ' + accessToken,&#13;&#10;},&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection396>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: }&#13;&#10;return new Promise((resolve, reject) =&gt; https.request(requestOptions, res =&gt; {&#13;&#10;let data = ''&#13;&#10;res.on('data', chunk =&gt; data += chunk) res.on('end', () =&gt; resolve(JSON.parse(data)))&#13;&#10;}).end()&#13;&#10;)&#13;&#10;},&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Now were ready to search for, and cache, tweets. In our
main application file, create the following function </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>getTopTweets</span><span
style='color:#333333'>:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const twitterClient = createTwitterClient(credentials.twitter)&#13;&#10;&#13;&#10;const getTopTweets = ((twitterClient, search) =&gt; {&#13;&#10;const topTweets = { count: 10,&#13;&#10;lastRefreshed: 0,&#13;&#10;refreshInterval: 15 * 60 * 1000, tweets: [],&#13;&#10;}&#13;&#10;return async () =&gt; {&#13;&#10;if(Date.now() &gt; topTweets.lastRefreshed + topTweets.refreshInterval) {&#13;&#10;const tweets =&#13;&#10;await twitterClient.search('#Oregon #travel', topTweets.count)&#13;&#10;const formattedTweets = await Promise.all( tweets.statuses.map(async ({ id_str, user }) =&gt; {&#13;&#10;const url = `https://twitter.com/${user.id_str}/statuses/${id_str}`&#13;&#10;const embeddedTweet =&#13;&#10;await twitterClient.embed(url, { omit_script: 1 })&#13;&#10;return embeddedTweet.html&#13;&#10;})&#13;&#10;)&#13;&#10;topTweets.lastRefreshed = Date.now() topTweets.tweets = formattedTweets&#13;&#10;}&#13;&#10;return topTweets.tweets&#13;&#10;}&#13;&#10;})(twitterClient, '#Oregon #travel')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:13.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection397>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name=Geocoding></a><a name="Geocoding_with_Google"></a><a name="_bookmark841"></a><span
style='color:#333333'>The essence of the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>getTopTweets<span style='letter-spacing:-2.75pt'> </span></span><span
style='color:#333333'>function is to not just search for tweets with a
specified hashtag, but to cache those tweets for some reasonable period of
time. Note that we created an immediately invoked function expression, or IIFE:
thats because we want the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>topTweets<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>cache safely inside a closure so it cant be messed with.
The asynchronous function thats returned from the IIFE refreshes the cache if
necessary, and then returns the contents of the cache.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Lastly, lets create a view, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>views/social.handlebars<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>as a
home for our social media presence (which right now, includes only our selected<span
style='letter-spacing:4.0pt'> </span><span style='letter-spacing:-.1pt'>tweets):</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: &lt;h2&gt;Oregon Travel in Social Media&lt;/h2&gt;&#13;&#10;&#13;&#10;&lt;script id=&quot;twitter-wjs&quot; type=&quot;text/javascript&quot;&#13;&#10;async defer src=&quot;//platform.twitter.com/widgets.js&quot;&gt;&lt;/script&gt;&#13;&#10;&#13;&#10;{{{tweets}}}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>And<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>route<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.45pt'> </span>handle<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.25pt'>it:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: app.get('/social', async (req, res) =&gt; { res.render('social', { tweets: await getTopTweets() })&#13;&#10;})&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Note<span style='letter-spacing:1.65pt'> </span>that<span
style='letter-spacing:1.65pt'> </span>we<span style='letter-spacing:1.65pt'> </span>reference<span
style='letter-spacing:1.65pt'> </span>an<span style='letter-spacing:1.7pt'> </span>external<span
style='letter-spacing:1.65pt'> </span>script,<span style='letter-spacing:1.7pt'>
</span>Twitters<span style='letter-spacing:1.65pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>widgets.js</span><span
style='color:#333333'>.<span style='letter-spacing:1.7pt'> </span>This<span
style='letter-spacing:1.65pt'> </span>is the<span style='letter-spacing:1.55pt'>
</span>script<span style='letter-spacing:1.55pt'> </span>that<span
style='letter-spacing:1.55pt'> </span>will<span style='letter-spacing:1.55pt'> </span>format<span
style='letter-spacing:1.55pt'> </span>and<span style='letter-spacing:1.6pt'> </span>give<span
style='letter-spacing:1.55pt'> </span>functionality<span style='letter-spacing:
1.6pt'> </span>to<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>embedded<span style='letter-spacing:1.6pt'>
</span>tweets on your page. By default, the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>oembed<span style='letter-spacing:
-2.2pt'> </span></span><span style='color:#333333'>API will include a reference
to this script in the HTML, but since were displaying 10 tweets, that would
reference that script nine more times than necessary! So recall that, when<span
style='letter-spacing:2.0pt'> </span>we called the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>oembed<span
style='letter-spacing:-2.95pt'> </span></span><span style='color:#333333'>API,
we passed in the option </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>{ omit_script: 1 }</span><span style='color:#333333'>. Since we
did that, we have to provide it somewhere, which we did in the view. Go ahead
and try removing the script from the view. Youll still see the tweets, but
they wont have any formatting or functionality<a name="_bookmark840"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection398>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now we have a nice social media feed! Lets turn our
attention to another important application: displaying maps in our applicatio<a
name="_bookmark843"></a>n<a name="_bookmark842"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011;letter-spacing:-.1pt'>Geocoding</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark844"></a><i><span style='color:#333333'>Geocoding </span></i><span
style='color:#333333'>refers to the process of taking a street address or place
name (Bletchley Park, Sherwood Drive, Bletchley, Milton Keynes MK3 6EB, UK) and
converting it to geographic coordinates (latitude 51.9976597, longitude
0.7406863). If your application is going to be doing any kind<span
style='letter-spacing:4.0pt'> </span>of geographic calculationdistances or
directionsor displaying a map, then youll need geographic coordinates.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: NOTE&#13;&#10;You may be used to seeing geographic coordinates specified in degrees, minutes, and seconds (DMS). Geocoding APIs and mapping services use a single floating-point number for latitude and longitude. If you need to display DMS coordinates, see this wikipedia article.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h3 style='margin-top:4.5pt'><span style='color:#3F3F3F'>Geocoding<span
style='letter-spacing:-.3pt'> </span>with<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Google</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark845"></a><span style='color:#333333'>Both Google and Bing offer
excellent REST services for geocoding. Well be using Google for our example,
but the Bing service is very similar.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Without attaching a billing account to your Google
account, your<span style='letter-spacing:4.0pt'> </span>geocoding<span
style='letter-spacing:1.35pt'> </span>requests<span style='letter-spacing:1.3pt'>
</span>will<span style='letter-spacing:1.3pt'> </span>be<span style='letter-spacing:
1.3pt'> </span>limited<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>one<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.3pt'> </span>day,<span style='letter-spacing:1.35pt'> </span>which<span
style='letter-spacing:1.35pt'> </span>will<span style='letter-spacing:1.3pt'> </span>make<span
style='letter-spacing:1.3pt'> </span>for<span style='letter-spacing:1.3pt'> </span>a
very slow testing cycle indeed! Whenever possible in this book, Ive tried<span
style='letter-spacing:4.0pt'> </span>to<span style='letter-spacing:1.65pt'> </span>avoid<span
style='letter-spacing:1.65pt'> </span>recommending<span style='letter-spacing:
1.65pt'> </span>services<span style='letter-spacing:1.55pt'> </span>you<span
style='letter-spacing:1.65pt'> </span>couldnt<span style='letter-spacing:1.55pt'>
</span>at<span style='letter-spacing:1.55pt'> </span>least<span
style='letter-spacing:1.55pt'> </span>use<span style='letter-spacing:1.55pt'> </span>in<span
style='letter-spacing:1.65pt'> </span>a development capacity for free, and I
did try some free geocoding services, and found a significant enough gulf in
usability that I continue to recommend Google geocoding. However, as I write
this, the cost of</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection399>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>development-volume geocoding with Google is free: you
receive a $200 monthly credit with your account, and you would have to make
40,000 requests to exhaust that! If you want to follow along with this chapter,
go to </span><a href="http://bit.ly/2KcY1X0"><span style='color:#070707'>your
Google console</span></a><span style='color:#333333'>, choose Billing from the
main menu, and enter your billing information.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once<span style='letter-spacing:1.5pt'> </span>youve<span
style='letter-spacing:1.5pt'> </span>set<span style='letter-spacing:1.5pt'> </span>up<span
style='letter-spacing:1.55pt'> </span>billing,<span style='letter-spacing:1.55pt'>
</span>youll<span style='letter-spacing:1.5pt'> </span>need<span
style='letter-spacing:1.55pt'> </span>an<span style='letter-spacing:1.55pt'> </span>API<span
style='letter-spacing:1.5pt'> </span>key<span style='letter-spacing:1.55pt'> </span>for<span
style='letter-spacing:1.5pt'> </span>Googles geocoding API. Go to </span><a
href="http://bit.ly/2KcY1X0"><span style='color:#070707'>the console</span></a><span
style='color:#333333'>, select your project from the navigation bar, and then
click on APIs. If the geocoding API isnt in your list of<span
style='letter-spacing:2.0pt'> </span>enabled APIs, locate it in the list of
additional APIs and add it. Most of the Google APIs share the same API
credentials, so click on the navigation menu in the upper left, and go back to
your dashboard. Click on<span style='letter-spacing:4.0pt'> </span>Credentials,<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.5pt'> </span>create<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>new<span
style='letter-spacing:1.4pt'> </span>API<span style='letter-spacing:1.4pt'> </span>key<span
style='letter-spacing:1.5pt'> </span>if<span style='letter-spacing:1.4pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>dont<span style='letter-spacing:1.4pt'> </span>have<span
style='letter-spacing:1.4pt'> </span>an<span style='letter-spacing:1.5pt'> </span>appropriate
one<span style='letter-spacing:1.4pt'> </span>already.<span style='letter-spacing:
1.45pt'> </span>Note<span style='letter-spacing:1.4pt'> </span>that<span
style='letter-spacing:1.4pt'> </span>API<span style='letter-spacing:1.4pt'> </span>keys<span
style='letter-spacing:1.4pt'> </span>can<span style='letter-spacing:1.45pt'> </span>be<span
style='letter-spacing:1.4pt'> </span>restricted<span style='letter-spacing:
1.45pt'> </span>to<span style='letter-spacing:1.45pt'> </span>prevent<span
style='letter-spacing:1.4pt'> </span>abuse,<span style='letter-spacing:1.45pt'>
</span>so make<span style='letter-spacing:1.35pt'> </span>sure<span
style='letter-spacing:1.35pt'> </span>your<span style='letter-spacing:1.35pt'> </span>API<span
style='letter-spacing:1.35pt'> </span>key<span style='letter-spacing:1.4pt'> </span>can<span
style='letter-spacing:1.4pt'> </span>be<span style='letter-spacing:1.35pt'> </span>used<span
style='letter-spacing:1.4pt'> </span>from<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.35pt'> </span>application.<span style='letter-spacing:
1.4pt'> </span>If<span style='letter-spacing:1.35pt'> </span>you<span
style='letter-spacing:1.4pt'> </span>need one<span style='letter-spacing:1.4pt'>
</span>for<span style='letter-spacing:1.4pt'> </span>developing,<span
style='letter-spacing:1.5pt'> </span>you<span style='letter-spacing:1.5pt'> </span>can<span
style='letter-spacing:1.5pt'> </span>restrict<span style='letter-spacing:1.4pt'>
</span>the<span style='letter-spacing:1.4pt'> </span>key<span style='letter-spacing:
1.5pt'> </span>by<span style='letter-spacing:1.5pt'> </span>IP<span
style='letter-spacing:1.4pt'> </span>address,<span style='letter-spacing:1.5pt'>
</span>and<span style='letter-spacing:1.5pt'> </span>choose your IP address (if
you dont know what it is, you can just ask Google, Whats my IP address?).</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><span style='font-size:14.0pt;
color:#333333'>Once<span style='letter-spacing:.35pt'> </span>you<span
style='letter-spacing:.45pt'> </span>have<span style='letter-spacing:.35pt'> </span>an<span
style='letter-spacing:.45pt'> </span>API<span style='letter-spacing:.4pt'> </span>key,<span
style='letter-spacing:.45pt'> </span>add<span style='letter-spacing:.4pt'> </span>it<span
style='letter-spacing:.4pt'> </span>to<span style='letter-spacing:.45pt'> </span><i><span
style='letter-spacing:-.1pt'>.credentials.development.json</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: &quot;google&quot;: {&#13;&#10;&quot;apiKey&quot;: &quot;&lt;YOUR API KEY&gt;&quot;&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.5pt'> </span>create<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.5pt'> </span>module<span
style='letter-spacing:.5pt'> </span><i><span style='letter-spacing:-.1pt'>lib/geocode.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const https = require('https')&#13;&#10;const { credentials } = require('../config') module.exports = async query =&gt; {&#13;&#10;const options = {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection400>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Geocoding_Your_Data"></a><a
name="_bookmark847"></a><span style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image025.gif"
alt="Text Box: hostname: 'maps.googleapis.com',&#13;&#10;path: '/maps/api/geocode/json?address=' + encodeURIComponent(query) + '&amp;key=' + credentials.google.apiKey,&#13;&#10;}&#13;&#10;&#13;&#10;return new Promise((resolve, reject) =&gt; https.request(options, res =&gt; {&#13;&#10;let data = ''&#13;&#10;res.on('data', chunk =&gt; data += chunk) res.on('end', () =&gt; {&#13;&#10;data = JSON.parse(data)&#13;&#10;if(!data.results.length)&#13;&#10;return reject(new Error(`no results for &quot;${query}&quot;`)) resolve(data.results[0].geometry.location)&#13;&#10;})&#13;&#10;}).end()&#13;&#10;)&#13;&#10;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now we have a function that will contact the Google API
to geocode an address. If it cant find an address (or fails for any other
reason), an error will be returned. The API can return multiple addresses. For
example, if<span style='letter-spacing:4.0pt'> </span>you search for 10 Main
Street without specifying a city, state, or postal code, it will return dozens
of results. Our implementation simply picks the first one. The API returns a
lot of information, but all were currently interested in are the coordinates.
You could easily modify this interface to return<span style='letter-spacing:
2.0pt'> </span>more<span style='letter-spacing:2.0pt'> </span>information.<span
style='letter-spacing:2.0pt'> </span>See<span style='letter-spacing:2.0pt'> </span>the<span
style='letter-spacing:2.0pt'> </span></span><a href="http://bit.ly/2O4EE3t"><span
style='color:#070707'>Google<span style='letter-spacing:2.0pt'> </span>geocoding<span
style='letter-spacing:2.0pt'> </span>API<span style='letter-spacing:2.0pt'> </span>documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for more information
about the data the API returns.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h4 align=left style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.55pt'>USAGE</span><span style='color:#545454;
letter-spacing:2.5pt'> </span><span style='color:#545454;letter-spacing:.5pt'>RESTRICTIONS</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark846"></a><span style='color:#333333'>The Google geocoding API
currently has a monthly usage limit, but you pay $0.005 per geocoding request.
So if you made a million requests in any<span style='letter-spacing:1.5pt'> </span>given<span
style='letter-spacing:1.5pt'> </span>month,<span style='letter-spacing:1.5pt'> </span>youd<span
style='letter-spacing:1.5pt'> </span>have a $5,000<span style='letter-spacing:
1.5pt'> </span>bill from Googleso<span style='letter-spacing:1.5pt'> </span>there
is a</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection401>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>probably<span
style='letter-spacing:.6pt'> </span>practical<span style='letter-spacing:.55pt'>
</span>limit<span style='letter-spacing:.6pt'> </span>for<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>you!</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.2pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;If youre worried about runaway chargeswhich could happen if you accidentally leave a service running, or if a bad actor gets access to your credentialsyou can add a budget and configure alerts to notify you as you approach them. Go to your Google developer console, and choose Budgets &amp; alerts from the Billing menu.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>At<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>time<span style='letter-spacing:1.4pt'> </span>of<span
style='letter-spacing:1.4pt'> </span>writing,<span style='letter-spacing:1.45pt'>
</span>Google<span style='letter-spacing:1.4pt'> </span>limits<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>5,000<span style='letter-spacing:1.45pt'>
</span>requests<span style='letter-spacing:1.4pt'> </span>per<span
style='letter-spacing:1.4pt'> </span>100 seconds to prevent abuse, which would
be difficult to exceed. Googles<span style='letter-spacing:4.0pt'> </span>API
also requires that if you use a map on your website, you use Google Maps. That
is, if youre using Googles service to geocode your data, you cant turn
around and display that information on a Bing map without violating the terms
of service. Generally, this is not an onerous restriction, as you probably
wouldnt be doing geocoding unless you intended to display locations on a map.
However, if you like Bings maps better than Googles, or vice versa, you
should be mindful of the terms of service and use the appropriate API<a
name="_bookmark848"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Geocoding<span style='letter-spacing:-.3pt'> </span>Your<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark849"></a><span style='color:#333333'>We have a nice database of
vacation packages around Oregon, and we might decide we want to display a map
with pins showing where the various vacations are, and this is where geocoding
comes in.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We already have vacation data in the database, and each
vacation has a location search string that will work with geocoding, but we
dont yet have coordinates.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>The<span
style='letter-spacing:.45pt'> </span>question<span style='letter-spacing:.55pt'>
</span>now<span style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:
.5pt'> </span>when<span style='letter-spacing:.55pt'> </span>and<span
style='letter-spacing:.55pt'> </span>how<span style='letter-spacing:.5pt'> </span>do<span
style='letter-spacing:.55pt'> </span>we<span style='letter-spacing:.5pt'> </span>do<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.5pt'> </span>geocoding?<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Broadly</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection402>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>speaking,<span
style='letter-spacing:.6pt'> </span>we<span style='letter-spacing:.55pt'> </span>have<span
style='letter-spacing:.55pt'> </span>three<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>options:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.55pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15981568'><span style='left:0px;position:absolute;
left:169px;top:-312116px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Geocode when we add new vacations to the database. This
is probably a great option when we add an admin interface to the system that
allows vendors to dynamically add vacations to the database. Since were
stopping short of this functionality, however, well discard this option.</span></p>

<p class=MsoBodyText style='margin-top:9.2pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15982080'><span style='left:0px;position:absolute;
left:169px;top:-312251px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Geocode<span style='letter-spacing:2.0pt'> </span>as<span
style='letter-spacing:2.0pt'> </span>necessary<span style='letter-spacing:2.0pt'>
</span>when<span style='letter-spacing:2.0pt'> </span>retrieving<span
style='letter-spacing:2.0pt'> </span>vacations<span style='letter-spacing:2.0pt'>
</span>from<span style='letter-spacing:2.0pt'> </span>the database. This
approach would do a check every time we get vacations from the database: if any
of them have missing coordinates, we would geocode them. This option sounds<span
style='letter-spacing:2.0pt'> </span>appealing, and is probably the easiest of
the three, but it has some big<span style='letter-spacing:1.9pt'> </span>disadvantages<span
style='letter-spacing:1.85pt'> </span>that<span style='letter-spacing:1.85pt'> </span>make<span
style='letter-spacing:1.85pt'> </span>it<span style='letter-spacing:1.85pt'> </span>unsuitable.<span
style='letter-spacing:1.9pt'> </span>The<span style='letter-spacing:1.85pt'> </span>first<span
style='letter-spacing:1.85pt'> </span>is performance:<span style='letter-spacing:
1.7pt'> </span>if<span style='letter-spacing:1.7pt'> </span>you<span
style='letter-spacing:1.75pt'> </span>add<span style='letter-spacing:1.75pt'> </span>a<span
style='letter-spacing:1.7pt'> </span>thousand<span style='letter-spacing:1.75pt'>
</span>new<span style='letter-spacing:1.7pt'> </span>vacations<span
style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:1.75pt'> </span>the
database, the first person to look at the vacations list is going to have<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.5pt'> </span>wait<span
style='letter-spacing:1.45pt'> </span>for<span style='letter-spacing:1.45pt'> </span>all<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.45pt'> </span>those<span
style='letter-spacing:1.45pt'> </span>geocoding<span style='letter-spacing:
1.5pt'> </span>requests<span style='letter-spacing:1.45pt'> </span>to<span
style='letter-spacing:1.5pt'> </span>succeed<span style='letter-spacing:1.5pt'>
</span>and get written to the database. Furthermore, one can imagine a
situation where a load testing suite adds a thousand vacations to<span
style='letter-spacing:4.0pt'> </span>the database and then performs a thousand
requests. Since they all run concurrently, each of those thousand requests
results in a thousand geocoding requests because the data hasnt been written<span
style='letter-spacing:2.0pt'> </span>to the database yetresulting in a million
geocoding requests and<span style='letter-spacing:4.0pt'> </span>a $5,000 bill
from Google! So lets cross this one off the list.</span></p>

<p class=MsoBodyText style='margin-top:8.9pt;margin-right:75.2pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15982592'><span style='left:0px;position:absolute;
left:169px;top:-312677px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Have a script to find vacations with missing coordinate
date, and geocode those. This approach offers the best solution for our current
situation. For development purposes, were populating the vacation database
once, and we dont yet have an admin interface for adding new vacations.
Furthermore, if we do decide to add an admin<span style='letter-spacing:2.0pt'>
</span>interface<span style='letter-spacing:1.95pt'> </span>later,<span
style='letter-spacing:2.0pt'> </span>this<span style='letter-spacing:1.95pt'> </span>approach<span
style='letter-spacing:2.0pt'> </span>isnt<span style='letter-spacing:1.95pt'> </span>incompatible<span
style='letter-spacing:1.95pt'> </span>with<span style='letter-spacing:2.0pt'> </span>that:
as a matter of fact, we could just run this process after adding a<span
style='letter-spacing:2.0pt'> </span>new vacation, and it would work.</span></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>First, we need to add a way to update an existing
vacation in <i>db.js </i>(well also add a method to close the database
connection, which will come in</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection403>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Displaying_a_Map"></a><a
name="_bookmark850"></a><span style='color:#333333'>handy<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>scripts):</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: module.exports = {&#13;&#10;//...&#13;&#10;updateVacationBySku: async (sku, data) =&gt; Vacation.updateOne({ sku }, data),&#13;&#10;close: () =&gt; mongoose.connection.close(),&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
color:#333333'>Then<span style='letter-spacing:.45pt'> </span>we<span
style='letter-spacing:.45pt'> </span>can<span style='letter-spacing:.45pt'> </span>write<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.45pt'> </span>script<span
style='letter-spacing:.4pt'> </span><i>db-<span style='letter-spacing:-.1pt'>geocode.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const db = require('./db')&#13;&#10;const geocode = require('./lib/geocode')&#13;&#10;&#13;&#10;const geocodeVacations = async () =&gt; {&#13;&#10;const vacations = await db.getVacations()&#13;&#10;const vacationsWithoutCoordinates = vacations.filter(({ location }) =&gt;&#13;&#10;!location.coordinates || typeof location.coordinates.lat !== 'number') console.log(`geocoding ${vacationsWithoutCoordinates.length} ` +&#13;&#10;`of ${vacations.length} vacations:`)&#13;&#10;return Promise.all(vacationsWithoutCoordinates.map(async ({ sku, location&#13;&#10;}) =&gt; {&#13;&#10;const { search } = location&#13;&#10;if(typeof search !== 'string' || !/\w/.test(search))&#13;&#10;return console.log(` SKU ${sku} FAILED: does not have location.search`)&#13;&#10;try {&#13;&#10;const coordinates = await geocode(search)&#13;&#10;await db.updateVacationBySku(sku, { location: { search, coordinates }&#13;&#10;})&#13;&#10;console.log(`  SKU ${sku} SUCCEEDED: ${coordinates.lat},&#13;&#10;${coordinates.lng}`)&#13;&#10;} catch(err) {&#13;&#10;return console.log(`  SKU {sku} FAILED: ${err.message}`)&#13;&#10;}&#13;&#10;}))&#13;&#10;}&#13;&#10;&#13;&#10;geocodeVacations()&#13;&#10;.then(() =&gt; {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection404>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image027.gif"
alt="Text Box: console.log('DONE') db.close()&#13;&#10;})&#13;&#10;.catch(err =&gt; {&#13;&#10;console.error('ERROR: ' + err.message) db.close()&#13;&#10;})&#13;&#10;"></span></p>

<p class=MsoBodyText><span style='font-size:12.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>When you run the script (</span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>node db-geocode.js</span><span
style='color:#333333'>), you should see that all of your vacations have been
successfully geocoded! Now that we have that information, lets learn how to
display it on a map<a name="_bookmark851"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Displaying<span style='letter-spacing:-.25pt'> </span>a<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.25pt'>Map</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark852"></a><span style='color:#333333'>While displaying vacations
on a map really falls under frontend work, it would be very disappointing to
get this far and not see the fruits of our labor. So were going to take a
slight departure from the backend focus of this book,<span style='letter-spacing:
1.4pt'> </span>and<span style='letter-spacing:1.4pt'> </span>see how to<span
style='letter-spacing:1.4pt'> </span>display<span style='letter-spacing:1.4pt'>
</span>our newly<span style='letter-spacing:1.4pt'> </span>geocoded<span
style='letter-spacing:1.4pt'> </span>dealers on<span style='letter-spacing:
1.4pt'> </span>a map.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We already created a Google API key to do our geocoding,
but we still need to enable the maps API. Go to </span><a
href="http://bit.ly/2KcY1X0"><span style='color:#070707'>your Google console</span></a><span
style='color:#333333'>, click on APIs, and find Maps JavaScript API and enable
it if it isnt already.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now we can create a view to display our vacations map, <i>views/vacations-
map.handlebars</i>. Well start with just displaying the map, and work on
adding vacations next:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: &lt;div id=&quot;map&quot; style=&quot;width: 100%; height: 60vh;&quot;&gt;&lt;/div&gt;&#13;&#10;&lt;script&gt;&#13;&#10;let map = undefined&#13;&#10;async function initMap() {&#13;&#10;map = new google.maps.Map(document.getElementById('map'), {&#13;&#10;// approximate geographic center of oregon&#13;&#10;center: { lat: 44.0978126, lng: -120.0963654 },&#13;&#10;// this zoom level covers most of the state&#13;&#10;zoom: 7,&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection405>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="Weather_Data"></a><a
name="_bookmark854"></a><a name="_bookmark853"></a><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: })&#13;&#10;}&#13;&#10;&lt;/script&gt;&#13;&#10;&lt;script src=&quot;https://maps.googleapis.com/maps/api/js?key=&#13;&#10;{{googleApiKey}}&amp;callback=initMap&quot; async defer&gt;&lt;/script&gt;&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:80.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>Now its time to put some pins on the map corresponding
with our vacations. In </span><a href="#_bookmark634"><span style='color:#070707'>Chapter
15</span></a><span style='color:#333333'>, we created an API endpoint </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>/api/vacations</span><span
style='color:#333333'>, which will now include geocoded data. Well use that
endpoint to get our vacations, and put pins on the map. Modify the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>initMap<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>function
in <i><span style='letter-spacing:-.1pt'>views/vacations-map.handlebars.js</span></i><span
style='letter-spacing:-.1pt'>:</span></span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: async function initMap() {&#13;&#10;map = new google.maps.Map(document.getElementById('map'), {&#13;&#10;// approximate geographic center of oregon&#13;&#10;center: { lat: 44.0978126, lng: -120.0963654 },&#13;&#10;// this zoom level covers most of the state&#13;&#10;zoom: 7,&#13;&#10;})&#13;&#10;const vacations = await fetch('/api/vacations').then(res =&gt; res.json()) vacations.forEach(({ name, location }) =&gt; {&#13;&#10;const marker = new google.maps.Marker({ position: location.coordinates,&#13;&#10;map,&#13;&#10;title: name,&#13;&#10;})&#13;&#10;})&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Now<span style='letter-spacing:1.25pt'> </span>we<span
style='letter-spacing:1.25pt'> </span>have<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.25pt'> </span>map<span style='letter-spacing:1.3pt'> </span>showing<span
style='letter-spacing:1.3pt'> </span>where<span style='letter-spacing:1.25pt'> </span>all<span
style='letter-spacing:1.25pt'> </span>our<span style='letter-spacing:1.25pt'> </span>vacations<span
style='letter-spacing:1.25pt'> </span>are!<span style='letter-spacing:1.25pt'> </span>There<span
style='letter-spacing:1.25pt'> </span>are<span style='letter-spacing:1.25pt'> </span>a<span
style='letter-spacing:1.25pt'> </span>lot of ways we could improve this page:
probably the best place to start would be to linking the markers with the
vacation detail page, so you could click<span style='letter-spacing:4.0pt'> </span>on<span
style='letter-spacing:1.25pt'> </span>a<span style='letter-spacing:1.2pt'> </span>marker<span
style='letter-spacing:1.2pt'> </span>and<span style='letter-spacing:1.25pt'> </span>it<span
style='letter-spacing:1.2pt'> </span>would<span style='letter-spacing:1.25pt'> </span>take<span
style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:1.25pt'> </span>to<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.2pt'> </span>vacation<span
style='letter-spacing:1.25pt'> </span>info<span style='letter-spacing:1.25pt'> </span>page.<span
style='letter-spacing:1.25pt'> </span>We<span style='letter-spacing:1.2pt'> </span>could
also implement custom markers or tooltips: the Google Maps API has a lot </span><a
href="https://developers.google.com/maps/documentation/javascript/tutorial"><span
style='color:#333333;text-decoration:none'>of features, and you can learn about
them from the </span><span style='color:#070707'>official Google</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707;
letter-spacing:-.1pt'>documentation</span><span style='color:#333333;
letter-spacing:-.1pt;text-decoration:none'>.</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection406>

<h2 style='margin-top:3.95pt'><span style='color:#8E0011'>Weather<span
style='letter-spacing:-.3pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark855"></a><span style='color:#333333'>Remember our current
weather widget from </span><a href="#_bookmark309"><span style='color:#070707'>Chapter
7</span></a><span style='color:#333333'>? Lets get that hooked up with some
live data! Well be using the US National Weather Service (NWS) API to get
forecast information. As with our Twitter integration, and our use of
geocoding, well be caching the forecast to prevent passing every hit to our
website on to NWS (which might get us blacklisted if our website gets popular).
Create a file called <i>lib/weather.js</i>:</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const https = require('https')&#13;&#10;const { URL } = require('url')&#13;&#10;&#13;&#10;const _fetch = url =&gt; new Promise((resolve, reject) =&gt; { const { hostname, pathname, search } = new URL(url) const options = {&#13;&#10;hostname,&#13;&#10;path: pathname + search, headers: {&#13;&#10;'User-Agent': 'Meadowlark Travel'&#13;&#10;},&#13;&#10;}&#13;&#10;https.get(options, res =&gt; {&#13;&#10;let data = ''&#13;&#10;res.on('data', chunk =&gt; data += chunk) res.on('end', () =&gt; resolve(JSON.parse(data)))&#13;&#10;}).end()&#13;&#10;})&#13;&#10;&#13;&#10;module.exports = locations =&gt; {&#13;&#10;&#13;&#10;const cache = {&#13;&#10;refreshFrequency: 15 * 60 * 1000,&#13;&#10;lastRefreshed: 0, refreshing: false,&#13;&#10;forecasts: locations.map(location =&gt; ({ location })),&#13;&#10;}&#13;&#10;&#13;&#10;const updateForecast = async forecast =&gt; {&#13;&#10;if(!forecast.url) {&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection407>

<p class=MsoBodyText style='margin-left:69.4pt'><span style='font-size:10.0pt'><img
width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: const { lat, lng } = forecast.location.coordinates&#13;&#10;const path = `/points/${lat.toFixed(4)},${lng.toFixed(4)}` const points = await _fetch('https://api.weather.gov' + path) forecast.url = points.properties.forecast&#13;&#10;}&#13;&#10;const { properties: { periods } } = await _fetch(forecast.url)&#13;&#10;const currentPeriod = periods[0] Object.assign(forecast, {&#13;&#10;iconUrl: currentPeriod.icon,&#13;&#10;weather: currentPeriod.shortForecast,&#13;&#10;temp: currentPeriod.temperature + ' ' + currentPeriod.temperatureUnit,&#13;&#10;})&#13;&#10;return forecast&#13;&#10;}&#13;&#10;&#13;&#10;const getForecasts = async () =&gt; {&#13;&#10;if(Date.now() &gt; cache.lastRefreshed + cache.refreshFrequency) { console.log('updating cache')&#13;&#10;cache.refreshing = true&#13;&#10;cache.forecasts = await Promise.all(cache.forecasts.map(updateForecast))&#13;&#10;cache.refreshing = false&#13;&#10;}&#13;&#10;return cache.forecasts&#13;&#10;}&#13;&#10;&#13;&#10;return getForecasts&#13;&#10;&#13;&#10;}&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:75.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:126%'><span
style='color:#333333'>Youll notice that we got tired of using Nodes built-in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>https<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>library
directly, and instead created a utility function </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>_fetch<span style='letter-spacing:
-2.65pt'> </span></span><span style='color:#333333'>to make our weather
functionality<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.45pt'> </span>little<span style='letter-spacing:1.45pt'>
</span>more<span style='letter-spacing:1.45pt'> </span>readable.<span
style='letter-spacing:1.5pt'> </span>One<span style='letter-spacing:1.45pt'> </span>thing<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.45pt'> </span>might<span
style='letter-spacing:1.45pt'> </span>jump<span style='letter-spacing:1.5pt'> </span>out<span
style='letter-spacing:1.45pt'> </span>at<span style='letter-spacing:1.45pt'> </span>you
is that were setting the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>User-Agent<span style='letter-spacing:-2.3pt'> </span></span><span
style='color:#333333'>header to </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>Meadowlark Travel</span><span style='color:#333333'>. This<span
style='letter-spacing:4.0pt'> </span>is a quirk<span style='letter-spacing:
1.25pt'> </span>of the NWS weather API: it requires a string<span
style='letter-spacing:1.25pt'> </span>for the<span style='letter-spacing:1.25pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>User-
Agent</span><span style='color:#333333'>. They state that they will eventually
replace this with an API key,<span style='letter-spacing:4.0pt'> </span>but for
now we just need to provide a value here.</span></p>

</div>

<span style='font-size:11.0pt;line-height:126%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection408>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>Getting weather data from the NWS API is a two-part
affair here. Theres<span style='letter-spacing:4.0pt'> </span>an API endpoint
called </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>points<span
style='letter-spacing:-1.95pt'> </span></span><span style='color:#333333'>that
takes a latitude and longitude (with exactly four decimal digits) and returns
information about that location including the appropriate URL from which to
get a forecast. Once we have that URL for any given set of coordinates, we
dont need to fetch it again. All we need to do is call that URL to get the
updated forecast.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Note<span style='letter-spacing:1.3pt'> </span>that<span
style='letter-spacing:1.3pt'> </span>a<span style='letter-spacing:1.3pt'> </span>lot<span
style='letter-spacing:1.3pt'> </span>more<span style='letter-spacing:1.3pt'> </span>data<span
style='letter-spacing:1.3pt'> </span>is<span style='letter-spacing:1.3pt'> </span>returned<span
style='letter-spacing:1.35pt'> </span>from<span style='letter-spacing:1.3pt'> </span>the<span
style='letter-spacing:1.3pt'> </span>forecast<span style='letter-spacing:1.3pt'>
</span>than<span style='letter-spacing:1.35pt'> </span>were<span
style='letter-spacing:1.3pt'> </span>using; we could get a lot more
sophisticated with this feature. In particular, the forecast URL returns an
array of periods, with the first element being the current period (for example,
afternoon or evening). It follows up with periods stretching into the next
week. Feel free to look at the data in the </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>periods<span style='letter-spacing:
-2.1pt'> </span></span><span style='color:#333333'>array to see the kind of
data thats available to you.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>One detail worth pointing out is that we have a boolean
property in our cache called </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>refreshing</span><span style='color:#333333'>. This is necessary
since updating the cache takes<span style='letter-spacing:4.0pt'> </span>a
finite amount of time, and is done asynchronously. If multiple requests come in
before the first cache refresh completes, they will all kick off the work of
refreshing the cache. It wont hurt anything, exactly, but you will<span
style='letter-spacing:4.0pt'> </span>be<span style='letter-spacing:1.6pt'> </span>making<span
style='letter-spacing:1.7pt'> </span>more<span style='letter-spacing:1.6pt'> </span>API<span
style='letter-spacing:1.6pt'> </span>calls<span style='letter-spacing:1.6pt'> </span>than<span
style='letter-spacing:1.7pt'> </span>are<span style='letter-spacing:1.6pt'> </span>strictly<span
style='letter-spacing:1.7pt'> </span>necessary.<span style='letter-spacing:
1.7pt'> </span>This<span style='letter-spacing:1.6pt'> </span>boolean variable
is just a flag to any additional requests to say, Were working on <span
style='letter-spacing:-.2pt'>it.</span></span></p>

<p class=MsoBodyText><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>Weve designed this to be a drop-in replacement for the
dummy function we created back in </span><a href="#_bookmark309"><span
style='color:#070707'>Chapter 7</span></a><span style='color:#333333'>. All we
have to do is open <i>lib/middleware/weather.js </i>and replace the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>getWeatherData<span
style='letter-spacing:-.35pt'> </span></span><span style='color:#333333'>function:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const weatherData = require('../weather')&#13;&#10;&#13;&#10;const getWeatherData = weatherData([&#13;&#10;{&#13;&#10;name: 'Portland',&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:12.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection409>

<p class=MsoBodyText style='margin-left:69.4pt'><a name="_bookmark858"></a><span
style='font-size:10.0pt'><img width=560 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image035.gif"
alt="Text Box: coordinates: { lat: 45.5154586, lng: -122.6793461 },&#13;&#10;},&#13;&#10;{&#13;&#10;name: 'Bend',&#13;&#10;coordinates: { lat: 44.0581728, lng: -121.3153096 },&#13;&#10;},&#13;&#10;{&#13;&#10;name: 'Manzanita',&#13;&#10;coordinates: { lat: 45.7184398, lng: -123.9351354 },&#13;&#10;},&#13;&#10;])&#13;&#10;"></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Now<span
style='letter-spacing:.4pt'> </span>we<span style='letter-spacing:.45pt'> </span>have<span
style='letter-spacing:.45pt'> </span>live<span style='letter-spacing:.45pt'> </span>weather<span
style='letter-spacing:.4pt'> </span>data<span style='letter-spacing:.45pt'> </span>in<span
style='letter-spacing:.5pt'> </span>our<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>widget<a name="_bookmark856"></a>!</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:13.8pt'><a name="_bookmark857"></a><span
style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Weve really only scratched the surface of what can be
done with third- party API integration. Everywhere you look, new APIs are
popping up, offering every kind of data imaginable (even the City of Portland
is now making a lot of public data available through REST APIs). While it would
be impossible to cover even a small percentage of the APIs available to<span
style='letter-spacing:4.0pt'> </span>you, this chapter has covered the
fundamentals youll need to know to use these APIs: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http.request</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>https.request</span><span style='color:#333333'>, and parsing
JSON.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>We now have a lot of knowledge under our belt. Weve
covered a lot of ground! What happens when things go wrong, though? In the next
chapter, well be discussing<span style='letter-spacing:1.8pt'> </span>debugging<span
style='letter-spacing:1.8pt'> </span>techniques to<span style='letter-spacing:
1.8pt'> </span>help<span style='letter-spacing:1.8pt'> </span>us when<span
style='letter-spacing:1.8pt'> </span>things dont work out as we expect.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection410>

<h1><a name="20._Debugging"></a><a name="The_First_Principle_of_Debugging"></a><a
name="_bookmark859"></a>Chapter<span style='letter-spacing:.55pt'> </span>20.<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Debugging</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark860"></a><span style='color:#333333'>Debugging is perhaps an
unfortunate term, what with its association<span style='letter-spacing:2.0pt'> </span>with
defects. The fact is, what we refer to as debugging is an activity<span
style='letter-spacing:2.0pt'> </span>you will find yourself doing all the time,
whether youre implementing a new feature, learning how something works, or actually
fixing a bug. A better term might be exploring, but well stick with
debugging, since the activity it refers to is unambiguous, regardless of the
motivation.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Debugging is an oft-neglected skill: it seems that most
programmers are expected to be born knowing how to do it. Perhaps computer
science professors and book authors see debugging as such an obvious skill that
they overlook it.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The fact is, debugging is a skill that can be taught, and
it is an important way by which programmers come to understand not just the
framework they are working in, but also their own code and that of their team.
In this chapter, well discuss some of the tools and techniques you can use for
debugging Node and Express applications effectively.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>The<span style='letter-spacing:-.2pt'> </span>First<span
style='letter-spacing:-.2pt'> </span>Principle<span style='letter-spacing:-.2pt'>
</span>of<span style='letter-spacing:-.15pt'> </span><span style='letter-spacing:
-.1pt'>Debugging</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:91.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark861"></a><span style='color:#333333'>As the name
implies, debugging often refers to the process of finding and eliminating
defects. Before we talk about tools, lets consider some general debugging
principles.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:86.65pt;margin-bottom:
0cm;margin-left:62.2pt;margin-bottom:.0001pt;text-align:justify;line-height:
106%'><i><span style='font-size:14.0pt;line-height:106%;color:#333333'>How
often have I said to you that when you have eliminated the impossible,<span
style='letter-spacing:.75pt'> </span>whatever<span style='letter-spacing:.7pt'>
</span>remains,<span style='letter-spacing:.75pt'> </span>however<span
style='letter-spacing:.7pt'> </span>improbable,<span style='letter-spacing:
.75pt'> </span>must<span style='letter-spacing:.75pt'> </span>be<span
style='letter-spacing:.7pt'> </span>the<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>truth?</span></span></i></p>

</div>

<span style='font-size:14.0pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection411>

<p class=MsoBodyText style='margin-top:3.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:264.75pt;margin-bottom:.0001pt'><span style='color:#333333'>Sir<span
style='letter-spacing:.6pt'> </span>Arthur<span style='letter-spacing:.65pt'> </span>Conan<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>Doyle</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark862"></a><span style='color:#333333'>The first and most
important principle of debugging is the process of <i>elimination</i>. Modern
computer systems are incredibly complicated, and if you had to hold the <i>whole
system </i>in your head, and pluck the source of a single problem out of that
vast space, you probably wouldnt even know where to start. Whenever youre
confronted with a problem that isnt immediately obvious, your <i>very first
thought </i>should be, What can I <i>eliminate </i>as the source of the
problem? The more you can eliminate, the fewer places you have to look.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Elimination<span
style='letter-spacing:.6pt'> </span>can<span style='letter-spacing:.6pt'> </span>take<span
style='letter-spacing:.55pt'> </span>many<span style='letter-spacing:.6pt'> </span>forms.<span
style='letter-spacing:.65pt'> </span>Here<span style='letter-spacing:.55pt'> </span>are<span
style='letter-spacing:.55pt'> </span>some<span style='letter-spacing:.55pt'> </span>common<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>examples:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15988736'><span style='left:0px;position:absolute;left:169px;
top:-320396px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='color:#333333'>Systematically<span style='letter-spacing:.7pt'> </span>commenting<span
style='letter-spacing:.75pt'> </span>out<span style='letter-spacing:.65pt'> </span>or<span
style='letter-spacing:.7pt'> </span>disabling<span style='letter-spacing:.7pt'>
</span>blocks<span style='letter-spacing:.7pt'> </span>of<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>code.</span></span></p>

<p class=MsoBodyText style='margin-top:11.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15989248'><span style='left:0px;position:absolute;
left:169px;top:-320432px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Writing code that can be covered by unit tests; the unit
tests themselves provide a framework for elimination.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15989760'><span style='left:0px;position:absolute;
left:169px;top:-320496px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Analyzing network traffic to determine if the problem is
on the client or server side.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15990272'><span style='left:0px;position:absolute;
left:169px;top:-320557px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Testing a different part of the system that has similarities
to the <span style='letter-spacing:-.1pt'>first.</span></span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:111%'><span
style='position:relative;z-index:15990784'><span style='left:0px;position:absolute;
left:169px;top:-320618px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Using input that has worked before, and changing that
input one piece at a time until the problem exhibits.</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:108%'><span
style='position:relative;z-index:15991296'><span style='left:0px;position:absolute;
left:169px;top:-320679px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Using version control to go back and forth in time until
the problem disappears, and you can isolate it to a particular change (see </span><a
href="http://bit.ly/34TOufp"><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707'>git bisect</span></a><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707;letter-spacing:-1.7pt'> </span><span style='color:#333333'>for
more information about this).</span></p>

<p class=MsoBodyText style='margin-top:9.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt'><span style='position:relative;
z-index:15991808'><span style='left:0px;position:absolute;left:169px;
top:-320765px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='color:#333333'>Mocking<span style='letter-spacing:.75pt'> </span>functionality<span
style='letter-spacing:.85pt'> </span>to<span style='letter-spacing:.85pt'> </span>eliminate<span
style='letter-spacing:.8pt'> </span>complex<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>subsystems.</span></span></p>

<p class=MsoBodyText style='margin-top:14.15pt;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Elimination is not a silver bullet, though. Often,
problems are due to complex interactions between two or more components:
eliminate (or<span style='letter-spacing:4.0pt'> </span>mock) any one of the
components, and the problem could go away, but the problem cant be isolated<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>any<span
style='letter-spacing:1.55pt'> </span>single component.<span style='letter-spacing:
1.55pt'> </span>Even<span style='letter-spacing:1.55pt'> </span>in<span
style='letter-spacing:1.55pt'> </span>this situation,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection412>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>though, elimination can help narrow down the problem,
even if it doesnt light up a neon sign over the exact location.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Elimination is most successful when its careful and
methodical. Its very easy to miss things when you just wantonly eliminate
components without considering how those components affect the whole. Play a
game with yourself: when you consider a component to eliminate, walk through
how<span style='letter-spacing:2.0pt'> </span>the removal of that component
will affect the system. This will inform you about what to expect and whether
or not removing the component tells you anything useful.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Take_Advantage_of_REPL_and_the_Console"></a><a name="_bookmark863"></a><span
style='color:#8E0011'>Take<span style='letter-spacing:-.3pt'> </span>Advantage<span
style='letter-spacing:-.15pt'> </span>of<span style='letter-spacing:-.15pt'> </span>REPL<span
style='letter-spacing:-.15pt'> </span>and<span style='letter-spacing:-.15pt'> </span>the<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>Console</span></span></h2>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark864"></a><span style='color:#333333'>Both Node and your browser
offer you a <i>read-eval-print loop </i>(REPL); this<span style='letter-spacing:
2.0pt'> </span>is basically just a way to write JavaScript interactively. You
type in some JavaScript, press Enter, and immediately see the output. Its a
great way to play around, and is often the quickest and most intuitive way to
locate an error in small bits of code.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><span
style='color:#333333'>In<span style='letter-spacing:1.3pt'> </span>a<span
style='letter-spacing:1.2pt'> </span>browser,<span style='letter-spacing:1.3pt'>
</span>all<span style='letter-spacing:1.2pt'> </span>you<span style='letter-spacing:
1.3pt'> </span>have<span style='letter-spacing:1.2pt'> </span>to<span
style='letter-spacing:1.3pt'> </span>do<span style='letter-spacing:1.3pt'> </span>is<span
style='letter-spacing:1.2pt'> </span>pull<span style='letter-spacing:1.2pt'> </span>up<span
style='letter-spacing:1.3pt'> </span>your<span style='letter-spacing:1.2pt'> </span>JavaScript<span
style='letter-spacing:1.2pt'> </span>console,<span style='letter-spacing:1.3pt'>
</span>and you have a REPL. In Node, all you have to do is type </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>node<span
style='letter-spacing:-2.35pt'> </span></span><span style='color:#333333'>without
any arguments, and you enter REPL mode; you can require packages, create
variables and functions, or do anything else you could normally do in your code
(except create packages: theres no meaningful way to do that in the <span
style='letter-spacing:-.1pt'>REPL).</span></span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark865"></a><span style='color:#333333'>Console logging is also
your friend. Its a crude debugging technique, perhaps, but an easy one (both
easy to understand and easy to implement). Calling </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>console.log<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>in
Node will output the contents of an object in an easy-to-read format, so you
can easily spot problems. Keep in mind that</span></p>

</div>

<span style='font-size:11.0pt;line-height:130%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection413>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>some objects are so large that logging them to the
console will produce so much output that youll have a hard time finding any
useful information. For example, try </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>console.log(req)<span style='letter-spacing:-1.7pt'> </span></span><span
style='color:#333333'>in one of your path handlers.</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Using_Nodes_Built-in_Debugger"></a><a name="_bookmark866"></a><span
style='color:#8E0011'>Using<span style='letter-spacing:-.3pt'> </span>Nodes<span
style='letter-spacing:-.25pt'> </span>Built-in<span style='letter-spacing:-.25pt'>
</span><span style='letter-spacing:-.1pt'>Debugger</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark867"></a><span style='color:#333333'>Node has a built-in
debugger that allows you to step through your application, as if you were going
on a ride-along with the JavaScript interpreter. All you have to do to start
debugging your app is use the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>inspect<span style='letter-spacing:-1.95pt'> </span></span><span
style='color:#333333'>argument:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>node<span style='letter-spacing:.7pt'> </span>inspect<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>meadowlark.j<a
name="Node_Inspector_Clients"></a><a name="_bookmark868"></a>s</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When you do, youll immediately notice a couple of
things. First, on your console you will see a URL; this is because the Node
debugger works by creating its own web server, which allows you to control the
execution of<span style='letter-spacing:2.0pt'> </span>the application being
debugged. This may not be impressive right now, but the usefulness of this
approach will be clear when we discuss inspector <span style='letter-spacing:
-.1pt'>clients.</span></span></p>

<p class=MsoBodyText><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>When youre in the console debugger, you can type </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>help<span
style='letter-spacing:-2.3pt'> </span></span><span style='color:#333333'>to get
a list of commands. The commands you will use most often are </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>n<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>(next),
</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>s<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>(step
in), and </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>o<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>(step
out). </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>n<span
style='letter-spacing:-2.6pt'> </span></span><span style='color:#333333'>will
step over the current line: it will execute it, but if that instruction calls
other functions, they will be executed before control is returned to you. </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>s</span><span
style='color:#333333'>, in contrast, will step <i>into </i>the current line: if
that line invokes other functions, you will be able to step through them. </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>o </span><span
style='color:#333333'>allows you to step out of the currently executing
function. (Note that stepping in and stepping out refer only to <i>functions</i>;
they do not step into or out of </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>if<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>or </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>for<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>blocks or other flow-control statements.)</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>The<span
style='letter-spacing:.65pt'> </span>command-line<span style='letter-spacing:
.7pt'> </span>debugger<span style='letter-spacing:.7pt'> </span>has<span
style='letter-spacing:.7pt'> </span>more<span style='letter-spacing:.7pt'> </span>functionality,<span
style='letter-spacing:.75pt'> </span>but<span style='letter-spacing:.7pt'> </span>chances<span
style='letter-spacing:.65pt'> </span>are,<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.25pt'>you</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection414>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>wont want to use it that often. The command line is
great for many things, but debugging isnt one of them. Its good that its
available in a pinch (for example, if all you have is SSH access to the server,
or if your server<span style='letter-spacing:4.0pt'> </span>doesnt even have a
GUI installed). More often, youll want to use a graphical inspector client.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Node<span style='letter-spacing:-.3pt'> </span>Inspector<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Clients</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark869"></a><span style='color:#333333'>While you probably wont
want to use the command-line debugger except in<span style='letter-spacing:
1.5pt'> </span>a<span style='letter-spacing:1.45pt'> </span>pinch,<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.45pt'> </span>fact<span
style='letter-spacing:1.45pt'> </span>that<span style='letter-spacing:1.45pt'> </span>Node<span
style='letter-spacing:1.45pt'> </span>exposes<span style='letter-spacing:1.45pt'>
</span>its<span style='letter-spacing:1.45pt'> </span>debugging<span
style='letter-spacing:1.5pt'> </span>controls<span style='letter-spacing:1.45pt'>
</span>through<span style='letter-spacing:1.5pt'> </span>a web service gives
you other options.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><a
name="_bookmark870"></a><span style='color:#333333'>The most straightforward
debugger is to use Chrome, which uses the same debugging interface as it does
for debugging frontend code. So if youve ever used that interface, you should
feel right at home. Getting started is easy. Start your application with the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>--inspect<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>option
(which is distinct from the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>inspect<span style='letter-spacing:-.55pt'> </span></span><span
style='color:#333333'>argument mentioned previously):</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-top:.05pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>node<span style='letter-spacing:.8pt'> </span>--inspect<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>meadowlark.js</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Now the fun begins: in your browsers URL bar, enter </span><i><span
style='font-family:"Courier New";color:#333333'>chrome://inspect</span></i><span
style='color:#333333'>. Youll see a DevTools page, and in the Devices section,
click Open dedicated DevTools for Node. This will open a new window, which is
your debugger:</span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection415>

<p class=MsoBodyText style='margin-left:69.05pt'><span style='position:relative;
z-index:-1667116032'><span style='left:0px;position:absolute;left:387px;
top:-323464px;width:47px;height:1px'><img width=47 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image079.jpg"></span></span><span
style='position:relative;z-index:-1667115520'><span style='left:0px;position:
absolute;left:450px;top:-323464px;width:56px;height:1px'><img width=56
height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image080.jpg"></span></span><span
style='font-size:10.0pt'><img width=542 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image081.gif"></span></p>

</div>

<span style='font-size:10.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection416>

<p class=MsoBodyText style='margin-top:3.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Click the Sources tab, and then, in the leftmost pane,
click Node.js to expand it, and then click file://. Youll see the folder
that your<span style='letter-spacing:2.0pt'> </span>application is in; expand
that, and youll see all of your JavaScript source (youll only see JavaScript
and sometimes JSON files if youve required them somewhere). From here, you can
click any file to see its source, and set breakpoints:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection417>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:6.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:110.4pt'><span style='position:relative;
z-index:15996416'><span style='left:0px;position:absolute;left:135px;
top:-324032px;width:1px;height:2px'><img width=1 height=2
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image082.gif"></span></span><span
style='font-size:5.5pt;font-family:"Arial",sans-serif;color:#666769'>0<span
style='letter-spacing:2.05pt'> </span></span><span style='font-size:3.5pt;
color:#A0A0A0;letter-spacing:-.5pt'>I</span><span style='font-size:3.5pt;
color:#A0A0A0'> whh<span style='letter-spacing:-.6pt'> </span>Clvomt<span
style='letter-spacing:-.35pt'> </span>OtYtlop<span style='letter-spacing:2.85pt'>
</span></span><span style='font-size:3.0pt;font-family:"Arial",sans-serif;
color:#8E8E90'>,o:<span style='letter-spacing:2.2pt'> </span></span><span
style='font-size:6.0pt;font-family:"Arial",sans-serif;color:#7C7C7E;letter-spacing:
-.5pt'>+</span></p>

<p class=MsoNormal style='margin-top:3.1pt;margin-right:0cm;margin-bottom:0cm;
margin-left:115.55pt;margin-bottom:.0001pt'><span style='font-size:6.0pt;
font-family:"Arial",sans-serif;color:#7C7C7E'>0<span style='letter-spacing:
1.9pt'> </span><span style='letter-spacing:2.55pt'> </span></span><span
style='font-size:4.0pt;font-family:"Arial",sans-serif;color:#A0A0A0'>Ctwome<span
style='letter-spacing:2.75pt'> </span></span><span style='font-size:4.0pt;
color:#A0A0A0;letter-spacing:-.1pt'>ct,romeJ(ln</span><span style='font-size:
4.0pt;color:#7C7C7E;letter-spacing:-.1pt'>1pecl/</span><span style='font-size:
4.0pt;color:#A0A0A0;letter-spacing:-.1pt'>ilfdevtces</span></p>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all>
</span>

<p class=MsoNormal></p>

<p class=MsoNormal style='margin-top:5.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:109.05pt;margin-bottom:.0001pt'><span style='font-size:4.5pt;
font-family:"Arial",sans-serif;color:#7C7C7E;position:relative;top:-1.0pt;
letter-spacing:-.5pt'>0</span><span style='font-size:4.5pt;font-family:"Arial",sans-serif;
color:#7C7C7E;position:relative;top:-1.0pt'> </span><span
style='font-size:8.5pt;color:#544842;letter-spacing:-.25pt'>tt</span></p>

</div>

<span style='font-size:8.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection418>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=right style='margin-top:.05pt;text-align:right'><span
style='position:relative;z-index:-1667113984'><span style='left:0px;position:
absolute;left:174px;top:-324267px;width:90px;height:1px'><img width=90
height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image083.gif"></span></span><span
style='position:relative;z-index:-1667112960'><span style='left:0px;position:
absolute;left:143px;top:-324268px;width:541px;height:4px'><img width=541
height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image084.gif"></span></span><span
style='position:relative;z-index:15996928'><span style='left:0px;position:absolute;
left:137px;top:-324268px;width:2px;height:2px'><img width=2 height=2
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image085.gif"></span></span><span
style='font-size:4.0pt;color:#7C7C7E'></span></p>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all>
</span>

<p class=MsoNormal style='margin-top:.1pt'></p>

<p class=MsoNormal style='margin-left:15.1pt'><span style='font-size:5.5pt;
font-family:"Arial",sans-serif;color:#7C7C7E;letter-spacing:-.3pt'>DevTools</span></p>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all>
</span>

<p class=MsoNormal style='margin-top:.1pt'></p>

<p class=MsoNormal style='margin-left:10.9pt'><span style='position:relative;
z-index:15995392'><span style='left:0px;position:absolute;left:397px;
top:-324620px;width:46px;height:1px'><img width=46 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image086.jpg"></span></span><span
style='font-size:5.5pt;font-family:"Arial",sans-serif;color:#666769;letter-spacing:
-.1pt'>Devices</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=215 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=57 height=1
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image087.jpg"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=276 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=167 height=1
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image088.jpg"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:11.0pt;font-family:"Arial",sans-serif'><br clear=all
style='page-break-before:always'>
</span>

<div class=WordSection419>

<p class=MsoBodyText style='margin-top:3.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark871"></a><span style='color:#333333'>Unlike our previous
experience with the command-line debugger, your application<span
style='letter-spacing:1.6pt'> </span>is already<span style='letter-spacing:
1.6pt'> </span>running: all of the middleware has been<span style='letter-spacing:
1.6pt'> </span>linked<span style='letter-spacing:1.6pt'> </span>in, and the app
is listening. So how do we step through our code? The easiest way (and the
method youll probably use the most often) is to set a <i>breakpoint</i>. This
just tells the debugger to stop execution on a specific line so you can step
through the code.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>All you have to do to set a breakpoint is to open a
source file from the file:// browser in the debugger, and click the line
number (in the left column); a little blue arrow will appear, indicating
theres a breakpoint on that line (click again to turn it off). Go ahead and
set a breakpoint inside<span style='letter-spacing:2.0pt'> </span>one of your
route handlers. Then, in another browser window, visit that route.<span
style='letter-spacing:1.75pt'> </span>If<span style='letter-spacing:1.65pt'> </span>youre<span
style='letter-spacing:1.65pt'> </span>using<span style='letter-spacing:1.75pt'>
</span>Chrome,<span style='letter-spacing:1.75pt'> </span>the<span
style='letter-spacing:1.65pt'> </span>browser<span style='letter-spacing:1.65pt'>
</span>will<span style='letter-spacing:1.65pt'> </span>automatically<span
style='letter-spacing:1.75pt'> </span>switch<span style='letter-spacing:1.75pt'>
</span>to the debugger window, while the original browser just spins (because
the server has been paused and isnt responding to the request).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>debugger<span style='letter-spacing:1.4pt'>
</span>window,<span style='letter-spacing:1.5pt'> </span>you<span
style='letter-spacing:1.5pt'> </span>can<span style='letter-spacing:1.5pt'> </span>step<span
style='letter-spacing:1.5pt'> </span>through<span style='letter-spacing:1.5pt'>
</span>the<span style='letter-spacing:1.4pt'> </span>program<span
style='letter-spacing:1.4pt'> </span>in<span style='letter-spacing:1.5pt'> </span>a<span
style='letter-spacing:1.4pt'> </span>much more visual manner than we did with
the command-line debugger. Youll see that the line you set a breakpoint on is
highlighted in blue. That means thats the current execution line (which is
actually the next line that will execute). From here, you have access to the
same commands as we did in the command-line debugger. Similar to the
command-line debugger, we have the following actions available to us:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Resume<span style='letter-spacing:.65pt'> </span>script<span
style='letter-spacing:.65pt'> </span>execution<span style='letter-spacing:.75pt'>
</span><span style='letter-spacing:-.2pt'>(F8)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>This will simply let it fly; you will no longer be
stepping through the code,<span style='letter-spacing:1.7pt'> </span>unless<span
style='letter-spacing:1.65pt'> </span>you<span style='letter-spacing:1.7pt'> </span>stop<span
style='letter-spacing:1.7pt'> </span>on<span style='letter-spacing:1.7pt'> </span>another<span
style='letter-spacing:1.65pt'> </span>breakpoint.<span style='letter-spacing:
1.7pt'> </span>You<span style='letter-spacing:1.7pt'> </span>usually<span
style='letter-spacing:1.7pt'> </span>use<span style='letter-spacing:1.65pt'> </span>this
when youve seen what you need to see, or you want to skip ahead to another
breakpoint.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Step<span style='letter-spacing:.5pt'> </span>over<span
style='letter-spacing:.5pt'> </span>next<span style='letter-spacing:.5pt'> </span>function<span
style='letter-spacing:.5pt'> </span>call<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>(F10)</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection420>

<p class=MsoBodyText style='margin-top:3.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If the current line invokes a function, the debugger will
not descend into that function. That is, the function will be executed, and the
debugger will advance to the next line after the function invocation. Youll
use this when youre on a function call that youre not interested in the
details of.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Step<span style='letter-spacing:.5pt'> </span>into<span
style='letter-spacing:.55pt'> </span>next<span style='letter-spacing:.45pt'> </span>function<span
style='letter-spacing:.55pt'> </span>call<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>(F11)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>This will descend into the function call, hiding nothing
from you. If<span style='letter-spacing:4.0pt'> </span>this is the only action
you ever used, you would eventually see everything that gets executedwhich
sounds fun at first, but after youve been at it for an hour, youll have a
newfound respect for what Node and Express are doing for you!</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Step<span style='letter-spacing:.65pt'> </span>out<span
style='letter-spacing:.6pt'> </span>of<span style='letter-spacing:.55pt'> </span>current<span
style='letter-spacing:.6pt'> </span>function<span style='letter-spacing:.65pt'>
</span>(Shift-<span style='letter-spacing:-.2pt'>F11)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Will execute the rest of the function youre currently in
and resume debugging on the next line of the <i>caller </i>of this function.
Most commonly, youll use this when you either accidentally step into a
function or have seen as much as you need of the function.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In addition to all of the control actions, you have
access to a console: that console is executing in the <i>current context of
your application</i>. So you can inspect variables and even change them, or
invoke functions. This can be incredibly handy for trying out really simple
things, but it can quickly get confusing, so I dont encourage you to
dynamically modify your running application too much in this manner; its too
easy to get lost.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark872"></a><span style='color:#333333'>On the right, you have some
useful data. Starting at the top are <i>watch expressions</i>; these are
JavaScript expressions you can define that will be updated in real time as you
step through the application. For example, if there was a specific variable you
wanted to keep track of, you could enter<span style='letter-spacing:4.0pt'> </span>it
here.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark873"></a><span
style='color:#333333'>Below<span style='letter-spacing:.5pt'> </span>watch<span
style='letter-spacing:.55pt'> </span>expressions<span style='letter-spacing:
.5pt'> </span>is<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span><i>call<span style='letter-spacing:.5pt'> </span>stack</i>;<span
style='letter-spacing:.5pt'> </span>this<span style='letter-spacing:.55pt'> </span>shows<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span>how<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>got</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection421>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>where you are. That is, the function youre in was called
by some function, and that function was called by some function; the call stack
lists all of<span style='letter-spacing:4.0pt'> </span>those functions. In the
highly asynchronous world of Node, the call stack<span style='letter-spacing:
2.0pt'> </span>can<span style='letter-spacing:1.85pt'> </span>be<span
style='letter-spacing:1.75pt'> </span>very<span style='letter-spacing:1.85pt'> </span>difficult<span
style='letter-spacing:1.75pt'> </span>to<span style='letter-spacing:1.85pt'> </span>unravel<span
style='letter-spacing:1.75pt'> </span>and<span style='letter-spacing:1.85pt'> </span>understand,<span
style='letter-spacing:1.85pt'> </span>especially<span style='letter-spacing:
1.85pt'> </span>when anonymous functions are involved. The topmost entry in
that list is where you are now. The one right below it is the function that
called the function that youre in now, and so on. If you click any entry in
this list, you will be magically transported to that context: all of your
watches and your console context will now be in that context.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark874"></a><span style='color:#333333'>Below the call stack are
the scope variables. As the name implies, these<span style='letter-spacing:
4.0pt'> </span>are the variables that are currently in scope (which includes
variables in<span style='letter-spacing:4.0pt'> </span>the parent scope that
are visible to us). This section can often provide you<span style='letter-spacing:
4.0pt'> </span>a lot of information<span style='letter-spacing:1.45pt'> </span>about
the key<span style='letter-spacing:1.45pt'> </span>variables youre interested<span
style='letter-spacing:1.45pt'> </span>in<span style='letter-spacing:1.45pt'> </span>at
a glance. If you have a lot of variables, this list will become unwieldy, and
you might be better off defining just the variables youre interested in as
watch expressions.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Next,<span style='letter-spacing:1.45pt'> </span>there is
a list of all breakpoints,<span style='letter-spacing:1.45pt'> </span>which<span
style='letter-spacing:1.45pt'> </span>is really<span style='letter-spacing:
1.45pt'> </span>just bookkeeping: its handy to have if youre debugging a
hairy problem and you have a lot of breakpoints set. Clicking one will take you
directly there (but it wont change the context, like clicking something in the
call stack; this makes sense because not every breakpoint will represent an
active context, whereas everything in the call stack does).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>Sometimes, what you need to debug is your application
setup (when youre linking middleware into Express, for example). Running the
debugger as we have been, that will all happen in the blink of an eye before we
can even set a breakpoint. Fortunately, theres a way around that.<span
style='letter-spacing:.5pt'> </span>All<span style='letter-spacing:.5pt'> </span>we<span
style='letter-spacing:.45pt'> </span>have<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>do<span style='letter-spacing:.55pt'> </span>is<span
style='letter-spacing:.45pt'> </span>specify<span style='letter-spacing:.55pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>--inspect-brk<span
style='letter-spacing:-3.0pt'> </span></span><span style='color:#333333'>instead<span
style='letter-spacing:.5pt'> </span>of<span style='letter-spacing:.5pt'> </span>simply<span
style='letter-spacing:.5pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>-<span style='letter-spacing:-.5pt'>-</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"BIZ UDGothic",sans-serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection422>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333;letter-spacing:-.1pt'>inspect</span><span style='color:#333333;
letter-spacing:-.1pt'>:</span></p>

<p class=MsoBodyText><span style='font-size:18.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=center style='margin-right:1.55pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#3F3F3F;
background:#FBFBFB'>node<span style='letter-spacing:1.0pt'> </span>--inspect-brk<span
style='letter-spacing:1.05pt'> </span><span style='letter-spacing:-.1pt'>meadowlark.js</span> </span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The debugger will break on the very first line of your
application, and then you can step through or set breakpoints as you see fit.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><a
name="_bookmark875"></a><span style='color:#333333'>Chrome<span
style='letter-spacing:1.4pt'> </span>isnt<span style='letter-spacing:1.4pt'> </span>your<span
style='letter-spacing:1.4pt'> </span>only<span style='letter-spacing:1.5pt'> </span>option<span
style='letter-spacing:1.5pt'> </span>for<span style='letter-spacing:1.4pt'> </span>an<span
style='letter-spacing:1.5pt'> </span>inspect<span style='letter-spacing:1.4pt'>
</span>client.<span style='letter-spacing:1.5pt'> </span>In<span
style='letter-spacing:1.5pt'> </span>particular,<span style='letter-spacing:
1.5pt'> </span>if<span style='letter-spacing:1.4pt'> </span>you use Visual
Studio Code, its built-in debugger works very well. Instead of starting your
application with the </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>--inspect<span style='letter-spacing:-1.45pt'> </span></span><span
style='color:#333333'>or </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>--inspect-brk<span style='letter-spacing:-1.45pt'> </span></span><span
style='color:#333333'>options, click the Debug icon in the Visual Studio Code
side menu (a bug with a<span style='letter-spacing:4.0pt'> </span>line through
it). At the top of the sidebar, youll see a little gear icon; click that, and
that will open some debugging configuration settings. The only setting you need
to worry about is program; make sure its pointing to your entry point (<i>meadowlark.js</i>,
for example).</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;You may have to also set the current working directory, or &quot;cwd&quot;. For example, if youve opened Visual Studio Code in a parent directory of where meadowlark.js lives, you may need to set &quot;cwd&quot; (which is the same as having to cd into the right directory before running node meadowlark.js.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once youre all set up, just click the green Play arrow
in the debug bar,<span style='letter-spacing:2.0pt'> </span>and your debugger
is running. The interface is slightly different from Chromes, but if youre
using Visual Studio Code, you will probably feel </span><a
href="http://bit.ly/2pb7JBV"><span style='color:#333333;text-decoration:none'>right
at home. For more information, see </span><span style='color:#070707'>Debugging
in Visual Studio</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Code</span><span style='color:#333333;
letter-spacing:-.1pt;text-decoration:none'>.</span></a><a name="_bookmark877"></a></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Debugging<span style='letter-spacing:-.6pt'> </span>Asynchronous<span
style='letter-spacing:-.45pt'> </span><span style='letter-spacing:-.1pt'>Functions</span></span></h2>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection423>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Debugging_Express"></a><a name="_bookmark880"></a><a
name="Debugging_Asynchronous_Functions"></a><a name="_bookmark878"></a><a
name="_bookmark879"></a><span style='color:#333333'>One of the most common
frustrations people have when being exposed to asynchronous programming for the
first time is in debugging. Consider the following code, for example:</span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: 1	console.log('Baa, baa, black sheep,');&#13;&#10;2	fs.readFile('yes_sir_yes_sir.txt', (err, data) =&gt; {&#13;&#10;3	console.log('Have you any wool?');&#13;&#10;4	console.log(data);&#13;&#10;5 })&#13;&#10;6 console.log('Three bags full.')&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre new to asynchronous programming, you might
expect to see the <span style='letter-spacing:-.1pt'>following:</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: Baa, baa, black sheep, Have you any wool?&#13;&#10;Yes, sir, yes, sir, Three bags full.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>But<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span>wont;<span
style='letter-spacing:.5pt'> </span>instead<span style='letter-spacing:.55pt'> </span>youll<span
style='letter-spacing:.5pt'> </span>see<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.2pt'>this:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: Baa, baa, black sheep, Three bags full.&#13;&#10;Have you any wool? Yes, sir, yes, sir,&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:76.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>If youre confused about this, debugging probably wont
help. Youll start on line 1, then step over it, which puts you on line 2. You
then step in, expecting<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.4pt'> </span>enter<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>function,<span style='letter-spacing:
1.4pt'> </span>ending<span style='letter-spacing:1.4pt'> </span>up<span
style='letter-spacing:1.4pt'> </span>on<span style='letter-spacing:1.4pt'> </span>line<span
style='letter-spacing:1.35pt'> </span>3,<span style='letter-spacing:1.4pt'> </span>but<span
style='letter-spacing:1.35pt'> </span>you<span style='letter-spacing:1.4pt'> </span>actually<span
style='letter-spacing:1.4pt'> </span>end up<span style='letter-spacing:1.75pt'>
</span>on<span style='letter-spacing:1.75pt'> </span>line<span
style='letter-spacing:1.7pt'> </span>5!<span style='letter-spacing:1.7pt'> </span>Thats<span
style='letter-spacing:1.7pt'> </span>because<span style='letter-spacing:1.7pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs.readFile<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>executes<span
style='letter-spacing:1.7pt'> </span>the<span style='letter-spacing:1.7pt'> </span>function<span
style='letter-spacing:1.75pt'> </span>only <i>when its done reading the file</i>,
which wont happen until your application<span style='letter-spacing:4.0pt'> </span>is
idle. So you step over line 5, and you land on line 6you then keep<span
style='letter-spacing:2.0pt'> </span>trying to step, but never get to line 3
(you eventually will, but it could take<span style='letter-spacing:4.0pt'> </span>a
while).</span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection424>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you want to debug lines 3 or 4, all you have to do is
set a breakpoint on line<span style='letter-spacing:1.15pt'> </span>3,<span
style='letter-spacing:1.25pt'> </span>and<span style='letter-spacing:1.25pt'> </span>then<span
style='letter-spacing:1.25pt'> </span>let<span style='letter-spacing:1.15pt'> </span>the<span
style='letter-spacing:1.15pt'> </span>debugger<span style='letter-spacing:1.15pt'>
</span>run.<span style='letter-spacing:1.25pt'> </span>When<span
style='letter-spacing:1.25pt'> </span>the<span style='letter-spacing:1.15pt'> </span>file<span
style='letter-spacing:1.15pt'> </span>is<span style='letter-spacing:1.15pt'> </span>read<span
style='letter-spacing:1.25pt'> </span>and<span style='letter-spacing:1.25pt'> </span>the
function is invoked, youll break on that line, and hopefully all will be <span
style='letter-spacing:-.1pt'>clear.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Debugging<span style='letter-spacing:-.4pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark881"></a><span style='color:#333333'>If, like me, youve seen a
lot of overengineered frameworks in your<span style='letter-spacing:4.0pt'> </span>career,
the idea of stepping through the framework source code might sound like madness
(or torture) to you. And exploring the Express source code is not childs play,
but it <i>is </i>well within the grasp of anyone with a good understanding of
JavaScript and Node. And sometimes, when you<span style='letter-spacing:4.0pt'>
</span>are having problems with your code, debugging those problems can best<span
style='letter-spacing:4.0pt'> </span>be solved by stepping through the Express
source code itself (or third- party middleware).</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>This section will be a brief tour of the Express source
code so that you can be more effective in debugging your Express applications.
For each part of the tour, I will give you the filename with respect to the
Express root<span style='letter-spacing:4.0pt'> </span>(which<span
style='letter-spacing:1.95pt'> </span>you<span style='letter-spacing:1.95pt'> </span>can<span
style='letter-spacing:1.95pt'> </span>find<span style='letter-spacing:1.95pt'> </span>in<span
style='letter-spacing:1.95pt'> </span>your<span style='letter-spacing:1.9pt'> </span><i>node_modules/express<span
style='letter-spacing:1.9pt'> </span></i>directory),<span style='letter-spacing:
1.95pt'> </span>and<span style='letter-spacing:1.95pt'> </span>the name of the
function. Im not using line numbers, because of course they may differ
depending on what exact version of Express youre using:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:76.55pt;text-indent:-21.6pt'><i><span
style='font-size:14.0pt;color:#333333'>Express<span style='letter-spacing:-.95pt'>
</span>app<span style='letter-spacing:-.9pt'> </span>creation<span
style='letter-spacing:-.95pt'> </span>(lib/express.js,<span style='letter-spacing:
-.9pt'> </span></span></i><i><span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;
color:#333333'>function<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>createApplication</span></span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><a
name="_bookmark882"></a><span style='color:#333333'>This is where your Express
app begins its life. This is the function thats being invoked when you call </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>const app =
express()<span style='letter-spacing:-2.9pt'> </span></span><span
style='color:#333333'>in your <span style='letter-spacing:-.1pt'>code.</span></span></p>

<p class=MsoNormal style='margin-top:11.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Express<span style='letter-spacing:.7pt'> </span>app<span
style='letter-spacing:.8pt'> </span>initialization<span style='letter-spacing:
.75pt'> </span><span style='letter-spacing:-.1pt'>(lib/application.js,</span></span></i></p>

<p class=MsoNormal style='margin-top:1.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>app.defaultConfiguration</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark883"></a><span
style='color:#333333'>This<span style='letter-spacing:.4pt'> </span>is<span
style='letter-spacing:.4pt'> </span>where<span style='letter-spacing:.45pt'> </span>Express<span
style='letter-spacing:.4pt'> </span>gets<span style='letter-spacing:.4pt'> </span>initialized:<span
style='letter-spacing:.45pt'> </span>its<span style='letter-spacing:.4pt'> </span>a<span
style='letter-spacing:.4pt'> </span>good<span style='letter-spacing:.5pt'> </span>place<span
style='letter-spacing:.4pt'> </span>to<span style='letter-spacing:.5pt'> </span>see<span
style='letter-spacing:.4pt'> </span>all<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.25pt'>the</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection425>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>defaults Express starts out with. Its rarely necessary
to set a<span style='letter-spacing:4.0pt'> </span>breakpoint here, but it is
useful to step through it at least once to get a feel for the default Express
settings.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Add<span style='letter-spacing:1.05pt'> </span>middleware<span
style='letter-spacing:1.05pt'> </span>(lib/application.js,<span
style='letter-spacing:1.05pt'> </span></span></i><i><span style='font-size:
14.0pt;font-family:"Trebuchet MS",sans-serif;color:#333333;letter-spacing:-.1pt'>app.use</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark884"></a><span style='color:#333333'>Every time Express links
middleware in (whether you do it explicitly, or its explicitly done by Express
or any third parties), this function<span style='letter-spacing:2.0pt'> </span>gets
called. Its deceptively simple, but really understanding it takes some effort.
Its sometimes useful to put a breakpoint in here (youll want to use </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>--debug-brk<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>when
you run your app; otherwise, all the middleware will be added before you can
set a breakpoint), but it can be overwhelming: youll be surprised at how much
middleware is linked in in a typical application.</span></p>

<p class=MsoNormal style='margin-top:10.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Render<span style='letter-spacing:.85pt'> </span>view<span
style='letter-spacing:.9pt'> </span>(lib/application.js,<span style='letter-spacing:
.95pt'> </span></span></i><i><span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.1pt'>app.render</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:9.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark885"></a><span style='color:#333333'>This is another pretty
meaty function, but a useful one if you need to debug tricky view-related
issues. If you step through this function, youll see how the view engine is
selected and invoked.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Request<span style='letter-spacing:.8pt'> </span>extensions<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>(lib/request.js)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark886"></a><span style='color:#333333'>You will probably be
surprised at how sparse and easy to understand<span style='letter-spacing:2.0pt'>
</span>this file is. Most of the methods Express adds to the request objects
are very<span style='letter-spacing:2.0pt'> </span>simple<span
style='letter-spacing:1.95pt'> </span>convenience<span style='letter-spacing:
1.95pt'> </span>functions.<span style='letter-spacing:2.0pt'> </span>Its<span
style='letter-spacing:1.95pt'> </span>rarely<span style='letter-spacing:2.0pt'>
</span>necessary<span style='letter-spacing:2.0pt'> </span>to<span
style='letter-spacing:2.0pt'> </span>step through this code or set breakpoints
because of the simplicity of the code. It is, however, often helpful to look at
this code to understand<span style='letter-spacing:4.0pt'> </span>how some of
the Express convenience methods work.</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Send<span style='letter-spacing:.9pt'> </span>response<span
style='letter-spacing:.9pt'> </span>(lib/response.js,<span style='letter-spacing:
.95pt'> </span></span></i><i><span style='font-size:14.0pt;font-family:"Trebuchet MS",sans-serif;
color:#333333;letter-spacing:-.1pt'>res.send</span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:8.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark887"></a><span
style='color:#333333'>It<span style='letter-spacing:.6pt'> </span>almost<span
style='letter-spacing:.65pt'> </span>doesnt<span style='letter-spacing:.6pt'> </span>matter<span
style='letter-spacing:.65pt'> </span>how<span style='letter-spacing:.6pt'> </span>you<span
style='letter-spacing:.7pt'> </span>construct<span style='letter-spacing:.6pt'>
</span>a<span style='letter-spacing:.65pt'> </span>response</span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>.send</span><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:108%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>.render</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>.json</span><span style='color:#333333'>, or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>.jsonp</span><span
style='color:#333333'>it will eventually get to this function (the exception
is </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>.sendFile</span><span
style='color:#333333'>). So this is a handy place to set a breakpoint, because<span
style='letter-spacing:1.35pt'> </span>it<span style='letter-spacing:1.35pt'> </span>should<span
style='letter-spacing:1.45pt'> </span>be<span style='letter-spacing:1.35pt'> </span>called<span
style='letter-spacing:1.45pt'> </span>for<span style='letter-spacing:1.35pt'> </span>every<span
style='letter-spacing:1.45pt'> </span>response.<span style='letter-spacing:
1.45pt'> </span>You<span style='letter-spacing:1.45pt'> </span>can<span
style='letter-spacing:1.45pt'> </span>then<span style='letter-spacing:1.45pt'> </span>use<span
style='letter-spacing:1.35pt'> </span>the call<span style='letter-spacing:1.25pt'>
</span>stack<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>see<span style='letter-spacing:1.25pt'> </span>how<span
style='letter-spacing:1.25pt'> </span>you<span style='letter-spacing:1.35pt'> </span>got<span
style='letter-spacing:1.25pt'> </span>there,<span style='letter-spacing:1.35pt'>
</span>which<span style='letter-spacing:1.35pt'> </span>can<span
style='letter-spacing:1.35pt'> </span>be<span style='letter-spacing:1.25pt'> </span>helpful<span
style='letter-spacing:1.25pt'> </span>in<span style='letter-spacing:1.35pt'> </span>figuring
out where there might be a problem.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Response<span style='letter-spacing:.9pt'> </span>extensions<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>(lib/response.js)</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection426>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>While there is some meat in </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>res.send</span><span
style='color:#333333'>, most of the other methods in the response object are
pretty straightforward. Its occasionally useful to put breakpoints in these
functions to see exactly how your app is responding to the request.</span></p>

<p class=MsoNormal style='margin-top:10.8pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:110%'><i><span
style='font-size:14.0pt;line-height:110%;color:#333333'>Static middleware
(node_modules/serve-static/index.js, </span></i><i><span style='font-size:14.0pt;
line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333'>function <span
style='letter-spacing:-.15pt'>s</span><span style='letter-spacing:-.15pt'>t</span><span
style='letter-spacing:-.15pt'>a</span><span style='letter-spacing:-.15pt'>t</span><span
style='letter-spacing:-.15pt'>i</span><span style='letter-spacing:-.15pt'>c</span><span
style='letter-spacing:-.15pt'>M</span><span style='letter-spacing:-.15pt'>i</span><span
style='letter-spacing:-.15pt'>dd</span><span style='letter-spacing:-.15pt'>l</span><span
style='letter-spacing:-.15pt'>e</span><span style='letter-spacing:-.15pt'>w</span><span
style='letter-spacing:-.15pt'>a</span><span style='letter-spacing:-.15pt'>r</span><span
style='letter-spacing:-.15pt'>e</span></span></i><i><span style='font-size:
14.0pt;line-height:110%;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:7.15pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark888"></a><span style='color:#333333'>Generally, if static files
arent being served as you expect, the problem<span style='letter-spacing:2.0pt'>
</span>is with your routing, not with the static middleware: routing takes
precedence over the static middleware. So if you have a file <i>public/test.jpg</i>,
and a route <i>/test.jpg</i>, the static middleware will never even get called
in deference to the route. However, if you need<span style='letter-spacing:
4.0pt'> </span>specifics about how headers are set differently for static
files, it can be useful to step through the static middleware.</span></p>

<p class=MsoBodyText style='margin-top:12.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If youre scratching your head wondering where all the
middleware is, thats because there is very little middleware in Express (the
static middleware and the router being the notable exceptions).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Just as its helpful to dive into the Express source code
when youre trying to<span style='letter-spacing:1.4pt'> </span>unravel<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.35pt'> </span>difficult<span
style='letter-spacing:1.35pt'> </span>problem,<span style='letter-spacing:1.4pt'>
</span>you<span style='letter-spacing:1.4pt'> </span>may<span style='letter-spacing:
1.4pt'> </span>have<span style='letter-spacing:1.35pt'> </span>to<span
style='letter-spacing:1.4pt'> </span>look<span style='letter-spacing:1.4pt'> </span>into<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.35pt'> </span>source<span
style='letter-spacing:1.35pt'> </span>code of your middleware. Theres really
too much to go through, but there are three I want to mention as being pretty
fundamental to understanding<span style='letter-spacing:4.0pt'> </span>whats
going on in an Express application:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:110%'><i><span
style='font-size:14.0pt;line-height:110%;color:#333333'>Session middleware
(node_modules/express-session/index.js, </span></i><i><span style='font-size:
14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;color:#333333'>function<span
style='letter-spacing:2.0pt'> </span><span style='letter-spacing:-.1pt'>session</span></span></i><i><span
style='font-size:14.0pt;line-height:110%;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText style='margin-top:7.2pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark889"></a><span style='color:#333333'>A lot goes into making
sessions work, but the code is pretty straightforward. You may want to set a
breakpoint in this function if youre having issues that are related to
sessions. Keep in mind that it is up to you to provide the storage engine for
the session middleware.</span></p>

<p class=MsoNormal align=right style='margin-top:10.6pt;margin-right:81.2pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:right'><i><span
style='font-size:14.0pt;color:#333333'>Logger<span style='letter-spacing:1.8pt'>
</span>middleware<span style='letter-spacing:1.8pt'> </span>(node_modules/morgan/index.js,<span
style='letter-spacing:1.9pt'> </span></span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>function<span
style='letter-spacing:1.1pt'> </span><span style='letter-spacing:-.1pt'>logger</span></span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>)</span></i></p>

<p class=MsoBodyText align=right style='margin-top:9.0pt;margin-right:82.75pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:right'><a
name="_bookmark890"></a><span style='color:#333333'>The<span style='letter-spacing:
.45pt'> </span>logger<span style='letter-spacing:.5pt'> </span>middleware<span
style='letter-spacing:.5pt'> </span>is<span style='letter-spacing:.5pt'> </span>really<span
style='letter-spacing:.55pt'> </span>there<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.5pt'> </span>you<span style='letter-spacing:.55pt'> </span>as<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.5pt'> </span>debugging<span
style='letter-spacing:.55pt'> </span>aid,<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>not</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection427>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark894"></a><span style='color:#333333'>to be debugged itself.
However, theres some subtlety to the way logging works that youll get only by
stepping through the logger middleware once or twice. The first time I did it,
I had a lot of aha moments, and found myself using logging more effectively
in my applications, so I recommend taking a tour of this middleware at least <span
style='letter-spacing:-.1pt'>once.</span></span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:110%'><i><span
style='font-size:14.0pt;line-height:110%;color:#333333'>URL-encoded body
parsing (node_modules/body- </span></i><i><span style='font-size:14.0pt;
line-height:110%;color:#333333'>parser/lib/types/urlencoded.js, </span></i><i><span
style='font-size:14.0pt;line-height:110%;font-family:"Trebuchet MS",sans-serif;
color:#333333'>function urlencoded</span></i><i><span style='font-size:14.0pt;
line-height:110%;color:#333333'>)</span></i></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark891"></a><span style='color:#333333'>The manner in which request
bodies are parsed is often a mystery to people. Its not really that
complicated, and stepping through this middleware will help you understand the
way HTTP requests work. Aside from a learning experience, you wont find that you
need to step into this middleware for debugging very often.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<h2 style='margin-top:9.6pt'><a name="_bookmark892"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Weve discussed a <i>lot </i>of middleware in this book.
I cant reasonably list every landmark you might want to look at on your tour
of Express<span style='letter-spacing:4.0pt'> </span>internals, but hopefully
these highlights take away some of the mystery of Express, and embolden you to
explore the framework source code<span style='letter-spacing:2.0pt'> </span>whenever
needed. Middleware varies greatly not just in quality but in accessibility:
some middleware is wickedly difficult to understand, while some is as clear as
a pool of water. Whatever the case, dont be afraid to look: if its too
complicated, you can move on (unless you really need to understand it, of
course), and if not, you might learn something<a name="_bookmark893"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection428>

<h1><a name="21._Going_Live"></a><a name="Domain_Registration_and_Hosting"></a><a
name="_bookmark895"></a>Chapter<span style='letter-spacing:.6pt'> </span>21.<span
style='letter-spacing:.6pt'> </span>Going<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.2pt'>Live</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark896"></a><span style='color:#333333'>The big day is here: youve
spent weeks or months toiling over your labor of<span style='letter-spacing:
1.2pt'> </span>love,<span style='letter-spacing:1.25pt'> </span>and<span
style='letter-spacing:1.25pt'> </span>now<span style='letter-spacing:1.2pt'> </span>your<span
style='letter-spacing:1.2pt'> </span>website<span style='letter-spacing:1.2pt'>
</span>or<span style='letter-spacing:1.2pt'> </span>service<span
style='letter-spacing:1.2pt'> </span>is<span style='letter-spacing:1.2pt'> </span>ready<span
style='letter-spacing:1.25pt'> </span>to<span style='letter-spacing:1.25pt'> </span>launch.<span
style='letter-spacing:1.25pt'> </span>Its<span style='letter-spacing:1.2pt'> </span>not<span
style='letter-spacing:1.2pt'> </span>as easy as just flipping a switch and
then your website is liveor is it?</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In this chapter (which you should really read <i>weeks </i>before
launch, not the day of!), youll learn about some of the domain registration
and hosting services available to you, techniques for moving from a staging<span
style='letter-spacing:2.0pt'> </span>environment to production, deployment
techniques, and things to consider when picking production services.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Domain<span style='letter-spacing:-.3pt'> </span>Registration<span
style='letter-spacing:-.3pt'> </span>and<span style='letter-spacing:-.3pt'> </span><span
style='letter-spacing:-.1pt'>Hosting</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark897"></a><span style='color:#333333'>People <a
name="_bookmark898"></a>are often confused about the difference between <i>domain<span
style='letter-spacing:2.0pt'> </span>registration </i>and <i>hosting</i>. If
youre reading this book, you probably arent, but I bet you<span
style='letter-spacing:1.4pt'> </span>know people who<span style='letter-spacing:
1.4pt'> </span>are,<span style='letter-spacing:1.4pt'> </span>like your clients
or your manager.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark899"></a><span style='color:#333333'>Every website and service
on the internet can be identified by an <i>Internet Protocol (IP) address </i>(or
more than one). These numbers are not particularly friendly to humans (and that
situation will only get worse as IPv6 adoption improves), but your computer
ultimately needs these numbers to show you a web page. Thats where <i>domain
names </i>come in. They map a human-friendly name (like <i>google.com</i>) with
an IP address (74.125.239.13 or 2601:1c2:1902:5b38:c256:27ff:fe70:47d1).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>A real-world analogy would be the difference between a
business name and a physical address. A domain name is like your business name</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection429>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name=Security></a><a name="_bookmark901"></a><span style='color:#333333'>(Apple),
and an IP address is like your physical address (One Apple Park Way, Cupertino,
CA 95014). If you need to actually get in your car and visit Apples
headquarters, youll need to know the physical address.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Fortunately, if you know the business name, you can
probably get the physical address. The other reason this abstraction is helpful
is that an organization can move (getting a new physical address), and people
can<span style='letter-spacing:4.0pt'> </span>still find it even though its
moved (as a matter of fact, Apple <i>did </i>move its physical headquarters
between<span style='letter-spacing:1.5pt'> </span>the first and<span
style='letter-spacing:1.5pt'> </span>second<span style='letter-spacing:1.5pt'> </span>editions
of this book).</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>Hosting</span></i><span style='color:#333333'>, on the
other hand, describes the computers that run your website. To continue the
physical analogy, hosting could be compared to the buildings you see once you
reach the physical address. What is often confusing to people is that domain
registration has very little to do with hosting,<span style='letter-spacing:
1.6pt'> </span>and<span style='letter-spacing:1.6pt'> </span>you<span
style='letter-spacing:1.6pt'> </span>do<span style='letter-spacing:1.6pt'> </span>not<span
style='letter-spacing:1.55pt'> </span>always<span style='letter-spacing:1.55pt'>
</span>purchase<span style='letter-spacing:1.55pt'> </span>your<span
style='letter-spacing:1.55pt'> </span>domain<span style='letter-spacing:1.6pt'>
</span>from<span style='letter-spacing:1.55pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>same entity that you pay for hosting (in
the same way that you usually buy land from<span style='letter-spacing:1.55pt'>
</span>one<span style='letter-spacing:1.55pt'> </span>person<span
style='letter-spacing:1.65pt'> </span>and<span style='letter-spacing:1.65pt'> </span>pay<span
style='letter-spacing:1.65pt'> </span>another<span style='letter-spacing:1.55pt'>
</span>person<span style='letter-spacing:1.65pt'> </span>to<span
style='letter-spacing:1.65pt'> </span>build<span style='letter-spacing:1.65pt'>
</span>and<span style='letter-spacing:1.65pt'> </span>maintain<span
style='letter-spacing:1.65pt'> </span>buildings for you).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:78.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark900"></a><span style='color:#333333'>While its certainly
possible to host your website without a domain name, its quite unfriendly: IP
addresses arent very marketable! Usually, when you purchase hosting, youre
automatically assigned a subdomain (which well<span style='letter-spacing:
.9pt'> </span>cover<span style='letter-spacing:.9pt'> </span>in<span
style='letter-spacing:1.0pt'> </span>a<span style='letter-spacing:.9pt'> </span>moment),<span
style='letter-spacing:1.0pt'> </span>which<span style='letter-spacing:1.0pt'> </span>can<span
style='letter-spacing:1.0pt'> </span>be<span style='letter-spacing:.9pt'> </span>thought<span
style='letter-spacing:.9pt'> </span>of<span style='letter-spacing:.9pt'> </span>as<span
style='letter-spacing:.9pt'> </span>something<span style='letter-spacing:1.0pt'>
</span>between a marketing-friendly domain name and an IP address (for example,
<i>ec2-<span style='letter-spacing:2.0pt'> </span><span style='letter-spacing:
-.1pt'>54-201-235-192.us-west-2.compute.amazonaws.com</span></i><span
style='letter-spacing:-.1pt'>).</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Once you have a domain, and you go live, you could reach
your website with multiple URLs. For example:</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:4.8pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:16000512'><span style='left:0px;position:absolute;
left:169px;top:-334516px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:16001024'><span style='left:0px;position:absolute;
left:169px;top:-334516px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
href="http://meadowlarktravel.com/"><i><span style='font-size:14.0pt;
line-height:170%;color:#333333;letter-spacing:-.1pt;text-decoration:none'>http://meadowlarktravel.com/</span></i></a><i><span
style='font-size:14.0pt;line-height:170%;color:#333333;letter-spacing:-.1pt'> </span></i><a
href="http://www.meadowlarktravel.com/"><i><span style='font-size:14.0pt;
line-height:170%;color:#333333;letter-spacing:-.1pt;text-decoration:none'>http://www.meadowlarktravel.com/</span></i></a></p>

</div>

<span style='font-size:14.0pt;line-height:170%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection430>

<p class=MsoNormal style='margin-top:3.6pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:16001536'><span style='left:0px;position:absolute;
left:169px;top:-334597px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><span
style='position:relative;z-index:16002048'><span style='left:0px;position:absolute;
left:169px;top:-334597px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image039.gif"></span></span><a
href="http://ec2-54-201-235-192.us-west-2.compute.amazonaws.com/"><i><span
style='font-size:14.0pt;line-height:170%;color:#333333;letter-spacing:-.1pt;
text-decoration:none'>http://ec2-54-201-235-192.us-west-2.compute.amazonaws.com/</span></i></a><i><span
style='font-size:14.0pt;line-height:170%;color:#333333;letter-spacing:4.0pt'> </span></i><a
href="http://54.201.235.192/"><i><span style='font-size:14.0pt;line-height:
170%;color:#333333;letter-spacing:-.1pt;text-decoration:none'>http://54.201.235.192/</span></i></a></p>

<p class=MsoBodyText style='margin-top:2.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Thanks to domain mapping, all of these addresses point to
the same website. Once the requests reach your website, it is possible to take
action based on the URL that was used. For example, if someone gets to your
website from the IP address, you could automatically redirect to the<span
style='letter-spacing:4.0pt'> </span>domain name, though that is not very
common as there is little point to it<span style='letter-spacing:4.0pt'> </span>(it
is more common to redirect from </span><a href="http://meadowlarktravel.com/"><i><span
style='color:#333333;text-decoration:none'>http://meadowlarktravel.com/</span></i></a><i><span
style='color:#333333'> </span></i><span style='color:#333333'>to </span><a
href="http://www.meadowlarktravel.com/)"><i><span style='color:#333333;
letter-spacing:-.1pt;text-decoration:none'>http://www.meadowlarktravel.com/</span></i><span
style='color:#333333;letter-spacing:-.1pt;text-decoration:none'>).</span></a></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Most domain registrars offer hosting services (or partner
with companies<span style='letter-spacing:2.0pt'> </span>that do). Aside from
AWS, Ive never found registrar hosting options to be particularly attractive,
and its okay to separate domain registration and <span style='letter-spacing:
-.1pt'>hosting.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Domain_Name_System"></a><a name="_bookmark902"></a><span
style='color:#3F3F3F'>Domain<span style='letter-spacing:-.2pt'> </span>Name<span
style='letter-spacing:-.15pt'> </span><span style='letter-spacing:-.1pt'>System</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark903"></a><span style='color:#333333'>The <i>Domain Name System </i>(DNS)
is whats responsible for mapping domain names to IP addresses. The system is
fairly intricate, but there are some things about DNS that you should know as a
website owner.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Security</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark904"></a><span style='color:#333333'>You should always keep in
mind that <i>domain names are valuable</i>. If a hacker were to completely
compromise your hosting service and take control of your hosting, but you
retained control of your domain, you<span style='letter-spacing:4.0pt'> </span>could
get new hosting and redirect the domain. If, on the other hand, your <i>domain </i>were
compromised, you could be in real trouble. Your reputation<span
style='letter-spacing:4.0pt'> </span>is tied to your domain, and good domain
names are carefully guarded.</span></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>People<span
style='letter-spacing:.45pt'> </span>who<span style='letter-spacing:.55pt'> </span>have<span
style='letter-spacing:.5pt'> </span>lost<span style='letter-spacing:.5pt'> </span>control<span
style='letter-spacing:.5pt'> </span>of<span style='letter-spacing:.45pt'> </span>domains<span
style='letter-spacing:.5pt'> </span>have<span style='letter-spacing:.5pt'> </span>found<span
style='letter-spacing:.55pt'> </span>that<span style='letter-spacing:.5pt'> </span>it<span
style='letter-spacing:.5pt'> </span>can<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>be</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection431>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>devastating, and there are those in the world who will
actively try to compromise your domain (especially if its a particularly short
or memorable one) so they can sell it off, ruin your reputation, or blackmail
you. The upshot is that <i>you should take domain security very seriously</i>,
perhaps even more seriously than your data (depending on how valuable your data
is). Ive seen people spend inordinate amounts of time and money on hosting
security while getting the cheapest, sketchiest domain registration they can
find. Dont make that mistake. (Fortunately, quality domain registration is not
particularly expensive.)</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark905"></a><span style='color:#333333'>Given the importance of
protecting ownership of your domain, you should employ good security practices
with respect to your domain registration.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>At the very least, you should use strong, unique
passwords, and employ proper password hygiene (no keeping it on a sticky note
attached to your monitor). Preferably, you should use a registrar that offers
two-factor authentication.<span style='letter-spacing:1.95pt'> </span>Dont<span
style='letter-spacing:1.85pt'> </span>be<span style='letter-spacing:1.85pt'> </span>afraid<span
style='letter-spacing:1.95pt'> </span>to<span style='letter-spacing:1.95pt'> </span>ask<span
style='letter-spacing:1.95pt'> </span>your<span style='letter-spacing:1.85pt'> </span>registrar<span
style='letter-spacing:1.85pt'> </span>pointed<span style='letter-spacing:1.95pt'>
</span>questions about<span style='letter-spacing:.85pt'> </span>what<span
style='letter-spacing:.85pt'> </span>is<span style='letter-spacing:.85pt'> </span>required<span
style='letter-spacing:.9pt'> </span>to<span style='letter-spacing:.9pt'> </span>authorize<span
style='letter-spacing:.85pt'> </span>changes<span style='letter-spacing:.85pt'>
</span>to<span style='letter-spacing:.9pt'> </span>your<span style='letter-spacing:
.85pt'> </span>account.<span style='letter-spacing:.9pt'> </span>The<span
style='letter-spacing:.85pt'> </span>registrars I recommend are AWS Route 53,
Name.com and Namecheap.com. All<span style='letter-spacing:4.0pt'> </span>three
offer two-factor authentication, and I have found their support to be good and their
online control panels to be easy and robust.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When you register a domain, you must provide a
third-party email address thats associated with that domain (i.e., if youre
registering <i>meadowlarktravel.com</i>, you shouldnt use </span><a
href="mailto:admin@meadowlarktravel.com"><i><span style='color:#333333;
text-decoration:none'>admin@meadowlarktravel.com</span></i></a><i><span
style='color:#333333;letter-spacing:2.0pt'> </span></i><span style='color:#333333'>as
your registrant email). Since any security system is as strong as its weakest<span
style='letter-spacing:1.5pt'> </span>link,<span style='letter-spacing:1.6pt'> </span>you<span
style='letter-spacing:1.6pt'> </span>should<span style='letter-spacing:1.6pt'> </span>use<span
style='letter-spacing:1.5pt'> </span>an<span style='letter-spacing:1.6pt'> </span>email<span
style='letter-spacing:1.5pt'> </span>address<span style='letter-spacing:1.5pt'>
</span>with<span style='letter-spacing:1.6pt'> </span>good<span
style='letter-spacing:1.6pt'> </span>security.<span style='letter-spacing:1.6pt'>
</span>Its quite common to use a Gmail or Outlook account, and if you do, you<span
style='letter-spacing:4.0pt'> </span>should employ the same security standards
as you do with your domain registrar account (good password hygiene and
two-factor authentication).</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection432>

<h3 style='margin-top:3.45pt'><a name=Subdomains></a><a name="_bookmark912"></a><a
name="Top-Level_Domains"></a><a name="_bookmark906"></a><span style='color:
#3F3F3F'>Top-Level<span style='letter-spacing:-.45pt'> </span><span
style='letter-spacing:-.1pt'>Domains</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark908"></a><span style='color:#333333'>What your domain ends with
(such as <i>.com </i>or <i>.net</i>) is called a <i>top-level- domain </i>(TLD).
Generally speaking, there are two types of TLD: <a name="_bookmark907"></a>country
code TLDs and<span style='letter-spacing:1.05pt'> </span>general TLDs.<span
style='letter-spacing:1.05pt'> </span>Country<span style='letter-spacing:1.05pt'>
</span>code TLDs (such<span style='letter-spacing:1.05pt'> </span>as <i>.us</i>,<span
style='letter-spacing:1.05pt'> </span><i>.es</i>,<span style='letter-spacing:
1.05pt'> </span>and</span></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>.uk</span></i><span style='color:#333333'>) are designed
to provide a geographic categorization. However, there are few restrictions on
who can acquire these TLDs (the internet is truly a global network, after all),
so they are often used for clever domains,<span style='letter-spacing:4.0pt'>
</span>such as <i>placehold.it </i>and <i>goo.gl</i>.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><a name="_bookmark909"></a><span
style='font-size:14.0pt;color:#333333'>General<span style='letter-spacing:.5pt'>
</span>TLDs<span style='letter-spacing:.55pt'> </span>(gTLDs)<span
style='letter-spacing:.55pt'> </span>include<span style='letter-spacing:.55pt'>
</span>the<span style='letter-spacing:.55pt'> </span>familiar<span
style='letter-spacing:.55pt'> </span><i>.com</i>,<span style='letter-spacing:
.6pt'> </span><i>.net</i>,<span style='letter-spacing:.6pt'> </span><i>.gov</i>,<span
style='letter-spacing:.6pt'> </span><i>.fed</i>,<span style='letter-spacing:
.6pt'> </span><i>.mil</i>,<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>and</span></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>.edu</span></i><span style='color:#333333'>. While anyone
can acquire an available <i>.com </i>or <i>.net </i>domain, there are
restrictions in place for the others mentioned. For more information, see </span><a
href="#_bookmark910"><span style='color:#070707'>Table 21-1</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><a name="_bookmark910"></a><i><span
style='font-size:14.0pt'>Table<span style='letter-spacing:.6pt'> </span>21-1.<span
style='letter-spacing:.7pt'> </span>Restricted<span style='letter-spacing:.7pt'>
</span><span style='letter-spacing:-.2pt'>gTLDs</span></span></i></p>

<p class=MsoBodyText style='margin-top:.4pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=177 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=547 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image089.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.05pt'><i><span style='font-size:3.0pt'>&nbsp;</span></i></p>

</div>

<span style='font-size:3.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection433>

<p class=MsoNormal style='margin-top:3.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:62.15pt;margin-bottom:.0001pt'><i><span style='font-size:10.5pt;
letter-spacing:-.2pt'>.gov</span></i></p>

<p class=MsoNormal style='margin-top:.9pt;margin-right:0cm;margin-bottom:0cm;
margin-left:62.15pt;margin-bottom:.0001pt'><span style='font-size:10.5pt'>,</span></p>

<p class=MsoNormal style='margin-top:.9pt;margin-right:0cm;margin-bottom:0cm;
margin-left:62.15pt;margin-bottom:.0001pt'><i><span style='font-size:10.5pt;
letter-spacing:-.2pt'>.fed</span></i></p>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all>
</span>

<p class=MsoNormal style='margin-top:3.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:14.95pt;margin-bottom:.0001pt'><a href="https://www.dotgov.gov/"><i><span
style='font-size:10.5pt;color:#070707;letter-spacing:-.1pt'>https://www.dotgov.gov</span></i></a></p>

</div>

<span style='font-size:10.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:auto'>
</span>

<div class=WordSection434>

<p class=MsoBodyText style='margin-top:.3pt'><i><span style='font-size:6.5pt'>&nbsp;</span></i></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=551 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image090.gif"></span></p>

<p class=MsoNormal style='margin-top:5.75pt;margin-right:129.25pt;margin-bottom:
0cm;margin-left:97.45pt;margin-bottom:.0001pt;text-indent:-35.3pt;line-height:
106%'><i><span style='font-size:10.5pt;line-height:106%;letter-spacing:-.2pt'>.mil</span></i><i><span
style='font-size:10.5pt;line-height:106%'> </span></i><span
style='font-size:10.5pt;line-height:106%'>Military personnel and contractors
should contact their IT department, or the </span><a
href="http://bit.ly/354JvZF"><span style='font-size:10.5pt;line-height:106%;
color:#070707'>Department of Defense Unified Registration System</span></a></p>

<p class=MsoBodyText style='margin-top:.05pt'><br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:12.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark911"></a><span style='color:#333333'>The Internet Corporation
for Assigned Names and Numbers (ICANN) is ultimately responsible for management
of TLDs, though it delegates much of the actual administration to other
organizations. Recently, the ICANN<span style='letter-spacing:2.0pt'> </span>has
authorized many new gTLDs, such as <i>.agency</i>, <i>.florist</i>, <i>.recipes</i>,
and even <i>.ninja</i>. For the foreseeable future, <i>.com </i>will probably
remain the premium TLD, and the hardest one to get real estate in. People who</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection435>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name=Nameservers></a><a name="_bookmark914"></a><span style='color:#333333'>were
lucky (or shrewd) enough to purchase <i>.com </i>domains in the internets
formative years received massive payouts for prime domains (for example,
Facebook<span style='letter-spacing:1.7pt'> </span>purchased<span
style='letter-spacing:1.7pt'> </span><i>fb.com </i>in<span style='letter-spacing:
1.7pt'> </span>2010<span style='letter-spacing:1.7pt'> </span>for a whopping<span
style='letter-spacing:1.7pt'> </span>$8.5<span style='letter-spacing:1.7pt'> </span>million<span
style='letter-spacing:1.7pt'> </span>dollars).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:75.85pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Given<span style='letter-spacing:1.7pt'> </span>the
scarcity<span style='letter-spacing:1.7pt'> </span>of <i>.com </i>domains,<span
style='letter-spacing:1.7pt'> </span>people are turning<span style='letter-spacing:
1.7pt'> </span>to<span style='letter-spacing:1.7pt'> </span>alternative TLDs,
or using <i>.com.us </i>to try to get a domain that accurately reflects their
organization. When picking a domain, you should consider how its going to<span
style='letter-spacing:1.7pt'> </span>be<span style='letter-spacing:1.6pt'> </span>used.<span
style='letter-spacing:1.7pt'> </span>If<span style='letter-spacing:1.6pt'> </span>you<span
style='letter-spacing:1.7pt'> </span>plan<span style='letter-spacing:1.7pt'> </span>on<span
style='letter-spacing:1.7pt'> </span>marketing<span style='letter-spacing:1.7pt'>
</span>primarily<span style='letter-spacing:1.7pt'> </span>electronically<span
style='letter-spacing:1.7pt'> </span>(where people are more likely to click a
link than type in a domain), then you should<span style='letter-spacing:1.8pt'>
</span>probably<span style='letter-spacing:1.8pt'> </span>focus<span
style='letter-spacing:1.7pt'> </span>more<span style='letter-spacing:1.7pt'> </span>on<span
style='letter-spacing:1.8pt'> </span>getting<span style='letter-spacing:1.8pt'>
</span>a<span style='letter-spacing:1.7pt'> </span>catchy<span
style='letter-spacing:1.8pt'> </span>or<span style='letter-spacing:1.7pt'> </span>meaningful<span
style='letter-spacing:1.7pt'> </span>domain than<span style='letter-spacing:
1.45pt'> </span>a short one.<span style='letter-spacing:1.45pt'> </span>If
youre focusing<span style='letter-spacing:1.45pt'> </span>on<span
style='letter-spacing:1.45pt'> </span>print advertising,<span style='letter-spacing:
1.45pt'> </span>or you<span style='letter-spacing:1.45pt'> </span>have reason
to believe people will be entering your URL manually into their devices, you
might consider alternative TLDs so you can get a shorter domain name. Its also
common practice to have two domains: a short, easy-to-type one, and a longer
one more suitable for marketing.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Subdomains</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:78.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark913"></a><span style='color:#333333'>Whereas<span
style='letter-spacing:1.45pt'> </span>a<span style='letter-spacing:1.45pt'> </span>TLD<span
style='letter-spacing:1.45pt'> </span>goes<span style='letter-spacing:1.45pt'> </span>after<span
style='letter-spacing:1.45pt'> </span>your<span style='letter-spacing:1.45pt'> </span>domain,<span
style='letter-spacing:1.5pt'> </span>a<span style='letter-spacing:1.45pt'> </span>subdomain<span
style='letter-spacing:1.5pt'> </span>goes<span style='letter-spacing:1.45pt'> </span>before<span
style='letter-spacing:1.45pt'> </span>it.<span style='letter-spacing:1.5pt'> </span>By
far, the most common subdomain is </span><a href="http://www/"><i><span
style='color:#333333;text-decoration:none'>www</span></i><span
style='color:#333333;text-decoration:none'>.</span></a><span style='color:#333333'>
Ive never particularly cared for this subdomain. After all, youre at a
computer, <i>using </i>the World Wide<span style='letter-spacing:4.0pt'> </span>Web;
Im pretty<span style='letter-spacing:1.15pt'> </span>sure youre not going<span
style='letter-spacing:1.15pt'> </span>to<span style='letter-spacing:1.15pt'> </span>be
confused<span style='letter-spacing:1.15pt'> </span>if there isnt a <i>www<span
style='letter-spacing:2.0pt'> </span></i>to<span style='letter-spacing:1.5pt'> </span>remind<span
style='letter-spacing:1.5pt'> </span>you<span style='letter-spacing:1.5pt'> </span>of<span
style='letter-spacing:1.45pt'> </span>what<span style='letter-spacing:1.45pt'> </span>youre<span
style='letter-spacing:1.45pt'> </span>doing.<span style='letter-spacing:1.5pt'>
</span>For<span style='letter-spacing:1.45pt'> </span>this<span
style='letter-spacing:1.45pt'> </span>reason,<span style='letter-spacing:1.5pt'>
</span>I<span style='letter-spacing:1.45pt'> </span>recommend<span
style='letter-spacing:1.5pt'> </span>using no subdomain for your primary
domain: </span><a href="http://meadowlarktravel.com/"><i><span
style='color:#333333;text-decoration:none'>http://meadowlarktravel.com/</span></i></a><i><span
style='color:#333333'> </span></i><span style='color:#333333'>instead of </span><a
href="http://www.meadowlarktravel.com/"><i><span style='color:#333333;
text-decoration:none'>http://www.meadowlarktravel.com/</span></i><span
style='color:#333333;text-decoration:none'>.</span></a><span style='color:#333333'>
Its shorter and less busy,<span style='letter-spacing:2.0pt'> </span>and
thanks to redirects, theres no danger of losing visits from people who
automatically start everything with </span><a href="http://www/"><i><span
style='color:#333333;text-decoration:none'>www</span></i><span
style='color:#333333;text-decoration:none'>.</span></a></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>Subdomains<span
style='letter-spacing:.55pt'> </span>are<span style='letter-spacing:.55pt'> </span>used<span
style='letter-spacing:.65pt'> </span>for<span style='letter-spacing:.55pt'> </span>other<span
style='letter-spacing:.6pt'> </span>purposes<span style='letter-spacing:.55pt'>
</span>too.<span style='letter-spacing:.65pt'> </span>I<span style='letter-spacing:
.55pt'> </span>commonly<span style='letter-spacing:.65pt'> </span>see<span
style='letter-spacing:.55pt'> </span>things<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.2pt'>like</span></span></p>

<p class=MsoNormal style='margin-top:5.5pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>blogs.meadowlarktravel.com</span></i><span style='font-size:
14.0pt;color:#333333'>,<span style='letter-spacing:2.55pt'> </span><i>api.meadowlarktravel.com</i>,<span
style='letter-spacing:2.55pt'> </span><span style='letter-spacing:-.25pt'>and</span></span></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection436>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>m.meadowlarktravel.com </span></i><span style='color:
#333333'>(for a mobile site). Often this is done for<span style='letter-spacing:
4.0pt'> </span>technical reasons: it can be easier to use a subdomain if, for
example, your blog uses a completely different server than the rest of your
site. A good proxy,<span style='letter-spacing:2.0pt'> </span>though,<span
style='letter-spacing:2.0pt'> </span>can<span style='letter-spacing:2.0pt'> </span>redirect<span
style='letter-spacing:2.0pt'> </span>traffic<span style='letter-spacing:2.0pt'>
</span>appropriately<span style='letter-spacing:2.0pt'> </span>based<span
style='letter-spacing:2.0pt'> </span>on<span style='letter-spacing:2.0pt'> </span>either
subdomain or path, so the choice of whether to use a subdomain or a path should
be more content-focused than technology-focused (remember what Tim Berners-Lee
said about URLs expressing your information<span style='letter-spacing:4.0pt'> </span>architecture,
not your technical architecture).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I recommend that subdomains be used to compartmentalize
significantly different parts of your website or service. For example, I think
its a good use of subdomains to make your API available at <i>api.meadowlarktravel.com</i>.
Microsites (sites that have a different appearance than the rest of your site,
usually highlighting a single product or subject) are also good candidates for
subdomains. Another sensible use for subdomains is to separate admin interfaces
from public interfaces (<i>admin.meadowlarktravel.com</i>, for employees only).</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Your domain registrar, unless you specify otherwise, will
redirect all traffic to your server regardless of subdomain. It is up to your
server (or proxy), then, to take appropriate action based on the subdomain.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Nameservers</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark915"></a><span style='color:#333333'>The glue that makes
domains work are nameservers, and this is what youll be asked to provide when
you establish hosting for your website. Usually, this is pretty
straightforward, as your hosting service will do most of the work for you. For
example, lets say we choose to host <i>meadowlarktravel.com </i>at </span><a
href="https://www.digitalocean.com/"><span style='color:#070707'>DigitalOcean</span></a><span
style='color:#333333'>. When you set up your hosting account with<span
style='letter-spacing:1.35pt'> </span>DigitalOcean,<span style='letter-spacing:
1.35pt'> </span>youll be given<span style='letter-spacing:1.35pt'> </span>the
names of the DigitalOcean</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection437>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a name=Hosting></a><a
name="_bookmark917"></a><span style='color:#333333'>nameservers (there are
multiple ones for redundancy). DigitalOcean, like most hosting providers, calls
their nameservers <i>ns1.digitalocean.com</i>, <i>ns1.digitalocean.com</i>, and
so on. Go to your domain registrar and set the nameservers for the domain you
want to host, and youre all set.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='color:#333333'>The<span
style='letter-spacing:.4pt'> </span>way<span style='letter-spacing:.45pt'> </span>the<span
style='letter-spacing:.4pt'> </span>mapping<span style='letter-spacing:.45pt'> </span>works<span
style='letter-spacing:.4pt'> </span>in<span style='letter-spacing:.5pt'> </span>this<span
style='letter-spacing:.4pt'> </span>case<span style='letter-spacing:.4pt'> </span>is<span
style='letter-spacing:.4pt'> </span>as<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>follows:</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:19.0pt'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:0cm;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Website<span style='letter-spacing:.55pt'> </span>visitor<span
style='letter-spacing:.6pt'> </span>navigates<span style='letter-spacing:.6pt'>
</span>to<span style='letter-spacing:.65pt'> </span></span><a
href="http://meadowlarktravel.com/"><i><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;letter-spacing:-.1pt;
text-decoration:none'>http://meadowlarktravel.com/</span></i><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
letter-spacing:-.1pt;text-decoration:none'>.</span></a></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:0cm;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>The<span style='letter-spacing:.55pt'> </span>browser<span
style='letter-spacing:.55pt'> </span>sends<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.6pt'> </span>request<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.6pt'> </span>computers<span
style='letter-spacing:.55pt'> </span>network<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>system.</span></span></p>

<p class=MsoListParagraph style='margin-top:11.25pt;margin-right:71.1pt;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>The computers network system, which has
been given an internet IP address and a DNS server by the internet provider,
asks the<span style='letter-spacing:4.0pt'> </span>DNS resolver to resolve <i>meadowlarktravel.com</i>.</span></p>

<p class=MsoListParagraph style='margin-top:9.3pt;margin-right:73.2pt;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>The DNS resolver is aware that <i>meadowlarktravel.com
</i>is handled by<span style='letter-spacing:2.0pt'> </span><i>ns1.digitalocean.com</i>,<span
style='letter-spacing:2.0pt'> </span>so<span style='letter-spacing:2.0pt'> </span>it<span
style='letter-spacing:2.0pt'> </span>asks<span style='letter-spacing:2.0pt'> </span><i>ns1.digitalocean.com<span
style='letter-spacing:2.0pt'> </span></i>to<span style='letter-spacing:2.0pt'> </span>give
it an IP address for <i>meadowlarktravel.com</i>.</span></p>

<p class=MsoListParagraph style='margin-top:9.25pt;margin-right:109.1pt;
margin-bottom:0cm;margin-left:105.4pt;margin-bottom:.0001pt;line-height:111%'><span
style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;line-height:111%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>The server at <i>ns1.digitalocean.com </i>receives
the request and recognizes that <i>meadowlarktravel.com </i>is indeed an active
account, and returns the associated IP address.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:71.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark916"></a><span style='color:#333333'>While<span
style='letter-spacing:1.3pt'> </span>this<span style='letter-spacing:1.3pt'> </span>is<span
style='letter-spacing:1.3pt'> </span>the<span style='letter-spacing:1.3pt'> </span>most<span
style='letter-spacing:1.3pt'> </span>common<span style='letter-spacing:1.35pt'>
</span>case,<span style='letter-spacing:1.35pt'> </span>its<span
style='letter-spacing:1.3pt'> </span>not<span style='letter-spacing:1.3pt'> </span>the<span
style='letter-spacing:1.3pt'> </span>only<span style='letter-spacing:1.35pt'> </span>way<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.35pt'> </span>configure
your<span style='letter-spacing:1.7pt'> </span>domain<span style='letter-spacing:
1.75pt'> </span>mapping.<span style='letter-spacing:1.75pt'> </span>Since<span
style='letter-spacing:1.7pt'> </span>the<span style='letter-spacing:1.7pt'> </span>server<span
style='letter-spacing:1.7pt'> </span>(or<span style='letter-spacing:1.7pt'> </span>proxy)<span
style='letter-spacing:1.7pt'> </span>that<span style='letter-spacing:1.7pt'> </span>actually<span
style='letter-spacing:1.75pt'> </span>serves your website has an IP address, we
can cut out the middleman by<span style='letter-spacing:4.0pt'> </span>registering
that IP address with the DNS resolvers (this effectively cuts out the middleman
of the nameserver <i>ns1.digitalocean.com </i>in the previous example).<span
style='letter-spacing:1.05pt'> </span>For this approach<span style='letter-spacing:
1.05pt'> </span>to<span style='letter-spacing:1.05pt'> </span>work,<span
style='letter-spacing:1.05pt'> </span>your hosting<span style='letter-spacing:
1.05pt'> </span>service must assign<span style='letter-spacing:1.05pt'> </span>you
a<span style='letter-spacing:1.75pt'> </span><i>static<span style='letter-spacing:
1.75pt'> </span></i>IP<span style='letter-spacing:1.75pt'> </span>address.<span
style='letter-spacing:1.8pt'> </span>Commonly,<span style='letter-spacing:1.8pt'>
</span>hosting<span style='letter-spacing:1.8pt'> </span>providers<span
style='letter-spacing:1.75pt'> </span>will<span style='letter-spacing:1.75pt'> </span>give<span
style='letter-spacing:1.75pt'> </span>your<span style='letter-spacing:1.75pt'> </span>server(s)
a <i>dynamic </i>IP address, which means it may change without notice, which
would render this scheme ineffective. It can sometimes cost extra to get a
static IP address instead of a dynamic one: check with your hosting<span
style='letter-spacing:4.0pt'> </span><span style='letter-spacing:-.1pt'>provider.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection438>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you want to map your domain to your website directly
(skipping your hosts nameservers), <a name="_bookmark918"></a>you will either
be adding an A record or a CNAME record. An <i>A record </i>maps a domain name
directly to an IP address, whereas a <i>CNAME </i>maps one domain name to
another. CNAME records are usually a little less flexible, so A records are
generally preferred.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image014.gif"
  alt="Text Box: TIP&#13;&#10;If youre using AWS for your nameservers, in addition to A and CNAME records, it also has a record called an alias that offers a lot of advantages if youre pointing it to a service hosted on AWS. For more information, see the AWS documentation.&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whatever technique you use, domain mapping is usually
aggressively cached, meaning that when you change your domain records, it can
take up to 48 hours for your domain to be attached to the new server. Keep in
mind that this is also subject to geography: if you see your domain working in
Los Angeles, your client in New York may see the domain attached to the
previous server. In my experience, 24 hours is usually sufficient for domains
to resolve correctly in the continental US, with international resolution
taking up to 48 hours.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you need something to go live precisely at a certain
time, you should not rely<span style='letter-spacing:1.55pt'> </span>on<span
style='letter-spacing:1.55pt'> </span>DNS<span style='letter-spacing:1.45pt'> </span>changes.<span
style='letter-spacing:1.55pt'> </span>Rather,<span style='letter-spacing:1.55pt'>
</span>modify<span style='letter-spacing:1.55pt'> </span>your<span
style='letter-spacing:1.45pt'> </span>server<span style='letter-spacing:1.45pt'>
</span>to<span style='letter-spacing:1.55pt'> </span>redirect<span
style='letter-spacing:1.45pt'> </span>to<span style='letter-spacing:1.55pt'> </span>the
coming soon site or page, and make the DNS changes in advance of the actual<span
style='letter-spacing:1.7pt'> </span>switchover.<span style='letter-spacing:
1.75pt'> </span>At<span style='letter-spacing:1.7pt'> </span>the<span
style='letter-spacing:1.7pt'> </span>appointed<span style='letter-spacing:1.75pt'>
</span>moment,<span style='letter-spacing:1.75pt'> </span>then,<span
style='letter-spacing:1.75pt'> </span>you<span style='letter-spacing:1.75pt'> </span>can<span
style='letter-spacing:1.75pt'> </span>have<span style='letter-spacing:1.7pt'> </span>your
server switch over to the live site, and your visitors will see the change
immediately, regardless of where they are in the world<a name="_bookmark919"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F;letter-spacing:-.1pt'>Hosting</span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection439>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark920"></a><span style='color:#333333'>Choosing<span
style='letter-spacing:1.75pt'> </span>a<span style='letter-spacing:1.65pt'> </span>hosting<span
style='letter-spacing:1.75pt'> </span>service<span style='letter-spacing:1.65pt'>
</span>can<span style='letter-spacing:1.75pt'> </span>seem<span
style='letter-spacing:1.65pt'> </span>overwhelming<span style='letter-spacing:
1.75pt'> </span>at<span style='letter-spacing:1.65pt'> </span>first.<span
style='letter-spacing:1.75pt'> </span>Node<span style='letter-spacing:1.65pt'> </span>has
taken off in a big way, and everyones clamoring to offer Node hosting to meet<span
style='letter-spacing:1.6pt'> </span>the<span style='letter-spacing:1.6pt'> </span>demand.<span
style='letter-spacing:1.65pt'> </span>How<span style='letter-spacing:1.6pt'> </span>you<span
style='letter-spacing:1.65pt'> </span>select<span style='letter-spacing:1.6pt'>
</span>a<span style='letter-spacing:1.6pt'> </span>hosting<span
style='letter-spacing:1.65pt'> </span>provider<span style='letter-spacing:1.6pt'>
</span>depends<span style='letter-spacing:1.6pt'> </span>very<span
style='letter-spacing:1.65pt'> </span>much on your needs. If you have reason to
believe your site will be the next Amazon or Twitter, youll have a very
different set of concerns than you would<span style='letter-spacing:.85pt'> </span>if
you<span style='letter-spacing:.85pt'> </span>were building<span
style='letter-spacing:.85pt'> </span>a website for your local stamp<span
style='letter-spacing:.85pt'> </span>collectors club.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>&nbsp;</p>

<h4 align=left style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.6pt'>TRADITIONAL</span><span
style='color:#545454;letter-spacing:2.9pt'> </span><span style='color:#545454;
letter-spacing:.6pt'>HOSTING</span><span style='color:#545454;letter-spacing:
2.95pt'> </span><span style='color:#545454'>OR<span style='letter-spacing:2.95pt'>
</span><span style='letter-spacing:.55pt'>CLOUD</span><span style='letter-spacing:
2.9pt'> </span><span style='letter-spacing:.5pt'>HOSTING?</span></span></h4>

<p class=MsoBodyText style='margin-top:13.5pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark922"></a><span style='color:#333333'>The <a name="_bookmark921"></a>term
cloud is one of the most nebulous tech terms to crop up in recent years.
Really, its just a fancy way to say the internet, or part of the internet.
The term is not entirely useless, though. While not part of<span
style='letter-spacing:4.0pt'> </span>the technical definition of the term,
hosting in the cloud usually implies a certain commoditizing of computing
resources. That is to say, we no<span style='letter-spacing:4.0pt'> </span>longer
think about a server as a distinct, physical entity: its simply a
homogeneous resource somewhere in the cloud, and one is as good as another. Im
oversimplifying, of course: computing resources are distinguished (and priced)
according to their memory, number of CPUs, etc. The difference is between
knowing (and caring) what actual server your app is hosted on, and knowing its
hosted on <i>some </i>server in the<span style='letter-spacing:4.0pt'> </span>cloud,
and it could just as easily be moved over to a different one without you
knowing (or caring).</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark923"></a><span style='color:#333333'>Cloud hosting is also
highly <i>virtualized</i>. That is, the server(s) your app is running on are
not usually physical machines, but virtual machines<span style='letter-spacing:
2.0pt'> </span>running on physical servers. This idea was not introduced by
cloud hosting, but it has become synonymous with it.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>While cloud hosting had humble origins, it means a lot
more than homogenous servers now. The major cloud providers offer many
infrastructure services that (in theory) reduce your maintenance burden</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection440>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>and offer a high degree of scalability. These services
include database storage, file storage, networking queues, authentication,
video processing, telecommunications services, artificial intelligence engines,
and much<span style='letter-spacing:2.0pt'> </span><span style='letter-spacing:
-.1pt'>more.</span></span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Cloud hosting can be a little disconcerting at first, not
knowing anything about the actual physical machine your server is running on,
trusting that your servers arent going to be affected by the other servers running
on the same computer. Really, though, nothing has changed: when your hosting<span
style='letter-spacing:4.0pt'> </span>bill comes, youre still paying for
essentially the same thing: someone<span style='letter-spacing:2.0pt'> </span>taking<span
style='letter-spacing:1.75pt'> </span>care<span style='letter-spacing:1.7pt'> </span>of<span
style='letter-spacing:1.7pt'> </span>the<span style='letter-spacing:1.7pt'> </span>physical<span
style='letter-spacing:1.7pt'> </span>hardware<span style='letter-spacing:1.7pt'>
</span>and<span style='letter-spacing:1.75pt'> </span>networking<span
style='letter-spacing:1.75pt'> </span>that<span style='letter-spacing:1.7pt'> </span>enables<span
style='letter-spacing:1.7pt'> </span>your web applications. All thats changed
is that youre more removed from the <span style='letter-spacing:-.1pt'>hardware.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>I believe that traditional hosting (for lack of a
better term) will eventually disappear altogether. Thats not to say hosting
companies will go out of business (though some inevitably will); they will just
start to offer cloud hosting themselves.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'>&nbsp;</p>

<h4 align=left style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.3pt'>XAAS</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When considering cloud hosting, you will come across the
acronyms SaaS, PaaS, IaaS, and FaaS:</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Software<span style='letter-spacing:.45pt'> </span>as<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.55pt'> </span>Service<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>(SaaS)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark924"></a><span style='color:#333333'>SaaS generally describes
software (websites, apps) that are provided to you: you just use them. An
example would be Google Documents or <span style='letter-spacing:-.1pt'>Dropbox.</span></span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Platform<span style='letter-spacing:.45pt'> </span>as<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.5pt'> </span>Service<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>(PaaS)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark925"></a><span style='color:#333333'>PaaS provides all of the
infrastructure for you (operating systems, networkingall of that is handled).
All you have to do is write your</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection441>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>applications. While there is often a blurry line between
PaaS and IaaS (and you will often find yourself straddling that line as a
developer),<span style='letter-spacing:4.0pt'> </span>this is generally the
service model were discussing in this book. If youre running a website or web
service, PaaS is probably what youre looking for.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Infrastructure<span style='letter-spacing:.55pt'> </span>as<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.65pt'> </span>Service<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>(IaaS)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark926"></a><span style='color:#333333'>IaaS gives you the most
flexibility, but at cost. All you get are virtual machines and a basic network
connecting them. You are then responsible for installing and maintaining
operating systems,<span style='letter-spacing:2.0pt'> </span>databases, and
network policies. Unless you need this level of control over your environment,
you will generally want to stick with PaaS. (Note that PaaS does allow you to
have control over the <i>choice </i>of operating systems and network
configuration: you just dont have to<span style='letter-spacing:4.0pt'> </span>do
it yourself.)</span></p>

<p class=MsoNormal style='margin-top:10.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Functions<span style='letter-spacing:.5pt'> </span>as<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.6pt'> </span>Service<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>(FaaS)</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark927"></a><span style='color:#333333'>FaaS<span style='letter-spacing:
2.0pt'> </span>describes<span style='letter-spacing:2.0pt'> </span>offerings<span
style='letter-spacing:2.0pt'> </span>such<span style='letter-spacing:2.0pt'> </span>as<span
style='letter-spacing:2.0pt'> </span>AWS<span style='letter-spacing:2.0pt'> </span>Lambda,<span
style='letter-spacing:2.0pt'> </span>Google<span style='letter-spacing:2.0pt'> </span>Functions,
and Azure Functions, which provide a way to run individual functions<span
style='letter-spacing:4.0pt'> </span>in the cloud without having to configure
the runtime environment yourself. Its at the core of what is commonly being
called serverless <span style='letter-spacing:-.1pt'>architecture.</span></span></p>

<h4 align=left style='margin-top:14.2pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.45pt'>THE</span><span style='color:#545454;
letter-spacing:2.1pt'> </span><span style='color:#545454;letter-spacing:.5pt'>BEHEMOTHS</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark928"></a><span style='color:#333333'>The companies that
essentially run the internet (or, at least, are heavily invested in the running
of the internet) have realized that with the commoditization<span
style='letter-spacing:2.0pt'> </span>of<span style='letter-spacing:2.0pt'> </span>computing<span
style='letter-spacing:2.0pt'> </span>resources,<span style='letter-spacing:
2.0pt'> </span>they<span style='letter-spacing:2.0pt'> </span>have<span
style='letter-spacing:2.0pt'> </span>another<span style='letter-spacing:2.0pt'>
</span>viable product to sell. Amazon, Microsoft, and Google all offer cloud
computing services, and their services are quite good.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>All of these services are priced similarly: if your
hosting needs are modest, there will be minimal price difference among the
three. If you have very<span style='letter-spacing:2.0pt'> </span>high
bandwidth or storage needs, you will have to evaluate the services</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection442>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name=Deployment></a><a name="_bookmark933"></a><span style='color:#333333'>more
carefully, as the cost difference could be greater, depending on your <span
style='letter-spacing:-.1pt'>needs.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:78.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark929"></a><span style='color:#333333'>While Microsoft does not
normally leap to mind when we consider open source platforms, I would not
overlook Azure. Not only is the platform established and robust, but Microsoft
has bent over backward to make it friendly to not just Node, but the open
source community. Microsoft offers<span style='letter-spacing:4.0pt'> </span>a
one-month Azure trial, which is a great way to determine if the service meets
your needs; if youre considering one of the big three, I definitely recommend<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.7pt'> </span>free<span
style='letter-spacing:1.7pt'> </span>trial<span style='letter-spacing:1.7pt'> </span>to<span
style='letter-spacing:1.75pt'> </span>evaluate<span style='letter-spacing:1.7pt'>
</span>Azure.<span style='letter-spacing:1.75pt'> </span>Microsoft<span
style='letter-spacing:1.7pt'> </span>offers<span style='letter-spacing:1.7pt'> </span>Node<span
style='letter-spacing:1.7pt'> </span>APIs for all of its major services, including
its cloud storage service. In addition<span style='letter-spacing:4.0pt'> </span>to
excellent Node hosting, Azure offers an excellent cloud storage system (with a
JavaScript API), as well as good support for MongoDB.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark930"></a><span style='color:#333333'>Amazon offers the most
comprehensive set of resources, including SMS (text message), cloud storage,
email services, payment services (ecommerce), DNS, and more. In addition,
Amazon offers a free usage tier, making it very easy to evaluate.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark931"></a><span style='color:#333333'>Googles cloud platform has
come a long way and now offers robust Node hosting and, as you might expect,
excellent integration with its own<span style='letter-spacing:4.0pt'> </span>services<span
style='letter-spacing:2.0pt'> </span>(mapping,<span style='letter-spacing:2.0pt'>
</span>authentication,<span style='letter-spacing:2.0pt'> </span>and<span
style='letter-spacing:2.0pt'> </span>search<span style='letter-spacing:2.0pt'> </span>being<span
style='letter-spacing:2.0pt'> </span>particularly<span style='letter-spacing:
2.0pt'> </span><span style='letter-spacing:-.1pt'>attractive).</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark932"></a><span style='color:#333333'>In addition to the big
three, it is worth considering </span><a href="https://www.heroku.com/"><span
style='color:#070707'>Heroku</span></a><span style='color:#333333'>, which has
been catering to people wanting to host fast and nimble Node applications for
some time now. Ive also had great luck with </span><a
href="https://www.digitalocean.com/"><span style='color:#070707'>DigitalOcean</span></a><span
style='color:#333333'>, which focuses<span style='letter-spacing:1.15pt'> </span>more<span
style='letter-spacing:1.15pt'> </span>on<span style='letter-spacing:1.2pt'> </span>providing<span
style='letter-spacing:1.2pt'> </span>containers<span style='letter-spacing:
1.15pt'> </span>and<span style='letter-spacing:1.2pt'> </span>a<span
style='letter-spacing:1.15pt'> </span>limited<span style='letter-spacing:1.2pt'>
</span>number<span style='letter-spacing:1.15pt'> </span>of<span
style='letter-spacing:1.15pt'> </span>services<span style='letter-spacing:1.15pt'>
</span>in a very user-friendly manner.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'>&nbsp;</p>

<h4 align=left style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.6pt'>BOUTIQUE</span><span
style='color:#545454;letter-spacing:3.05pt'> </span><span style='color:#545454;
letter-spacing:.5pt'>HOSTING</span></h4>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection443>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark934"></a><span style='color:#333333'>Smaller hosting services,
which Im going to call boutique hosting services (for lack of a better
word), may not have the infrastructure or resources of Microsoft, Amazon, or
Google, but that doesnt mean they dont offer something valuable.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Because boutique hosting services cant compete in terms
of<span style='letter-spacing:4.0pt'> </span>infrastructure, they usually focus
on customer service and support. If you need a lot of support, you might want
to consider a boutique hosting service. If you have a hosting provider youve
been happy with, dont hesitate to ask if it offers (or plans on offering) Node
hosting<a name="_bookmark935"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F;letter-spacing:-.1pt'>Deployment</span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark936"></a><span style='color:#333333'>It <a name="_bookmark937"></a>still
surprises me that, in 2019, people are still using FTP t<a name="_bookmark938"></a>o
deploy their applications. If you are, <i>please stop</i>. FTP is in no way
secure. Not only are all<span style='letter-spacing:1.95pt'> </span>your<span
style='letter-spacing:1.95pt'> </span>files<span style='letter-spacing:1.95pt'>
</span>transmitted<span style='letter-spacing:2.0pt'> </span>unencrypted,<span
style='letter-spacing:2.0pt'> </span>but<span style='letter-spacing:1.95pt'> </span>your<span
style='letter-spacing:1.95pt'> </span><i>username<span style='letter-spacing:
1.95pt'> </span>and<span style='letter-spacing:2.0pt'> </span>password </i>are
also. If your hosting provider doesnt give you an option, find a new hosting
provider. If you really have no choice, make sure you use a unique password
that youre not using for anything else.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark939"></a><span style='color:#333333'>At minimum, you should be
using SFTP or FTPS (not to be confused), but you should really be considering a
<i>continuous delivery </i>(CD) service.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The idea behind CD is that youre never very far away
from a version that can<span style='letter-spacing:1.35pt'> </span>be released<span
style='letter-spacing:1.35pt'> </span>(weeks or even<span style='letter-spacing:
1.35pt'> </span>days).<span style='letter-spacing:1.35pt'> </span>CD is usually<span
style='letter-spacing:1.35pt'> </span>used<span style='letter-spacing:1.35pt'> </span>in<span
style='letter-spacing:1.35pt'> </span>the same breath as <i>continuous
integration </i>(CI), which refers to automated processes for integrating the
work of developers and testing them.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In general, the more you can automate your processes, the
easier your development will be. Imagine merging in changes, and automatically
getting notified that unit tests pass, then integration tests pass, and then</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection444>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>seeing your changes onlinein a matter of minutes! Its a
great goal, but you have to invest some work up front to get it set up, and
there will be some maintenance over time.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Although the steps themselves are similar (run unit
tests, run integration tests, deploy to staging servers, deploy to production
servers), the process of setting up CI/CD pipelines (a word youll hear a lot
when discussing CI/CD) varies substantially.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>You should look at some of the options available for
CI/CD and choose one that meets your needs:</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:12.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://amzn.to/2CzTQAo"><i><span
style='font-size:14.0pt;color:#070707'>AWS<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>CodePipeline</span></span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark940"></a><span style='color:#333333'>If youre hosting on AWS,
CodePipeline should be first on your list, as<span style='letter-spacing:4.0pt'>
</span>it will be the easiest path to CI/CD for you. Its very robust, but Ive
found it to be a little less user-friendly than some of the other options.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="http://bit.ly/2CEsSI0"><i><span
style='font-size:14.0pt;color:#070707'>Microsoft<span style='letter-spacing:
.6pt'> </span>Azure<span style='letter-spacing:.6pt'> </span>Web<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>Apps</span></span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:113.15pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
111%'><a name="_bookmark941"></a><span style='color:#333333'>If youre hosting
on Azure, Web Apps is your best bet (are you noticing a trend here?). I havent
had much experience with this service, but it seems to be well loved in the
community.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://travis-ci.org/"><i><span
style='font-size:14.0pt;color:#070707'>Travis<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.25pt'>CI</span></span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark942"></a><span style='color:#333333'>Travis CI has been around
for a long time now, and has a large, loyal user base and good documentation.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://semaphoreci.com/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Semaphore</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark943"></a><span style='color:#333333'>Semaphore is easy to set up
and configure, but it doesnt offer many features, and its basic (low-cost)
plans are slow.</span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="http://bit.ly/2NGuIys"><i><span
style='font-size:14.0pt;color:#070707'>Google<span style='letter-spacing:.7pt'>
</span>Cloud<span style='letter-spacing:.75pt'> </span><span style='letter-spacing:
-.2pt'>Build</span></span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark944"></a><span style='color:#333333'>I havent tried Google
Cloud Build yet, but it looks robust and, like CodePipeline and Azure Web Apps,
its likely that is the best choice if</span></p>

</div>

<span style='font-size:11.0pt;line-height:111%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection445>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>youre<span
style='letter-spacing:.6pt'> </span>hosting<span style='letter-spacing:.7pt'> </span>on<span
style='letter-spacing:.65pt'> </span>Google<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Cloud.]</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://circleci.com/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>CircleCI</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark945"></a><span style='color:#333333'>CircleCI is another CI
thats been around for some time, and is well <span style='letter-spacing:-.1pt'>loved.</span></span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="https://jenkins.io/"><i><span
style='font-size:14.0pt;color:#070707;letter-spacing:-.1pt'>Jenkins</span></i></a></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark946"></a><span style='color:#333333'>Jenkins is another
incumbent with a large community. My experience<span style='letter-spacing:
2.0pt'> </span>is that it hasnt kept up with modern deployment practices as
well as some of the other options here, but it did just release a new version<span
style='letter-spacing:4.0pt'> </span>that looks promising.</span></p>

<p class=MsoBodyText style='margin-top:12.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>At<span style='letter-spacing:1.4pt'> </span>the<span
style='letter-spacing:1.4pt'> </span>end<span style='letter-spacing:1.45pt'> </span>of<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>day,<span
style='letter-spacing:1.45pt'> </span>CI/CD<span style='letter-spacing:1.4pt'> </span>services<span
style='letter-spacing:1.4pt'> </span>are<span style='letter-spacing:1.4pt'> </span>automating<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.4pt'> </span>activities<span
style='letter-spacing:1.4pt'> </span>that <i>you </i>create. You still have to
write the code, determine your versioning scheme,<span style='letter-spacing:
1.55pt'> </span>write<span style='letter-spacing:1.5pt'> </span>high-quality<span
style='letter-spacing:1.55pt'> </span>unit<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.55pt'> </span>integration<span style='letter-spacing:
1.55pt'> </span>tests<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.55pt'> </span>a<span style='letter-spacing:1.5pt'> </span>way<span
style='letter-spacing:1.55pt'> </span>to<span style='letter-spacing:1.55pt'> </span>run
them,<span style='letter-spacing:2.0pt'> </span>and<span style='letter-spacing:
2.0pt'> </span>understand<span style='letter-spacing:2.0pt'> </span>your<span
style='letter-spacing:2.0pt'> </span>deployment<span style='letter-spacing:
2.0pt'> </span>infrastructure.<span style='letter-spacing:2.0pt'> </span>The<span
style='letter-spacing:2.0pt'> </span>examples<span style='letter-spacing:2.0pt'>
</span>in this book could be automated simply enough: most everything could be
deployed to a single server running a Node instance. However, as you start to
grow your infrastructure, so too will your CI/CD pipeline grow in <span
style='letter-spacing:-.1pt'>complexity.</span></span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<h4 align=left style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.55pt'>GITS</span><span style='color:#545454;
letter-spacing:2.35pt'> </span><span style='color:#545454;letter-spacing:.5pt'>ROLE</span><span
style='color:#545454;letter-spacing:2.4pt'> </span><span style='color:#545454'>IN<span
style='letter-spacing:2.35pt'> </span><span style='letter-spacing:.5pt'>DEPLOYMENT</span></span></h4>

<p class=MsoBodyText style='margin-top:13.5pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark947"></a><span style='color:#333333'>Gits greatest strength
(and greatest weakness) is its flexibility. It can be adapted to almost any
workflow imaginable. For the sake of deployment, I recommend creating one or
more branches <i>specifically for deployment</i>.</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:16.5pt'><span
style='color:#333333'>For<span style='letter-spacing:.5pt'> </span>example,<span
style='letter-spacing:.55pt'> </span>you<span style='letter-spacing:.6pt'> </span>might<span
style='letter-spacing:.5pt'> </span>have<span style='letter-spacing:.55pt'> </span>a<span
style='letter-spacing:.5pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>production<span style='letter-spacing:-3.0pt'> </span></span><span
style='color:#333333'>branch<span style='letter-spacing:.6pt'> </span>and<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.6pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333;letter-spacing:-.1pt'>staging</span></p>

<p class=MsoBodyText style='margin-top:5.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>branch. How you use those branches is very much up to
your individual <span style='letter-spacing:-.1pt'>workflow.</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:123%'><span
style='color:#333333'>One popular approach is to flow from </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>master<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>staging<span
style='letter-spacing:-2.65pt'> </span></span><span style='color:#333333'>to </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production</span><span
style='color:#333333'>. So once some changes on </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>master<span style='letter-spacing:
-2.2pt'> </span></span><span style='color:#333333'>are ready to go live, you
could merge them into<span style='letter-spacing:1.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>staging</span><span
style='color:#333333'>.<span style='letter-spacing:1.5pt'> </span>Once they<span
style='letter-spacing:1.5pt'> </span>have been<span style='letter-spacing:1.5pt'>
</span>approved<span style='letter-spacing:1.5pt'> </span>on<span
style='letter-spacing:1.5pt'> </span>the staging<span style='letter-spacing:
1.5pt'> </span>server,</span></p>

</div>

<span style='font-size:11.0pt;line-height:123%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection446>

<p class=MsoBodyText style='margin-top:3.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>you could then merge </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>staging<span style='letter-spacing:
-2.6pt'> </span></span><span style='color:#333333'>into </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production</span><span
style='color:#333333'>. While this makes logical sense, I dislike the clutter
it creates (merges, merges everywhere). Also, if you<span style='letter-spacing:
1.4pt'> </span>have<span style='letter-spacing:1.35pt'> </span>lots<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>features<span
style='letter-spacing:1.35pt'> </span>that<span style='letter-spacing:1.35pt'> </span>need<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.4pt'> </span>be<span
style='letter-spacing:1.35pt'> </span>staged<span style='letter-spacing:1.4pt'>
</span>and<span style='letter-spacing:1.4pt'> </span>pushed<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.4pt'> </span>production
in different orders, this can get messy quickly.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:14.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>I feel a better approach is to merge </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>master<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>into </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>staging<span
style='letter-spacing:-2.8pt'> </span></span><span style='color:#333333'>and,
when youre ready<span style='letter-spacing:1.6pt'> </span>to<span
style='letter-spacing:1.6pt'> </span>go<span style='letter-spacing:1.6pt'> </span>live<span
style='letter-spacing:1.5pt'> </span>with<span style='letter-spacing:1.6pt'> </span>changes,<span
style='letter-spacing:1.6pt'> </span>then<span style='letter-spacing:1.6pt'> </span>merge<span
style='letter-spacing:1.5pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>master<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>into<span style='letter-spacing:1.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production</span><span
style='color:#333333'>.<span style='letter-spacing:1.6pt'> </span>In this way, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>staging<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production<span
style='letter-spacing:-2.05pt'> </span></span><span style='color:#333333'>become
less associated: you can even have<span style='letter-spacing:2.0pt'> </span>multiple<span
style='letter-spacing:2.0pt'> </span>staging<span style='letter-spacing:2.0pt'>
</span>branches<span style='letter-spacing:2.0pt'> </span>to<span
style='letter-spacing:2.0pt'> </span>experiment<span style='letter-spacing:
2.0pt'> </span>with<span style='letter-spacing:2.0pt'> </span>different<span
style='letter-spacing:2.0pt'> </span>features before going live (and you can
merge things other than </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>master<span style='letter-spacing:-2.65pt'> </span></span><span
style='color:#333333'>into them). Only when something has been approved for
production do you merge it<span style='letter-spacing:2.0pt'> </span>into </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production</span><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.55pt'><span style='font-size:15.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:130%'><span
style='color:#333333'>What happens when you need to roll back changes? This is
where things<span style='letter-spacing:4.0pt'> </span>can get complicated.
There are multiple techniques for undoing changes, such as applying the inverse
of a commit to undo prior commits (</span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>git revert</span><span style='color:#333333'>), these techniques
not only are complicated, but also can can cause problems down the line. The
typical way of handling this is to create tags (for example, </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git tag v1.2.0<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>on
your </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production<span
style='letter-spacing:-2.1pt'> </span></span><span style='color:#333333'>branch)
every time you make a deployment. If you need to roll back to a specific
version, you always have that tag available.</span></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In<span style='letter-spacing:1.1pt'> </span>the<span
style='letter-spacing:1.05pt'> </span>end,<span style='letter-spacing:1.1pt'> </span>it<span
style='letter-spacing:1.05pt'> </span>is<span style='letter-spacing:1.05pt'> </span>up<span
style='letter-spacing:1.1pt'> </span>to<span style='letter-spacing:1.1pt'> </span>you<span
style='letter-spacing:1.1pt'> </span>and<span style='letter-spacing:1.1pt'> </span>your<span
style='letter-spacing:1.05pt'> </span>team<span style='letter-spacing:1.05pt'> </span>to<span
style='letter-spacing:1.1pt'> </span>decide<span style='letter-spacing:1.05pt'>
</span>on<span style='letter-spacing:1.1pt'> </span>a<span style='letter-spacing:
1.05pt'> </span>Git<span style='letter-spacing:1.05pt'> </span>workflow. More
important than the workflow you pick is the consistency with which you use it,
and the training and communication surrounding it.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=121 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=578 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image036.gif"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:6.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection447>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark949"></a></p>

<p class=MsoBodyText style='margin-top:.05pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<h4 align=left style='margin-top:4.9pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.55pt'>MANUAL</span><span style='color:
#545454;letter-spacing:3.0pt'> </span><span style='color:#545454;letter-spacing:
.7pt'>GIT-</span><span style='color:#545454;letter-spacing:.55pt'>BASED</span><span
style='color:#545454;letter-spacing:3.0pt'> </span><span style='color:#545454;
letter-spacing:.5pt'>DEPLOYMENT</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark948"></a><span style='color:#333333'>If youre not ready yet to
take the step of setting up CI/CD, you could start with<span style='letter-spacing:
1.8pt'> </span>a manual Git-based<span style='letter-spacing:1.8pt'> </span>deployment.<span
style='letter-spacing:1.8pt'> </span>The advantage of this approach<span
style='letter-spacing:1.8pt'> </span>is that youll get comfortable with the
steps and challenges involved in deployment, which will serve you well when you
take the step of <span style='letter-spacing:-.1pt'>automation.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:128%'><span
style='color:#333333'>For each server you want to deploy to, you will have to
clone the<span style='letter-spacing:4.0pt'> </span>repository, check out the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>production<span
style='letter-spacing:-1.9pt'> </span></span><span style='color:#333333'>branch,
and then set up the infrastructure necessary to start/restart your app (which
will be dependent<span style='letter-spacing:2.0pt'> </span>on<span
style='letter-spacing:1.8pt'> </span>your<span style='letter-spacing:1.7pt'> </span>choice<span
style='letter-spacing:1.7pt'> </span>of<span style='letter-spacing:1.7pt'> </span>platform).<span
style='letter-spacing:1.8pt'> </span>When<span style='letter-spacing:1.8pt'> </span>you<span
style='letter-spacing:1.8pt'> </span>update<span style='letter-spacing:1.7pt'> </span>the<span
style='letter-spacing:1.7pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>production<span style='letter-spacing:-1.8pt'> </span></span><span
style='color:#333333'>branch, you will have to go to each server, run </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>git pull --ff-only</span><span
style='color:#333333'>, run </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install --production</span><span style='color:#333333'>, and
then restart the app. If your deployments arent often, and you dont have very
many servers, this may not represent<span style='letter-spacing:4.0pt'> </span>a
terrible hardship, but if youre updating more often, this will get old fast,
and youll want to find some way to automate the system.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image018.gif"
  alt="Text Box: TIP&#13;&#10;The --ff-only argument to git pull allows only fast-forward pulls, preventing automatic merging or rebasing. If you know the pull is fast-forward only, you may safely omit it, but if you get in the habit of doing it, you will never accidentally invoke a merge or rebase!&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:12.5pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>In essence, what you are doing here is replicating the
way you work in development, except youre doing it on a remote server. Manual
processes always<span style='letter-spacing:1.4pt'> </span>run<span
style='letter-spacing:1.5pt'> </span>the<span style='letter-spacing:1.4pt'> </span>risk<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.4pt'> </span>human<span
style='letter-spacing:1.5pt'> </span>error,<span style='letter-spacing:1.5pt'> </span>and<span
style='letter-spacing:1.5pt'> </span>I<span style='letter-spacing:1.4pt'> </span>recommend<span
style='letter-spacing:1.5pt'> </span>this<span style='letter-spacing:1.4pt'> </span>approach<span
style='letter-spacing:1.5pt'> </span>only as a stepping stone toward more
automated development.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection448>

<h2 style='margin-top:3.95pt'><a name="_bookmark950"></a><span
style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Deploying<span style='letter-spacing:1.7pt'> </span>your
website (especially<span style='letter-spacing:1.7pt'> </span>for the first
time) should<span style='letter-spacing:1.7pt'> </span>be an<span
style='letter-spacing:2.0pt'> </span>exciting occasion. There should be
champagne and cheering, but all too often, there is sweating, cursing, and late
nights. Ive seen far too many websites launched at three in the morning by an
irritable, exhausted team. Fortunately, thats changing, partly thanks to cloud
deployment.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>No matter what deployment strategy you choose, the most
important thing you<span style='letter-spacing:1.45pt'> </span>can<span
style='letter-spacing:1.45pt'> </span>do<span style='letter-spacing:1.45pt'> </span>is<span
style='letter-spacing:1.4pt'> </span>to<span style='letter-spacing:1.45pt'> </span>start<span
style='letter-spacing:1.4pt'> </span>production<span style='letter-spacing:
1.45pt'> </span>deployments<span style='letter-spacing:1.4pt'> </span>early,<span
style='letter-spacing:1.45pt'> </span>before<span style='letter-spacing:1.4pt'>
</span>the<span style='letter-spacing:1.4pt'> </span>site<span
style='letter-spacing:1.4pt'> </span>is ready to go live. You dont have to
hook up the domain, so the public doesnt need to know. If youve already
deployed the site to production servers half a dozen times before the day of
launch, your chances of a successful launch will be much higher. Ideally, your
functioning website will<span style='letter-spacing:1.55pt'> </span>already<span
style='letter-spacing:1.65pt'> </span>be<span style='letter-spacing:1.55pt'> </span>running<span
style='letter-spacing:1.65pt'> </span>on<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>production<span style='letter-spacing:
1.65pt'> </span>server<span style='letter-spacing:1.55pt'> </span>long<span
style='letter-spacing:1.65pt'> </span>before<span style='letter-spacing:1.55pt'>
</span>launch:<span style='letter-spacing:1.55pt'> </span>all you have to do is
flip the switch from the old site to the new site<a name="_bookmark951"></a>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection449>

<h1><a name="22._Maintenance"></a><a name="The_Principles_of_Maintenance"></a><a
name="Have_a_Longevity_Plan"></a><a name="_bookmark952"></a>Chapter<span
style='letter-spacing:.55pt'> </span>22.<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Maintenance</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.95pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark953"></a><span style='color:#333333'>You launched the site!
Congratulations, now you never have to think<span style='letter-spacing:4.0pt'>
</span>about it again. Whats that? You <i>do </i>have to keep thinking about
it? Well, in that case, keep reading.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Although it has happened a couple of times in my career,
it has been the exception to the rule that you finish a site and then never
have to touch it again<span style='letter-spacing:1.6pt'> </span>(and<span
style='letter-spacing:1.6pt'> </span>when<span style='letter-spacing:1.6pt'> </span>it<span
style='letter-spacing:1.5pt'> </span>does<span style='letter-spacing:1.5pt'> </span>happen,<span
style='letter-spacing:1.6pt'> </span>its<span style='letter-spacing:1.5pt'> </span>usually<span
style='letter-spacing:1.6pt'> </span>because<span style='letter-spacing:1.5pt'>
</span>someone<span style='letter-spacing:1.5pt'> </span>else<span
style='letter-spacing:1.5pt'> </span>is doing the work, not that work doesnt
need to be done). I distinctly remember one website launch postmortem. I
piped up and said, Shouldnt we really call it a <i>postpartum</i>?<a
name="_bookmark954"></a></span><a href="#_bookmark992"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>1</span></sup></a><span
style='font-family:"Arial",sans-serif;color:#070707'> </span><span
style='color:#333333'>Launching a website really is more of a birth than a
death. Once it launches, youre glued to the<span style='letter-spacing:4.0pt'>
</span>analytics,<span style='letter-spacing:1.75pt'> </span>anxiously<span
style='letter-spacing:1.75pt'> </span>awaiting<span style='letter-spacing:1.75pt'>
</span>the clients reaction,<span style='letter-spacing:1.75pt'> </span>waking<span
style='letter-spacing:1.75pt'> </span>up<span style='letter-spacing:1.75pt'> </span>at
three in the morning to check to see if the site is still up. Its your baby.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Scoping a website, designing a website, building a
website: these are all activities that can be planned to death. But what
usually receives short<span style='letter-spacing:4.0pt'> </span>shrift is <i>planning
the maintenance </i>of a website. This chapter will give you some advice on
navigating those waters.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>The<span style='letter-spacing:-.3pt'> </span>Principles<span
style='letter-spacing:-.2pt'> </span>of<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Maintenance</span></span></h2>

<p class=MsoBodyText style='margin-top:.15pt'><b><span style='font-size:19.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<h3 style='margin-top:.05pt'><span style='color:#3F3F3F'>Have<span
style='letter-spacing:-.25pt'> </span>a<span style='letter-spacing:-.2pt'> </span>Longevity<span
style='letter-spacing:-.2pt'> Plan</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark956"></a><span style='color:#333333'>It <a name="_bookmark955"></a>always
surprises me when a client agrees on a price to build a website, but its never
discussed how long the site is expected to last. My experience is that if you
do good work, clients are happy to pay for it.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection450>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>What clients do <i>not </i>appreciate is the unexpected:
being told after three years that their site has to be rebuilt when they had an
unspoken expectation that it would last five.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The internet moves fast. If you built a website with the
absolute best and newest technology you could find, it might feel like a creaky
relic in two short years. Or it could truck along for seven, aging, but doing
so gracefully (this is a lot less common!).</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark957"></a><span style='color:#333333'>Setting expectations about
website longevity is part art, part salesmanship, and<span style='letter-spacing:
1.6pt'> </span>part<span style='letter-spacing:1.55pt'> </span>science.<span
style='letter-spacing:1.6pt'> </span>The<span style='letter-spacing:1.55pt'> </span>science<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.55pt'> </span>it<span
style='letter-spacing:1.5pt'> </span>involves<span style='letter-spacing:1.55pt'>
</span>something<span style='letter-spacing:1.6pt'> </span>that<span
style='letter-spacing:1.55pt'> </span>all<span style='letter-spacing:1.5pt'> </span>scientists,
but<span style='letter-spacing:1.4pt'> </span>very<span style='letter-spacing:
1.45pt'> </span>few<span style='letter-spacing:1.4pt'> </span>web<span
style='letter-spacing:1.45pt'> </span>developers,<span style='letter-spacing:
1.45pt'> </span>do:<span style='letter-spacing:1.4pt'> </span>keep<span
style='letter-spacing:1.45pt'> </span>records.<span style='letter-spacing:1.45pt'>
</span>Imagine<span style='letter-spacing:1.4pt'> </span>if<span
style='letter-spacing:1.4pt'> </span>you<span style='letter-spacing:1.45pt'> </span>had<span
style='letter-spacing:1.45pt'> </span>a record of every website your team had
ever launched, the history of maintenance requests and failures, the
technologies used, and how long before each site was rebuilt. There are many
variables, obviously, from the team members involved, to the economy, to the
shifting winds of technology, but that doesnt mean that meaningful trends
cant be<span style='letter-spacing:2.0pt'> </span>discovered in the data. You
may find that certain development approaches work better for your team, or
certain platforms or technologies. What I almost guarantee you will find is a
correlation between procrastination<span style='letter-spacing:2.0pt'> </span>and
defects: the longer you put off an infrastructure update or platform upgrade
thats causing pain, the worse it will be. Having a good issue- tracking<span
style='letter-spacing:1.75pt'> </span>system<span style='letter-spacing:1.7pt'>
</span>and<span style='letter-spacing:1.75pt'> </span>keeping<span
style='letter-spacing:1.75pt'> </span>meticulous<span style='letter-spacing:
1.7pt'> </span>records<span style='letter-spacing:1.7pt'> </span>will<span
style='letter-spacing:1.7pt'> </span>allow<span style='letter-spacing:1.7pt'> </span>you<span
style='letter-spacing:1.75pt'> </span>to<span style='letter-spacing:1.75pt'> </span>give
your client a much better (and more realistic) picture of what the life cycle<span
style='letter-spacing:2.0pt'> </span>of their project is going to be.</span></p>

<p class=MsoBodyText><span style='font-size:16.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The salesmanship of it boils down to money, of course. If
a client can<span style='letter-spacing:4.0pt'> </span>afford to have their
website completely rebuilt every three years, then they wont be very likely to
suffer from aging infrastructure (they will have<span style='letter-spacing:
4.0pt'> </span>other problems, though). On the flip side, there will be clients
who need</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection451>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Use_an_Issue_Tracker"></a><a name="_bookmark958"></a><span
style='color:#333333'>their dollar to stretch as far as possible, wanting a
website that will last for five or even seven years. (Ive known websites that
have dragged on for even longer than that, but I feel that seven years is the
maximum realistic<span style='letter-spacing:2.0pt'> </span>life<span
style='letter-spacing:1.5pt'> </span>expectancy<span style='letter-spacing:
1.6pt'> </span>for<span style='letter-spacing:1.5pt'> </span>websites<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>have<span
style='letter-spacing:1.5pt'> </span>any<span style='letter-spacing:1.6pt'> </span>hope<span
style='letter-spacing:1.5pt'> </span>of<span style='letter-spacing:1.5pt'> </span>continuing<span
style='letter-spacing:1.6pt'> </span>to<span style='letter-spacing:1.6pt'> </span>be
useful.) You have a responsibility to both of these clients, and both come with
their own challenges. With the clients who have a lot of money, dont just take
their money because they have it: use that extra money to give<span
style='letter-spacing:2.0pt'> </span>them something extraordinary. With the
clients on a tight budget, you will have to find creative ways to design their
website for greater longevity in<span style='letter-spacing:4.0pt'> </span>the
face of constantly changing technology. Both of these extremes have their<span
style='letter-spacing:1.65pt'> </span>own<span style='letter-spacing:1.75pt'> </span>challenges,<span
style='letter-spacing:1.75pt'> </span>but<span style='letter-spacing:1.65pt'> </span>ones<span
style='letter-spacing:1.65pt'> </span>that<span style='letter-spacing:1.65pt'> </span>can<span
style='letter-spacing:1.75pt'> </span>be<span style='letter-spacing:1.65pt'> </span>solved.<span
style='letter-spacing:1.75pt'> </span>Whats<span style='letter-spacing:1.65pt'>
</span>important, though is that you <i>know </i>what the expectations are.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, theres the art of the matter. This is what ties
it all together: understanding what the client can afford, and where you can
honestly convince the client to spend more money so they get value where they
need it. It is also the art of understanding technology futures, and being able
to predict what technologies will be painfully obsolete in five years and which
will be going strong.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Theres no way to predict anything with absolute
certainty, of course. You could bet wrong on technologies, personnel shifts can
completely change<span style='letter-spacing:2.0pt'> </span>the technical
culture of your organization, and technology vendors can go out of business
(though this is usually less of a problem in the open source world). The
technology that you thought would be solid for the lifetime of your product may
turn out to be a fad, and youll find yourself facing the decision to rebuild
sooner than you expected. On the flip side, sometimes<span style='letter-spacing:
2.0pt'> </span>the exactly right team comes together at the exact right time
with the exact right technology, and something is created that far outlives any
reasonable expectations. None of this uncertainty should deter you from having
a</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection452>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>plan, however: better to have a plan that goes awry than
to always be <span style='letter-spacing:-.1pt'>rudderless.</span></span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It should be clear to you by now that I feel that
JavaScript and Node are technologies that are going to be around for a while.
The Node community<span style='letter-spacing:2.0pt'> </span>is vibrant and
enthusiastic, and wisely based on a language that has clearly <i>won</i>. Most
important, perhaps, is that JavaScript is a multiparadigm language: object-oriented,
functional, procedural, synchronous, asynchronousits<span style='letter-spacing:
2.0pt'> </span>all<span style='letter-spacing:2.0pt'> </span>there.<span
style='letter-spacing:2.0pt'> </span>This<span style='letter-spacing:2.0pt'> </span>makes<span
style='letter-spacing:2.0pt'> </span>JavaScript<span style='letter-spacing:
2.0pt'> </span>an<span style='letter-spacing:2.0pt'> </span>inviting<span
style='letter-spacing:2.0pt'> </span>platform for developers from many
different backgrounds, and is in large part responsible for the pace of
innovation in the JavaScript ecosystem.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Use_Source_Control"></a><a name="_bookmark959"></a><span
style='color:#3F3F3F'>Use<span style='letter-spacing:-.2pt'> </span>Source<span
style='letter-spacing:-.2pt'> </span><span style='letter-spacing:-.1pt'>Control</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark961"></a><span style='color:#333333'>This probably seems obvious
to you, but its not just about <i>using </i>s<a name="_bookmark960"></a>ource
control, its about using it <i>well</i>. Why are you using source control?</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Understand the reasons, and make sure the tools are
supporting those reasons. There are many reasons to use source control, but the
one that always seems to me to have the biggest payoff is attribution: knowing
exactly what change was made when and who did it, so I can ask for more
information if necessary. Version control is one of our greatest tools for
understanding the history of our projects and how we work together as a <span
style='letter-spacing:-.1pt'>team.</span></span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Use<span style='letter-spacing:-.15pt'> </span>an<span
style='letter-spacing:-.1pt'> </span>Issue<span style='letter-spacing:-.15pt'> </span><span
style='letter-spacing:-.1pt'>Tracker</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark962"></a><span style='color:#333333'>Issue trackers go back to
the science of development. Without a systematic way to record the history of a
project, no insight is possible. Youve probably<span style='letter-spacing:
1.45pt'> </span>heard<span style='letter-spacing:1.45pt'> </span>it<span
style='letter-spacing:1.4pt'> </span>said<span style='letter-spacing:1.45pt'> </span>that<span
style='letter-spacing:1.4pt'> </span>the<span style='letter-spacing:1.4pt'> </span>definition<span
style='letter-spacing:1.45pt'> </span>of<span style='letter-spacing:1.4pt'> </span>insanity<span
style='letter-spacing:1.45pt'> </span>is<span style='letter-spacing:1.4pt'> </span>doing<span
style='letter-spacing:1.45pt'> </span>the<span style='letter-spacing:1.4pt'> </span>same
thing over and over again and expecting different results (often dubiously
attributed to Albert Einstein). It does seem crazy to repeat your mistakes</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection453>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>over and over again, but how can you avoid it if you
dont know what mistakes youre making?</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Record everything: every defect the client reports; every
defect you find before the client sees it; every complaint, every question,
every bit of<span style='letter-spacing:4.0pt'> </span>praise. Record how long
it took, who fixed it, what Git commits were involved, and who approved the
fix. The art here is finding tools that dont make this overly time-consuming
or onerous. A bad issue-tracking system will languish, unused, and it will be worse
than useless. A good issue- tracking system will yield vital insights into your
business, your team, and your clients.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Exercise_Good_Hygiene"></a><a name="_bookmark963"></a><span
style='color:#3F3F3F'>Exercise<span style='letter-spacing:-.3pt'> </span>Good<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Hygiene</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark964"></a><span
style='color:#333333'>Im<span style='letter-spacing:.6pt'> </span>not<span
style='letter-spacing:.6pt'> </span>talking<span style='letter-spacing:.65pt'> </span>about<span
style='letter-spacing:.6pt'> </span>brushing<span style='letter-spacing:.7pt'> </span>your<span
style='letter-spacing:.6pt'> </span>teeththough<span style='letter-spacing:
.65pt'> </span>you<span style='letter-spacing:.65pt'> </span>should<span
style='letter-spacing:.7pt'> </span>do<span style='letter-spacing:.65pt'> </span>that<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.25pt'>too</span></span></p>

<p class=MsoBodyText style='margin-top:5.5pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Im talking about version control, testing, code
reviews, and issue tracking. The tools you use are useful only if you use them,
and use them correctly. Code reviews are a great way to encourage hygiene
because <i>everything </i>can be touched on, from discussing the use of the
issue- tracking system in which the request originated to the tests that had to
be added to verify the fix to the version control commit comments.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The data you collect from your issue-tracking system
should be reviewed on a periodic basis and discussed with the team. From this
data, you can gain insights about whats working and whats not. You might be<span
style='letter-spacing:4.0pt'> </span>surprised by what you find.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Dont<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Procrastinate</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark965"></a><span style='color:#333333'>Institutional
procrastination can be one of the hardest things to combat. Usually<span
style='letter-spacing:.85pt'> </span>its something<span style='letter-spacing:
.85pt'> </span>that doesnt seem so<span style='letter-spacing:.85pt'> </span>bad:
you<span style='letter-spacing:.85pt'> </span>notice that your team</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection454>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Dont_Procrastinate"></a><a name="_bookmark966"></a><span
style='color:#333333'>is routinely eating up a lot of hours on a weekly update
that could be drastically improved by a little refactoring. Every week that you
delay refactoring is another week youre paying the inefficiency cost<a
name="_bookmark967"></a>.</span><a href="#_bookmark994"><sup><span
style='font-family:"Arial",sans-serif;color:#070707'>2</span></sup></a><span
style='font-family:"Arial",sans-serif;color:#070707'> </span><span
style='color:#333333'>Worse, some costs may increase over time.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark968"></a><span style='color:#333333'>A great example of this is
failing to update software dependencies. As the software ages, and team members
change, its harder to find people who remember (or ever understood) the creaky
old software. The support community starts to evaporate, and before long, the
technology is<span style='letter-spacing:4.0pt'> </span>deprecated and you
cant get any kind of support for it. You often hear this described as <i>technical
debt</i>, and its a very real thing. While you should avoid procrastinating,
understanding the website longevity can factor into these decisions: if youre
just about to redesign the whole website, theres little value in eliminating
technical debt thats been building up.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3 style='margin-top:.05pt'><a name="Do_Routine_QA_Checks"></a><a
name="_bookmark969"></a><span style='color:#3F3F3F'>Do<span style='letter-spacing:
-.1pt'> </span>Routine<span style='letter-spacing:-.15pt'> </span>QA<span
style='letter-spacing:-.1pt'> Checks</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark970"></a><span style='color:#333333'>For each of your websites,
you should have a <i>documented </i>routine QA check. That check should include
a link checker, HTML and CSS validation, and running your tests. The key here
is <i>documented</i>: if the<span style='letter-spacing:2.0pt'> </span>items
that compose the QA check arent documented, you will inevitably miss things. A
documented QA checklist for each site not only helps prevent overlooked checks,
but also allows new team members to be effective immediately. Ideally, the QA
checklist can be executed by a nontechnical team member. This will give your
(possibly) nontechnical manager confidence in your team and will allow you to
spread QA responsibilities around if you dont have a dedicated QA department.</span></p>

<p class=MsoBodyText style='margin-top:.3pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Depending on your relationship with your client, you may
also want to<span style='letter-spacing:4.0pt'> </span>share your QA checklist
(or part of it) with the client; its a good way to remind<span
style='letter-spacing:.75pt'> </span>them<span style='letter-spacing:.7pt'> </span>what<span
style='letter-spacing:.7pt'> </span>theyre<span style='letter-spacing:.7pt'> </span>paying<span
style='letter-spacing:.75pt'> </span>for,<span style='letter-spacing:.75pt'> </span>and<span
style='letter-spacing:.75pt'> </span>that<span style='letter-spacing:.7pt'> </span>you<span
style='letter-spacing:.75pt'> </span>are<span style='letter-spacing:.7pt'> </span>looking<span
style='letter-spacing:.75pt'> </span>out<span style='letter-spacing:.7pt'> </span>for<span
style='letter-spacing:.7pt'> </span>their</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection455>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="Prioritize_Lead_Tracking"></a><a
name="_bookmark975"></a><span style='color:#333333'>best<span style='letter-spacing:
.4pt'> </span><span style='letter-spacing:-.1pt'>interests.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark971"></a><a href="http://bit.ly/2qH3Y7L"><span style='color:
#333333;text-decoration:none'>As part of your routine QA check, I recommend
using </span><span style='color:#070707'>Google Webmaster</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>Tools</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#333333;
text-decoration:none'>and</span></a><span style='color:#333333'> </span><a
href="https://binged.it/2qPwF2c"><span style='color:#070707'>Bing Webmaster
Tools</span></a><a href="http://bit.ly/2qH3Y7L"><span style='color:#333333;
text-decoration:none'>. They are easy to set up, and they give</span></a><span
style='color:#333333'> you a very important view of your site: how the major
search engines see<span style='letter-spacing:4.0pt'> </span>it. It will alert
you to any problems with your <i>robots.txt </i>file, HTML issues that are
interfering with good search results, security issues, and more.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><a name="Monitor_Analytics"></a><a name="_bookmark972"></a><span
style='color:#3F3F3F'>Monitor<span style='letter-spacing:-.35pt'> </span><span
style='letter-spacing:-.1pt'>Analytics</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark973"></a><span style='color:#333333'>If youre not running
analytics on your website, you need to start now: it provides vital insight
into not just the popularity of your website, but also how your users are using
it. Google Analytics (GA) is excellent (and<span style='letter-spacing:4.0pt'> </span>free!),
and even if you supplement it with additional analytics services, theres
little reason not to include GA on your site.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Often, you will be able to spot subtle UX issues by
keeping an eye on your analytics. Are there certain pages that are not getting
the traffic that you expect?<span style='letter-spacing:1.8pt'> </span>That<span
style='letter-spacing:1.8pt'> </span>could<span style='letter-spacing:1.85pt'> </span>indicate<span
style='letter-spacing:1.8pt'> </span>a<span style='letter-spacing:1.8pt'> </span>problem<span
style='letter-spacing:1.8pt'> </span>with<span style='letter-spacing:1.85pt'> </span>your<span
style='letter-spacing:1.8pt'> </span>navigation<span style='letter-spacing:
1.85pt'> </span>or promotions, or an SEO issue. Are your bounce rates high?
That could indicate the content on your pages needs some tailoring (people are
getting to<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.3pt'> </span>site<span style='letter-spacing:1.3pt'> </span>by<span
style='letter-spacing:1.35pt'> </span>searching,<span style='letter-spacing:
1.35pt'> </span>but<span style='letter-spacing:1.3pt'> </span>when<span
style='letter-spacing:1.35pt'> </span>they<span style='letter-spacing:1.35pt'> </span>arrive<span
style='letter-spacing:1.3pt'> </span>on<span style='letter-spacing:1.35pt'> </span>your<span
style='letter-spacing:1.3pt'> </span>site,<span style='letter-spacing:1.35pt'> </span>they<span
style='letter-spacing:1.35pt'> </span>realize its<span style='letter-spacing:
1.55pt'> </span>not<span style='letter-spacing:1.55pt'> </span>what<span
style='letter-spacing:1.55pt'> </span>theyre<span style='letter-spacing:1.55pt'>
</span>looking<span style='letter-spacing:1.65pt'> </span>for).<span
style='letter-spacing:1.65pt'> </span>You<span style='letter-spacing:1.65pt'> </span>should<span
style='letter-spacing:1.65pt'> </span>have<span style='letter-spacing:1.55pt'> </span>an<span
style='letter-spacing:1.65pt'> </span>analytics<span style='letter-spacing:
1.55pt'> </span>checklist to go along with your QA checklist (it could even be
part of your QA checklist). That checklist should be a living document,
because over the lifetime of your website, you or your client may have shifting
priorities about what content is most important.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Optimize<span style='letter-spacing:-.35pt'> </span><span
style='letter-spacing:-.1pt'>Performance</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark974"></a><span
style='color:#333333'>Study<span style='letter-spacing:.55pt'> </span>after<span
style='letter-spacing:.55pt'> </span>study<span style='letter-spacing:.55pt'> </span>has<span
style='letter-spacing:.55pt'> </span>shown<span style='letter-spacing:.6pt'> </span>the<span
style='letter-spacing:.5pt'> </span>dramatic<span style='letter-spacing:.55pt'>
</span>effect<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.55pt'> </span>performance<span style='letter-spacing:
.5pt'> </span>on<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>website</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection456>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="Optimize_Performance"></a><a name="_bookmark976"></a><span
style='color:#333333'>traffic. Its a fast-paced world, and people expect their
content delivered quickly, especially on mobile platforms. The number one
principle in performance tuning is to <i>profile first, then optimize</i>.
Profiling means finding out what actually is slowing your site down. If you
spend days speeding up your content rendering when the problem is your social
media plugins, youre wasting precious time and money.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark977"></a><a href="http://bit.ly/2Qa3l15"><span style='color:
#070707'>Google PageSpeed Insights</span></a><span style='color:#070707'> </span><span
style='color:#333333'>is a great way to measure the performance of your website
(and now PageSpeed data is recorded in Google Analytics so you can monitor
performance trends). I will not only give you an overall score for mobile and
desktop performance, but also make prioritized suggestions about how to improve
performance.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Unless you currently have performance issues, its
probably not necessary to do periodic performance checks (monitoring Google
Analytics for significant changes in performance scores should be sufficient).
However,<span style='letter-spacing:4.0pt'> </span>it is gratifying to watch
your boost in traffic when you improve <span style='letter-spacing:-.1pt'>performance.</span></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Prioritize<span style='letter-spacing:-.35pt'> </span>Lead<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Tracking</span></span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark978"></a><span style='color:#333333'>In the internet world, the
strongest signal your visitors can give you to indicate interest in your
product or service is contact information. You should treat this information
with the utmost care. Any form that collects an email or phone number should be
tested routinely as part of your QA checklist, and there should <i>always </i>be
redundancy when you collect that information. The worst thing you can do to a
potential customer is collect contact information and then lose it.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Because lead tracking is so critical to the success of
your website, I recommend these five principles for collecting information:</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection457>

<p class=MsoNormal style='margin-top:3.8pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><a name="Prevent_Invisible_Failures"></a><a
name="_bookmark980"></a><i><span style='font-size:14.0pt;color:#333333'>Have<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.6pt'> </span>fallback<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.6pt'> </span>case<span
style='letter-spacing:.5pt'> </span>JavaScript<span style='letter-spacing:.5pt'>
</span><span style='letter-spacing:-.2pt'>fails</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:72.75pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>Collecting customer information via Ajax is fineit often
results in a better<span style='letter-spacing:1.8pt'> </span>user<span
style='letter-spacing:1.8pt'> </span>experience.<span style='letter-spacing:
1.85pt'> </span>However,<span style='letter-spacing:1.85pt'> </span>if<span
style='letter-spacing:1.8pt'> </span>JavaScript<span style='letter-spacing:
1.8pt'> </span>should<span style='letter-spacing:1.85pt'> </span>fail<span
style='letter-spacing:1.8pt'> </span>for<span style='letter-spacing:1.8pt'> </span>any
reason (the user could disable it, or a script on your website could have an
error, preventing your Ajax from functioning correctly), the form submission
should work anyway. A great way to test this is to disable JavaScript and use
your form. Its okay if the user experience is not ideal: the point is that
user data is not lost. To implement this, <i>always </i>have<span
style='letter-spacing:1.5pt'> </span>a<span style='letter-spacing:1.5pt'> </span>valid<span
style='letter-spacing:1.6pt'> </span>and<span style='letter-spacing:1.6pt'> </span>working<span
style='letter-spacing:1.6pt'> </span></span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>action<span style='letter-spacing:-2.0pt'> </span></span><span
style='color:#333333'>parameter<span style='letter-spacing:1.5pt'> </span>in<span
style='letter-spacing:1.6pt'> </span>your<span style='letter-spacing:1.5pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;form&gt;<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>tag,<span
style='letter-spacing:1.6pt'> </span>even if you normally use Ajax.</span></p>

<p class=MsoNormal style='margin-top:10.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>If<span style='letter-spacing:.65pt'> </span>you<span
style='letter-spacing:.75pt'> </span>use<span style='letter-spacing:.7pt'> </span>Ajax,<span
style='letter-spacing:.75pt'> </span>get<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.7pt'> </span>URL<span style='letter-spacing:.7pt'> </span>from<span
style='letter-spacing:.65pt'> </span>the<span style='letter-spacing:.7pt'> </span>forms<span
style='letter-spacing:.7pt'> </span></span></i><i><span style='font-size:14.0pt;
font-family:"Trebuchet MS",sans-serif;color:#333333'>action </span></i><i><span
style='font-size:14.0pt;color:#333333;letter-spacing:-.1pt'>parameter</span></i></p>

<p class=MsoBodyText style='margin-top:9.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:105%'><a
name="_bookmark979"></a><span style='color:#333333'>While not strictly
necessary, this helps prevent you from accidentally forgetting the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>action<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>parameter
on your </span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;form&gt;<span
style='letter-spacing:-2.0pt'> </span></span><span style='color:#333333'>tags.
If you tie your Ajax to successful no-JavaScript submission, its much harder
to lose customer data. For example, your form tag could be </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>&lt;form
action=&quot;/submit/email&quot; method=&quot;POST&quot;&gt;</span><span
style='color:#333333'>; then in your Ajax code, you would get the </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>action<span
style='letter-spacing:-2.55pt'> </span></span><span style='color:#333333'>for
the form from the DOM, and use that in your Ajax submission code.</span></p>

<p class=MsoNormal style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Provide<span style='letter-spacing:.4pt'> </span>at<span
style='letter-spacing:.4pt'> </span>least<span style='letter-spacing:.45pt'> </span>one<span
style='letter-spacing:.4pt'> </span>level<span style='letter-spacing:.45pt'> </span>of<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>redundancy</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Youll probably want to save leads to a database or an
external service such as Campaign Monitor. But what if your database fails, or
Campaign Monitor goes down, or theres a network issue? You still dont want to
lose that lead. A common way to provide redundancy is<span style='letter-spacing:
4.0pt'> </span>to send an email in addition to storing the lead. If you take
this approach, you should not use a persons email address, but a shared email
address (such as <i>dev@meadowlarktravel.com</i>): the redundancy does no good
if you send it to a person and that person leaves the organization. You could
also store the lead in a backup database, or<span style='letter-spacing:2.0pt'>
</span>even a CSV file. However, <i>whenever </i>your primary storage fails,
there should be some mechanism to alert you of the failure. Collecting a
redundant backup is the first half of the battle; being aware of failures and
taking appropriate action is the second half.</span></p>

<p class=MsoNormal style='margin-top:10.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>In<span style='letter-spacing:.5pt'> </span>case<span
style='letter-spacing:.45pt'> </span>of<span style='letter-spacing:.5pt'> </span>total<span
style='letter-spacing:.45pt'> </span>storage<span style='letter-spacing:.45pt'>
</span>failure,<span style='letter-spacing:.55pt'> </span>inform<span
style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.2pt'>user</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection458>

<p class=MsoBodyText style='margin-top:4.0pt;margin-right:82.35pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="Code_Reuse_and_Refactoring"></a><a name="_bookmark983"></a><span
style='color:#333333'>Lets say you have three levels of redundancy: your
primary storage is Campaign Monitor, and if that fails, you back up to a CSV
file and<span style='letter-spacing:4.0pt'> </span>send an email to </span><a
href="mailto:dev@meadowlarktravel.com"><i><span style='color:#333333;
text-decoration:none'>dev@meadowlarktravel.com</span></i><span
style='color:#333333;text-decoration:none'>.</span></a><span style='color:#333333'>
If <i>all </i>of these channels fail,<span style='letter-spacing:1.65pt'> </span>the<span
style='letter-spacing:1.6pt'> </span>user<span style='letter-spacing:1.6pt'> </span>should<span
style='letter-spacing:1.65pt'> </span>receive<span style='letter-spacing:1.6pt'>
</span>a<span style='letter-spacing:1.6pt'> </span>message<span
style='letter-spacing:1.6pt'> </span>that<span style='letter-spacing:1.6pt'> </span>says<span
style='letter-spacing:1.6pt'> </span>something<span style='letter-spacing:1.65pt'>
</span>like, Were<span style='letter-spacing:2.0pt'> </span>sorry,<span
style='letter-spacing:2.0pt'> </span>were<span style='letter-spacing:2.0pt'> </span>experiencing<span
style='letter-spacing:2.0pt'> </span>technical<span style='letter-spacing:2.0pt'>
</span>difficulties.<span style='letter-spacing:2.0pt'> </span>Please<span
style='letter-spacing:2.0pt'> </span>try again later, or contact </span><a
href="mailto:support@meadowlarktravel.com"><i><span style='color:#333333;
text-decoration:none'>support@meadowlarktravel.com</span></i><span
style='color:#333333;text-decoration:none'>.</span></a><span style='color:#333333'></span></p>

<p class=MsoNormal style='margin-top:10.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Check<span style='letter-spacing:.55pt'> </span>for<span
style='letter-spacing:.6pt'> </span>positive<span style='letter-spacing:.55pt'>
</span>confirmation,<span style='letter-spacing:.65pt'> </span>not<span
style='letter-spacing:.55pt'> </span>absence<span style='letter-spacing:.6pt'> </span>of<span
style='letter-spacing:.55pt'> </span>an<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>error</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.0pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;text-align:justify;line-height:
105%'><span style='color:#333333'>Its quite common to have your Ajax handler
return an object with an </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>err<span style='letter-spacing:-1.75pt'> </span></span><span
style='color:#333333'>property<span style='letter-spacing:-.2pt'> </span>in the
case of failure; the client code then has something that looks like this: </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>if(data.err){ /*
inform user of failure</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:107%'><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>*/ } else { /*
thank user for successful submission */ }</span><span style='color:#333333'>.
Avoid this approach. Theres nothing wrong with setting an </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>err </span><span
style='color:#333333'>property,<span style='letter-spacing:1.55pt'> </span>but<span
style='letter-spacing:1.45pt'> </span>if<span style='letter-spacing:1.45pt'> </span>theres<span
style='letter-spacing:1.45pt'> </span>an<span style='letter-spacing:1.55pt'> </span>error<span
style='letter-spacing:1.45pt'> </span>in<span style='letter-spacing:1.55pt'> </span>your<span
style='letter-spacing:1.45pt'> </span>Ajax<span style='letter-spacing:1.55pt'> </span>handler,<span
style='letter-spacing:1.55pt'> </span>leading<span style='letter-spacing:1.55pt'>
</span>the server to<span style='letter-spacing:1.45pt'> </span>respond<span
style='letter-spacing:1.45pt'> </span>with<span style='letter-spacing:1.45pt'> </span>a
500<span style='letter-spacing:1.45pt'> </span>response code or a response that
isnt valid JSON, <i>this approach could fail silently</i>. The users lead
will disappear into the void, and they will be none the wiser. Instead,<span
style='letter-spacing:2.0pt'> </span>provide a </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>success<span style='letter-spacing:
-1.7pt'> </span></span><span style='color:#333333'>property for successful
submission (even if the primary storage failed: if the users information was
recorded by <i>something</i>, you may return </span><span style='font-family:
"BIZ UDGothic",sans-serif;color:#333333'>success</span><span style='color:#333333'>).
Then your client-side code becomes </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>if(data.success){ /* thank user for successful submission */ }
else { /* inform user of failure \*/ }</span><span style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:17.0pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Prevent<span style='letter-spacing:-.4pt'> </span>Invisible<span
style='letter-spacing:-.35pt'> </span><span style='letter-spacing:-.1pt'>Failures</span></span></h3>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:71.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark981"></a><span style='color:#333333'>I see it all the time:
because developers are in a hurry, they record error<a name="_bookmark982"></a>s
in ways that never get checked. Whether it is a logfile, a table in a database,
a client-side console log, or an email that goes to a dead address, the end<span
style='letter-spacing:4.0pt'> </span>result is the same: <i>your website has
quality problems that are going <span style='letter-spacing:-.1pt'>unnoticed</span></i><span
style='letter-spacing:-.1pt'>.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:83.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='font-size:14.0pt;line-height:133%;color:#333333'>The number one defense
you can have against this problem is to <i>provide<span style='letter-spacing:
2.0pt'> </span>an<span style='letter-spacing:.9pt'> </span>easy,<span
style='letter-spacing:.9pt'> </span>standard<span style='letter-spacing:.9pt'> </span>method<span
style='letter-spacing:.9pt'> </span>for logging<span style='letter-spacing:
.9pt'> </span>errors</i>.<span style='letter-spacing:.9pt'> </span>Document it.<span
style='letter-spacing:.9pt'> </span>Dont make it</span></p>

</div>

<span style='font-size:14.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection459>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name=Middleware></a><a name="_bookmark986"></a><span style='color:#333333'>difficult.
Dont make it obscure. Make sure every developer that touches your project is
aware of it. It can be as simple as exposing a<span style='letter-spacing:4.0pt'>
</span></span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>meadowlarkLog<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>function
(</span><span style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>log<span
style='letter-spacing:-2.2pt'> </span></span><span style='color:#333333'>is
often used by other packages). It doesnt matter if the function is recording
to a database, flat file, email, or some combination<span style='letter-spacing:
1.55pt'> </span>thereof:<span style='letter-spacing:1.5pt'> </span>the<span
style='letter-spacing:1.5pt'> </span>important<span style='letter-spacing:1.5pt'>
</span>thing<span style='letter-spacing:1.55pt'> </span>is<span
style='letter-spacing:1.5pt'> </span>that<span style='letter-spacing:1.5pt'> </span>it<span
style='letter-spacing:1.5pt'> </span>is<span style='letter-spacing:1.5pt'> </span>standard.<span
style='letter-spacing:1.55pt'> </span>It<span style='letter-spacing:1.5pt'> </span>also
allows you to improve your logging mechanism (for example, flat files are less
useful when you scale out your server, so you would modify your </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>meadowlarkLog<span
style='letter-spacing:-1.8pt'> </span></span><span style='color:#333333'>function
to record to a database instead). Once you have the logging mechanism in place,
documented, and everyone on your team knows about it, add check logs to your
QA checklist, and have instructions on how to do that.</span></p>

<p class=MsoBodyText style='margin-top:.15pt'><span style='font-size:23.5pt'>&nbsp;</span></p>

<h2 style='margin-top:.05pt'><span style='color:#8E0011'>Code<span
style='letter-spacing:-.25pt'> </span>Reuse<span style='letter-spacing:-.15pt'>
</span>and<span style='letter-spacing:-.15pt'> </span><a name="_bookmark984"></a><span
style='letter-spacing:-.1pt'>Refactoring</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:71.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark985"></a><span style='color:#333333'>One<span style='letter-spacing:
1.2pt'> </span>tragedy<span style='letter-spacing:1.25pt'> </span>I<span
style='letter-spacing:1.2pt'> </span>see<span style='letter-spacing:1.2pt'> </span>all<span
style='letter-spacing:1.2pt'> </span>the<span style='letter-spacing:1.2pt'> </span>time<span
style='letter-spacing:1.2pt'> </span>is<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>reinvention<span style='letter-spacing:
1.25pt'> </span>of<span style='letter-spacing:1.2pt'> </span>the<span
style='letter-spacing:1.2pt'> </span>wheel,<span style='letter-spacing:1.25pt'>
</span>over<span style='letter-spacing:1.2pt'> </span>and over and over again.
Usually its just small things: tidbits that feel easier to just rewrite than
to dig up in some project that you did months ago. All of those<span
style='letter-spacing:1.3pt'> </span>little<span style='letter-spacing:1.3pt'> </span>rewritten<span
style='letter-spacing:1.35pt'> </span>snippets<span style='letter-spacing:1.3pt'>
</span>add<span style='letter-spacing:1.35pt'> </span>up.<span
style='letter-spacing:1.35pt'> </span>Worse,<span style='letter-spacing:1.35pt'>
</span>it<span style='letter-spacing:1.3pt'> </span>flies<span
style='letter-spacing:1.3pt'> </span>in<span style='letter-spacing:1.35pt'> </span>the<span
style='letter-spacing:1.3pt'> </span>face<span style='letter-spacing:1.3pt'> </span>of<span
style='letter-spacing:1.3pt'> </span>good QA: youre probably not going to go
to the trouble to write tests for all<span style='letter-spacing:4.0pt'> </span>these
little snippets (and if you do, youre doubling the time that youre wasting<span
style='letter-spacing:1.0pt'> </span>by<span style='letter-spacing:1.0pt'> </span>not
reusing<span style='letter-spacing:1.0pt'> </span>existing<span
style='letter-spacing:1.0pt'> </span>code).<span style='letter-spacing:1.0pt'> </span>Each<span
style='letter-spacing:1.0pt'> </span>snippetdoing<span style='letter-spacing:
1.0pt'> </span>the same thing</span></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>can<span
style='letter-spacing:.5pt'> </span>have<span style='letter-spacing:.45pt'> </span>different<span
style='letter-spacing:.5pt'> </span>bugs.<span style='letter-spacing:.5pt'> </span>Its<span
style='letter-spacing:.5pt'> </span>a<span style='letter-spacing:.45pt'> </span>bad<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>habit.</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Development in Node and Express offers some great ways to
combat this problem. Node brought namespacing (via modules) and packages (via
npm), and Express brings the concept of middleware. With these tools at your
disposal, developing reusable code is a lot easier.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F'>Private<span style='letter-spacing:-.25pt'> </span>npm<span
style='letter-spacing:-.25pt'> </span><span style='letter-spacing:-.1pt'>Registry</span></span></h3>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection460>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:89.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="Private_npm_Registry"></a><a name="_bookmark987"></a><a
name="_bookmark988"></a><span style='color:#333333'>npm registries are a great
place to store shared code; its what npm was designed for, after all. In
addition to simple storage, you get versioning, and a convenient way to include
those packages in other projects.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:83.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Theres a fly in the ointment, though: unless youre
working in a completely open source organization, you may not want to create
npm packages for all of your reusable code. (There can be other reasons than
intellectual property protection, too: your packages could be so organization-
or project-specific that it doesnt make sense to make them available on a
public registry.)</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>One way to handle this is <i>private npm registries</i>.
npm now offers Orgs, which allows you to publish private packages and give your
developers paid logins, allowing them to access those private packages. See </span><a
href="https://www.npmjs.com/products"><span style='color:#070707'>npm</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for more information
about npm Orgs and private packages.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:16.5pt'>&nbsp;</span></p>

<h3><span style='color:#3F3F3F;letter-spacing:-.1pt'>Middleware</span></h3>

<p class=MsoBodyText style='margin-top:13.7pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark989"></a><span style='color:#333333'>As weve seen throughout
this book, writing middleware is not some big, scary, complicated thing: weve
done it a dozen times in this book and, after a while, you will do it without
even thinking about it. The next step, then, is to put reusable middleware in a
package and put it in an npm <span style='letter-spacing:-.1pt'>registry.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:73.15pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:132%'><span
style='color:#333333'>If you find that your middleware is too project-specific
to put in a reusable package, you should consider refactoring the middleware to
be configured for more general use. Remember that you can pass configuration
objects<span style='letter-spacing:2.0pt'> </span>into<span style='letter-spacing:
1.35pt'> </span>middleware<span style='letter-spacing:1.3pt'> </span>to<span
style='letter-spacing:1.35pt'> </span>make<span style='letter-spacing:1.3pt'> </span>them<span
style='letter-spacing:1.3pt'> </span>useful<span style='letter-spacing:1.3pt'> </span>in<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.3pt'> </span>whole<span
style='letter-spacing:1.3pt'> </span>range<span style='letter-spacing:1.3pt'> </span>of<span
style='letter-spacing:1.3pt'> </span>situations.<span style='letter-spacing:
1.35pt'> </span>Here is an overview of the most common ways to expose
middleware in a Node module. All of the following assume that youre using
these modules as a package, and that package is called </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>meadowlark-stuff</span><span
style='color:#333333'>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:132%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection461>

<h4 align=left style='margin-top:3.55pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#545454;letter-spacing:.55pt'>MODULE</span><span style='color:
#545454;letter-spacing:3.1pt'> </span><span style='color:#545454;letter-spacing:
.6pt'>EXPOSES</span><span style='color:#545454;letter-spacing:3.15pt'> </span><span
style='color:#545454;letter-spacing:.6pt'>MIDDLEWARE</span><span
style='color:#545454;letter-spacing:3.1pt'> </span><span style='color:#545454;
letter-spacing:.6pt'>FUNCTION</span><span style='color:#545454;letter-spacing:
3.15pt'> </span><span style='color:#545454;letter-spacing:.5pt'>DIRECTLY</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Use<span
style='letter-spacing:.55pt'> </span>this<span style='letter-spacing:.6pt'> </span>method<span
style='letter-spacing:.6pt'> </span>if<span style='letter-spacing:.6pt'> </span>your<span
style='letter-spacing:.6pt'> </span>middleware<span style='letter-spacing:.55pt'>
</span>doesnt<span style='letter-spacing:.6pt'> </span>need<span
style='letter-spacing:.65pt'> </span>a<span style='letter-spacing:.55pt'> </span>configuration<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>object:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: module.exports = (req, res, next) =&gt; {&#13;&#10;// your middleware goes here...remember to call next()&#13;&#10;// or next('route') unless this middleware is expected&#13;&#10;// to be an endpoint&#13;&#10;next()&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>To<span
style='letter-spacing:.35pt'> </span>use<span style='letter-spacing:.35pt'> </span>this<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.1pt'>middleware:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image028.gif"
  alt="Text Box: const stuff = require('meadowlark-stuff')&#13;&#10;&#13;&#10;app.use(stuff)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:11.5pt'>&nbsp;</span></p>

<h4 align=left style='margin-top:4.9pt;margin-right:85.3pt;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left;line-height:106%'><span
style='color:#545454;letter-spacing:.55pt'>MODULE </span><span
style='color:#545454;letter-spacing:.6pt'>EXPOSES </span><span
style='color:#545454'>A <span style='letter-spacing:.6pt'>FUNCTION </span><span
style='letter-spacing:.5pt'>THAT </span><span style='letter-spacing:.6pt'>RETURNS</span><span
style='letter-spacing:4.0pt'> </span><span style='letter-spacing:.5pt'>MIDDLEWARE</span></span></h4>

<p class=MsoBodyText style='margin-top:12.4pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Use this method if your middleware needs a configuration
object or other <span style='letter-spacing:-.1pt'>information:</span></span></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image021.gif"
  alt="Text Box: module.exports = config =&gt; {&#13;&#10;// it's common to create the config object&#13;&#10;// if it wasn't passed in:&#13;&#10;if(!config) config = {}&#13;&#10;&#13;&#10;return (req, res, next) =&gt; {&#13;&#10;// your middleware goes here...remember to call next()&#13;&#10;// or next('route') unless this middleware is expected&#13;&#10;// to be an endpoint&#13;&#10;next()&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>To<span
style='letter-spacing:.35pt'> </span>use<span style='letter-spacing:.35pt'> </span>this<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.1pt'>middleware:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: const stuff = require('meadowlark-stuff')({ option: 'my choice' })"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:7.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection462>

<p class=MsoNormal align=center style='margin-top:2.0pt;margin-right:1.55pt;
margin-bottom:0cm;margin-left:0cm;margin-bottom:.0001pt;text-align:center'><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:#000087;
letter-spacing:-.1pt;background:#FBFBFB'>app</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:black;letter-spacing:-.1pt;
background:#FBFBFB'>.</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:#000087;letter-spacing:-.1pt;background:#FBFBFB'>use</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
letter-spacing:-.1pt;background:#FBFBFB'>(</span><span style='font-size:10.5pt;
font-family:"BIZ UDGothic",sans-serif;color:#000087;letter-spacing:-.1pt;
background:#FBFBFB'>stuff</span><span style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;
color:black;letter-spacing:-.1pt;background:#FBFBFB'>)</span><span
style='font-size:10.5pt;font-family:"BIZ UDGothic",sans-serif;color:black;
background:#FBFBFB'> </span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:16.0pt;
font-family:"BIZ UDGothic",sans-serif'>&nbsp;</span></p>

<h4 align=left style='margin-top:0cm;margin-right:85.3pt;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left;line-height:106%'><span
style='color:#545454;letter-spacing:.55pt'>MODULE </span><span
style='color:#545454;letter-spacing:.6pt'>EXPOSES </span><span
style='color:#545454'>AN<span style='letter-spacing:.55pt'> OBJECT </span><span
style='letter-spacing:.5pt'>THAT </span><span style='letter-spacing:.6pt'>CONTAINS</span><span
style='letter-spacing:4.0pt'> </span><span style='letter-spacing:.5pt'>MIDDLEWARE</span></span></h4>

<p class=MsoBodyText style='margin-top:12.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Use<span
style='letter-spacing:.45pt'> </span>this<span style='letter-spacing:.45pt'> </span>option<span
style='letter-spacing:.55pt'> </span>if<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.55pt'> </span>want<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.55pt'> </span>expose<span style='letter-spacing:.45pt'> </span>multiple<span
style='letter-spacing:.5pt'> </span>related<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>middleware:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.15pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image041.gif"
  alt="Text Box: module.exports = config =&gt; {&#13;&#10;// it's common to create the config object&#13;&#10;// if it wasn't passed in:&#13;&#10;if(!config) config = {}&#13;&#10;&#13;&#10;return {&#13;&#10;m1: (req, res, next) =&gt; {&#13;&#10;// your middleware goes here...remember to call next()&#13;&#10;// or next('route') unless this middleware is expected&#13;&#10;// to be an endpoint&#13;&#10;next()&#13;&#10;},&#13;&#10;m2: (req, res, next) =&gt; { next()&#13;&#10;},&#13;&#10;}&#13;&#10;}&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:13.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>To<span
style='letter-spacing:.35pt'> </span>use<span style='letter-spacing:.35pt'> </span>this<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.1pt'>middleware<a
name="_bookmark990"></a>:</span></span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=139 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=561 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image033.gif"
  alt="Text Box: const stuff = require('meadowlark-stuff')({ option: 'my choice' })&#13;&#10;&#13;&#10;app.use(stuff.m1) app.use(stuff.m2)&#13;&#10;"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.1pt'><span style='font-size:11.0pt'>&nbsp;</span></p>

<h2 style='margin-top:4.5pt'><a name="_bookmark991"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When youre building a website, the focus is often on the
launch, and for good reason: a lot of excitement surrounds a launch. However, a
client that<span style='letter-spacing:2.0pt'> </span>is<span style='letter-spacing:
1.6pt'> </span>delighted<span style='letter-spacing:1.65pt'> </span>by<span
style='letter-spacing:1.65pt'> </span>a<span style='letter-spacing:1.6pt'> </span>newly<span
style='letter-spacing:1.65pt'> </span>launched<span style='letter-spacing:1.65pt'>
</span>website<span style='letter-spacing:1.6pt'> </span>will<span
style='letter-spacing:1.6pt'> </span>quickly<span style='letter-spacing:1.65pt'>
</span>become<span style='letter-spacing:1.6pt'> </span>a dissatisfied customer
if care isnt taken in maintaining the website.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection463>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Approaching your maintenance plan with the same care with
which you launch websites will provide the kind of experience that keeps
clients coming back.</span></p>

<p class=MsoBodyText><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><br clear=ALL>
</p>

<p class=MsoListParagraph style='margin-top:8.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:81.45pt;margin-bottom:.0001pt;text-indent:-14.15pt'><a
name="_bookmark992"></a><u><span style='font-size:10.5pt;font-family:"Arial",sans-serif;
color:#070707;text-decoration:none'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></u><span style='font-size:10.5pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>As<span style='letter-spacing:.3pt'> </span>it<span
style='letter-spacing:.35pt'> </span>happe<a name="_bookmark993"></a>ned,<span
style='letter-spacing:.3pt'> </span>the<span style='letter-spacing:.35pt'> </span>term<span
style='letter-spacing:.35pt'> </span><i>postpartum<span style='letter-spacing:
.3pt'> </span></i>was<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.35pt'> </span>little<span style='letter-spacing:.3pt'> </span>too<span
style='letter-spacing:.35pt'> </span>visceral.<span style='letter-spacing:.3pt'>
</span>We<span style='letter-spacing:.35pt'> </span>now<span style='letter-spacing:
.35pt'> </span>call<span style='letter-spacing:.3pt'> </span><span
style='letter-spacing:-.2pt'>them</span></span></p>

<p class=MsoNormal style='margin-top:.85pt;margin-right:0cm;margin-bottom:0cm;
margin-left:82.0pt;margin-bottom:.0001pt'><i><span style='font-size:10.5pt;
color:#333333;letter-spacing:-.1pt'>retrospectives</span></i><span
style='font-size:10.5pt;color:#333333;letter-spacing:-.1pt'>.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:8.0pt'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:4.95pt;margin-right:75.95pt;
margin-bottom:0cm;margin-left:82.0pt;margin-bottom:.0001pt;text-indent:-14.65pt;
line-height:106%'><a name="_bookmark994"></a><u><span style='font-size:10.5pt;
line-height:106%;font-family:"Arial",sans-serif;color:#070707;text-decoration:
none'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span></u><span
style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>Mike Wilson of </span><a
href="http://www.fuelyouth.com/"><span style='font-size:10.5pt;line-height:
106%;font-family:"Times New Roman",serif;color:#070707'>Fuel</span></a><span
style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif;
color:#070707;text-decoration:none'> </span><span style='font-size:10.5pt;
line-height:106%;font-family:"Times New Roman",serif;color:#333333;text-decoration:
none'>has this rule of thumb: The third time you do something, take the time<span
style='letter-spacing:4.0pt'> </span>to automate it.</span></p>

</div>

<span style='font-size:10.5pt;line-height:106%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection464>

<h1 style='margin-right:85.3pt;line-height:105%'><a name="Stack_Overflow"></a><a
name="_bookmark1001"></a><a name="23._Additional_Resources"></a><a
name="_bookmark995"></a>Chapter 23. Additional <span style='letter-spacing:
-.1pt'>Resources</span></h1>

<p class=MsoBodyText style='margin-top:.5pt'><br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.1pt'><b><span style='font-size:33.0pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark996"></a><span style='color:#333333'>In this book, I have given
you a comprehensive overview of building websites with Express. And we have
covered a remarkable amount of ground, but weve still only scratched the
surface of the packages, techniques, and frameworks that are available to you. In
this chapter, well discuss where you can go for additional resources.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name="Online_Documentation"></a><a name="_bookmark997"></a><span
style='color:#8E0011'>Online<span style='letter-spacing:-.25pt'> </span><span
style='letter-spacing:-.1pt'>Documentation</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:88.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
133%'><a name="_bookmark998"></a><a href="https://developer.mozilla.org/"><span
style='color:#333333;text-decoration:none'>For JavaScript, CSS, and HTML
documentation, the </span><span style='color:#070707'>Mozilla Developer</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>Network
(MDN)</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>is without equal. If I need JavaScript
documentation, I</span></a><span style='color:#333333'> either search directly
on MDN or append mdn to my search query.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Otherwise, inevitably, w3schools appears in the search.
Whoever is managing SEO for w3schools is a genius, but I recommend avoiding
this site: I find the documentation is often severely lacking.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark999"></a><span style='color:#333333'>Where<span
style='letter-spacing:1.4pt'> </span>MDN<span style='letter-spacing:1.4pt'> </span>is<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>great<span
style='letter-spacing:1.4pt'> </span>HTML<span style='letter-spacing:1.4pt'> </span>reference,<span
style='letter-spacing:1.45pt'> </span>if<span style='letter-spacing:1.4pt'> </span>youre<span
style='letter-spacing:1.4pt'> </span>new<span style='letter-spacing:1.4pt'> </span>to<span
style='letter-spacing:1.45pt'> </span>HTML5<span style='letter-spacing:1.45pt'>
</span>(or even if youre not), you should read Mark Pilgrims </span><a
href="http://diveintohtml5.info/"><i><span style='color:#070707'>Dive Into
HTML5</span></i></a><span style='color:#333333'>. </span><a
href="http://developers.whatwg.org/"><span style='color:#333333;text-decoration:
none'>WHATWG<span style='letter-spacing:2.0pt'> </span>maintains<span
style='letter-spacing:2.0pt'> </span>an<span style='letter-spacing:2.0pt'> </span>excellent<span
style='letter-spacing:2.0pt'> </span></span><span style='color:#070707'>living<span
style='letter-spacing:2.0pt'> </span>standard<span style='letter-spacing:2.0pt'>
</span>HTML5</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>specification</span><span style='color:#333333;
text-decoration:none'>; it is usually where I turn to first for really hard-</span></a><span
style='color:#333333'>to-answer HTML questions. Finally, the official
specifications for HTML and CSS<span style='letter-spacing:4.0pt'> </span>are
located on the </span><a href="http://www.w3.org/"><span style='color:#070707'>W3C
website</span></a><span style='color:#333333'>; they are dry, difficult-to-read
documents, but sometimes its your only recourse for the very hardest problems.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-left:55.0pt'><a name="_bookmark1000"></a><span
style='color:#333333'>JavaScript<span style='letter-spacing:.75pt'> </span>adheres<span
style='letter-spacing:.75pt'> </span>to<span style='letter-spacing:.8pt'> </span>the<span
style='letter-spacing:.75pt'> </span></span><a
href="http://bit.ly/ECMA-262_specs"><span style='color:#070707'>ECMA-262<span
style='letter-spacing:.8pt'> </span>ECMAScript<span style='letter-spacing:.75pt'>
</span>language<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>specification</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>.</span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection465>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>To track the availability of JavaScript features in Node
(and various browsers), see the excellent </span><a href="http://bit.ly/36SoK53"><span
style='color:#070707'>guide maintained by @kangax</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:131%'><a
name="_bookmark1002"></a><span style='color:#333333'>The </span><a
href="https://nodejs.org/en/docs"><span style='color:#070707'>Node
documentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>is very good, and comprehensive, and it should be your
first choice for authoritative documentation about Node modules (such as </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>http</span><span
style='color:#333333'>, </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>https</span><span style='color:#333333'>, and </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>fs</span><span
style='color:#333333'>). The </span><a href="https://expressjs.com/"><span
style='color:#070707'>Express documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>is quite good, but not as comprehensive as
one might like. The </span><a href="https://docs.npmjs.com/"><span
style='color:#070707'>npm documentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>is comprehensive and useful.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><a name=Periodicals></a><a name="_bookmark1003"></a><span style='color:
#8E0011;letter-spacing:-.1pt'>Periodicals</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark1004"></a><span style='color:#333333'>There are three free
periodicals you should absolutely subscribe to and read dutifully every week:</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:10.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:342.75pt;margin-bottom:
0cm;margin-left:105.35pt;margin-bottom:.0001pt;line-height:170%'><span
style='position:relative;z-index:16010752'><span style='left:0px;position:absolute;
left:169px;top:-364180px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:16011264'><span style='left:0px;position:absolute;
left:169px;top:-364180px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><span
style='position:relative;z-index:16011776'><span style='left:0px;position:absolute;
left:169px;top:-364180px;width:7px;height:1px'><img width=7 height=1
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image040.gif"></span></span><a
href="http://javascriptweekly.com/"><span style='color:#070707'>JavaScript
Weekly</span></a><span style='color:#070707'> </span><a
href="http://nodeweekly.com/"><span style='color:#070707'>Node Weekly</span></a><span
style='color:#070707'> </span><a href="http://html5weekly.com/"><span
style='color:#070707'>HTML5 Weekly</span></a></p>

<p class=MsoBodyText style='margin-top:2.85pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>These three periodicals will keep you informed of the
latest news, services, blogs, and tutorials as they become available.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Stack<span style='letter-spacing:-.2pt'> </span><span
style='letter-spacing:-.1pt'>Overflow</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
name="_bookmark1005"></a><span style='color:#333333'>Chances are good that
youve already used Stack Overflow (SO): since its inception<span
style='letter-spacing:1.5pt'> </span>in<span style='letter-spacing:1.5pt'> </span>2008,<span
style='letter-spacing:1.5pt'> </span>it has become the dominant online Q&amp;A
site,<span style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:
1.5pt'> </span>is your best resource to get your JavaScript, Node, and Express
questions answered<span style='letter-spacing:1.85pt'> </span>(and<span
style='letter-spacing:1.85pt'> </span>any<span style='letter-spacing:1.85pt'> </span>other<span
style='letter-spacing:1.8pt'> </span>technology<span style='letter-spacing:
1.85pt'> </span>covered<span style='letter-spacing:1.85pt'> </span>in<span
style='letter-spacing:1.85pt'> </span>this<span style='letter-spacing:1.8pt'> </span>book).<span
style='letter-spacing:1.85pt'> </span>Stack Overflow is a community-maintained,
reputation-based Q&amp;A site. The reputation model is whats responsible for
the quality of the site and its continued<span style='letter-spacing:1.5pt'> </span>success.<span
style='letter-spacing:1.5pt'> </span>Users can<span style='letter-spacing:1.5pt'>
</span>gain<span style='letter-spacing:1.5pt'> </span>reputation<span
style='letter-spacing:1.5pt'> </span>by<span style='letter-spacing:1.5pt'> </span>having<span
style='letter-spacing:1.5pt'> </span>their questions or</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection466>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>answers upvoted or having an accepted answer. You dont
have to have any reputation to ask a question, and registration is free.
However, there<span style='letter-spacing:4.0pt'> </span>are things you can do
to increase the chances of getting your question answered in a useful manner,
which well discuss in this section.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Reputation is the currency of Stack Overflow, and while
there are people out there who genuinely want to help you, its the chance to
gain<span style='letter-spacing:4.0pt'> </span>reputation thats the icing on
the cake that motivates good answers. There are<span style='letter-spacing:
1.25pt'> </span>a<span style='letter-spacing:1.25pt'> </span>lot<span
style='letter-spacing:1.25pt'> </span>of<span style='letter-spacing:1.25pt'> </span>really<span
style='letter-spacing:1.3pt'> </span>smart<span style='letter-spacing:1.25pt'> </span>people<span
style='letter-spacing:1.25pt'> </span>on<span style='letter-spacing:1.3pt'> </span>SO,<span
style='letter-spacing:1.3pt'> </span>and<span style='letter-spacing:1.3pt'> </span>theyre<span
style='letter-spacing:1.25pt'> </span>all<span style='letter-spacing:1.25pt'> </span>competing<span
style='letter-spacing:1.3pt'> </span>to provide the first and/or best correct
answer to your question (theres a strong disincentive to provide a quick but
bad answer, thankfully). Here<span style='letter-spacing:4.0pt'> </span>are
things you can do to increase the chances of getting a good answer for your
question:</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:.05pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Be<span style='letter-spacing:.45pt'> </span>an<span
style='letter-spacing:.5pt'> </span>informed<span style='letter-spacing:.5pt'> </span>SO<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>user</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Take the </span><a href="http://bit.ly/2rFhSbb"><span
style='color:#070707'>SO tour</span></a><span style='color:#333333'>, and then
read </span><a href="http://bit.ly/2p7Qnpw"><span style='color:#070707'>How do
I ask a good question?</span></a><span style='color:#070707'> </span><span
style='color:#333333'>If youre so<span style='letter-spacing:.7pt'> </span>inclined,<span
style='letter-spacing:.7pt'> </span>you<span style='letter-spacing:.7pt'> </span>can<span
style='letter-spacing:.7pt'> </span>go<span style='letter-spacing:.7pt'> </span>on<span
style='letter-spacing:.7pt'> </span>to<span style='letter-spacing:.7pt'> </span>read<span
style='letter-spacing:.7pt'> </span>all of the </span><a
href="http://bit.ly/36UnyOp"><span style='color:#070707'>help<span
style='letter-spacing:.7pt'> </span>documentation</span></a></p>

<p class=MsoBodyText style='margin-left:76.55pt;line-height:16.05pt'><span
style='color:#333333'>youll<span style='letter-spacing:.4pt'> </span>earn<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>badge<span
style='letter-spacing:.4pt'> </span>if<span style='letter-spacing:.45pt'> </span>you<span
style='letter-spacing:.45pt'> </span>read<span style='letter-spacing:.45pt'> </span>it<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.2pt'>all!</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Dont<span style='letter-spacing:.55pt'> </span>ask<span
style='letter-spacing:.6pt'> </span>questions<span style='letter-spacing:.55pt'>
</span>that<span style='letter-spacing:.6pt'> </span>have<span
style='letter-spacing:.6pt'> </span>already<span style='letter-spacing:.55pt'> </span>been<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>answered</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Do your due diligence, and try to find out if someone has
already asked your question. If you ask a question that has an easily found
answer already on SO, your question will quickly be closed as a duplicate, and
people will often downvote you for this, negatively affecting your reputation.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Dont<span style='letter-spacing:.45pt'> </span>ask<span
style='letter-spacing:.45pt'> </span>people<span style='letter-spacing:.45pt'> </span>to<span
style='letter-spacing:.5pt'> </span>write<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.45pt'> </span>code<span style='letter-spacing:.45pt'> </span>for<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.25pt'>you</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>You will quickly find your question downvoted and closed
if you simply ask, How do I do <i>X</i>? The SO community expects you to<span
style='letter-spacing:4.0pt'> </span>make an effort to solve your own problem
before resorting to SO. Describe in your question what youve tried and why it
isnt working.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Ask<span style='letter-spacing:.4pt'> </span>one<span
style='letter-spacing:.4pt'> </span>question<span style='letter-spacing:.45pt'>
</span>at<span style='letter-spacing:.4pt'> </span>a<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.2pt'>time</span></span></i></p>

</div>

<span style='font-size:14.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection467>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="Contributing_to_Express"></a><a name="_bookmark1007"></a><span
style='color:#333333'>Questions that are asking five thingsHow do I do this,
then that, then the other things, and whats the best way to do this?are
difficult to answer and are discouraged.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Craft<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.55pt'> </span>minimal<span style='letter-spacing:.5pt'> </span>example<span
style='letter-spacing:.5pt'> </span>of<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>issue</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:73.4pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>I<span style='letter-spacing:1.35pt'> </span>answer<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.35pt'> </span>lot<span
style='letter-spacing:1.35pt'> </span>of<span style='letter-spacing:1.35pt'> </span>SO<span
style='letter-spacing:1.35pt'> </span>questions,<span style='letter-spacing:
1.45pt'> </span>and<span style='letter-spacing:1.45pt'> </span>the<span
style='letter-spacing:1.35pt'> </span>ones<span style='letter-spacing:1.35pt'> </span>I<span
style='letter-spacing:1.35pt'> </span>almost<span style='letter-spacing:1.35pt'>
</span>automatically skip over are those where I see three pages of code (or
more!). Just taking<span style='letter-spacing:1.45pt'> </span>your<span
style='letter-spacing:1.35pt'> </span>5,000-line<span style='letter-spacing:
1.35pt'> </span>file<span style='letter-spacing:1.35pt'> </span>and<span
style='letter-spacing:1.45pt'> </span>pasting<span style='letter-spacing:1.45pt'>
</span>into<span style='letter-spacing:1.45pt'> </span>an<span
style='letter-spacing:1.45pt'> </span>SO<span style='letter-spacing:1.35pt'> </span>question<span
style='letter-spacing:1.45pt'> </span>is<span style='letter-spacing:1.35pt'> </span>not<span
style='letter-spacing:1.35pt'> </span>a great way to get your question answered
(but people do it all the time). Its a lazy approach that isnt often
rewarded. Not only are you less likely to get a useful answer, but the very
process of eliminating things that <i>arent </i>causing the problem can lead
you to solving the problem yourself<span style='letter-spacing:1.3pt'> </span>(then<span
style='letter-spacing:1.35pt'> </span>you<span style='letter-spacing:1.35pt'> </span>dont<span
style='letter-spacing:1.3pt'> </span>even<span style='letter-spacing:1.35pt'> </span>need<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.35pt'> </span>ask<span
style='letter-spacing:1.35pt'> </span>a<span style='letter-spacing:1.3pt'> </span>question<span
style='letter-spacing:1.35pt'> </span>on<span style='letter-spacing:1.35pt'> </span>SO).<span
style='letter-spacing:1.35pt'> </span>Crafting a minimal example is good for
your debugging skills and for your critical thinking ability, and makes you a
good SO citizen.</span></p>

<p class=MsoNormal style='margin-top:10.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Learn<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Markdown</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><a
name="_bookmark1006"></a><span style='color:#333333'>Stack Overflow uses
Markdown for formatting questions and answers. A well-formatted question has a
better chance of being answered, so<span style='letter-spacing:2.0pt'> </span>you
should invest the time to learn this useful and increasingly ubiquitous </span><a
href="http://bit.ly/2CB1L0a"><span style='color:#070707'>markup language</span></a><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Accept<span style='letter-spacing:.55pt'> </span>and<span
style='letter-spacing:.65pt'> </span>upvote<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>answers</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>If<span style='letter-spacing:2.0pt'> </span>someone<span
style='letter-spacing:2.0pt'> </span>answers<span style='letter-spacing:2.0pt'>
</span>your<span style='letter-spacing:2.0pt'> </span>question<span
style='letter-spacing:2.0pt'> </span>satisfactorily,<span style='letter-spacing:
2.0pt'> </span>you<span style='letter-spacing:2.0pt'> </span>should<span
style='letter-spacing:2.0pt'> </span>upvote and accept it; it boosts the
reputation of the answerer, and reputation is what drives SO. If multiple
people provide acceptable answers, you should pick the one you think is best
and accept that, and upvote<span style='letter-spacing:4.0pt'> </span>anyone
else you feel offered a useful answer.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:111%'><i><span
style='font-size:14.0pt;line-height:111%;color:#333333'>If you figure out your
own problem before someone else does, answer your own question</span></i></p>

<p class=MsoBodyText style='margin-top:7.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>SO is a community resource: if you have a problem,
chances are, someone else has it too. If youve figured it out, go ahead and
answer your own question for the benefit of others.</span></p>

<p class=MsoBodyText style='margin-top:12.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>If<span
style='letter-spacing:.6pt'> </span>you<span style='letter-spacing:.7pt'> </span>enjoy<span
style='letter-spacing:.7pt'> </span>helping<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.65pt'> </span>community,<span style='letter-spacing:
.7pt'> </span>consider<span style='letter-spacing:.65pt'> </span>answering<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>questions</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection468>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>yourself: its fun and rewarding, and it can lead to
benefits that are more tangible than an arbitrary reputation score. If you have
a question for which youve received no useful answers for two days, you can
start a <i>bounty </i>on the question, using your own reputation. The
reputation is withdrawn from your account immediately, and it is nonrefundable.
If someone answers the question to your satisfaction, and you accept their
answer, they will receive the bounty. The catch is, of course, you have to have
reputation to start a bounty: the minimum bounty is 50 reputation points. While
you can get reputation from asking quality questions, its usually quicker to
get reputation by providing quality answers.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Answering peoples questions also has the benefit of being
a great way to learn. I generally feel that I learn more from answering other
peoples questions than I do from having my questions answered. If you want to
really thoroughly learn a technology, learn the basics and then start trying<span
style='letter-spacing:4.0pt'> </span>to tackle peoples questions on SO. At
first you might be consistently beat out<span style='letter-spacing:1.4pt'> </span>by<span
style='letter-spacing:1.5pt'> </span>people<span style='letter-spacing:1.4pt'> </span>who<span
style='letter-spacing:1.5pt'> </span>are<span style='letter-spacing:1.4pt'> </span>already<span
style='letter-spacing:1.5pt'> </span>experts,<span style='letter-spacing:1.5pt'>
</span>but<span style='letter-spacing:1.4pt'> </span>before<span
style='letter-spacing:1.4pt'> </span>long,<span style='letter-spacing:1.5pt'> </span>youll<span
style='letter-spacing:1.4pt'> </span>find<span style='letter-spacing:1.5pt'> </span>that
you <i>are </i>one of the experts.</span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Lastly, you shouldnt hesitate to use your reputation to
further your career.<span style='letter-spacing:2.0pt'> </span>A good
reputation is absolutely worth putting on a rsum. Its worked for me<span
style='letter-spacing:1.55pt'> </span>and,<span style='letter-spacing:1.6pt'> </span>now<span
style='letter-spacing:1.55pt'> </span>that<span style='letter-spacing:1.55pt'> </span>Im<span
style='letter-spacing:1.55pt'> </span>in<span style='letter-spacing:1.6pt'> </span>the<span
style='letter-spacing:1.55pt'> </span>position<span style='letter-spacing:1.6pt'>
</span>of<span style='letter-spacing:1.55pt'> </span>interviewing<span
style='letter-spacing:1.6pt'> </span>developers<span style='letter-spacing:
1.55pt'> </span>myself, Im<span style='letter-spacing:1.4pt'> </span>always<span
style='letter-spacing:1.4pt'> </span>impressed<span style='letter-spacing:1.5pt'>
</span>to<span style='letter-spacing:1.5pt'> </span>see<span style='letter-spacing:
1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>good<span
style='letter-spacing:1.5pt'> </span>SO<span style='letter-spacing:1.4pt'> </span>reputation<span
style='letter-spacing:1.5pt'> </span>(I<span style='letter-spacing:1.4pt'> </span>consider<span
style='letter-spacing:1.4pt'> </span>a<span style='letter-spacing:1.4pt'> </span>good
SO<span style='letter-spacing:1.9pt'> </span>reputation<span style='letter-spacing:
1.95pt'> </span>anything<span style='letter-spacing:1.95pt'> </span>over<span
style='letter-spacing:1.9pt'> </span>3,000;<span style='letter-spacing:1.9pt'> </span>five-digit<span
style='letter-spacing:1.9pt'> </span>reputations<span style='letter-spacing:
1.9pt'> </span>are<span style='letter-spacing:1.9pt'> </span><i>great</i>).<span
style='letter-spacing:1.95pt'> </span>A good SO reputation tells me that
someone is not just competent in their<span style='letter-spacing:2.0pt'> </span>field,
but they are clear communicators and generally helpful<a name="_bookmark1008"></a>.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:23.0pt'>&nbsp;</span></p>

<h2><span style='color:#8E0011'>Contributing<span style='letter-spacing:-.3pt'>
</span>to<span style='letter-spacing:-.3pt'> </span><span style='letter-spacing:
-.1pt'>Express</span></span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a name="_bookmark1009"></a><span
style='color:#333333'>Express<span style='letter-spacing:.55pt'> </span>and<span
style='letter-spacing:.6pt'> </span>Connect<span style='letter-spacing:.55pt'> </span>are<span
style='letter-spacing:.6pt'> </span>open<span style='letter-spacing:.6pt'> </span>source<span
style='letter-spacing:.55pt'> </span>projects,<span style='letter-spacing:.6pt'>
</span>so<span style='letter-spacing:.65pt'> </span>anyone<span
style='letter-spacing:.55pt'> </span>can<span style='letter-spacing:.6pt'> </span>submit<span
style='letter-spacing:.6pt'> </span><i><span style='letter-spacing:-.2pt'>pull</span></i></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection469>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><i><span
style='color:#333333'>requests </span></i><span style='color:#333333'>(GitHub
lingo for changes youve made that you would like included in the project).
This is not easy to do: the developers working on these projects are pros and
the ultimate authority on their own projects.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Im not discouraging you from contributing, but I am
saying you have to dedicate some significant effort to be a successful
contributor, and you cannot take submissions lightly.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:81.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><a
href="http://bit.ly/2q7WD0X"><span style='color:#333333;text-decoration:none'>The
actual process of contributing is well-documented on the </span><span
style='color:#070707'>Express</span><span style='color:#070707;letter-spacing:
4.0pt;text-decoration:none'> </span><span style='color:#070707'>home<span
style='letter-spacing:1.7pt'> </span>page</span><span style='color:#333333;
text-decoration:none'>.<span style='letter-spacing:1.75pt'> </span>The<span
style='letter-spacing:1.7pt'> </span>mechanics<span style='letter-spacing:1.7pt'>
</span>involve<span style='letter-spacing:1.7pt'> </span>forking<span
style='letter-spacing:1.75pt'> </span>the<span style='letter-spacing:1.7pt'> </span>project<span
style='letter-spacing:1.7pt'> </span>in<span style='letter-spacing:1.75pt'> </span>your<span
style='letter-spacing:1.7pt'> </span>own</span></a><span style='color:#333333'>
GitHub account, cloning that fork, making your changes, pushing them<span
style='letter-spacing:2.0pt'> </span>back to GitHub, and creating a pull
request (PR), which will be reviewed<span style='letter-spacing:4.0pt'> </span>by
one or more people on the project. If your submissions are small or are bug
fixes, you may have luck simply submitting the pull request. If youre trying
to do something major, you should communicate with one of the main developers
and discuss your contribution. You dont want to waste hours or days on a
complicated feature only to find that it doesnt fit with the maintainers
vision,<span style='letter-spacing:1.45pt'> </span>or its already<span
style='letter-spacing:1.45pt'> </span>being<span style='letter-spacing:1.45pt'>
</span>worked<span style='letter-spacing:1.45pt'> </span>on<span
style='letter-spacing:1.45pt'> </span>by<span style='letter-spacing:1.45pt'> </span>someone
else.</span></p>

<p class=MsoBodyText style='margin-top:.4pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The other way to contribute (indirectly) to the
development of Express and Connect is to publish npm packagesspecifically,
middleware.</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Publishing your own middleware requires approval from no
one, but that doesnt mean you should carelessly clutter the npm registry with
low- quality middleware. Plan, test, implement, and document, and your
middleware will enjoy more success.</span></p>

<p class=MsoBodyText style='margin-top:.25pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:.05pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>If you do publish your own packages, here are the minimum
things you should have:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:20.5pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:55.0pt'><i><span style='font-size:14.0pt;
color:#333333'>Package<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.2pt'>name</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>While<span
style='letter-spacing:.5pt'> </span>package<span style='letter-spacing:.5pt'> </span>naming<span
style='letter-spacing:.55pt'> </span>is<span style='letter-spacing:.5pt'> </span>up<span
style='letter-spacing:.6pt'> </span>to<span style='letter-spacing:.55pt'> </span>you,<span
style='letter-spacing:.55pt'> </span>you<span style='letter-spacing:.55pt'> </span>obviously<span
style='letter-spacing:.6pt'> </span>have<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.2pt'>pick</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection470>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:74.4pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><span
style='color:#333333'>something that isnt already taken, which can sometimes
be a<span style='letter-spacing:4.0pt'> </span>challenge. npm packages now
support namespacing by account, so youre<span style='letter-spacing:1.95pt'> </span>not<span
style='letter-spacing:1.95pt'> </span>competing<span style='letter-spacing:
2.0pt'> </span>globally<span style='letter-spacing:2.0pt'> </span>for<span
style='letter-spacing:1.95pt'> </span>names.<span style='letter-spacing:2.0pt'>
</span>If<span style='letter-spacing:1.95pt'> </span>youre<span
style='letter-spacing:1.95pt'> </span>writing middleware, its customary to
prefix your package name with<span style='letter-spacing:4.0pt'> </span></span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>connect-<span
style='letter-spacing:-1.65pt'> </span></span><span style='color:#333333'>or </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>express-</span><span
style='color:#333333'>. Catchy package names that dont have any particular
relation to what it does are fine, but even better is a package name that hints
at what it does (a great example of a catchy but appropriate package name is </span><span
style='font-family:"BIZ UDGothic",sans-serif;color:#333333'>zombie</span><span
style='color:#333333'>, for headless browser emulation).</span></p>

<p class=MsoNormal style='margin-top:10.35pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333'>Package<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>description</span></span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Your<span style='letter-spacing:2.0pt'> </span>package<span
style='letter-spacing:2.0pt'> </span>description<span style='letter-spacing:
2.0pt'> </span>should<span style='letter-spacing:2.0pt'> </span>be<span
style='letter-spacing:2.0pt'> </span>short,<span style='letter-spacing:2.0pt'> </span>concise,<span
style='letter-spacing:2.0pt'> </span>and<span style='letter-spacing:2.0pt'> </span>descriptive.
This is one of the primary fields that is indexed when people search for
packages, so its best to be descriptive, not clever (theres room for<span
style='letter-spacing:4.0pt'> </span>some cleverness and humor in your
documentation, dont worry).</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Author/contributors</span></i></p>

<p class=MsoBodyText style='margin-top:9.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><span style='color:#333333'>Take<span
style='letter-spacing:.45pt'> </span>some<span style='letter-spacing:.45pt'> </span>credit.<span
style='letter-spacing:.55pt'> </span>Go<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>on.</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>License(s)</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:110%'><a
name="_bookmark1010"></a><span style='color:#333333'>This is often neglected,
and there is nothing more frustrating than encountering a package without a
license (leaving you unsure of<span style='letter-spacing:2.0pt'> </span></span><a
href="http://bit.ly/mit_license"><span style='color:#333333;text-decoration:
none'>whether you can use it in your project). Dont be that person. The </span><span
style='color:#070707'>MIT</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>license</span><span style='color:
#070707;letter-spacing:1.35pt;text-decoration:none'> </span><span
style='color:#333333;text-decoration:none'>is<span style='letter-spacing:1.35pt'>
</span>an<span style='letter-spacing:1.4pt'> </span>easy<span style='letter-spacing:
1.4pt'> </span>choice<span style='letter-spacing:1.35pt'> </span>if<span
style='letter-spacing:1.35pt'> </span>you<span style='letter-spacing:1.4pt'> </span>dont<span
style='letter-spacing:1.35pt'> </span>want<span style='letter-spacing:1.35pt'> </span>any<span
style='letter-spacing:1.4pt'> </span>restrictions<span style='letter-spacing:
1.35pt'> </span>on<span style='letter-spacing:1.4pt'> </span>how</span></a><span
style='color:#333333'> your code is used. If you want it to be open source (and
stay open source), another popular choice is the </span><a
href="http://bit.ly/gpl_license"><span style='color:#070707'>GPL license</span></a><span
style='color:#333333'>. Its also wise to include license files in the root
directory of your project (they should start with <i>LICENSE</i>). For maximum
coverage, dual-license with MIT and<span style='letter-spacing:1.55pt'> </span>GPL.<span
style='letter-spacing:1.55pt'> </span>For<span style='letter-spacing:1.5pt'> </span>an<span
style='letter-spacing:1.55pt'> </span>example<span style='letter-spacing:1.5pt'>
</span>of<span style='letter-spacing:1.5pt'> </span>this<span style='letter-spacing:
1.5pt'> </span>in<span style='letter-spacing:1.55pt'> </span><i>package.json<span
style='letter-spacing:1.55pt'> </span></i>and<span style='letter-spacing:1.55pt'>
</span>in<span style='letter-spacing:1.55pt'> </span><i>LICENSE </i>files, see
my </span><a href="http://bit.ly/connect-bundle"><span style='font-family:"BIZ UDGothic",sans-serif;
color:#070707'>connect-bundle<span style='letter-spacing:-.4pt'> </span></span><span
style='color:#070707'>package</span></a><span style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Version</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>For the versioning system to work, you need to version
your packages. Note that npm versioning is separate from commit numbers in your
repository: you can update your repository all you like, but it wont change
what people get when they use npm to install your package.</span></p>

<p class=MsoBodyText style='margin-left:76.55pt;line-height:16.0pt'><span
style='color:#333333'>You<span style='letter-spacing:.6pt'> </span>need<span
style='letter-spacing:.6pt'> </span>to<span style='letter-spacing:.65pt'> </span>increment<span
style='letter-spacing:.55pt'> </span>your<span style='letter-spacing:.55pt'> </span>version<span
style='letter-spacing:.65pt'> </span>number<span style='letter-spacing:.55pt'> </span>and<span
style='letter-spacing:.6pt'> </span>republish<span style='letter-spacing:.65pt'>
</span>for<span style='letter-spacing:.55pt'> </span><span style='letter-spacing:
-.1pt'>changes</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection471>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt'><a name="_bookmark1011"></a><span
style='color:#333333'>to<span style='letter-spacing:.4pt'> </span>be<span
style='letter-spacing:.4pt'> </span>reflected<span style='letter-spacing:.4pt'>
</span>in<span style='letter-spacing:.45pt'> </span>the<span style='letter-spacing:
.35pt'> </span>npm<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>registry.</span></span></p>

<p class=MsoNormal style='margin-top:12.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Dependencies</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>You should make an effort to be conservative about
dependencies in your packages. Im not suggesting constantly reinventing the
wheel, but dependencies increase the size and licensing complexity of your
package. At a minimum, you should make sure you arent listing dependencies
that you dont need.</span></p>

<p class=MsoNormal style='margin-top:10.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Keywords</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>Along with description, keywords are the other major
metadata used for people trying to find your package, so choose appropriate <span
style='letter-spacing:-.1pt'>keywords.</span></span></p>

<p class=MsoNormal style='margin-top:10.7pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>Repository</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>You should have one. GitHub is the most common, but
others are <span style='letter-spacing:-.1pt'>welcome.</span></span></p>

<p class=MsoNormal style='margin-top:10.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><i><span style='font-size:14.0pt;
color:#333333;letter-spacing:-.1pt'>README.md</span></i></p>

<p class=MsoBodyText style='margin-top:9.1pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:76.55pt;margin-bottom:.0001pt;line-height:111%'><span
style='color:#333333'>The standard documentation format for both GitHub and npm
is </span><a href="http://bit.ly/33IxnwS"><span style='color:#070707'>Markdown</span></a><span
style='color:#333333'>. Its an easy, wiki-like syntax that you can quickly
learn. Quality documentation is vitally important if you want your package to
be used. If I land on an npm page and theres no documentation, I<span
style='letter-spacing:2.0pt'> </span>usually just skip it without further
investigation. At a minimum, you should describe basic usage (with examples).
Even better is to have all options documented. Describing how to run tests goes
the extra mile.</span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>When youre ready to publish your own package, the
process is quite easy. Register for a free </span><a
href="https://npmjs.org/signup"><span style='color:#070707'>npm account</span></a><span
style='color:#070707'> </span><span style='color:#333333'>and then follow these
steps:</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:13.5pt'>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-top:0cm;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Type<span style='letter-spacing:.4pt'> </span></span><span
style='font-size:14.0pt;font-family:"BIZ UDGothic",sans-serif;color:#333333;
text-decoration:none'>npm<span style='letter-spacing:.9pt'> </span>adduser</span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>,<span style='letter-spacing:.45pt'> </span>and<span
style='letter-spacing:.5pt'> </span>log<span style='letter-spacing:.45pt'> </span>in<span
style='letter-spacing:.5pt'> </span>with<span style='letter-spacing:.45pt'> </span>your<span
style='letter-spacing:.45pt'> </span>npm<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>credentials.</span></span></p>

<p class=MsoListParagraph style='margin-top:10.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:105.4pt;margin-bottom:.0001pt'><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>Type<span style='letter-spacing:.45pt'> </span></span><span
style='font-size:14.0pt;font-family:"BIZ UDGothic",sans-serif;color:#333333;
text-decoration:none'>npm<span style='letter-spacing:.95pt'> </span>publish<span
style='letter-spacing:-3.05pt'> </span></span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#333333;text-decoration:none'>to<span
style='letter-spacing:.55pt'> </span>publish<span style='letter-spacing:.5pt'> </span>your<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>package.</span></span></p>

<p class=MsoBodyText style='margin-top:13.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:127%'><span
style='color:#333333'>Thats it! Youll probably want to create a project from
scratch, and test your package by using </span><span style='font-family:"BIZ UDGothic",sans-serif;
color:#333333'>npm install</span><span style='color:#333333'>.</span></p>

</div>

<span style='font-size:11.0pt;line-height:127%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection472>

<h2 style='margin-top:3.95pt'><a name="_bookmark1013"></a><a name=Conclusion></a><a
name="_bookmark1012"></a><span style='color:#8E0011;letter-spacing:-.1pt'>Conclusion</span></h2>

<p class=MsoBodyText style='margin-top:13.65pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>It is my sincere hope that this book has given you all
the tools you need to get<span style='letter-spacing:1.35pt'> </span>started<span
style='letter-spacing:1.45pt'> </span>with<span style='letter-spacing:1.45pt'> </span>this<span
style='letter-spacing:1.35pt'> </span>exciting<span style='letter-spacing:1.45pt'>
</span>technology<span style='letter-spacing:1.45pt'> </span>stack.<span
style='letter-spacing:1.45pt'> </span>At<span style='letter-spacing:1.35pt'> </span>no<span
style='letter-spacing:1.45pt'> </span>time<span style='letter-spacing:1.35pt'> </span>in<span
style='letter-spacing:1.45pt'> </span>my<span style='letter-spacing:1.45pt'> </span>career
have I felt so invigorated by a new technology (despite the odd main character
that is JavaScript), and I hope I have managed to convey some of the elegance
and promise of this stack. Though I have been building<span style='letter-spacing:
2.0pt'> </span>websites professionally for many years, I feel that, thanks to
Node and Express, I understand the way the internet works at a deeper level
than I<span style='letter-spacing:4.0pt'> </span>ever have before. I believe
that its a technology that truly enhances understanding, instead of trying to
hide the details from you, all while still providing a framework for quickly
and efficiently building websites.</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Whether you are a newcomer to web development, or just to
Node and Express, I welcome you to the ranks of JavaScript developers. I look
forward to seeing you at user groups and conferences, and most important,
seeing what you will build.</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection473>

<h1><a name=Index></a><a name="_bookmark1014"></a><span style='letter-spacing:
-.1pt'>Index</span></h1>

<p class=MsoBodyText style='margin-top:.25pt'><br clear=ALL>
</p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText><b><span style='font-size:10.0pt;font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: SYMBOLS"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><b><span style='font-size:5.5pt;
font-family:"Arial",sans-serif'>&nbsp;</span></b></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>-g<span
style='letter-spacing:.45pt'> </span>flag<span style='letter-spacing:.45pt'> </span>(npm),<span
style='letter-spacing:.45pt'> </span></span><a href="#_bookmark80"><span
style='color:#070707;letter-spacing:-.25pt'>npm</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>.NET,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark12"><span
style='color:#070707'>The<span style='letter-spacing:.65pt'> </span>JavaScript<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Revolution</span></span></a></p>

<p class=MsoListParagraph style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.2pt;margin-bottom:.0001pt;text-indent:-25.2pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>301<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>redirect,<span style='letter-spacing:.65pt'>
</span></span><a href="#_bookmark376"><span style='font-size:14.0pt;font-family:
"Times New Roman",serif;color:#070707'>Form</span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707;letter-spacing:.6pt'> </span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#070707'>Handling</span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707'>with</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoListParagraph style='margin-top:11.95pt;margin-right:0cm;
margin-bottom:0cm;margin-left:80.2pt;margin-bottom:.0001pt;text-indent:-25.2pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>302<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>redirect,<span style='letter-spacing:.7pt'>
</span></span><a href="#_bookmark367"><span style='font-size:14.0pt;font-family:
"Times New Roman",serif;color:#070707'>Different</span><span style='font-size:
14.0pt;font-family:"Times New Roman",serif;color:#070707;letter-spacing:.65pt'>
</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707'>Approaches</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707'>to</span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707'>Form</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707;letter-spacing:-.1pt'>Handling</span></a></p>

<p class=MsoListParagraph style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:80.2pt;margin-bottom:.0001pt;text-indent:-25.2pt'><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#333333;
text-decoration:none'>303<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#333333;text-decoration:none'>redirect,<span style='letter-spacing:.7pt'>
</span></span><a href="#_bookmark368"><span style='font-size:14.0pt;font-family:
"Times New Roman",serif;color:#070707'>Different</span><span style='font-size:
14.0pt;font-family:"Times New Roman",serif;color:#070707;letter-spacing:.65pt'>
</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707'>Approaches</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707'>to</span><span
style='font-size:14.0pt;font-family:"Times New Roman",serif;color:#070707;
letter-spacing:.7pt'> </span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707'>Form</span><span style='font-size:14.0pt;font-family:"Times New Roman",serif;
color:#070707;letter-spacing:.65pt'> </span><span style='font-size:14.0pt;
font-family:"Times New Roman",serif;color:#070707;letter-spacing:-.1pt'>Handling</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>{{<span
style='letter-spacing:.65pt'> </span>}}<span style='letter-spacing:.7pt'> </span>(curly<span
style='letter-spacing:.8pt'> </span>brackets),<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark326"><span style='color:#070707'>Comments</span></a><span
style='color:#333333'>-</span><a href="#_bookmark330"><span style='color:#070707;
letter-spacing:-.1pt'>Blocks</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: A"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>A<span
style='letter-spacing:.45pt'> </span>record<span style='letter-spacing:.55pt'> </span>(DNS),<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark918"><span
style='color:#070707;letter-spacing:-.1pt'>Nameservers</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark562"><span style='color:#333333;text-decoration:none'>abstracting
of database layer,</span></a><span style='color:#333333'> </span><a
href="#_bookmark561"><span style='color:#070707'>Abstracting the Database Layer</span></a><a
href="#_bookmark562"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Abstracting</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>the Database Layer</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Access-Control-Allow-Origin header, </span><a
href="#_bookmark652"><span style='color:#070707'>Cross-Origin Resource Sharing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>accrual value, </span><a
href="#_bookmark137"><span style='color:#070707'>Best Practices</span></a></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>aesthetics (QA element), </span><a href="#_bookmark174"><span
style='color:#070707'>QA: Is It Worth It?</span></a><span style='color:#070707'>
</span><span style='color:#333333;letter-spacing:-.2pt'>Ajax</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.25pt'><span
style='color:#333333'>action<span style='letter-spacing:.65pt'> </span>parameter,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark979"><span
style='color:#070707'>Prioritize<span style='letter-spacing:.6pt'> </span>Lead<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Tracking</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:205.55pt;
margin-bottom:0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;
line-height:182%'><span style='color:#333333'>JSON and, </span><a
href="#_bookmark380"><span style='color:#070707'>Using Fetch to Send Form Data</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Amazon</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:12.6pt'><span
style='color:#333333'>AWS<span style='letter-spacing:.95pt'> </span>CloudFront,<span
style='letter-spacing:1.0pt'> </span></span><a href="#_bookmark715"><span
style='color:#070707'>Deployment<span style='letter-spacing:1.0pt'> </span><span
style='letter-spacing:-.1pt'>Options</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection474>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>AWS CodePipeline, </span><a href="#_bookmark940"><span
style='color:#070707'>Deployment</span></a><span style='color:#070707'> </span><span
style='color:#333333'>AWS Route 53, </span><a href="#_bookmark905"><span
style='color:#070707'>Security</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>cloud<span
style='letter-spacing:.65pt'> </span>platforms,<span style='letter-spacing:
.65pt'> </span></span><a href="#_bookmark930"><span style='color:#070707'>The<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>behemoths</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:205.55pt;
margin-bottom:0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;
line-height:178%'><span style='color:#333333'>S3, </span><a href="#_bookmark552"><span
style='color:#070707'>Cloud Persistence</span></a><span style='color:#333333'>,
</span><a href="#_bookmark714"><span style='color:#070707'>Deployment Options</span></a><span
style='color:#070707'> </span><span style='color:#333333'>analytics,
maintenance and, </span><a href="#_bookmark973"><span style='color:#070707'>Monitor
Analytics</span></a><span style='color:#070707'> </span><span style='color:
#333333'>Angular, </span><a href="#_bookmark674"><span style='color:#070707'>SPA
Technologies</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.35pt'><span
style='color:#333333'>Apache<span style='letter-spacing:.55pt'> </span>2.0<span
style='letter-spacing:.65pt'> </span>license,<span style='letter-spacing:.65pt'>
</span></span><a href="#_bookmark46"><span style='color:#070707;letter-spacing:
-.1pt'>Licensing</span></a></p>

<p class=MsoBodyText style='margin-top:11.65pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>API secret key, </span><a href="#_bookmark835"><span
style='color:#070707'>Searching for Tweets</span></a><span style='color:#070707'>
</span><span style='color:#333333;letter-spacing:-.2pt'>APIs</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.45pt'><span
style='color:#333333'>providing,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark301"><span style='color:#070707'>Providing<span
style='letter-spacing:.8pt'> </span>an<span style='letter-spacing:.8pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>REST<span
style='letter-spacing:.5pt'> </span>(see<span style='letter-spacing:.5pt'> </span>REST<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>APIs)</span></span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>third-party<span
style='letter-spacing:.75pt'> </span>(see<span style='letter-spacing:.7pt'> </span>third-party<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>APIs)</span></span></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Apollo,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark710"><span
style='color:#070707'>State<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Management</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>app
clusters, scaling out with,</span></a><span style='color:#333333'> </span><a
href="#_bookmark516"><span style='color:#070707'>Scaling Out with App Clusters</span></a><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Scaling Out</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>with App Clusters</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>app.defaultConfiguration (Express source code), </span><a
href="#_bookmark883"><span style='color:#070707'>Debugging Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>app.get() method, </span><a
href="#_bookmark112"><span style='color:#070707'>Initial Steps</span></a><span
style='color:#333333'>, </span><a href="#_bookmark618"><span style='color:#070707'>Route
Handlers Are Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>app.render() method, </span><a href="#_bookmark885"><span
style='color:#070707'>Debugging Express</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>app.use() method, </span><a href="#_bookmark115"><span
style='color:#070707'>Initial Steps</span></a><span style='color:#333333'>, </span><a
href="#_bookmark884"><span style='color:#070707'>Debugging Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Artillery, </span><a
href="#_bookmark539"><span style='color:#070707'>Stress Testing</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>assertions,<span
style='letter-spacing:.6pt'> </span>QA<span style='letter-spacing:.55pt'> </span>testing,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark195"><span
style='color:#070707'>Writing<span style='letter-spacing:.6pt'> </span>Our<span
style='letter-spacing:.55pt'> </span>First<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.2pt'>Test</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>asynchronous functions, debugging, </span><a
href="#_bookmark879"><span style='color:#070707'>Debugging Asynchronous
Functions</span></a><span style='color:#070707'> </span><span style='color:
#333333'>Atom, </span><a href="#_bookmark75"><span style='color:#070707'>Editors</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection475>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>attribution, version control and, </span><a
href="#_bookmark142"><span style='color:#070707'>Version Control</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Auth0, </span><a
href="#_bookmark815"><span style='color:#070707'>Passport</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
170%'><span style='color:#333333'>authentication, </span><a href="#_bookmark795"><span
style='color:#070707'>Authentication</span></a><span style='color:#333333'>-</span><a
href="#_bookmark824"><span style='color:#070707'>Adding Authentication
Providers</span></a><span style='color:#070707'> </span><span style='color:
#333333'>adding additional providers, </span><a href="#_bookmark823"><span
style='color:#070707'>Adding Authentication Providers</span></a><span
style='color:#070707'> </span><span style='color:#333333'>authorization versus,
</span><a href="#_bookmark797"><span style='color:#070707'>Authentication
Versus Authorization</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Passport for, </span><a href="#_bookmark811"><span
style='color:#070707'>Passport</span></a><span style='color:#333333'>-</span><a
href="#_bookmark818"><span style='color:#070707'>Setting up Passport</span></a></p>

<p class=MsoBodyText style='margin-top:.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>passwords,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark800"><span
style='color:#070707'>The<span style='letter-spacing:.65pt'> </span>Problem<span
style='letter-spacing:.65pt'> </span>with<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Passwords</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark807"><span style='color:#333333;text-decoration:none'>registration
versus, </span><span style='color:#070707'>Authentication Versus Registration
and the User</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Experience</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark822"><span style='color:#333333;text-decoration:none'>role-based
authorization,</span></a><span style='color:#333333'> </span><a
href="#_bookmark820"><span style='color:#070707'>Role-Based Authorization</span></a><a
href="#_bookmark822"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Role-Based</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Authorization</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:102.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>storing user records in database, </span><a
href="#_bookmark804"><span style='color:#070707'>Storing Users in Your Database</span></a><span
style='color:#070707'> </span><span style='color:#333333'>third-party, </span><a
href="#_bookmark801"><span style='color:#070707'>Third-Party Authentication</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>authorization</span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>authentication<span
style='letter-spacing:.95pt'> </span>versus,<span style='letter-spacing:1.0pt'>
</span></span><a href="#_bookmark797"><span style='color:#070707'>Authentication<span
style='letter-spacing:.95pt'> </span>Versus<span style='letter-spacing:.95pt'> </span><span
style='letter-spacing:-.1pt'>Authorization</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>role-based, </span><a href="#_bookmark820"><span
style='color:#070707'>Role-Based Authorization</span></a><span
style='color:#333333'>-</span><a href="#_bookmark822"><span style='color:#070707'>Role-Based
Authorization</span></a><span style='color:#070707'> </span><span
style='color:#333333'>AWS CloudFront, </span><a href="#_bookmark715"><span
style='color:#070707'>Deployment Options</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>AWS<span style='letter-spacing:.85pt'> </span>CodePipeline,<span
style='letter-spacing:1.0pt'> </span></span><a href="#_bookmark940"><span
style='color:#070707;letter-spacing:-.1pt'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>AWS<span
style='letter-spacing:.5pt'> </span>Route<span style='letter-spacing:.55pt'> </span>53,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark905"><span
style='color:#070707;letter-spacing:-.1pt'>Security</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Ayima Redirect Path, </span><a href="#_bookmark113"><span
style='color:#070707'>Initial Steps</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Azure, </span><a href="#_bookmark553"><span
style='color:#070707'>Cloud Persistence</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: B"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>bash,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark59"><span
style='color:#070707'>Using<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection476>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>basicauth-middleware,<span
style='letter-spacing:1.4pt'> </span></span><a href="#_bookmark440"><span
style='color:#070707'>Common<span style='letter-spacing:1.45pt'> </span><span
style='letter-spacing:-.1pt'>Middleware</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:173.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Berkeley Software Distribution (BSD) license, </span><a
href="#_bookmark47"><span style='color:#070707'>Licensing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Berners-Lee, Tim, </span><a
href="#_bookmark606"><span style='color:#070707'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>best practices, </span><a href="#_bookmark138"><span
style='color:#070707'>Best Practices</span></a><span style='color:#070707'> </span><span
style='color:#333333'>binary files</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>as<span style='letter-spacing:.45pt'> </span>static<span
style='letter-spacing:.45pt'> </span>content,<span style='letter-spacing:.5pt'>
</span></span><a href="#_bookmark729"><span style='color:#070707'>Static<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Content</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>storage<span
style='letter-spacing:.6pt'> </span>of,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark546"><span style='color:#070707'>Filesystem<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Persistence</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Bing Webmaster Tools, </span><a href="#_bookmark971"><span
style='color:#070707'>Do Routine QA Checks</span></a><span style='color:#070707'>
</span><span style='color:#333333'>blocks, in Handlebars, </span><a
href="#_bookmark329"><span style='color:#070707'>Blocks</span></a><span
style='color:#333333'>-</span><a href="#_bookmark330"><span style='color:#070707'>Blocks</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark441"><span style='color:#333333;text-decoration:none'>body-parser
middleware,</span></a><span style='color:#333333'> </span><a
href="#_bookmark373"><span style='color:#070707'>Form Handling with Express</span></a><a
href="#_bookmark441"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Common</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Middleware</span><span
style='color:#333333;text-decoration:none'>,</span></a><span style='color:#333333'>
</span><a href="#_bookmark891"><span style='color:#070707'>D</span></a><a
href="#_bookmark441"><span style='color:#070707'>ebugging Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark419"><span style='color:#333333;text-decoration:none'>Bootstrap,</span></a><span
style='color:#333333'> </span><a href="#_bookmark374"><span style='color:#070707'>Form
Handling with Express</span></a><a href="#_bookmark419"><span style='color:
#333333;text-decoration:none'>, </span><span style='color:#070707'>Using
Sessions to Implement</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Flash Messages</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>boutique hosting, </span><a href="#_bookmark934"><span
style='color:#070707'>Boutique hosting</span></a><span style='color:#070707'> </span><span
style='color:#333333'>breakpoints, </span><a href="#_bookmark871"><span
style='color:#070707'>Node Inspector Clients</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>browser<span
style='letter-spacing:.85pt'> </span>caching,<span style='letter-spacing:.95pt'>
</span></span><a href="#_bookmark733"><span style='color:#070707'>Performance<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Considerations</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>BSD (Berkeley Software Distribution) license, </span><a
href="#_bookmark47"><span style='color:#070707'>Licensing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>bundlers, </span><a
href="#_bookmark753"><span style='color:#070707'>Changing Your Static Content</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>business<span
style='letter-spacing:.65pt'> </span>logic,<span style='letter-spacing:.8pt'> </span>presentation<span
style='letter-spacing:.75pt'> </span>versus,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark176"><span style='color:#070707'>Logic<span
style='letter-spacing:.7pt'> </span>Versus<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Presentation</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: C"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:242.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>cache busting, </span><a href="#_bookmark752"><span
style='color:#070707'>Changing Your Static Content</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Cache-Control header,
</span><a href="#_bookmark748"><span style='color:#070707'>Caching Static
Assets</span></a><span style='color:#070707'> </span><span style='color:#333333;
letter-spacing:-.1pt'>caching</span></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection477>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>static assets, </span><a href="#_bookmark747"><span
style='color:#070707'>Caching Static Assets</span></a><span style='color:#070707'>
</span><span style='color:#333333'>templates, </span><a href="#_bookmark334"><span
style='color:#070707'>Server-Side Templates</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>call stack, </span><a href="#_bookmark873"><span
style='color:#070707'>Node Inspector Clients</span></a><span style='color:#070707;
letter-spacing:2.0pt'> </span><span style='color:#333333'>callback function, </span><a
href="#_bookmark435"><span style='color:#070707'>Middleware Principles</span></a><span
style='color:#070707'> </span><span style='color:#333333'>callbacks, </span><a
href="#_bookmark93"><span style='color:#070707'>Serving Static Resources</span></a><span
style='color:#070707'> </span><span style='color:#333333'>catastrophic errors, </span><a
href="#_bookmark648"><span style='color:#070707'>API Error Reporting</span></a><span
style='color:#070707'> </span><span style='color:#333333'>CD (continuous
delivery), </span><a href="#_bookmark939"><span style='color:#070707'>Deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>CDNs (see content
delivery networks) certificate authorities (CAs), </span><a href="#_bookmark764"><span
style='color:#070707'>HTTPS</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>certificate<span
style='letter-spacing:.65pt'> </span>insurance,<span style='letter-spacing:
.75pt'> </span></span><a href="#_bookmark778"><span style='color:#070707'>Purchasing<span
style='letter-spacing:.75pt'> </span>a<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Certificate</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>certificate signing request (CSR), </span><a
href="#_bookmark779"><span style='color:#070707'>Purchasing a Certificate</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Chrome</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>browser<span style='letter-spacing:.55pt'> </span>plug-in<span
style='letter-spacing:.6pt'> </span>for,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark113"><span style='color:#070707'>Initial<span style='letter-spacing:
.55pt'> </span><span style='letter-spacing:-.1pt'>Steps</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:231.65pt;
margin-bottom:0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>debugging with, </span><a href="#_bookmark870"><span
style='color:#070707'>Node Inspector Clients</span></a><span style='color:#070707'>
</span><span style='color:#333333'>examining cookies in, </span><a
href="#_bookmark407"><span style='color:#070707'>Examining Cookies</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Puppeteer and, </span><a
href="#_bookmark205"><span style='color:#070707'>Integration Testing</span></a><span
style='color:#070707;letter-spacing:2.0pt'> </span><span style='color:#333333'>response
headers in, </span><a href="#_bookmark244"><span style='color:#070707'>Response
Headers</span></a></p>

<p class=MsoBodyText style='margin-top:1.75pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>CI (continuous integration), </span><a
href="#_bookmark217"><span style='color:#070707'>Continuous Integration</span></a><span
style='color:#070707'> </span><span style='color:#333333'>CircleCI, </span><a
href="#_bookmark945"><span style='color:#070707'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:247.35pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>CJS (CommonJS) modules, </span><a
href="#_bookmark161"><span style='color:#070707'>Node Modules</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(see also Node
modules)</span></p>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>client<span
style='letter-spacing:.45pt'> </span>errors,<span style='letter-spacing:.5pt'> </span></span><a
href="#_bookmark650"><span style='color:#070707'>API<span style='letter-spacing:
.5pt'> </span>Error<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Reporting</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>client-side<span
style='letter-spacing:.8pt'> </span>applications,<span style='letter-spacing:
.9pt'> </span></span><a href="#_bookmark21"><span style='color:#070707'>Server-Side<span
style='letter-spacing:.85pt'> </span>and<span style='letter-spacing:.9pt'> </span>Client-Side<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>Applications</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection478>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:236.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
178%'><span style='color:#333333'>(see also single-page applications (SPAs))
client.query() method, </span><a href="#_bookmark591"><span style='color:#070707'>PostgreSQL</span></a><span
style='color:#070707;letter-spacing:4.0pt'> </span><span style='color:#333333'>client/server
applications, </span><a href="#_bookmark90"><span style='color:#070707;
text-decoration:none'>Routing</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.35pt'><br
clear=ALL>
<span style='color:#333333'>cloud<span style='letter-spacing:.85pt'> </span>development<span
style='letter-spacing:.8pt'> </span>environments,<span style='letter-spacing:
.85pt'> </span></span><a href="#_bookmark67"><span style='color:#070707;
text-decoration:none'>Using<span style='letter-spacing:.85pt'> </span>the<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:10.65pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>cloud hosting, </span><a href="#_bookmark921"><span
style='color:#070707'>Traditional hosting or cloud hosting?</span></a><span
style='color:#333333'>-</span><a href="#_bookmark935"><span style='color:#070707'>Boutique
hosting</span></a><span style='color:#070707'> </span><span style='color:#333333'>Amazon,
</span><a href="#_bookmark928"><span style='color:#070707'>The behemoths</span></a></p>

<p class=MsoBodyText style='margin-top:2.2pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>boutique hosting, </span><a href="#_bookmark934"><span
style='color:#070707'>Boutique hosting</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Google, </span><a href="#_bookmark928"><span
style='color:#070707'>The behemoths</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>Microsoft,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark928"><span
style='color:#070707'>The<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>behemoths</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>traditional versus, </span><a
href="#_bookmark922"><span style='color:#070707'>Traditional hosting or cloud
hosting?</span></a><span style='color:#070707'> </span><span style='color:#333333'>cloud
storage, </span><a href="#_bookmark550"><span style='color:#070707'>Cloud
Persistence</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>Cloud9,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark67"><span style='color:#070707'>Using<span style='letter-spacing:
.65pt'> </span>the<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify'><span
style='color:#333333'>CloudFront,<span style='letter-spacing:1.2pt'> </span></span><a
href="#_bookmark715"><span style='color:#070707'>Deployment<span
style='letter-spacing:1.15pt'> </span><span style='letter-spacing:-.1pt'>Options</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:171.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>cluster.isMaster property, </span><a
href="#_bookmark517"><span style='color:#070707'>Scaling Out with App Clusters</span></a><span
style='color:#070707'> </span><span style='color:#333333'>cluster.isWorker
property, </span><a href="#_bookmark517"><span style='color:#070707'>Scaling
Out with App Clusters</span></a><span style='color:#070707'> </span><span
style='color:#333333'>CNAME record (DNS), </span><a href="#_bookmark918"><span
style='color:#070707'>Nameservers</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify'><span
style='color:#333333'>code<span style='letter-spacing:.55pt'> </span>coverage,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark200"><span
style='color:#070707'>Code<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Coverage</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark990"><span style='color:#333333;text-decoration:none'>code
reuse,</span></a><span style='color:#333333'> </span><a href="#_bookmark985"><span
style='color:#070707'>Code Reuse and Refactoring</span></a><a
href="#_bookmark990"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Module exposes an object that</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>contains
middleware</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>CodePipeline, </span><a href="#_bookmark940"><span
style='color:#070707;text-decoration:none'>Deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>command prompt (see
terminal)</span></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>comments, in Handlebars, </span><a href="#_bookmark327"><span
style='color:#070707;text-decoration:none'>Comments</span></a><span
style='color:#070707'> </span><span style='color:#333333'>CommonJS (CJS)
modules, </span><a href="#_bookmark161"><span style='color:#070707'>Node
Modules</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection479>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>(see also Node modules) components, React, </span><a
href="#_bookmark683"><span style='color:#070707'>React Basics</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>compression<span style='letter-spacing:1.05pt'> </span>middleware,<span
style='letter-spacing:1.1pt'> </span></span><a href="#_bookmark443"><span
style='color:#070707'>Common<span style='letter-spacing:1.05pt'> </span><span
style='letter-spacing:-.1pt'>Middleware</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Connect, </span><a href="#_bookmark29"><span
style='color:#070707'>A Brief History of Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>connection pooling, </span><a
href="#_bookmark592"><span style='color:#070707'>PostgreSQL</span></a><span
style='color:#070707'> </span><span style='color:#333333'>console (see
terminal)</span></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>console logging, </span><a href="#_bookmark865"><span
style='color:#070707'>Take Advantage of REPL and the Console</span></a><span
style='color:#070707'> </span><span style='color:#333333'>consumer API key, </span><a
href="#_bookmark835"><span style='color:#070707'>Searching for Tweets</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:274.7pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>content delivery networks (CDNs) basics, </span><a
href="#_bookmark735"><span style='color:#070707'>Content Delivery Networks</span></a></p>

<p class=MsoBodyText style='margin-top:2.2pt;margin-right:119.85pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>designing for, </span><a href="#_bookmark740"><span
style='color:#070707'>Designing for CDNs</span></a><span style='color:#333333'>-</span><a
href="#_bookmark746"><span style='color:#070707'>Single-Page Applications</span></a><span
style='color:#070707'> </span><span style='color:#333333'>server-rendered
website, </span><a href="#_bookmark741"><span style='color:#070707'>Server-Rendered
Website</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:180.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>single-page applications, </span><a
href="#_bookmark745"><span style='color:#070707'>Single-Page Applications</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Content-Type headers,
</span><a href="#_bookmark241"><span style='color:#070707'>Response Headers</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>Context<span style='letter-spacing:.5pt'> </span>API<span
style='letter-spacing:.55pt'> </span>(React),<span style='letter-spacing:.6pt'>
</span></span><a href="#_bookmark712"><span style='color:#070707'>State<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Management</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>context<span
style='letter-spacing:.75pt'> </span>object,<span style='letter-spacing:.85pt'>
</span></span><a href="#_bookmark322"><span style='color:#070707'>Handlebars<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>Basics</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>context, templating and, </span><a href="#_bookmark323"><span
style='color:#070707'>Handlebars Basics</span></a><span style='color:#070707'> </span><span
style='color:#333333'>continuous delivery (CD), </span><a href="#_bookmark939"><span
style='color:#070707'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>continuous integration (CI), </span><a
href="#_bookmark217"><span style='color:#070707'>Continuous Integration</span></a><span
style='color:#070707'> </span><span style='color:#333333'>controlled
components, </span><a href="#_bookmark704"><span style='color:#070707'>Sending
Information to the Server</span></a><span style='color:#070707'> </span><span
style='color:#333333'>cookie secret, </span><a href="#_bookmark400"><span
style='color:#070707'>Externalizing Credentials</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>cookie-based<span
style='letter-spacing:1.0pt'> </span>sessions,<span style='letter-spacing:1.0pt'>
</span></span><a href="#_bookmark412"><span style='color:#070707;letter-spacing:
-.1pt'>Sessions</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>cookie-parser<span
style='letter-spacing:.7pt'> </span>middleware,<span style='letter-spacing:
.85pt'> </span></span><a href="#_bookmark402"><span style='color:#070707'>Cookies<span
style='letter-spacing:.85pt'> </span>in<span style='letter-spacing:.85pt'> </span>Express</span></a><span
style='color:#333333'>,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark443"><span style='color:#070707'>Common<span style='letter-spacing:
.9pt'> </span><span style='letter-spacing:-.1pt'>Middleware</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection480>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>cookie-session middleware, </span><a href="#_bookmark444"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>cookies, </span><a href="#_bookmark394"><span
style='color:#070707'>Cookies and Sessions</span></a><span style='color:#333333'>-</span><a
href="#_bookmark409"><span style='color:#070707'>Examining Cookies</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>examining,<span style='letter-spacing:1.05pt'> </span></span><a
href="#_bookmark408"><span style='color:#070707'>Examining<span
style='letter-spacing:1.1pt'> </span><span style='letter-spacing:-.1pt'>Cookies</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:180.65pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>externalizing credentials, </span><a href="#_bookmark400"><span
style='color:#070707'>Externalizing Credentials</span></a><span
style='color:#070707'> </span><span style='color:#333333'>in Express, </span><a
href="#_bookmark402"><span style='color:#070707'>Cookies in Express</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sessions<span
style='letter-spacing:.6pt'> </span>versus,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark398"><span style='color:#070707'>Cookies<span style='letter-spacing:
.65pt'> </span>and<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Sessions</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:87.65pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>CORS (cross-origin resource sharing), </span><a
href="#_bookmark653"><span style='color:#070707'>Cross-Origin Resource Sharing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>cors package, </span><a
href="#_bookmark654"><span style='color:#070707'>Cross-Origin Resource Sharing</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>country code TLDs, </span><a href="#_bookmark907"><span
style='color:#070707'>Top-Level Domains</span></a><span style='color:#070707'> </span><span
style='color:#333333'>coverage, of code, </span><a href="#_bookmark200"><span
style='color:#070707'>Code Coverage</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>create-react-app<span
style='letter-spacing:.6pt'> </span>(CRA)<span style='letter-spacing:.6pt'> </span>utility,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark678"><span
style='color:#070707'>Creating<span style='letter-spacing:.65pt'> </span>a<span
style='letter-spacing:.6pt'> </span>React<span style='letter-spacing:.55pt'> </span>App</span></a><span
style='color:#333333'>,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark690"><span style='color:#070707'>The<span style='letter-spacing:
.6pt'> </span>Home<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Page</span></span></a><span style='color:#333333;
letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark716"><span
style='color:#070707'>Deployment<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Options</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>createApplication() function (Express source code), </span><a
href="#_bookmark882"><span style='color:#070707'>Debugging Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>credentials,
externalizing, </span><a href="#_bookmark400"><span style='color:#070707'>Externalizing
Credentials</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Crockford,<span
style='letter-spacing:.75pt'> </span>Douglas,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark210"><span style='color:#070707'>Linting</span></a><span
style='color:#333333'>,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark639"><span style='color:#070707'>JSON<span style='letter-spacing:
.7pt'> </span>and<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.25pt'>XML</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>cross-domain<span
style='letter-spacing:.85pt'> </span>resource<span style='letter-spacing:.85pt'>
</span>sharing,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark738"><span style='color:#070707'>Content<span style='letter-spacing:
.8pt'> </span>Delivery<span style='letter-spacing:.9pt'> </span><span
style='letter-spacing:-.1pt'>Networks</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:97.1pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>cross-origin resource sharing (CORS), </span><a
href="#_bookmark653"><span style='color:#070707'>Cross-Origin Resource Sharing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>cross-site HTTP
requests, </span><a href="#_bookmark655"><span style='color:#070707'>Cross-Origin
Resource Sharing</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark792"><span style='color:#333333;text-decoration:none'>cross-site
request forgery (CSRF),</span></a><span style='color:#333333'> </span><a
href="#_bookmark446"><span style='color:#070707'>Common Middleware</span></a><a
href="#_bookmark792"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Cross-Site</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Request Forgery</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:124.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>cross-site request scripting (XSS) attacks, </span><a
href="#_bookmark396"><span style='color:#070707'>Cookies and Sessions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>CSR (certificate
signing request), </span><a href="#_bookmark779"><span style='color:#070707'>Purchasing
a Certificate</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.25pt'>CSS</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>as<span
style='letter-spacing:.45pt'> </span>static<span style='letter-spacing:.45pt'> </span>content,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark726"><span
style='color:#070707'>Static<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Content</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection481>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>online documentation, </span><a href="#_bookmark998"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>React and, </span><a href="#_bookmark688"><span
style='color:#070707'>The Home Page</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:102.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>csurf middleware, </span><a href="#_bookmark446"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#333333'>,
</span><a href="#_bookmark793"><span style='color:#070707'>Cross-Site Request
Forgery</span></a><span style='color:#070707'> </span><span style='color:#333333'>Ctrl-Q,
</span><a href="#_bookmark69"><span style='color:#070707'>Using the Terminal</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Ctrl-S,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark70"><span
style='color:#070707'>Using<span style='letter-spacing:.5pt'> </span>the<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>curly<span
style='letter-spacing:.75pt'> </span>brackets<span style='letter-spacing:.7pt'>
</span>({{<span style='letter-spacing:.7pt'> </span>}}),<span style='letter-spacing:
.75pt'> </span></span><a href="#_bookmark326"><span style='color:#070707'>Comments</span></a><span
style='color:#333333'>-</span><a href="#_bookmark330"><span style='color:#070707;
letter-spacing:-.1pt'>Blocks</span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>current<span
style='letter-spacing:.7pt'> </span>working<span style='letter-spacing:.75pt'> </span>directory<span
style='letter-spacing:.75pt'> </span>(cwd),<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark876"><span style='color:#070707'>Node<span style='letter-spacing:
.75pt'> </span>Inspector<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Clients</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: D"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Dahl, Ryan, </span><a href="#_bookmark13"><span
style='color:#070707'>The JavaScript Revolution</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>databases</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>abstracting<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.6pt'> </span>database<span style='letter-spacing:.65pt'>
</span>layer,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark561"><span style='color:#070707'>Abstracting<span
style='letter-spacing:.7pt'> </span>the<span style='letter-spacing:.65pt'> </span>Database<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>Layer</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>-</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark562"><span
style='color:#070707'>Abstracting<span style='letter-spacing:.7pt'> </span>the<span
style='letter-spacing:.7pt'> </span>Database<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.2pt'>Layer</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>adding data to MongoDB, </span><a href="#_bookmark583"><span
style='color:#070707'>Adding Data</span></a><span style='color:#333333'>-</span><a
href="#_bookmark586"><span style='color:#070707'>Adding Data</span></a><span
style='color:#070707'> </span><span style='color:#333333'>adding data to
PostgreSQL, </span><a href="#_bookmark595"><span style='color:#070707'>Adding
Data</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>connections with Mongoose, </span><a href="#_bookmark570"><span
style='color:#070707'>Database Connections with Mongoose</span></a><span
style='color:#070707'> </span><span style='color:#333333'>creating schemas and
models, </span><a href="#_bookmark572"><span style='color:#070707'>Creating
Schemas and Models</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>file systems versus, </span><a href="#_bookmark547"><span
style='color:#070707'>Filesystem Persistence</span></a><span style='color:#070707'>
</span><span style='color:#333333'>MongoDB setup, </span><a href="#_bookmark564"><span
style='color:#070707'>Setting Up MongoDB</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Mongoose setup, </span><a
href="#_bookmark568"><span style='color:#070707'>Mongoose</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:141.6pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>optimization of NoSQL databases, </span><a
href="#_bookmark560"><span style='color:#070707'>A Note on Performance</span></a><span
style='color:#070707'> </span><span style='color:#333333'>persistence, </span><a
href="#_bookmark554"><span style='color:#070707'>Database Persistence</span></a><span
style='color:#333333'>-</span><a href="#_bookmark597"><span style='color:#070707'>Adding
Data</span></a><span style='color:#070707;letter-spacing:4.0pt'> </span><span
style='color:#333333'>PostgreSQL, </span><a href="#_bookmark587"><span
style='color:#070707'>PostgreSQL</span></a><span style='color:#333333'>-</span><a
href="#_bookmark594"><span style='color:#070707'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>retrieving<span
style='letter-spacing:.85pt'> </span>data,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark580"><span style='color:#070707'>Retrieving<span
style='letter-spacing:.9pt'> </span>Data</span></a><span style='color:#333333'>-</span><a
href="#_bookmark584"><span style='color:#070707'>Retrieving<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection482>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>seeding<span
style='letter-spacing:.65pt'> </span>initial<span style='letter-spacing:.65pt'>
</span>data,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark575"><span style='color:#070707'>Seeding<span style='letter-spacing:
.7pt'> </span>Initial<span style='letter-spacing:.65pt'> </span>Data</span></a><span
style='color:#333333'>-</span><a href="#_bookmark579"><span style='color:#070707'>Seeding<span
style='letter-spacing:.65pt'> </span>Initial<span style='letter-spacing:.65pt'>
</span><span style='letter-spacing:-.2pt'>Data</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark600"><span style='color:#333333;text-decoration:none'>session
storage,</span></a><span style='color:#333333'> </span><a href="#_bookmark598"><span
style='color:#070707'>Using a Database for Session Storage</span></a><a
href="#_bookmark600"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Using a</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Database for Session Storage</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>storing user records in, </span><a
href="#_bookmark804"><span style='color:#070707'>Storing Users in Your Database</span></a><span
style='color:#070707'> </span><span style='color:#333333'>debugging, </span><a
href="#_bookmark860"><span style='color:#070707'>Debugging</span></a><span
style='color:#333333'>-</span><a href="#_bookmark894"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:12.6pt'><span
style='color:#333333'>asynchronous<span style='letter-spacing:1.2pt'> </span>functions,<span
style='letter-spacing:1.3pt'> </span></span><a href="#_bookmark879"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.25pt'> </span>Asynchronous<span
style='letter-spacing:1.25pt'> </span><span style='letter-spacing:-.1pt'>Functions</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>console logging, </span><a href="#_bookmark865"><span
style='color:#070707'>Take Advantage of REPL and the Console</span></a><span
style='color:#070707'> </span><span style='color:#333333'>elimination
technique, </span><a href="#_bookmark862"><span style='color:#070707'>The First
Principle of Debugging</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Express, </span><a href="#_bookmark881"><span
style='color:#070707'>Debugging Express</span></a><span style='color:#333333'>-</span><a
href="#_bookmark893"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>general<span
style='letter-spacing:.55pt'> </span>principles,<span style='letter-spacing:
.6pt'> </span></span><a href="#_bookmark861"><span style='color:#070707'>The<span
style='letter-spacing:.55pt'> </span>First<span style='letter-spacing:.6pt'> </span>Principle<span
style='letter-spacing:.55pt'> </span>of<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Debugging</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark877"><span style='color:#333333;text-decoration:none'>Node
inspector clients,</span></a><span style='color:#333333'> </span><a
href="#_bookmark869"><span style='color:#070707'>Node Inspector Clients</span></a><a
href="#_bookmark877"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Node Inspector</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Clients</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Node's built-in debugger, </span><a href="#_bookmark867"><span
style='color:#070707'>Using Nodes Built-in Debugger</span></a><span
style='color:#070707'> </span><span style='color:#333333'>REPL, </span><a
href="#_bookmark864"><span style='color:#070707'>Take Advantage of REPL and the
Console</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>delegated authentication, </span><a href="#_bookmark802"><span
style='color:#070707'>Third-Party Authentication</span></a><span
style='color:#070707'> </span><span style='color:#333333'>deployment, </span><a
href="#_bookmark936"><span style='color:#070707'>Deployment</span></a><span
style='color:#333333'>-</span><a href="#_bookmark949"><span style='color:#070707'>Manual
Git-based deployment</span></a></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>Git's<span style='letter-spacing:.3pt'> </span>role<span
style='letter-spacing:.35pt'> </span>in,<span style='letter-spacing:.4pt'> </span></span><a
href="#_bookmark947"><span style='color:#070707'>Gits<span style='letter-spacing:
.35pt'> </span>role<span style='letter-spacing:.35pt'> </span>in<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>deployment</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:189.85pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>manual Git-based, </span><a href="#_bookmark948"><span
style='color:#070707'>Manual Git-based deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>single-page
applications, </span><a href="#_bookmark713"><span style='color:#070707'>Deployment
Options</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>development environments, cloud-based, </span><a
href="#_bookmark67"><span style='color:#070707'>Using the Terminal</span></a><span
style='color:#070707'> </span><span style='color:#333333'>DigitalOcean, </span><a
href="#_bookmark932"><span style='color:#070707'>The behemoths</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:129.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>directory structure conventions, </span><a
href="#_bookmark135"><span style='color:#070707'>File and Directory Structure</span></a><span
style='color:#070707'> </span><span style='color:#333333'>distributed version
control systems (DVCSs), </span><a href="#_bookmark144"><span style='color:
#070707'>Version Control</span></a><span style='color:#070707'> </span><span
style='color:#333333'>DNS (Domain Name System), </span><a href="#_bookmark903"><span
style='color:#070707'>Domain Name System</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection483>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>document databases, </span><a href="#_bookmark557"><span
style='color:#070707'>Database Persistence</span></a><span style='color:#070707'>
</span><span style='color:#333333;letter-spacing:-.1pt'>documentation</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>of<span style='letter-spacing:.45pt'> </span>QA<span
style='letter-spacing:.5pt'> </span>routine,<span style='letter-spacing:.55pt'>
</span></span><a href="#_bookmark970"><span style='color:#070707'>Do<span
style='letter-spacing:.55pt'> </span>Routine<span style='letter-spacing:.45pt'>
</span>QA<span style='letter-spacing:.5pt'> </span><span style='letter-spacing:
-.1pt'>Checks</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>version<span
style='letter-spacing:.65pt'> </span>control<span style='letter-spacing:.65pt'>
</span>and,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark141"><span style='color:#070707'>Version<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>Control</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark22"><span style='color:#333333;text-decoration:none'>DOM
(Document Object Model), </span><span style='color:#070707'>Server-Side and
Client-Side</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Applications</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>domain<span
style='letter-spacing:.7pt'> </span>certificates,<span style='letter-spacing:
.7pt'> </span></span><a href="#_bookmark777"><span style='color:#070707'>Purchasing<span
style='letter-spacing:.7pt'> </span>a<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Certificate</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Domain Name System (DNS), </span><a href="#_bookmark903"><span
style='color:#070707'>Domain Name System</span></a><span style='color:#070707'>
</span><span style='color:#333333'>domain names, </span><a href="#_bookmark899"><span
style='color:#070707'>Domain Registration and Hosting</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>domain registration, </span><a
href="#_bookmark897"><span style='color:#070707'>Domain Registration and
Hosting</span></a><span style='color:#333333'>-</span><a href="#_bookmark919"><span
style='color:#070707'>Nameservers</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Domain Name System, </span><a href="#_bookmark903"><span
style='color:#070707'>Domain Name System</span></a></p>

<p class=MsoBodyText style='margin-top:2.2pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>hosting versus, </span><a href="#_bookmark898"><span
style='color:#070707'>Domain Registration and Hosting</span></a><span
style='color:#070707'> </span><span style='color:#333333'>nameservers, </span><a
href="#_bookmark915"><span style='color:#070707'>Nameservers</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>security, </span><a href="#_bookmark904"><span
style='color:#070707'>Security</span></a><span style='color:#070707'> </span><span
style='color:#333333'>subdomains, </span><a href="#_bookmark913"><span
style='color:#070707'>Subdomains</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>top-level domains, </span><a
href="#_bookmark908"><span style='color:#070707'>Top-Level Domains</span></a><span
style='color:#070707'> </span><span style='color:#333333'>dot net, </span><a
href="#_bookmark12"><span style='color:#070707'>The JavaScript Revolution</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>dual<span style='letter-spacing:.65pt'> </span>licensing,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark48"><span
style='color:#070707;letter-spacing:-.1pt'>Licensing</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>DVCSs (distributed version control systems), </span><a
href="#_bookmark144"><span style='color:#070707'>Version Control</span></a><span
style='color:#070707'> </span><span style='color:#333333'>dynamic content</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>defined,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark123"><span style='color:#070707'>Views<span style='letter-spacing:
.6pt'> </span>and<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><br clear=ALL>
<span style='color:#333333'>in views, </span><a href="#_bookmark129"><span
style='color:#070707'>Dynamic Content in Views</span></a><span
style='color:#070707'> </span><span style='color:#333333'>dynamic IP address, </span><a
href="#_bookmark916"><span style='color:#070707'>Nameservers</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:182%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection484>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=576 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image093.gif"></span></p>

<p class=MsoBodyText style='margin-top:.35pt'><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>ECMA-262 ECMAScript language specification, </span><a
href="#_bookmark1000"><span style='color:#070707'>Online Documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>ECMAScript Modules
(ESM), </span><a href="#_bookmark162"><span style='color:#070707'>Node Modules</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>edge caching, </span><a href="#_bookmark737"><span
style='color:#070707'>Content Delivery Networks</span></a><span
style='color:#070707'> </span><span style='color:#333333'>editors, </span><a
href="#_bookmark72"><span style='color:#070707;text-decoration:none'>Editors</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><br clear=ALL>
<span style='color:#333333'>ElephantSQL,<span style='letter-spacing:1.25pt'> </span></span><a
href="#_bookmark589"><span style='color:#070707;letter-spacing:-.1pt;
text-decoration:none'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-top:10.65pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>elimination, process of, </span><a href="#_bookmark862"><span
style='color:#070707'>The First Principle of Debugging</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Emacs, </span><a
href="#_bookmark74"><span style='color:#070707'>Editors</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>email,<span
style='letter-spacing:.9pt'> </span></span><a href="#_bookmark461"><span
style='color:#070707'>Sending<span style='letter-spacing:.95pt'> </span>Email</span></a><span
style='color:#333333'>-</span><a href="#_bookmark498"><span style='color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>bulk options other than Nodemailer, </span><a
href="#_bookmark485"><span style='color:#070707'>Better Options for Bulk Email</span></a><span
style='color:#070707'> </span><span style='color:#333333'>encapsulating
functionality, </span><a href="#_bookmark495"><span style='color:#070707'>Encapsulating
Email Functionality</span></a><span style='color:#070707'> </span><span
style='color:#333333'>formats, </span><a href="#_bookmark472"><span
style='color:#070707'>Email Formats</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>headers, </span><a href="#_bookmark468"><span
style='color:#070707'>Email Headers</span></a><span style='color:#070707'> </span><span
style='color:#333333'>HTML format, </span><a href="#_bookmark473"><span
style='color:#070707'>HTML Email</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>images<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.55pt'> </span>HTML<span
style='letter-spacing:.5pt'> </span>email,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark489"><span style='color:#070707'>Images<span style='letter-spacing:
.5pt'> </span>in<span style='letter-spacing:.6pt'> </span>HTML<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Email</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark482"><span style='color:#333333;text-decoration:none'>Nodemailer
package,</span></a><span style='color:#333333'> </span><a href="#_bookmark476"><span
style='color:#070707'>Nodemailer</span></a><a href="#_bookmark482"><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>Sending
Mail to Multiple</span><span style='color:#070707;text-decoration:none'> <span
style='letter-spacing:-.1pt'>Recipients</span></span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><br clear=ALL>
<span style='color:#333333'>receiving,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark466"><span style='color:#070707;text-decoration:none'>Receiving<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>Email</span></span></a></p>

<p class=MsoBodyText style='margin-top:10.65pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark497"><span style='color:#333333;text-decoration:none'>sending
HTML email,</span></a><span style='color:#333333'> </span><a
href="#_bookmark487"><span style='color:#070707'>Sending HTML Email</span></a><a
href="#_bookmark497"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Encapsulating Email</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Functionality</span></a></p>

<p class=MsoBodyText style='margin-top:9.5pt;margin-right:109.45pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark491"><span style='color:#333333;text-decoration:none'>sending
HTML email with views, </span><span style='color:#070707'>Using Views to Send
HTML</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Email</span><span style='color:#333333;text-decoration:
none'>-</span></a><a href="#_bookmark494"><span style='color:#070707'>U</span></a><a
href="#_bookmark491"><span style='color:#070707'>sing Views to Send HTML Email</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>sending to multiple recipients, </span><a
href="#_bookmark481"><span style='color:#070707'>Sending Mail to Multiple
Recipients</span></a><span style='color:#070707'> </span><span
style='color:#333333'>sending to single recipient, </span><a
href="#_bookmark479"><span style='color:#070707'>Sending Mail</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection485>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>SMTP,<span
style='letter-spacing:.6pt'> </span>MSAs,<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.6pt'> </span>MTAs,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark462"><span style='color:#070707'>SMTP,<span style='letter-spacing:
.6pt'> </span>MSAs,<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.2pt'>MTAs</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Email Boilerplate, </span><a href="#_bookmark475"><span
style='color:#070707'>HTML Email</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Ember, </span><a href="#_bookmark676"><span
style='color:#070707'>SPA Technologies</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>encapsulation of email functionality, </span><a
href="#_bookmark495"><span style='color:#070707'>Encapsulating Email
Functionality</span></a><span style='color:#070707'> </span><span
style='color:#333333'>encoding of forms, </span><a href="#_bookmark365"><span
style='color:#070707'>Encoding</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>entropic<span
style='letter-spacing:.8pt'> </span>functionality,<span style='letter-spacing:
.9pt'> </span></span><a href="#_bookmark201"><span style='color:#070707'>Code<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Coverage</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>environment-specific<span
style='letter-spacing:1.6pt'> </span>configuration,<span style='letter-spacing:
1.7pt'> </span></span><a href="#_bookmark503"><span style='color:#070707'>Environment-Specific<span
style='letter-spacing:1.65pt'> </span><span style='letter-spacing:-.1pt'>Configuration</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>-</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><a
href="#_bookmark507"><span style='color:#070707'>Environment-Specific
Configuration</span></a><span style='color:#070707'> </span><span
style='color:#333333'>error handling/reporting</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>REST<span style='letter-spacing:.45pt'> </span>APIs,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark647"><span
style='color:#070707'>API<span style='letter-spacing:.5pt'> </span>Error<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Reporting</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>uncaught<span
style='letter-spacing:.95pt'> </span>exceptions,<span style='letter-spacing:
1.0pt'> </span></span><a href="#_bookmark520"><span style='color:#070707'>Handling<span
style='letter-spacing:1.05pt'> </span>Uncaught<span style='letter-spacing:.95pt'>
</span><span style='letter-spacing:-.1pt'>Exceptions</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>errorhandler middleware, </span><a href="#_bookmark436"><span
style='color:#070707'>Middleware Principles</span></a><span style='color:#333333'>,
</span><a href="#_bookmark448"><span style='color:#070707'>Common Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>ESLint, </span><a
href="#_bookmark213"><span style='color:#070707'>Linting</span></a><span
style='color:#333333'>-</span><a href="#_bookmark215"><span style='color:#070707'>Linting</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>ESM (ECMAScript Modules), </span><a href="#_bookmark162"><span
style='color:#070707'>Node Modules</span></a><span style='color:#070707'> </span><span
style='color:#333333'>ETag header, </span><a href="#_bookmark749"><span
style='color:#070707'>Caching Static Assets</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>event-driven programming, </span><a href="#_bookmark87"><span
style='color:#070707'>Event-Driven Programming</span></a><span
style='color:#070707'> </span><span style='color:#333333'>exceptions, uncaught,
</span><a href="#_bookmark520"><span style='color:#070707'>Handling Uncaught
Exceptions</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:80.75pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark503"><span style='color:#333333;text-decoration:none'>execution
environments,</span></a><span style='color:#333333'> </span><a
href="#_bookmark501"><span style='color:#070707'>Execution Environments</span></a><a
href="#_bookmark503"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Environment-Specific</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>Configuration</span><span
style='color:#333333;text-decoration:none'>-</span></a><a href="#_bookmark507"><span
style='color:#070707'>E</span></a><a href="#_bookmark503"><span
style='color:#070707'>nvironment-Specific Configuration</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Expires header, </span><a href="#_bookmark748"><span
style='color:#070707'>Caching Static Assets</span></a><span style='color:#070707'>
</span><span style='color:#333333'>exports variable, </span><a
href="#_bookmark160"><span style='color:#070707'>Node Modules</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Express</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.15pt'><span
style='color:#333333'>additional<span style='letter-spacing:.9pt'> </span>learning<span
style='letter-spacing:1.0pt'> </span>resources<span style='letter-spacing:.9pt'>
</span>for,<span style='letter-spacing:1.0pt'> </span></span><a
href="#_bookmark996"><span style='color:#070707'>Additional<span
style='letter-spacing:.9pt'> </span>Resources</span></a><span style='color:
#333333'>-</span><a href="#_bookmark1013"><span style='color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>APIs<span
style='letter-spacing:.5pt'> </span>provided<span style='letter-spacing:.6pt'> </span>by,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark661"><span
style='color:#070707'>Using<span style='letter-spacing:.6pt'> </span>Express<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.6pt'> </span>Provide<span
style='letter-spacing:.55pt'> </span>an<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection486>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>basics, </span><a href="#_bookmark102"><span
style='color:#070707'>Saving Time with Express</span></a><span
style='color:#333333'>-</span><a href="#_bookmark133"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707'> </span><span style='color:#333333'>brief history, </span><a
href="#_bookmark27"><span style='color:#070707'>A Brief History of Express</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>contributing to, </span><a href="#_bookmark1009"><span
style='color:#070707'>Contributing to Express</span></a><span style='color:
#333333'>-</span><a href="#_bookmark1011"><span style='color:#070707'>Contributing
to Express</span></a><span style='color:#070707'> </span><span
style='color:#333333'>cookies in, </span><a href="#_bookmark402"><span
style='color:#070707'>Cookies in Express</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>debugging,<span
style='letter-spacing:1.55pt'> </span></span><a href="#_bookmark881"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.55pt'> </span>Express</span></a><span
style='color:#333333'>-</span><a href="#_bookmark893"><span style='color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark781"><span style='color:#333333;text-decoration:none'>enabling
HTTPS for Express app, </span><span style='color:#070707'>Enabling HTTPS for
Your Express</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.2pt'>App</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>features,<span
style='letter-spacing:.9pt'> </span></span><a href="#_bookmark17"><span
style='color:#070707'>Introducing<span style='letter-spacing:.95pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark377"><span style='color:#333333;text-decoration:none'>form
handling with,</span></a><span style='color:#333333'> </span><a
href="#_bookmark371"><span style='color:#070707'>Form Handling with Express</span></a><a
href="#_bookmark377"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Form Handling</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>with Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>layouts<span
style='letter-spacing:.45pt'> </span>in,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark337"><span style='color:#070707'>Views<span style='letter-spacing:
.5pt'> </span>and<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:205.55pt;
margin-bottom:0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>online documentation, </span><a href="#_bookmark1002"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>scaffolding, </span><a href="#_bookmark104"><span
style='color:#070707'>Scaffolding</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark1011"><span style='color:#333333;text-decoration:none'>submitting
pull requests,</span></a><span style='color:#333333'> </span><a
href="#_bookmark1009"><span style='color:#070707'>Contributing to Express</span></a><a
href="#_bookmark1011"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Contributing to</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:10.9pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>express-handlebars, </span><a
href="#_bookmark121"><span style='color:#070707'>Views and Layouts</span></a><span
style='color:#333333'>, </span><a href="#_bookmark336"><span style='color:#070707'>Server-Side
Templates</span></a><span style='color:#070707'> </span><span style='color:
#333333'>partial templates, </span><a href="#_bookmark346"><span
style='color:#070707'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:2.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>subdirectories,<span
style='letter-spacing:1.2pt'> </span></span><a href="#_bookmark347"><span
style='color:#070707;letter-spacing:-.1pt'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>express-session middleware, </span><a href="#_bookmark415"><span
style='color:#070707'>Memory Stores</span></a><span style='color:#333333'>, </span><a
href="#_bookmark445"><span style='color:#070707'>Common Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>express.Router(), </span><a
href="#_bookmark615"><span style='color:#070707'>Subdomains</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>extended valuation, </span><a href="#_bookmark777"><span
style='color:#070707'>Purchasing a Certificate</span></a><span
style='color:#070707'> </span><span style='color:#333333'>externalizing
credentials, </span><a href="#_bookmark400"><span style='color:#070707'>Externalizing
Credentials</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: F"></td>
 </tr>
</table>

<br clear=ALL>
</p>

</div>

<span style='font-size:2.5pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection487>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>FaaS (functions as a service), </span><a
href="#_bookmark927"><span style='color:#070707'>XaaS</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Facebook</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>as<span style='letter-spacing:.65pt'> </span>authentication<span
style='letter-spacing:.75pt'> </span>provider,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark816"><span style='color:#070707'>Setting<span
style='letter-spacing:.75pt'> </span>up<span style='letter-spacing:.7pt'> </span>Passport</span></a><span
style='color:#333333'>-</span><a href="#_bookmark819"><span style='color:#070707'>Setting<span
style='letter-spacing:.75pt'> </span>up<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Passport</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>React<span
style='letter-spacing:.45pt'> </span>and,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark673"><span style='color:#070707'>SPA<span style='letter-spacing:
.45pt'> </span><span style='letter-spacing:-.1pt'>Technologies</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Facebook app, </span><a href="#_bookmark816"><span
style='color:#070707'>Setting up Passport</span></a><span style='color:#333333'>-</span><a
href="#_bookmark819"><span style='color:#070707'>Setting up Passport</span></a><span
style='color:#070707'> </span><span style='color:#333333'>federated
authentication, </span><a href="#_bookmark802"><span style='color:#070707'>Third-Party
Authentication</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.1pt'>Fetch</span></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.15pt'><span
style='color:#333333'>file<span style='letter-spacing:.5pt'> </span>uploads<span
style='letter-spacing:.5pt'> </span>with,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark386"><span style='color:#070707'>File<span style='letter-spacing:
.5pt'> </span>Uploads<span style='letter-spacing:.55pt'> </span>with<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Fetch</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:76.7pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark381"><span style='color:#333333;text-decoration:none'>sending
form data with,</span></a><span style='color:#333333'> </span><a
href="#_bookmark378"><span style='color:#070707'>Using Fetch to Send Form Data</span></a><a
href="#_bookmark381"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Using Fetch</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>to Send Form Data</span></a></p>

<p class=MsoBodyText style='margin-top:10.85pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>file structure conventions, </span><a href="#_bookmark135"><span
style='color:#070707'>File and Directory Structure</span></a><span
style='color:#070707'> </span><span style='color:#333333'>file uploads, </span><a
href="#_bookmark382"><span style='color:#070707'>File Uploads</span></a><span
style='color:#333333'>-</span><a href="#_bookmark390"><span style='color:#070707'>Improving
File Upload UI</span></a></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.1pt'><span
style='color:#333333'>improving<span style='letter-spacing:.65pt'> </span>file<span
style='letter-spacing:.65pt'> </span>upload<span style='letter-spacing:.65pt'> </span>UI,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark388"><span
style='color:#070707'>Improving<span style='letter-spacing:.7pt'> </span>File<span
style='letter-spacing:.6pt'> </span>Upload<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.25pt'>UI</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;text-align:justify'><span
style='color:#333333'>with<span style='letter-spacing:.55pt'> </span>Fetch,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark386"><span
style='color:#070707'>File<span style='letter-spacing:.5pt'> </span>Uploads<span
style='letter-spacing:.5pt'> </span>with<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Fetch</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:102.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>filesystem persistence, </span><a
href="#_bookmark544"><span style='color:#070707'>Filesystem Persistence</span></a><span
style='color:#333333'>-</span><a href="#_bookmark549"><span style='color:#070707'>Filesystem
Persistence</span></a><span style='color:#070707'> </span><span
style='color:#333333'>financial computations, in JavaScript, </span><a
href="#_bookmark573"><span style='color:#070707'>Creating Schemas and Models</span></a><span
style='color:#070707'> </span><span style='color:#333333'>find() method,
Mongoose, </span><a href="#_bookmark577"><span style='color:#070707'>Seeding
Initial Data</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:107.85pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
115%'><a href="#_bookmark423"><span style='color:#333333;text-decoration:none'>flash
messages,</span></a><span style='color:#333333'> </span><a href="#_bookmark420"><span
style='color:#070707'>Using Sessions to Implement Flash Messages</span></a><a
href="#_bookmark423"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Using</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Sessions to Implement Flash Messages</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>flat<span
style='letter-spacing:.45pt'> </span>files,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark545"><span style='color:#070707'>Filesystem<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Persistence</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>floating-point numbers, </span><a href="#_bookmark573"><span
style='color:#070707'>Creating Schemas and Models</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Forever, </span><a
href="#_bookmark510"><span style='color:#070707'>Running Your Node Process</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>form handling, </span><a href="#_bookmark356"><span
style='color:#070707'>Form Handling</span></a><span style='color:#333333'>-</span><a
href="#_bookmark392"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707'> </span><span style='color:#333333'>encoding, </span><a
href="#_bookmark365"><span style='color:#070707'>Encoding</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:160%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection488>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark377"><span style='color:#333333;text-decoration:none'>Express
for,</span></a><span style='color:#333333'> </span><a href="#_bookmark371"><span
style='color:#070707'>Form Handling with Express</span></a><a
href="#_bookmark377"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Form Handling with</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark381"><span style='color:#333333;text-decoration:none'>Fetch for
sending form data,</span></a><span style='color:#333333'> </span><a
href="#_bookmark378"><span style='color:#070707'>Using Fetch to Send Form Data</span></a><a
href="#_bookmark381"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Using</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Fetch to Send Form Data</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>file uploads, </span><a href="#_bookmark382"><span
style='color:#070707'>File Uploads</span></a><span style='color:#333333'>-</span><a
href="#_bookmark390"><span style='color:#070707'>Improving File Upload UI</span></a><span
style='color:#070707'> </span><span style='color:#333333'>HTML forms, </span><a
href="#_bookmark362"><span style='color:#070707'>HTML Forms</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>improving file upload UI, </span><a href="#_bookmark388"><span
style='color:#070707'>Improving File Upload UI</span></a><span
style='color:#070707'> </span><span style='color:#333333'>processing, </span><a
href="#_bookmark296"><span style='color:#070707'>Processing Forms</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.5pt'> </span>client<span style='letter-spacing:.5pt'> </span>data<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.55pt'> </span>server,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark358"><span
style='color:#070707'>Sending<span style='letter-spacing:.55pt'> </span>Client<span
style='letter-spacing:.45pt'> </span>Data<span style='letter-spacing:.5pt'> </span>to<span
style='letter-spacing:.5pt'> </span>the<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.8pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>various approaches to, </span><a href="#_bookmark366"><span
style='color:#070707'>Different Approaches to Form Handling</span></a><span
style='color:#333333'>- </span><a href="#_bookmark370"><span style='color:#070707'>Different
Approaches to Form Handling</span></a></p>

<p class=MsoBodyText style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>FormData<span
style='letter-spacing:.6pt'> </span>object,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark387"><span style='color:#070707'>File<span style='letter-spacing:
.6pt'> </span>Uploads<span style='letter-spacing:.6pt'> </span>with<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Fetch</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>forward-facing proxy, </span><a href="#_bookmark527"><span
style='color:#070707'>Scaling Out with Multiple Servers</span></a><span
style='color:#070707'> </span><span style='color:#333333'>fragment, in URL, </span><a
href="#_bookmark233"><span style='color:#070707'>The Parts of a URL</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>fs.readFile, </span><a href="#_bookmark94"><span
style='color:#070707'>Serving Static Resources</span></a><span
style='color:#070707'> </span><span style='color:#333333'>FTP, security issues
with, </span><a href="#_bookmark937"><span style='color:#070707;text-decoration:
none'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>fully qualified domain name (FQDN), </span><a
href="#_bookmark768"><span style='color:#070707;text-decoration:none'>Generating
Your Own Certificate</span></a><span style='color:#070707'> </span><span
style='color:#333333'>functionality (QA element), </span><a href="#_bookmark172"><span
style='color:#070707'>QA: Is It Worth It?</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>functions<span
style='letter-spacing:.45pt'> </span>as<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.5pt'> </span>service<span style='letter-spacing:.5pt'> </span>(FaaS),<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark927"><span
style='color:#070707;letter-spacing:-.2pt'>XaaS</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image094.gif"
  alt="Text Box: G"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>GA (Google Analytics), </span><a href="#_bookmark973"><span
style='color:#070707'>Monitor Analytics</span></a><span style='color:#070707'> </span><span
style='color:#333333'>general TLDs (gTLDs), </span><a href="#_bookmark909"><span
style='color:#070707'>Top-Level Domains</span></a><span style='color:#070707'> </span><span
style='color:#333333'>geocoding, </span><a href="#_bookmark844"><span
style='color:#070707'>Geocoding</span></a><span style='color:#333333'>-</span><a
href="#_bookmark853"><span style='color:#070707'>Displaying a Map</span></a></p>

<p class=MsoBodyText style='margin-left:83.8pt;line-height:14.15pt'><span
style='color:#333333'>displaying<span style='letter-spacing:.6pt'> </span>a<span
style='letter-spacing:.55pt'> </span>map,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark852"><span style='color:#070707'>Displaying<span
style='letter-spacing:.6pt'> </span>a<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.25pt'>Map</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection489>

<p class=MsoBodyText style='margin-top:3.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>Google<span
style='letter-spacing:.8pt'> </span>and,<span style='letter-spacing:.85pt'> </span></span><a
href="#_bookmark845"><span style='color:#070707'>Geocoding<span
style='letter-spacing:.9pt'> </span>with<span style='letter-spacing:.85pt'> </span>Google</span></a><span
style='color:#333333'>-</span><a href="#_bookmark848"><span style='color:#070707'>Usage<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>restrictions</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>of your own data, </span><a
href="#_bookmark849"><span style='color:#070707'>Geocoding Your Data</span></a><span
style='color:#333333'>-</span><a href="#_bookmark851"><span style='color:#070707'>Geocoding
Your Data</span></a><span style='color:#070707'> </span><span style='color:
#333333'>geographic optimization, </span><a href="#_bookmark737"><span
style='color:#070707'>Content Delivery Networks</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>GET<span style='letter-spacing:.55pt'> </span>request,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark237"><span
style='color:#070707'>HTTP<span style='letter-spacing:.55pt'> </span>Request<span
style='letter-spacing:.6pt'> </span>Methods</span></a><span style='color:#333333'>,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark359"><span
style='color:#070707'>Sending<span style='letter-spacing:.65pt'> </span>Client<span
style='letter-spacing:.55pt'> </span>Data<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.6pt'> </span>the<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.25pt'>Git</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark150"><span style='color:#333333;text-decoration:none'>basics,</span></a><span
style='color:#333333'> </span><a href="#_bookmark145"><span style='color:#070707'>How
to Use Git with This Book</span></a><a href="#_bookmark150"><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>If
Youre Following Along</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>by Using the Official Repository</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>manual Git-based deployment, </span><a
href="#_bookmark948"><span style='color:#070707'>Manual Git-based deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>role in deployment, </span><a
href="#_bookmark947"><span style='color:#070707'>Gits role in deployment</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>git add command, </span><a href="#_bookmark147"><span
style='color:#070707'>If Youre Following Along by Doing It Yourself</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Git bash shell, </span><a
href="#_bookmark61"><span style='color:#070707'>Using the Terminal</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>GNU General Public License (GPL), </span><a
href="#_bookmark45"><span style='color:#070707'>Licensing</span></a><span
style='color:#333333'>, </span><a href="#_bookmark1010"><span style='color:
#070707'>Contributing to Express</span></a><span style='color:#070707'> </span><span
style='color:#333333'>going live, </span><a href="#_bookmark896"><span
style='color:#070707'>Going Live</span></a><span style='color:#333333'>-</span><a
href="#_bookmark951"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>deployment,<span style='letter-spacing:1.35pt'> </span></span><a
href="#_bookmark936"><span style='color:#070707'>Deployment</span></a><span
style='color:#333333'>-</span><a href="#_bookmark949"><span style='color:#070707'>Manual<span
style='letter-spacing:1.3pt'> </span>Git-based<span style='letter-spacing:1.35pt'>
</span><span style='letter-spacing:-.1pt'>deployment</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>hosting, </span><a href="#_bookmark920"><span
style='color:#070707'>Hosting</span></a><span style='color:#333333'>-</span><a
href="#_bookmark938"><span style='color:#070707'>Boutique hosting</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Google</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:12.6pt'><span
style='color:#333333'>Angular,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark674"><span style='color:#070707'>SPA<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>Technologies</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>cloud<span
style='letter-spacing:.65pt'> </span>platforms,<span style='letter-spacing:
.65pt'> </span></span><a href="#_bookmark931"><span style='color:#070707'>The<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>behemoths</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>geocoding and, </span><a href="#_bookmark845"><span
style='color:#070707'>Geocoding with Google</span></a><span style='color:#333333'>-</span><a
href="#_bookmark848"><span style='color:#070707'>Usage restrictions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>geocoding usage
restrictions, </span><a href="#_bookmark846"><span style='color:#070707'>Usage
restrictions</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Google Analytics (GA), </span><a href="#_bookmark973"><span
style='color:#070707'>Monitor Analytics</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Google Cloud Build, </span><a href="#_bookmark944"><span
style='color:#070707'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Google<span
style='letter-spacing:.8pt'> </span>PageSpeed<span style='letter-spacing:.9pt'>
</span>Insights,<span style='letter-spacing:.85pt'> </span></span><a
href="#_bookmark977"><span style='color:#070707'>Optimize<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Performance</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection490>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Google<span
style='letter-spacing:.6pt'> </span>Webmaster<span style='letter-spacing:.65pt'>
</span>Tools,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark971"><span style='color:#070707'>Do<span style='letter-spacing:
.7pt'> </span>Routine<span style='letter-spacing:.65pt'> </span>QA<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>Checks</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>GPL (GNU General Public License), </span><a
href="#_bookmark45"><span style='color:#070707'>Licensing</span></a><span
style='color:#333333'>, </span><a href="#_bookmark1010"><span style='color:
#070707'>Contributing to Express</span></a><span style='color:#070707'> </span><span
style='color:#333333'>gTLDs (general TLDs), </span><a href="#_bookmark909"><span
style='color:#070707'>Top-Level Domains</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: H"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Handlebars,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark120"><span
style='color:#070707'>Views<span style='letter-spacing:.7pt'> </span>and<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>basics, </span><a href="#_bookmark321"><span
style='color:#070707'>Handlebars Basics</span></a><span style='color:#333333'>-</span><a
href="#_bookmark352"><span style='color:#070707'>Perfecting Your Templates</span></a><span
style='color:#070707'> </span><span style='color:#333333'>blocks in, </span><a
href="#_bookmark329"><span style='color:#070707'>Blocks</span></a><span
style='color:#333333'>-</span><a href="#_bookmark331"><span style='color:#070707'>Blocks</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:314.05pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>comments, </span><a href="#_bookmark327"><span
style='color:#070707'>Comments</span></a><span style='color:#070707;letter-spacing:
2.0pt'> </span><span style='color:#333333'>helper for sections, </span><a
href="#_bookmark342"><span style='color:#070707'>Sections</span></a><span
style='color:#070707'> </span><span style='color:#333333'>partials, </span><a
href="#_bookmark344"><span style='color:#070707'>Partials</span></a><span
style='color:#333333'>-</span><a href="#_bookmark349"><span style='color:#070707'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>server-side templates, </span><a href="#_bookmark333"><span
style='color:#070707'>Server-Side Templates</span></a><span style='color:#070707'>
</span><span style='color:#333333'>views and layouts, </span><a
href="#_bookmark337"><span style='color:#070707'>Views and Layouts</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>handlers<span
style='letter-spacing:.55pt'> </span>(see<span style='letter-spacing:.6pt'> </span>route<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>handlers)</span></span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>HAProxy, </span><a href="#_bookmark528"><span
style='color:#070707'>Scaling Out with Multiple Servers</span></a><span
style='color:#070707'> </span><span style='color:#333333'>hash, in URL, </span><a
href="#_bookmark233"><span style='color:#070707'>The Parts of a URL</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>HCI (human-computer interaction), </span><a
href="#_bookmark173"><span style='color:#070707'>QA: Is It Worth It?</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>headers</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>email,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark468"><span style='color:#070707'>Email<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.1pt'>Headers</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>request headers, </span><a
href="#_bookmark239"><span style='color:#070707'>Request Headers</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Heroku, </span><a
href="#_bookmark932"><span style='color:#070707'>The behemoths</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>Holowaychuk,<span style='letter-spacing:.6pt'> </span>TJ,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark27"><span
style='color:#070707'>A<span style='letter-spacing:.55pt'> </span>Brief<span
style='letter-spacing:.6pt'> </span>History<span style='letter-spacing:.6pt'> </span>of<span
style='letter-spacing:.55pt'> </span>Express</span></a><span style='color:#333333'>,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark318"><span
style='color:#070707'>Pug:<span style='letter-spacing:.55pt'> </span>A<span
style='letter-spacing:.55pt'> </span>Different<span style='letter-spacing:.55pt'>
</span><span style='letter-spacing:-.1pt'>Approach</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark701"><span style='color:#333333;text-decoration:none'>hooks,
React,</span></a><span style='color:#333333'> </span><a href="#_bookmark697"><span
style='color:#070707'>Vacations PageVisual Design</span></a><a
href="#_bookmark701"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Vacations PageServer</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Integration</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:115%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection491>

<p class=MsoBodyText align=center style='margin-top:3.6pt;margin-right:304.15pt;
margin-bottom:0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:center;
text-indent:-4.05pt;line-height:167%'><span style='color:#333333'>host, in URL,
</span><a href="#_bookmark226"><span style='color:#070707'>The Parts of a URL</span></a><span
style='color:#070707'> </span><span style='color:#333333'>hosting, </span><a
href="#_bookmark920"><span style='color:#070707'>Hosting</span></a><span
style='color:#333333'>-</span><a href="#_bookmark938"><span style='color:#070707'>Boutique
hosting</span></a><span style='color:#070707'> </span><span style='color:#333333'>(see
also cloud hosting)</span></p>

<p class=MsoBodyText align=center style='margin-top:.95pt;margin-right:118.3pt;
margin-bottom:0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:center;
text-indent:-2.0pt;line-height:173%'><span style='color:#333333'>domain
registration versus, </span><a href="#_bookmark898"><span style='color:#070707'>Domain
Registration and Hosting</span></a><span style='color:#070707'> </span><span
style='color:#333333'>traditional versus cloud, </span><a href="#_bookmark922"><span
style='color:#070707'>Traditional hosting or cloud hosting?</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.2pt'>HTML</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>as<span
style='letter-spacing:.45pt'> </span>static<span style='letter-spacing:.45pt'> </span>content,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark724"><span
style='color:#070707'>Static<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Content</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>online<span
style='letter-spacing:.85pt'> </span>documentation,<span style='letter-spacing:
1.0pt'> </span></span><a href="#_bookmark999"><span style='color:#070707'>Online<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Documentation</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>problems with having JavaScript emit, </span><a
href="#_bookmark313"><span style='color:#070707'>Templating with Handlebars</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Pug and, </span><a
href="#_bookmark319"><span style='color:#070707'>Pug: A Different Approach</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>templates versus, </span><a href="#_bookmark314"><span
style='color:#070707'>There Are No Absolute Rules Except This One</span></a><span
style='color:#070707'> </span><span style='color:#333333'>views and, </span><a
href="#_bookmark117"><span style='color:#070707'>Views and Layouts</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>HTML<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.2pt'>email</span></span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>basics,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark473"><span
style='color:#070707'>HTML<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Email</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>encapsulating email functionality, </span><a
href="#_bookmark495"><span style='color:#070707'>Encapsulating Email
Functionality</span></a><span style='color:#070707'> </span><span
style='color:#333333'>images in, </span><a href="#_bookmark489"><span
style='color:#070707'>Images in HTML Email</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending,<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark487"><span
style='color:#070707'>Sending<span style='letter-spacing:.95pt'> </span>HTML<span
style='letter-spacing:.9pt'> </span>Email</span></a><span style='color:#333333'>-</span><a
href="#_bookmark497"><span style='color:#070707'>Encapsulating<span
style='letter-spacing:.95pt'> </span>Email<span style='letter-spacing:.9pt'> </span><span
style='letter-spacing:-.1pt'>Functionality</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark494"><span style='color:#333333;text-decoration:none'>using
views to send,</span></a><span style='color:#333333'> </span><a
href="#_bookmark491"><span style='color:#070707'>Using Views to Send HTML Email</span></a><a
href="#_bookmark494"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Using</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Views to Send HTML Email</span></a></p>

<p class=MsoBodyText style='margin-top:10.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>HTML<span
style='letter-spacing:.65pt'> </span>forms,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark362"><span style='color:#070707'>HTML<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.2pt'>Forms</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>HTML5<span
style='letter-spacing:.8pt'> </span>Boilerplate,<span style='letter-spacing:
.8pt'> </span></span><a href="#_bookmark350"><span style='color:#070707'>Perfecting<span
style='letter-spacing:.85pt'> </span>Your<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Templates</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>HTML5, online documentation for, </span><a
href="#_bookmark999"><span style='color:#070707'>Online Documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.2pt'>HTTP</span></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection492>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>default port for, </span><a href="#_bookmark228"><span
style='color:#070707'>The Parts of a URL</span></a><span style='color:#333333'>,
</span><a href="#_bookmark784"><span style='color:#070707'>A Note on Ports</span></a><span
style='color:#070707'> </span><span style='color:#333333'>request methods, </span><a
href="#_bookmark234"><span style='color:#070707'>HTTP Request Methods</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>requests, </span><a href="#_bookmark731"><span
style='color:#070707'>Performance Considerations</span></a><span
style='color:#070707'> </span><span style='color:#333333'>verbs, </span><a
href="#_bookmark643"><span style='color:#070707'>Our API</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>HTTP<span
style='letter-spacing:.5pt'> </span>APIs,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark647"><span style='color:#070707'>API<span style='letter-spacing:
.5pt'> </span>Error<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Reporting</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>http.createServer method, </span><a href="#_bookmark88"><span
style='color:#070707'>Event-Driven Programming</span></a><span
style='color:#070707'> </span><span style='color:#333333'>http.ServerResponse
object, </span><a href="#_bookmark266"><span style='color:#070707'>The Response
Object</span></a><span style='color:#070707'> </span><span style='color:#333333'>HTTPS
(HTTP Secure), </span><a href="#_bookmark762"><span style='color:#070707'>HTTPS</span></a><span
style='color:#333333'>-</span><a href="#_bookmark791"><span style='color:#070707'>HTTPS
and Proxies</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;text-align:justify;line-height:
14.15pt'><span style='color:#333333'>default<span style='letter-spacing:.35pt'>
</span>port<span style='letter-spacing:.4pt'> </span>for,<span
style='letter-spacing:.45pt'> </span></span><a href="#_bookmark228"><span
style='color:#070707'>The<span style='letter-spacing:.4pt'> </span>Parts<span
style='letter-spacing:.4pt'> </span>of<span style='letter-spacing:.4pt'> </span>a<span
style='letter-spacing:.4pt'> </span>URL</span></a><span style='color:#333333'>,<span
style='letter-spacing:.45pt'> </span></span><a href="#_bookmark785"><span
style='color:#070707'>A<span style='letter-spacing:.4pt'> </span>Note<span
style='letter-spacing:.4pt'> </span>on<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Ports</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:92.7pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>enabling for Express app, </span><a
href="#_bookmark781"><span style='color:#070707'>Enabling HTTPS for Your
Express App</span></a><span style='color:#070707'> </span><span
style='color:#333333'>generating your own certificate, </span><a
href="#_bookmark765"><span style='color:#070707'>Generating Your Own
Certificate</span></a><span style='color:#070707'> </span><span
style='color:#333333'>ports for, </span><a href="#_bookmark784"><span
style='color:#070707'>A Note on Ports</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify'><br
clear=ALL>
<span style='color:#333333'>proxies<span style='letter-spacing:.55pt'> </span>and,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark787"><span
style='color:#070707;text-decoration:none'>HTTPS<span style='letter-spacing:
.55pt'> </span>and<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Proxies</span></span></a></p>

<p class=MsoBodyText style='margin-top:10.65pt;margin-right:85.6pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;text-indent:
28.8pt;line-height:182%'><span style='color:#333333'>using a free certificate
authority, </span><a href="#_bookmark771"><span style='color:#070707;
text-decoration:none'>Using a Free Certificate Authority</span></a><span
style='color:#070707'> </span><span style='color:#333333'>human-computer
interaction (HCI), </span><a href="#_bookmark173"><span style='color:#070707'>QA:
Is It Worth It?</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;text-align:justify;line-height:
14.8pt'><span style='color:#333333'>hygiene<span style='letter-spacing:.85pt'> </span>(development),<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark964"><span
style='color:#070707'>Exercise<span style='letter-spacing:.9pt'> </span>Good<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>Hygiene</span></span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: I"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>IaaS<span
style='letter-spacing:.5pt'> </span>(infrastructure<span style='letter-spacing:
.5pt'> </span>as<span style='letter-spacing:.5pt'> </span>a<span
style='letter-spacing:.5pt'> </span>service),<span style='letter-spacing:.6pt'>
</span></span><a href="#_bookmark926"><span style='color:#070707;letter-spacing:
-.2pt'>XaaS</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark911"><span
style='color:#333333;text-decoration:none'>ICANN<span style='letter-spacing:
.7pt'> </span>(Internet<span style='letter-spacing:.7pt'> </span>Corporation<span
style='letter-spacing:.75pt'> </span>for<span style='letter-spacing:.7pt'> </span>Assigned<span
style='letter-spacing:.8pt'> </span>Names<span style='letter-spacing:.7pt'> </span>and<span
style='letter-spacing:.75pt'> </span>Numbers),<span style='letter-spacing:.75pt'>
</span></span><span style='color:#070707;letter-spacing:-.2pt'>Top-</span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark911"><span
style='color:#070707'>Level<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Domains</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:222.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>images, in HTML email, </span><a href="#_bookmark489"><span
style='color:#070707'>Images in HTML Email</span></a><span style='color:#070707'>
</span><span style='color:#333333'>information architecture (IA), </span><a
href="#_bookmark605"><span style='color:#070707'>Routing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>infrastructure as a
service (IaaS), </span><a href="#_bookmark926"><span style='color:#070707'>XaaS</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection493>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>inspector clients, </span><a href="#_bookmark869"><span
style='color:#070707'>Node Inspector Clients</span></a><span style='color:#333333'>-</span><a
href="#_bookmark877"><span style='color:#070707'>Node Inspector Clients</span></a><span
style='color:#070707'> </span><span style='color:#333333'>install command, </span><a
href="#_bookmark78"><span style='color:#070707'>npm</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>installation</span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Jest, </span><a href="#_bookmark185"><span
style='color:#070707'>Installing and Configuring Jest</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Node, </span><a
href="#_bookmark54"><span style='color:#070707'>Getting Node</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>institutional<span
style='letter-spacing:.95pt'> </span>procrastination,<span style='letter-spacing:
1.0pt'> </span></span><a href="#_bookmark965"><span style='color:#070707'>Dont<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>Procrastinate</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>integration testing, </span><a href="#_bookmark182"><span
style='color:#070707'>Overview of QA Techniques</span></a><span
style='color:#333333'>, </span><a href="#_bookmark204"><span style='color:#070707'>Integration
Testing</span></a><span style='color:#333333'>- </span><a href="#_bookmark209"><span
style='color:#070707'>Integration Testing</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark911"><span
style='color:#333333;text-decoration:none'>Internet<span style='letter-spacing:
.7pt'> </span>Corporation<span style='letter-spacing:.75pt'> </span>for<span
style='letter-spacing:.7pt'> </span>Assigned<span style='letter-spacing:.75pt'>
</span>Names<span style='letter-spacing:.75pt'> </span>and<span
style='letter-spacing:.75pt'> </span>Numbers<span style='letter-spacing:.7pt'> </span>(ICANN),<span
style='letter-spacing:.75pt'> </span></span><span style='color:#070707;
letter-spacing:-.2pt'>Top-</span></a></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark911"><span
style='color:#070707'>Level<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Domains</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>internet media types, </span><a href="#_bookmark245"><span
style='color:#070707'>Internet Media Types</span></a><span style='color:#070707'>
</span><span style='color:#333333'>invisible failures, </span><a
href="#_bookmark981"><span style='color:#070707'>Prevent Invisible Failures</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>IP (internet protocol) address, </span><a
href="#_bookmark899"><span style='color:#070707'>Domain Registration and
Hosting</span></a><span style='color:#070707'> </span><span style='color:#333333'>issue
trackers, </span><a href="#_bookmark962"><span style='color:#070707'>Use an
Issue Tracker</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image094.gif"
  alt="Text Box: J"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>JavaScript</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>as<span
style='letter-spacing:.45pt'> </span>static<span style='letter-spacing:.45pt'> </span>content,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark727"><span
style='color:#070707'>Static<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Content</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark16"><span style='color:#333333;text-decoration:none'>evolution
of attitudes toward,</span></a><span style='color:#333333'> </span><a
href="#_bookmark11"><span style='color:#070707'>The JavaScript Revolution</span></a><a
href="#_bookmark16"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>The</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>JavaScript Revolution</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>floating-point numbers in, </span><a href="#_bookmark573"><span
style='color:#070707'>Creating Schemas and Models</span></a><span
style='color:#070707'> </span><span style='color:#333333'>HTML and, </span><a
href="#_bookmark313"><span style='color:#070707'>Templating with Handlebars</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Node apps and, </span><a href="#_bookmark35"><span
style='color:#070707'>Node: A New Kind of Web Server</span></a><span
style='color:#070707'> </span><span style='color:#333333'>online documentation,
</span><a href="#_bookmark998"><span style='color:#070707'>Online Documentation</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>JavaScript<span
style='letter-spacing:.65pt'> </span>Object<span style='letter-spacing:.65pt'> </span>Notation<span
style='letter-spacing:.7pt'> </span>(see<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>JSON)</span></span></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection494>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>JavaScript stack, </span><a href="#_bookmark42"><span
style='color:#070707'>The Node Ecosystem</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Jenkins, </span><a href="#_bookmark946"><span
style='color:#070707'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Jest, </span><a href="#_bookmark185"><span
style='color:#070707'>Installing and Configuring Jest</span></a><span
style='color:#070707'> </span><span style='color:#333333'>JSHint, </span><a
href="#_bookmark211"><span style='color:#070707'>Linting</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:390.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>JSLint, </span><a href="#_bookmark210"><span
style='color:#070707'>Linting</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.2pt'>JSON</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>origins,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark639"><span style='color:#070707'>JSON<span style='letter-spacing:
.55pt'> </span>and<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>XML</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>REST APIs and, </span><a href="#_bookmark635"><span
style='color:#070707'>REST APIs and JSON</span></a><span style='color:#333333'>-</span><a
href="#_bookmark663"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707'> </span><span style='color:#333333'>XML and, </span><a
href="#_bookmark640"><span style='color:#070707'>JSON and XML</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>JSON:API,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark645"><span
style='color:#070707'>Our<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>JSX,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark684"><span
style='color:#070707'>React<span style='letter-spacing:.45pt'> </span><span
style='letter-spacing:-.1pt'>Basics</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: K"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Karpov,<span
style='letter-spacing:.6pt'> </span>Valeri,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark40"><span style='color:#070707'>The<span style='letter-spacing:
.6pt'> </span>Node<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Ecosystem</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>key-value databases, </span><a href="#_bookmark557"><span
style='color:#070707'>Database Persistence</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Kovalyov, Anton, </span><a
href="#_bookmark211"><span style='color:#070707'>Linting</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image094.gif"
  alt="Text Box: L"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Last-Modified header, </span><a href="#_bookmark749"><span
style='color:#070707'>Caching Static Assets</span></a><span style='color:#070707'>
</span><span style='color:#333333'>launching a website (see going live)</span></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>layouts, </span><a href="#_bookmark122"><span
style='color:#070707'>Views and Layouts</span></a><span style='color:#333333'>-</span><a
href="#_bookmark124"><span style='color:#070707'>Views and Layouts</span></a><span
style='color:#070707'> </span><span style='color:#333333'>defined, </span><a
href="#_bookmark338"><span style='color:#070707'>Views and Layouts</span></a></p>

<p class=MsoBodyText style='margin-top:2.15pt;margin-right:274.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>sections versus, </span><a href="#_bookmark342"><span
style='color:#070707'>Sections</span></a><span style='color:#070707;letter-spacing:
4.0pt'> </span><span style='color:#333333'>templating and, </span><a
href="#_bookmark337"><span style='color:#070707'>Views and Layouts</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection495>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>lead tracking, </span><a href="#_bookmark978"><span
style='color:#070707'>Prioritize Lead Tracking</span></a><span
style='color:#333333'>-</span><a href="#_bookmark982"><span style='color:#070707'>Prioritize
Lead Tracking</span></a><span style='color:#070707'> </span><span
style='color:#333333'>learning resources, </span><a href="#_bookmark996"><span
style='color:#070707'>Additional Resources</span></a><span style='color:#333333'>-</span><a
href="#_bookmark1013"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><a
href="#_bookmark1011"><span style='color:#333333;text-decoration:none'>contributing<span
style='letter-spacing:.95pt'> </span>to<span style='letter-spacing:.95pt'> </span>Express,</span></a><span
style='color:#333333;letter-spacing:.95pt'> </span><a href="#_bookmark1009"><span
style='color:#070707'>Contributing<span style='letter-spacing:.95pt'> </span>to<span
style='letter-spacing:.95pt'> </span>Express</span></a><a href="#_bookmark1011"><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>Contributing<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.25pt'>to</span></span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark1011"><span
style='color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>online documentation, </span><a href="#_bookmark998"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>periodicals, </span><a href="#_bookmark1004"><span
style='color:#070707'>Periodicals</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>Stack Overflow (SO), </span><a
href="#_bookmark1005"><span style='color:#070707'>Stack Overflow</span></a><span
style='color:#333333'>-</span><a href="#_bookmark1008"><span style='color:#070707'>Stack
Overflow</span></a><span style='color:#070707'> </span><span style='color:#333333'>Let's
Encrypt, </span><a href="#_bookmark772"><span style='color:#070707'>Using a
Free Certificate Authority</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>lib/application.js<span style='letter-spacing:.75pt'> </span>(Express<span
style='letter-spacing:.75pt'> </span>source<span style='letter-spacing:.75pt'> </span>code),<span
style='letter-spacing:.8pt'> </span></span><a href="#_bookmark285"><span
style='color:#070707'>Getting<span style='letter-spacing:.85pt'> </span>More<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Information</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark883"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>lib/express.js<span
style='letter-spacing:.7pt'> </span>(Express<span style='letter-spacing:.7pt'> </span>source<span
style='letter-spacing:.7pt'> </span>code),<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark286"><span style='color:#070707'>Getting<span style='letter-spacing:
.8pt'> </span>More<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Information</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark882"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>lib/request.js<span
style='letter-spacing:.7pt'> </span>(Express<span style='letter-spacing:.7pt'> </span>source<span
style='letter-spacing:.7pt'> </span>code),<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark287"><span style='color:#070707'>Getting<span style='letter-spacing:
.75pt'> </span>More<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Information</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark886"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>lib/response.js<span
style='letter-spacing:.7pt'> </span>(Express<span style='letter-spacing:.75pt'>
</span>source<span style='letter-spacing:.7pt'> </span>code),<span
style='letter-spacing:.8pt'> </span></span><a href="#_bookmark288"><span
style='color:#070707'>Getting<span style='letter-spacing:.8pt'> </span>More<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Information</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark887"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>lib/router/route.js (Express source code), </span><a
href="#_bookmark289"><span style='color:#070707'>Getting More Information</span></a><span
style='color:#070707'> </span><span style='color:#333333'>licensing, </span><a
href="#_bookmark43"><span style='color:#070707'>Licensing</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>linting,<span
style='letter-spacing:1.35pt'> </span></span><a href="#_bookmark212"><span
style='color:#070707'>Linting</span></a><span style='color:#333333'>-</span><a
href="#_bookmark218"><span style='color:#070707;letter-spacing:-.1pt'>Linting</span></a></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>CRA<span
style='letter-spacing:.5pt'> </span>and,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark690"><span style='color:#070707'>The<span style='letter-spacing:
.55pt'> </span>Home<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.2pt'>Page</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>defined, </span><a href="#_bookmark183"><span
style='color:#070707'>Overview of QA Techniques</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Linux</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:12.6pt'><span
style='color:#333333'>Node<span style='letter-spacing:.6pt'> </span>installation<span
style='letter-spacing:.65pt'> </span>on,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark55"><span style='color:#070707'>Getting<span style='letter-spacing:
.65pt'> </span><span style='letter-spacing:-.2pt'>Node</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>port access, </span><a href="#_bookmark786"><span
style='color:#070707'>A Note on Ports</span></a><span style='color:#070707;
letter-spacing:4.0pt'> </span><span style='color:#333333'>shell options, </span><a
href="#_bookmark60"><span style='color:#070707'>Using the Terminal</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection496>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:247.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>load testing (stress testing), </span><a
href="#_bookmark538"><span style='color:#070707'>Stress Testing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>local storage,
sessions and, </span><a href="#_bookmark411"><span style='color:#070707'>Sessions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>localhost, </span><a
href="#_bookmark82"><span style='color:#070707'>A Simple Web Server with Node</span></a><span
style='color:#070707'> </span><span style='color:#333333'>LockIt, </span><a
href="#_bookmark815"><span style='color:#070707'>Passport</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>logger<span
style='letter-spacing:.85pt'> </span>middleware<span style='letter-spacing:
.85pt'> </span>source,<span style='letter-spacing:.95pt'> </span></span><a
href="#_bookmark890"><span style='color:#070707'>Debugging<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>logging, </span><a href="#_bookmark504"><span
style='color:#070707'>Environment-Specific Configuration</span></a><span
style='color:#333333'>, </span><a href="#_bookmark981"><span style='color:#070707'>Prevent
Invisible Failures</span></a><span style='color:#070707'> </span><span
style='color:#333333'>logic (business logic), presentation versus, </span><a
href="#_bookmark176"><span style='color:#070707'>Logic Versus Presentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>longevity plan, </span><a
href="#_bookmark955"><span style='color:#070707'>Have a Longevity Plan</span></a><span
style='color:#333333'>-</span><a href="#_bookmark960"><span style='color:#070707'>Have
a Longevity Plan</span></a><span style='color:#070707;letter-spacing:4.0pt'> </span><span
style='color:#333333'>lossless/lossy size reduction, </span><a
href="#_bookmark734"><span style='color:#070707'>Performance Considerations</span></a></p>

<p class=MsoBodyText style='margin-top:.05pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: M"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>macOS</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Node installation on, </span><a href="#_bookmark56"><span
style='color:#070707'>Getting Node</span></a><span style='color:#070707'> </span><span
style='color:#333333'>port access, </span><a href="#_bookmark786"><span
style='color:#070707'>A Note on Ports</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>shell<span
style='letter-spacing:.5pt'> </span>options,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark60"><span style='color:#070707'>Using<span style='letter-spacing:
.6pt'> </span>the<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>mail submission agent (MSA), </span><a
href="#_bookmark463"><span style='color:#070707'>SMTP, MSAs, and MTAs</span></a><span
style='color:#070707'> </span><span style='color:#333333'>mail transfer agent
(MTA), </span><a href="#_bookmark464"><span style='color:#070707'>SMTP, MSAs,
and MTAs</span></a><span style='color:#070707'> </span><span style='color:#333333'>maintenance,
</span><a href="#_bookmark953"><span style='color:#070707'>Maintenance</span></a><span
style='color:#333333'>-</span><a href="#_bookmark993"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.15pt'><a
href="#_bookmark990"><span style='color:#333333;text-decoration:none'>code<span
style='letter-spacing:.65pt'> </span>reuse<span style='letter-spacing:.7pt'> </span>and<span
style='letter-spacing:.8pt'> </span>refactoring,</span></a><span
style='color:#333333;letter-spacing:.75pt'> </span><a href="#_bookmark985"><span
style='color:#070707'>Code<span style='letter-spacing:.7pt'> </span>Reuse<span
style='letter-spacing:.7pt'> </span>and<span style='letter-spacing:.75pt'> </span>Refactoring</span></a><a
href="#_bookmark990"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707;letter-spacing:-.1pt'>Module</span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><a
href="#_bookmark990"><span style='color:#070707'>exposes an object that
contains middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>hygiene and, </span><a href="#_bookmark964"><span
style='color:#070707'>Exercise Good Hygiene</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>issue<span
style='letter-spacing:.4pt'> </span>tracker,<span style='letter-spacing:.5pt'> </span></span><a
href="#_bookmark962"><span style='color:#070707'>Use<span style='letter-spacing:
.45pt'> </span>an<span style='letter-spacing:.45pt'> </span>Issue<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Tracker</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>lead tracking, </span><a href="#_bookmark978"><span
style='color:#070707'>Prioritize Lead Tracking</span></a><span
style='color:#333333'>-</span><a href="#_bookmark982"><span style='color:#070707'>Prioritize
Lead Tracking</span></a><span style='color:#070707'> </span><span
style='color:#333333'>longevity plan and, </span><a href="#_bookmark955"><span
style='color:#070707'>Have a Longevity Plan</span></a><span style='color:#333333'>-</span><a
href="#_bookmark960"><span style='color:#070707'>Have a Longevity Plan</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection497>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:189.85pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>monitor<span style='letter-spacing:2.0pt'> </span>analytics,<span
style='letter-spacing:2.0pt'> </span></span><a href="#_bookmark973"><span
style='color:#070707'>Monitor<span style='letter-spacing:2.0pt'> </span>Analytics</span></a><span
style='color:#070707;letter-spacing:2.0pt'> </span><span style='color:#333333'>performance
optimization, </span><a href="#_bookmark974"><span style='color:#070707'>Optimize
Performance</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>prevention of invisible failures, </span><a
href="#_bookmark981"><span style='color:#070707'>Prevent Invisible Failures</span></a><span
style='color:#070707'> </span><span style='color:#333333'>principles of, </span><a
href="#_bookmark956"><span style='color:#070707'>Have a Longevity Plan</span></a><span
style='color:#333333'>-</span><a href="#_bookmark984"><span style='color:#070707'>Prevent
Invisible Failures</span></a><span style='color:#070707'> </span><span
style='color:#333333'>procrastination as threat to, </span><a
href="#_bookmark965"><span style='color:#070707'>Dont Procrastinate</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>QA checks, </span><a href="#_bookmark970"><span
style='color:#070707'>Do Routine QA Checks</span></a><span style='color:#070707'>
</span><span style='color:#333333'>source control, </span><a
href="#_bookmark961"><span style='color:#070707'>Use Source Control</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>maps, displaying, </span><a href="#_bookmark852"><span
style='color:#070707'>Displaying a Map</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Markdown, </span><a href="#_bookmark1006"><span
style='color:#070707'>Stack Overflow</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>master<span
style='letter-spacing:.5pt'> </span>pages<span style='letter-spacing:.5pt'> </span>(see<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>layouts)</span></span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>MDN (Mozilla Developer Network), </span><a
href="#_bookmark998"><span style='color:#070707'>Online Documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Meadowlark Travel
website (fictional example)</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>dynamic<span style='letter-spacing:.6pt'> </span>content<span
style='letter-spacing:.6pt'> </span>in<span style='letter-spacing:.65pt'> </span>views,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark129"><span
style='color:#070707'>Dynamic<span style='letter-spacing:.6pt'> </span>Content<span
style='letter-spacing:.6pt'> </span>in<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Views</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:84.75pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify;line-height:
115%'><a href="#_bookmark132"><span style='color:#333333;text-decoration:none'>Express
and,</span></a><span style='color:#333333'> </span><a href="#_bookmark108"><span
style='color:#070707'>The Meadowlark Travel Website</span></a><a
href="#_bookmark132"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Dynamic Content in</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Views</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:169.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>initial steps, </span><a href="#_bookmark109"><span
style='color:#070707'>Initial Steps</span></a><span style='color:#333333'>-</span><a
href="#_bookmark130"><span style='color:#070707'>Dynamic Content in Views</span></a><span
style='color:#070707'> </span><span style='color:#333333'>logic versus
presentation, </span><a href="#_bookmark176"><span style='color:#070707'>Logic
Versus Presentation</span></a><span style='color:#070707'> </span><span
style='color:#333333'>static files and views, </span><a href="#_bookmark126"><span
style='color:#070707'>Static Files and Views</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify'><span
style='color:#333333'>views<span style='letter-spacing:.6pt'> </span>and<span
style='letter-spacing:.7pt'> </span>layouts,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark118"><span style='color:#070707'>Views<span style='letter-spacing:
.65pt'> </span>and<span style='letter-spacing:.65pt'> </span>Layouts</span></a><span
style='color:#333333'>-</span><a href="#_bookmark125"><span style='color:#070707'>Views<span
style='letter-spacing:.65pt'> </span>and<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>MEAN (Mongo, Express, Angular, and Node) stack, </span><a
href="#_bookmark40"><span style='color:#070707'>The Node Ecosystem</span></a><span
style='color:#070707'> </span><span style='color:#333333'>metadata storage, </span><a
href="#_bookmark157"><span style='color:#070707'>Project Metadata</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>method-override middleware, </span><a href="#_bookmark451"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.1pt'>Microsoft</span></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection498>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>.NET, </span><a href="#_bookmark12"><span
style='color:#070707'>The JavaScript Revolution</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Azure, </span><a
href="#_bookmark929"><span style='color:#070707'>The behemoths</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>cloud platforms, </span><a href="#_bookmark929"><span
style='color:#070707'>The behemoths</span></a><span style='color:#070707'> </span><span
style='color:#333333'>PowerShell,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark63"><span style='color:#070707'>Using<span style='letter-spacing:
.7pt'> </span>the<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Microsoft Azure, </span><a href="#_bookmark553"><span
style='color:#070707'>Cloud Persistence</span></a><span style='color:#333333'>,
</span><a href="#_bookmark941"><span style='color:#070707'>Deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>middleware, </span><a
href="#_bookmark428"><span style='color:#070707'>Middleware</span></a><span
style='color:#333333'>-</span><a href="#_bookmark459"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>app.use<span style='letter-spacing:.6pt'> </span>method<span
style='letter-spacing:.65pt'> </span>and,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark115"><span style='color:#070707'>Initial<span style='letter-spacing:
.6pt'> </span><span style='letter-spacing:-.1pt'>Steps</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:105.15pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>common projects, </span><a href="#_bookmark439"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#333333'>-</span><a
href="#_bookmark455"><span style='color:#070707'>Common Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>for static files and
views, </span><a href="#_bookmark126"><span style='color:#070707'>Static Files
and Views</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>origin of term, </span><a href="#_bookmark30"><span
style='color:#070707'>A Brief History of Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>refactoring, </span><a
href="#_bookmark989"><span style='color:#070707'>Middleware</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>route handlers as, </span><a href="#_bookmark619"><span
style='color:#070707'>Route Handlers Are Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>route handlers versus,
</span><a href="#_bookmark432"><span style='color:#070707'>Middleware
Principles</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>third-party, </span><a href="#_bookmark457"><span
style='color:#070707'>Third-Party Middleware</span></a><span style='color:#070707'>
</span><span style='color:#333333'>minification (see bundlers)</span></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>MIT<span style='letter-spacing:.65pt'> </span>license,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark44"><span
style='color:#070707'>Licensing</span></a><span style='color:#333333'>,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark1010"><span
style='color:#070707'>Contributing<span style='letter-spacing:.75pt'> </span>to<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>mLab, </span><a href="#_bookmark565"><span
style='color:#070707'>Setting Up MongoDB</span></a><span style='color:#070707'>
</span><span style='color:#333333'>MobX, </span><a href="#_bookmark709"><span
style='color:#070707'>State Management</span></a><span style='color:#070707'> </span><span
style='color:#333333'>mocking, </span><a href="#_bookmark190"><span
style='color:#070707'>Mocking</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>models, </span><a href="#_bookmark572"><span
style='color:#070707'>Creating Schemas and Models</span></a><span
style='color:#070707'> </span><span style='color:#333333'>modularization (see
Node modules) <span style='letter-spacing:-.1pt'>modules</span></span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.15pt'><span
style='color:#333333'>declaring<span style='letter-spacing:.55pt'> </span>routes<span
style='letter-spacing:.45pt'> </span>in,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark627"><span style='color:#070707'>Declaring<span
style='letter-spacing:.55pt'> </span>Routes<span style='letter-spacing:.5pt'> </span>in<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Module</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection499>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>Node,<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark158"><span
style='color:#070707'>Node<span style='letter-spacing:.9pt'> </span>Modules</span></a><span
style='color:#333333'>-</span><a href="#_bookmark164"><span style='color:#070707'>Node<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>Modules</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark889"><span style='color:#333333;text-decoration:none'>modules/express-session/index.js
(middleware source code), </span><span style='color:#070707'>Debugging</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707;
letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>modules/morgan/index.js, </span><a href="#_bookmark890"><span
style='color:#070707'>Debugging Express</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.1pt'>MongoDB</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>setup,<span style='letter-spacing:.5pt'> </span></span><a
href="#_bookmark564"><span style='color:#070707'>Setting<span style='letter-spacing:
.55pt'> </span>Up<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>MongoDB</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>storing users in database, </span><a
href="#_bookmark806"><span style='color:#070707'>Storing Users in Your Database</span></a><span
style='color:#070707'> </span><span style='color:#333333'>MongoDB Atlas, </span><a
href="#_bookmark566"><span style='color:#070707'>Setting Up MongoDB</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333;letter-spacing:-.1pt'>Mongoose</span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>database connections with, </span><a href="#_bookmark570"><span
style='color:#070707'>Database Connections with Mongoose</span></a><span
style='color:#070707'> </span><span style='color:#333333'>setup, </span><a
href="#_bookmark568"><span style='color:#070707'>Mongoose</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark505"><span style='color:#333333;text-decoration:none'>morgan
middleware,</span></a><span style='color:#333333'> </span><a
href="#_bookmark450"><span style='color:#070707'>Common Middleware</span></a><a
href="#_bookmark505"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Environment-Specific</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Configuration</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Mozilla Developer Network (MDN), </span><a
href="#_bookmark998"><span style='color:#070707'>Online Documentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>MSA (mail submission
agent), </span><a href="#_bookmark463"><span style='color:#070707'>SMTP, MSAs,
and MTAs</span></a><span style='color:#070707'> </span><span style='color:#333333'>MTA
(mail transfer agent), </span><a href="#_bookmark464"><span style='color:#070707'>SMTP,
MSAs, and MTAs</span></a><span style='color:#070707'> </span><span
style='color:#333333'>multimedia, as static content, </span><a
href="#_bookmark723"><span style='color:#070707'>Static Content</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>multipart form handling, </span><a href="#_bookmark382"><span
style='color:#070707'>File Uploads</span></a><span style='color:#333333'>-</span><a
href="#_bookmark390"><span style='color:#070707'>Improving File Upload UI</span></a><span
style='color:#070707;letter-spacing:2.0pt'> </span><span style='color:#333333'>multiparty
middleware, </span><a href="#_bookmark383"><span style='color:#070707'>File
Uploads</span></a><span style='color:#333333'>-</span><a href="#_bookmark385"><span
style='color:#070707'>File Uploads</span></a><span style='color:#333333'>, </span><a
href="#_bookmark442"><span style='color:#070707'>Common Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>multisubdomain certificates,
</span><a href="#_bookmark775"><span style='color:#070707'>Purchasing a
Certificate</span></a></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: N"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Name.com, </span><a href="#_bookmark905"><span
style='color:#070707'>Security</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Namecheap.com, </span><a href="#_bookmark905"><span
style='color:#070707'>Security</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection500>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>nameservers,<span
style='letter-spacing:1.1pt'> </span></span><a href="#_bookmark915"><span
style='color:#070707;letter-spacing:-.1pt'>Nameservers</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>National Weather Service (NWS) API, </span><a
href="#_bookmark855"><span style='color:#070707'>Weather Data</span></a><span
style='color:#333333'>-</span><a href="#_bookmark856"><span style='color:#070707'>Weather
Data</span></a><span style='color:#070707'> </span><span style='color:#333333'>next()
function, </span><a href="#_bookmark437"><span style='color:#070707'>Middleware
Principles</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>NGINX, </span><a href="#_bookmark528"><span
style='color:#070707'>Scaling Out with Multiple Servers</span></a><span
style='color:#333333'>, </span><a href="#_bookmark789"><span style='color:#070707'>HTTPS
and Proxies</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.2pt'>Node</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>as<span style='letter-spacing:.45pt'> </span>single<span
style='letter-spacing:.45pt'> </span>threaded,<span style='letter-spacing:.55pt'>
</span></span><a href="#_bookmark33"><span style='color:#070707'>Node:<span
style='letter-spacing:.45pt'> </span>A<span style='letter-spacing:.45pt'> </span>New<span
style='letter-spacing:.5pt'> </span>Kind<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.5pt'> </span>Web<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark37"><span style='color:#333333;text-decoration:none'>basics,</span></a><span
style='color:#333333'> </span><a href="#_bookmark32"><span style='color:#070707'>Node:
A New Kind of Web Server</span></a><a href="#_bookmark37"><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>Node:
A New Kind of</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Web Server</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>debugger, </span><a href="#_bookmark867"><span
style='color:#070707'>Using Nodes Built-in Debugger</span></a><span
style='color:#070707'> </span><span style='color:#333333'>ecosystem, </span><a
href="#_bookmark39"><span style='color:#070707'>The Node Ecosystem</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>editors<span
style='letter-spacing:.5pt'> </span>with,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark72"><span style='color:#070707;letter-spacing:-.1pt'>Editors</span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark87"><span style='color:#333333;text-decoration:none'>event-driven
programming as core philosophy, </span><span style='color:#070707'>Event-Driven</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707;
letter-spacing:-.1pt'>Programming</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>exposing<span
style='letter-spacing:1.0pt'> </span>middleware,<span style='letter-spacing:
1.05pt'> </span></span><a href="#_bookmark989"><span style='color:#070707;
letter-spacing:-.1pt'>Middleware</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>getting started with, </span><a href="#_bookmark52"><span
style='color:#070707'>Getting Started with Node</span></a><span
style='color:#333333'>-</span><a href="#_bookmark98"><span style='color:#070707'>Onward
to Express</span></a><span style='color:#070707'> </span><span
style='color:#333333'>inspector clients, </span><a href="#_bookmark869"><span
style='color:#070707'>Node Inspector Clients</span></a><span style='color:#333333'>-</span><a
href="#_bookmark877"><span style='color:#070707'>Node Inspector Clients</span></a><span
style='color:#070707'> </span><span style='color:#333333'>installation, </span><a
href="#_bookmark54"><span style='color:#070707'>Getting Node</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>licensing when developing applications for, </span><a
href="#_bookmark43"><span style='color:#070707'>Licensing</span></a><span
style='color:#070707'> </span><span style='color:#333333'>npm and, </span><a
href="#_bookmark77"><span style='color:#070707'>npm</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>online documentation, </span><a href="#_bookmark1002"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>origins, </span><a href="#_bookmark13"><span
style='color:#070707'>The JavaScript Revolution</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>platform<span
style='letter-spacing:.55pt'> </span>independence<span style='letter-spacing:
.55pt'> </span>of,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark36"><span style='color:#070707'>Node:<span style='letter-spacing:
.6pt'> </span>A<span style='letter-spacing:.55pt'> </span>New<span
style='letter-spacing:.55pt'> </span>Kind<span style='letter-spacing:.65pt'> </span>of<span
style='letter-spacing:.55pt'> </span>Web<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark95"><span style='color:#333333;text-decoration:none'>simple web
server project,</span></a><span style='color:#333333'> </span><a
href="#_bookmark81"><span style='color:#070707'>A Simple Web Server with Node</span></a><a
href="#_bookmark95"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Serving</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Static Resources</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:115%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection501>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>terminal for, </span><a href="#_bookmark58"><span
style='color:#070707'>Using the Terminal</span></a><span style='color:#070707'>
</span><span style='color:#333333'>node modules, </span><a href="#_bookmark151"><span
style='color:#070707'>npm Packages</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>Node<span style='letter-spacing:.9pt'> </span>modules,<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark158"><span
style='color:#070707'>Node<span style='letter-spacing:.9pt'> </span>Modules</span></a><span
style='color:#333333'>-</span><a href="#_bookmark164"><span style='color:#070707'>Node<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>Modules</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>node-fetch<span
style='letter-spacing:.75pt'> </span>package,<span style='letter-spacing:.8pt'>
</span></span><a href="#_bookmark657"><span style='color:#070707'>Our<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Tests</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark488"><span style='color:#333333;text-decoration:none'>Nodemailer,</span></a><span
style='color:#333333'> </span><a href="#_bookmark476"><span style='color:#070707'>Nodemailer</span></a><a
href="#_bookmark488"><span style='color:#333333;text-decoration:none'>-</span></a><a
href="#_bookmark482"><span style='color:#070707'>Sending Mail to Multiple
Recipients</span></a><a href="#_bookmark488"><span style='color:#333333;
text-decoration:none'>, </span><span style='color:#070707'>Sending</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>HTML
Email</span></a></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark481"><span style='color:#333333;text-decoration:none'>sending
mail to multiple recipients, </span><span style='color:#070707'>Sending Mail to
Multiple</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Recipients</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.6pt'> </span>mail<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.65pt'> </span>single<span style='letter-spacing:.55pt'> </span>recipient,<span
style='letter-spacing:.65pt'> </span></span><a href="#_bookmark479"><span
style='color:#070707'>Sending<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.2pt'>Mail</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>node_modules/body-parser/lib/types/urlencoded.js,<span
style='letter-spacing:2.85pt'> </span></span><a href="#_bookmark891"><span
style='color:#070707'>Debugging<span style='letter-spacing:2.85pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark888"><span style='color:#333333;text-decoration:none'>node_modules/serve-static/index.js
(Express source code), </span><span style='color:#070707'>Debugging</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707;
letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>NoSQL databases, </span><a href="#_bookmark556"><span
style='color:#070707'>Database Persistence</span></a><span style='color:#070707'>
</span><span style='color:#333333'>npm (package manager), </span><a
href="#_bookmark77"><span style='color:#070707'>npm</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>online<span style='letter-spacing:.85pt'> </span>documentation,<span
style='letter-spacing:1.0pt'> </span></span><a href="#_bookmark1002"><span
style='color:#070707'>Online<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>Documentation</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>package.json file and, </span><a href="#_bookmark111"><span
style='color:#070707'>Initial Steps</span></a><span style='color:#070707'> </span><span
style='color:#333333'>packages for, </span><a href="#_bookmark151"><span
style='color:#070707'>npm Packages</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>private<span
style='letter-spacing:.6pt'> </span>registries,<span style='letter-spacing:
.7pt'> </span></span><a href="#_bookmark988"><span style='color:#070707'>Private<span
style='letter-spacing:.6pt'> </span>npm<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Registry</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>NWS<span
style='letter-spacing:.6pt'> </span>(National<span style='letter-spacing:.75pt'>
</span>Weather<span style='letter-spacing:.75pt'> </span>Service)<span
style='letter-spacing:.75pt'> </span>API,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark855"><span style='color:#070707'>Weather<span style='letter-spacing:
.75pt'> </span>Data</span></a><span style='color:#333333'>-</span><a
href="#_bookmark856"><span style='color:#070707'>Weather<span style='letter-spacing:
.75pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image094.gif"
  alt="Text Box: O"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>object<span
style='letter-spacing:.7pt'> </span>databases,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark590"><span style='color:#070707;letter-spacing:
-.1pt'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:231.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>object document mapper (ODM), </span><a
href="#_bookmark568"><span style='color:#070707'>Mongoose</span></a><span
style='color:#070707'> </span><span style='color:#333333'>object-relational
mapping (ORM), </span><a href="#_bookmark588"><span style='color:#070707'>PostgreSQL</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection502>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>online documentation, </span><a href="#_bookmark998"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>OpenSSL, </span><a href="#_bookmark766"><span
style='color:#070707'>Generating Your Own Certificate</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>optimization (see performance optimization) (see search
engine <span style='letter-spacing:-.1pt'>optimization)</span></span></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:222.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Oracle VirtualBox, </span><a href="#_bookmark65"><span
style='color:#070707'>Using the Terminal</span></a><span style='color:#070707'>
</span><span style='color:#333333'>organization certificates, </span><a
href="#_bookmark777"><span style='color:#070707'>Purchasing a Certificate</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: P"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:303.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>PaaS (platform as a service), </span><a
href="#_bookmark925"><span style='color:#070707'>XaaS</span></a><span
style='color:#070707'> </span><span style='color:#333333'>package managers (see
npm) package-lock.json, </span><a href="#_bookmark154"><span style='color:#070707'>npm
Packages</span></a><span style='color:#070707'> </span><span style='color:#333333'>package.json
file, </span><a href="#_bookmark111"><span style='color:#070707'>Initial Steps</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.2pt'><span
style='color:#333333'>dependencies<span style='letter-spacing:.6pt'> </span>listed<span
style='letter-spacing:.7pt'> </span>in,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark152"><span style='color:#070707'>npm<span style='letter-spacing:
.65pt'> </span><span style='letter-spacing:-.1pt'>Packages</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>project metadata storage, </span><a href="#_bookmark157"><span
style='color:#070707'>Project Metadata</span></a><span style='color:#070707'> </span><span
style='color:#333333'>scripts in, </span><a href="#_bookmark188"><span
style='color:#070707'>Installing and Configuring Jest</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:247.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>PageSpeed Insights, </span><a href="#_bookmark977"><span
style='color:#070707'>Optimize Performance</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Parcel, </span><a href="#_bookmark756"><span
style='color:#070707'>Changing Your Static Content</span></a><span
style='color:#070707'> </span><span style='color:#333333'>partials, </span><a
href="#_bookmark344"><span style='color:#070707'>Partials</span></a><span
style='color:#333333'>-</span><a href="#_bookmark349"><span style='color:#070707'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>Passport</span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>authentication with, </span><a href="#_bookmark811"><span
style='color:#070707'>Passport</span></a><span style='color:#333333'>-</span><a
href="#_bookmark818"><span style='color:#070707'>Setting up Passport</span></a><span
style='color:#070707'> </span><span style='color:#333333'>setup, </span><a
href="#_bookmark816"><span style='color:#070707'>Setting up Passport</span></a><span
style='color:#333333'>-</span><a href="#_bookmark819"><span style='color:#070707'>Setting
up Passport</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>passwords, </span><a href="#_bookmark800"><span
style='color:#070707'>The Problem with Passwords</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>path(s)</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>in<span style='letter-spacing:.35pt'> </span>URL,<span
style='letter-spacing:.4pt'> </span></span><a href="#_bookmark231"><span
style='color:#070707'>The<span style='letter-spacing:.35pt'> </span>Parts<span
style='letter-spacing:.35pt'> </span>of<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.25pt'>URL</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection503>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><br clear=ALL>
<span style='color:#333333'>route<span style='letter-spacing:.7pt'> </span>handlers<span
style='letter-spacing:.7pt'> </span>and,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark433"><span style='color:#070707;text-decoration:none'>Middleware<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Principles</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark769"><span style='color:#333333;text-decoration:none'>PEM
(Privacy-Enhanced Electronic Mail) file, </span><span style='color:#070707;
text-decoration:none'>Generating Your Own </span><span style='color:#070707;
letter-spacing:-.1pt'>Certificate</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>performance<span
style='letter-spacing:1.1pt'> </span><span style='letter-spacing:-.1pt'>optimization</span></span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>maintenance and, </span><a href="#_bookmark974"><span
style='color:#070707'>Optimize Performance</span></a><span style='color:#070707'>
</span><span style='color:#333333'>NoSQL databases, </span><a
href="#_bookmark560"><span style='color:#070707'>A Note on Performance</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>periodicals,<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark1004"><span
style='color:#070707;letter-spacing:-.1pt'>Periodicals</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>persistence, </span><a href="#_bookmark543"><span
style='color:#070707'>Persistence</span></a><span style='color:#333333'>-</span><a
href="#_bookmark602"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707'> </span><span style='color:#333333'>cloud storage, </span><a
href="#_bookmark550"><span style='color:#070707'>Cloud Persistence</span></a></p>

<p class=MsoBodyText style='margin-top:2.15pt;margin-right:141.6pt;margin-bottom:
0cm;margin-left:112.6pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>database persistence, </span><a
href="#_bookmark554"><span style='color:#070707'>Database Persistence</span></a><span
style='color:#333333'>-</span><a href="#_bookmark597"><span style='color:#070707'>Adding
Data</span></a><span style='color:#070707'> </span><span style='color:#333333'>(see
also database)</span></p>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>filesystem, </span><a href="#_bookmark544"><span
style='color:#070707'>Filesystem Persistence</span></a><span style='color:#333333'>-</span><a
href="#_bookmark549"><span style='color:#070707'>Filesystem Persistence</span></a><span
style='color:#070707'> </span><span style='color:#333333'>scaling out and, </span><a
href="#_bookmark514"><span style='color:#070707'>Scaling Your Website</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Pilgrim, Mark, </span><a href="#_bookmark999"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>pipeline, </span><a href="#_bookmark429"><span
style='color:#070707'>Middleware</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>platform<span
style='letter-spacing:.45pt'> </span>as<span style='letter-spacing:.45pt'> </span>a<span
style='letter-spacing:.45pt'> </span>service<span style='letter-spacing:.5pt'> </span>(PaaS),<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark925"><span
style='color:#070707;letter-spacing:-.2pt'>XaaS</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>platform independence, </span><a href="#_bookmark36"><span
style='color:#070707'>Node: A New Kind of Web Server</span></a><span
style='color:#070707'> </span><span style='color:#333333'>PM2, </span><a
href="#_bookmark510"><span style='color:#070707'>Running Your Node Process</span></a></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:317.45pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Polymer, </span><a href="#_bookmark677"><span
style='color:#070707'>SPA Technologies</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.1pt'>ports</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.25pt'><span
style='color:#333333'>HTTP,<span style='letter-spacing:.4pt'> </span></span><a
href="#_bookmark229"><span style='color:#070707'>The<span style='letter-spacing:
.4pt'> </span>Parts<span style='letter-spacing:.4pt'> </span>of<span
style='letter-spacing:.35pt'> </span>a<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.25pt'>URL</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>HTTPS,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark784"><span
style='color:#070707'>A<span style='letter-spacing:.45pt'> </span>Note<span
style='letter-spacing:.4pt'> </span>on<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.2pt'>Ports</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>POST<span
style='letter-spacing:.65pt'> </span>request,<span style='letter-spacing:.7pt'>
</span></span><a href="#_bookmark238"><span style='color:#070707'>HTTP<span
style='letter-spacing:.65pt'> </span>Request<span style='letter-spacing:.65pt'>
</span><span style='letter-spacing:-.1pt'>Methods</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection504>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>bodies,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark248"><span
style='color:#070707'>Request<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.2pt'>Body</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>request body and, </span><a
href="#_bookmark360"><span style='color:#070707'>Sending Client Data to the
Server</span></a><span style='color:#070707'> </span><span style='color:#333333'>PostgreSQL,
</span><a href="#_bookmark587"><span style='color:#070707'>PostgreSQL</span></a><span
style='color:#333333'>-</span><a href="#_bookmark594"><span style='color:#070707'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>PowerShell,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark63"><span style='color:#070707'>Using<span style='letter-spacing:
.7pt'> </span>the<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>presentation,<span
style='letter-spacing:.75pt'> </span>logic<span style='letter-spacing:.7pt'> </span>versus,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark176"><span
style='color:#070707'>Logic<span style='letter-spacing:.7pt'> </span>Versus<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Presentation</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark769"><span style='color:#333333;text-decoration:none'>Privacy-enhanced
Electronic Mail (PEM) file, </span><span style='color:#070707'>Generating Your
Own</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Certificate</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>process<span
style='letter-spacing:.7pt'> </span>managers,<span style='letter-spacing:.8pt'>
</span></span><a href="#_bookmark508"><span style='color:#070707'>Running<span
style='letter-spacing:.8pt'> </span>Your<span style='letter-spacing:.75pt'> </span>Node<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Process</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:173.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>process of elimination, </span><a href="#_bookmark862"><span
style='color:#070707'>The First Principle of Debugging</span></a><span
style='color:#070707'> </span><span style='color:#333333'>process.nextTick, </span><a
href="#_bookmark522"><span style='color:#070707'>Handling Uncaught Exceptions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>processing forms, </span><a
href="#_bookmark296"><span style='color:#070707'>Processing Forms</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>procrastination, </span><a href="#_bookmark957"><span
style='color:#070707'>Have a Longevity Plan</span></a><span style='color:#333333'>,
</span><a href="#_bookmark965"><span style='color:#070707'>Dont Procrastinate</span></a><span
style='color:#070707'> </span><span style='color:#333333'>production concerns, </span><a
href="#_bookmark500"><span style='color:#070707'>Production Concerns</span></a><span
style='color:#333333'>-</span><a href="#_bookmark541"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><a
href="#_bookmark503"><span style='color:#333333;text-decoration:none'>environment-specific<span
style='letter-spacing:2.05pt'> </span>configuration,<span style='letter-spacing:
2.2pt'> </span></span><span style='color:#070707'>Environment-<span
style='letter-spacing:-.1pt'>Specific</span></span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:141.6pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><a
href="#_bookmark503"><span style='color:#070707'>Configuration</span><span
style='color:#333333;text-decoration:none'>-</span></a><a href="#_bookmark507"><span
style='color:#070707'>E</span></a><a href="#_bookmark503"><span
style='color:#070707'>nvironment-Specific Configuration</span></a><span
style='color:#070707'> </span><span style='color:#333333'>execution
environments, </span><a href="#_bookmark501"><span style='color:#070707'>Execution
Environments</span></a><span style='color:#070707'> </span><span
style='color:#333333'>monitoring your website, </span><a href="#_bookmark532"><span
style='color:#070707'>Monitoring Your Website</span></a><span style='color:
#070707'> </span><span style='color:#333333'>running your Node process, </span><a
href="#_bookmark509"><span style='color:#070707'>Running Your Node Process</span></a></p>

<p class=MsoBodyText style='margin-top:.25pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark529"><span style='color:#333333;text-decoration:none'>scaling
your website,</span></a><span style='color:#333333'> </span><a
href="#_bookmark512"><span style='color:#070707'>Scaling Your Website</span></a><a
href="#_bookmark529"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Scaling Out with</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>Multiple Servers</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>stress testing, </span><a href="#_bookmark538"><span
style='color:#070707'>Stress Testing</span></a><span style='color:#070707'> </span><span
style='color:#333333'>protocol, in URL, </span><a href="#_bookmark225"><span
style='color:#070707'>The Parts of a URL</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>proxies,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark527"><span style='color:#070707'>Scaling<span style='letter-spacing:
.65pt'> </span>Out<span style='letter-spacing:.6pt'> </span>with<span
style='letter-spacing:.65pt'> </span>Multiple<span style='letter-spacing:.6pt'>
</span>Servers</span></a><span style='color:#333333'>,<span style='letter-spacing:
.65pt'> </span></span><a href="#_bookmark787"><span style='color:#070707'>HTTPS<span
style='letter-spacing:.55pt'> </span>and<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Proxies</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>public<span
style='letter-spacing:.55pt'> </span>key<span style='letter-spacing:.65pt'> </span>certificate,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark764"><span
style='color:#070707;letter-spacing:-.1pt'>HTTPS</span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection505>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Pug, </span><a href="#_bookmark119"><span
style='color:#070707'>Views and Layouts</span></a><span style='color:#333333'>,
</span><a href="#_bookmark319"><span style='color:#070707'>Pug: A Different
Approach</span></a><span style='color:#070707'> </span><span style='color:#333333'>Puppeteer,
</span><a href="#_bookmark205"><span style='color:#070707'>Integration Testing</span></a><span
style='color:#333333'>-</span><a href="#_bookmark208"><span style='color:#070707'>Integration
Testing</span></a></p>

<p class=MsoBodyText style='margin-top:.5pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: Q"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>quality assurance (QA), </span><a
href="#_bookmark166"><span style='color:#070707'>Quality Assurance</span></a><span
style='color:#333333'>-</span><a href="#_bookmark220"><span style='color:#070707'>Continuous
Integration</span></a><span style='color:#070707'> </span><span
style='color:#333333'>continuous integration, </span><a href="#_bookmark217"><span
style='color:#070707'>Continuous Integration</span></a></p>

<p class=MsoBodyText style='margin-top:2.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>creating<span
style='letter-spacing:.45pt'> </span>a<span style='letter-spacing:.4pt'> </span>plan<span
style='letter-spacing:.45pt'> </span>for,<span style='letter-spacing:.45pt'> </span></span><a
href="#_bookmark168"><span style='color:#070707'>The<span style='letter-spacing:
.4pt'> </span>QA<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.2pt'>Plan</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:124.35pt;
margin-bottom:0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>integration<span style='letter-spacing:2.0pt'> </span>testing,<span
style='letter-spacing:2.0pt'> </span></span><a href="#_bookmark204"><span
style='color:#070707'>Integration<span style='letter-spacing:2.0pt'> </span>Testing</span></a><span
style='color:#333333'>-</span><a href="#_bookmark209"><span style='color:#070707'>Integration<span
style='letter-spacing:2.0pt'> </span>Testing</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Jest installation/configuration, </span><a
href="#_bookmark185"><span style='color:#070707'>Installing and Configuring
Jest</span></a><span style='color:#070707'> </span><span style='color:#333333'>linting,
</span><a href="#_bookmark212"><span style='color:#070707'>Linting</span></a><span
style='color:#333333'>-</span><a href="#_bookmark218"><span style='color:#070707'>Linting</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>logic versus presentation, </span><a href="#_bookmark176"><span
style='color:#070707'>Logic Versus Presentation</span></a><span
style='color:#070707'> </span><span style='color:#333333'>maintenance and, </span><a
href="#_bookmark970"><span style='color:#070707'>Do Routine QA Checks</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>overview of techniques, </span><a href="#_bookmark180"><span
style='color:#070707'>Overview of QA Techniques</span></a><span
style='color:#070707'> </span><span style='color:#333333'>test types, </span><a
href="#_bookmark178"><span style='color:#070707'>The Types of Tests</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>value of, </span><a href="#_bookmark170"><span
style='color:#070707'>QA: Is It Worth It?</span></a><span style='color:#070707'>
</span><span style='color:#333333;letter-spacing:-.1pt'>querystring</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:12.6pt'><span
style='color:#333333'>in<span style='letter-spacing:.35pt'> </span>URL,<span
style='letter-spacing:.4pt'> </span></span><a href="#_bookmark232"><span
style='color:#070707'>The<span style='letter-spacing:.35pt'> </span>Parts<span
style='letter-spacing:.35pt'> </span>of<span style='letter-spacing:.35pt'> </span>a<span
style='letter-spacing:.35pt'> </span><span style='letter-spacing:-.25pt'>URL</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.5pt'> </span>client<span style='letter-spacing:.45pt'> </span>data<span
style='letter-spacing:.5pt'> </span>to<span style='letter-spacing:.5pt'> </span>server<span
style='letter-spacing:.45pt'> </span>with,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark358"><span style='color:#070707'>Sending<span style='letter-spacing:
.5pt'> </span>Client<span style='letter-spacing:.5pt'> </span>Data<span
style='letter-spacing:.45pt'> </span>to<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: R"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>RDBMS<span
style='letter-spacing:.8pt'> </span>(relational<span style='letter-spacing:
.85pt'> </span>database<span style='letter-spacing:.85pt'> </span>management<span
style='letter-spacing:.85pt'> </span>system),<span style='letter-spacing:.9pt'>
</span></span><a href="#_bookmark555"><span style='color:#070707'>Database<span
style='letter-spacing:.85pt'> </span><span style='letter-spacing:-.1pt'>Persistence</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark590"><span
style='color:#070707;letter-spacing:-.1pt'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>reach<span
style='letter-spacing:.45pt'> </span>(QA<span style='letter-spacing:.45pt'> </span>element),<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark171"><span
style='color:#070707'>QA:<span style='letter-spacing:.45pt'> </span>Is<span
style='letter-spacing:.4pt'> </span>It<span style='letter-spacing:.45pt'> </span>Worth<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>It?</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>React</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>about,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark673"><span
style='color:#070707'>SPA<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Technologies</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection506>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>basics, </span><a href="#_bookmark682"><span
style='color:#070707'>React Basics</span></a><span style='color:#333333'>-</span><a
href="#_bookmark717"><span style='color:#070707'>Deployment Options</span></a><span
style='color:#070707'> </span><span style='color:#333333'>creating app with, </span><a
href="#_bookmark678"><span style='color:#070707'>Creating a React App</span></a><span
style='color:#070707'> </span><span style='color:#333333'>homepage, </span><a
href="#_bookmark687"><span style='color:#070707'>The Home Page</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>routing,<span
style='letter-spacing:1.6pt'> </span></span><a href="#_bookmark691"><span
style='color:#070707'>Routing</span></a><span style='color:#333333'>-</span><a
href="#_bookmark696"><span style='color:#070707;letter-spacing:-.1pt'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.6pt'> </span>information<span style='letter-spacing:
.65pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span>server,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark702"><span style='color:#070707'>Sending<span style='letter-spacing:
.65pt'> </span>Information<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.65pt'> </span>the<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a><span style='color:#333333;
letter-spacing:-.1pt'>-</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark706"><span
style='color:#070707'>Sending<span style='letter-spacing:.65pt'> </span>Information<span
style='letter-spacing:.65pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:115.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark699"><span style='color:#333333;text-decoration:none'>server
integration for vacations page, </span><span style='color:#070707'>Vacations
PageServer</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Integration</span><span style='color:#333333;text-decoration:
none'>-</span></a><a href="#_bookmark703"><span style='color:#070707'>V</span></a><a
href="#_bookmark699"><span style='color:#070707'>acations PageServer
Integration</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SPA deployment options, </span><a href="#_bookmark713"><span
style='color:#070707'>Deployment Options</span></a><span style='color:#070707'>
</span><span style='color:#333333'>state management, </span><a
href="#_bookmark707"><span style='color:#070707'>State Management</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark695"><span style='color:#333333;text-decoration:none'>visual
design for vacations page example, </span><span style='color:#070707'>Vacations
PageVisual</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Design</span></a></p>

<p class=MsoBodyText style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>React<span
style='letter-spacing:.55pt'> </span>Context,<span style='letter-spacing:.6pt'>
</span></span><a href="#_bookmark712"><span style='color:#070707'>State<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Management</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark701"><span style='color:#333333;text-decoration:none'>React
hooks,</span></a><span style='color:#333333'> </span><a href="#_bookmark697"><span
style='color:#070707'>Vacations PageVisual Design</span></a><a
href="#_bookmark701"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Vacations PageServer</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Integration</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>React<span
style='letter-spacing:.85pt'> </span>Router<span style='letter-spacing:.85pt'> </span>library,<span
style='letter-spacing:.9pt'> </span></span><a href="#_bookmark692"><span
style='color:#070707'>Routing</span></a><span style='color:#333333'>-</span><a
href="#_bookmark694"><span style='color:#070707;letter-spacing:-.1pt'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>read-eval-print loop (REPL), </span><a
href="#_bookmark864"><span style='color:#070707'>Take Advantage of REPL and the
Console</span></a><span style='color:#070707'> </span><span style='color:#333333'>recoverable
errors, </span><a href="#_bookmark649"><span style='color:#070707'>API Error
Reporting</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Redirect<span
style='letter-spacing:.5pt'> </span>Path,<span style='letter-spacing:.6pt'> </span></span><a
href="#_bookmark113"><span style='color:#070707'>Initial<span style='letter-spacing:
.5pt'> </span><span style='letter-spacing:-.1pt'>Steps</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Redis, </span><a href="#_bookmark599"><span
style='color:#070707'>Using a Database for Session Storage</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Redux, </span><a
href="#_bookmark708"><span style='color:#070707'>State Management</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>refactoring, </span><a href="#_bookmark989"><span
style='color:#070707'>Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333;letter-spacing:-.1pt'>registration</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><a
href="#_bookmark807"><span style='color:#333333;text-decoration:none'>authentication<span
style='letter-spacing:.9pt'> </span>versus,<span style='letter-spacing:.9pt'> </span></span><span
style='color:#070707'>Authentication<span style='letter-spacing:.9pt'> </span>Versus<span
style='letter-spacing:.85pt'> </span>Registration<span style='letter-spacing:
.9pt'> </span>and<span style='letter-spacing:.9pt'> </span><span
style='letter-spacing:-.25pt'>the</span></span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark807"><span
style='color:#070707'>User<span style='letter-spacing:.4pt'> </span><span
style='letter-spacing:-.1pt'>Experience</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection507>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark808"><span style='color:#333333;text-decoration:none'>user
experience and, </span><span style='color:#070707'>Authentication Versus
Registration and the User</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Experience</span></a></p>

<p class=MsoBodyText style='margin-top:10.9pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>regular<span
style='letter-spacing:.65pt'> </span>expressions<span style='letter-spacing:
.65pt'> </span>(regex),<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark621"><span style='color:#070707'>Route<span style='letter-spacing:
.7pt'> </span>Paths<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.7pt'> </span>Regular<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>Expressions</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>relational database management system (RDBMS), </span><a
href="#_bookmark555"><span style='color:#070707'>Database Persistence</span></a><span
style='color:#333333'>, </span><a href="#_bookmark590"><span style='color:#070707;
letter-spacing:-.1pt'>PostgreSQL</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>REPL (read-eval-print loop), </span><a
href="#_bookmark864"><span style='color:#070707'>Take Advantage of REPL and the
Console</span></a><span style='color:#070707'> </span><span style='color:#333333'>req.accepts()
method, </span><a href="#_bookmark257"><span style='color:#070707'>The Request
Object</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>req.body object, </span><a href="#_bookmark253"><span
style='color:#070707'>The Request Object</span></a><span style='color:#333333'>,
</span><a href="#_bookmark296"><span style='color:#070707'>Processing Forms</span></a><span
style='color:#070707'> </span><span style='color:#333333'>req.clearCookie
object, </span><a href="#_bookmark404"><span style='color:#070707'>Cookies in
Express</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark403"><span style='color:#333333;text-decoration:none'>req.cookies
object,</span></a><span style='color:#333333'> </span><a href="#_bookmark255"><span
style='color:#070707'>The Request Object</span></a><a href="#_bookmark403"><span
style='color:#333333;text-decoration:none'>,</span></a><span style='color:#333333'>
</span><a href="#_bookmark292"><span style='color:#070707'>Rendering Content</span></a><a
href="#_bookmark403"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Cookies in</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>req.headers object, </span><a href="#_bookmark256"><span
style='color:#070707'>The Request Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>req.hostname method, </span><a
href="#_bookmark261"><span style='color:#070707'>The Request Object</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>req.ip parameter, </span><a href="#_bookmark259"><span
style='color:#070707'>The Request Object</span></a><span style='color:#333333'>,
</span><a href="#_bookmark530"><span style='color:#070707'>Scaling Out with
Multiple Servers</span></a><span style='color:#070707'> </span><span
style='color:#333333'>req.ips array, </span><a href="#_bookmark531"><span
style='color:#070707'>Scaling Out with Multiple Servers</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:247.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>req.originalUrl property, </span><a href="#_bookmark265"><span
style='color:#070707'>The Request Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>req.params array, </span><a
href="#_bookmark251"><span style='color:#070707'>The Request Object</span></a><span
style='color:#070707;letter-spacing:2.0pt'> </span><span style='color:#333333'>req.path
parameter, </span><a href="#_bookmark260"><span style='color:#070707'>The
Request Object</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark530"><span style='color:#333333;text-decoration:none'>req.protocol
property,</span></a><span style='color:#333333'> </span><a href="#_bookmark263"><span
style='color:#070707'>The Request Object</span></a><a href="#_bookmark530"><span
style='color:#333333;text-decoration:none'>, </span><span style='color:#070707'>Scaling
Out with Multiple</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Servers</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark372"><span style='color:#333333;text-decoration:none'>req.query
object,</span></a><span style='color:#333333'> </span><a href="#_bookmark252"><span
style='color:#070707'>The Request Object</span></a><a href="#_bookmark372"><span
style='color:#333333;text-decoration:none'>,</span></a><span style='color:#333333'>
</span><a href="#_bookmark292"><span style='color:#070707'>Rendering Content</span></a><a
href="#_bookmark372"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Form Handling</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>with Express</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>req.route<span
style='letter-spacing:.7pt'> </span>parameter,<span style='letter-spacing:.8pt'>
</span></span><a href="#_bookmark254"><span style='color:#070707'>The<span
style='letter-spacing:.7pt'> </span>Request<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Object</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark530"><span style='color:#333333;text-decoration:none'>req.secure
property,</span></a><span style='color:#333333'> </span><a href="#_bookmark264"><span
style='color:#070707'>The Request Object</span></a><a href="#_bookmark530"><span
style='color:#333333;text-decoration:none'>, </span><span style='color:#070707'>Scaling
Out with Multiple</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Servers</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:115%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection508>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>req.signedCookies<span
style='letter-spacing:.8pt'> </span>object,<span style='letter-spacing:.95pt'> </span></span><a
href="#_bookmark255"><span style='color:#070707'>The<span style='letter-spacing:
.8pt'> </span>Request<span style='letter-spacing:.85pt'> </span>Object</span></a><span
style='color:#333333'>,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark292"><span style='color:#070707'>Rendering<span
style='letter-spacing:.95pt'> </span><span style='letter-spacing:-.1pt'>Content</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark403"><span
style='color:#070707'>Cookies<span style='letter-spacing:.5pt'> </span>in<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>req.url<span
style='letter-spacing:.65pt'> </span>property,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark265"><span style='color:#070707'>The<span
style='letter-spacing:.65pt'> </span>Request<span style='letter-spacing:.65pt'>
</span><span style='letter-spacing:-.1pt'>Object</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>req.xhr property, </span><a href="#_bookmark262"><span
style='color:#070707'>The Request Object</span></a><span style='color:#333333'>,
</span><a href="#_bookmark297"><span style='color:#070707'>Processing Forms</span></a><span
style='color:#070707'> </span><span style='color:#333333'>request body, </span><a
href="#_bookmark249"><span style='color:#070707'>Request Body</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>middleware<span style='letter-spacing:.85pt'> </span>code,<span
style='letter-spacing:1.0pt'> </span></span><a href="#_bookmark891"><span
style='color:#070707'>Debugging<span style='letter-spacing:.95pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>sending client data to server with, </span><a
href="#_bookmark358"><span style='color:#070707'>Sending Client Data to the
Server</span></a><span style='color:#070707'> </span><span style='color:#333333'>request
headers, </span><a href="#_bookmark239"><span style='color:#070707'>Request
Headers</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>request<span style='letter-spacing:.65pt'> </span><span
style='letter-spacing:-.1pt'>objects</span></span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>HTTP request methods, </span><a href="#_bookmark234"><span
style='color:#070707'>HTTP Request Methods</span></a><span style='color:#070707'>
</span><span style='color:#333333'>processing forms, </span><a
href="#_bookmark296"><span style='color:#070707'>Processing Forms</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>properties and methods, </span><a href="#_bookmark250"><span
style='color:#070707'>The Request Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>providing an API, </span><a
href="#_bookmark301"><span style='color:#070707'>Providing an API</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>QA testing, </span><a href="#_bookmark194"><span
style='color:#070707'>Writing Our First Test</span></a><span style='color:#070707'>
</span><span style='color:#333333'>rendering content, </span><a
href="#_bookmark291"><span style='color:#070707'>Rendering Content</span></a><span
style='color:#070707'> </span><span style='color:#333333'>request body, </span><a
href="#_bookmark249"><span style='color:#070707'>Request Body</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>request<span
style='letter-spacing:.7pt'> </span>headers,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark239"><span style='color:#070707'>Request<span style='letter-spacing:
.7pt'> </span><span style='letter-spacing:-.1pt'>Headers</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:222.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
176%'><span style='color:#333333'>URL components and, </span><a
href="#_bookmark224"><span style='color:#070707'>The Parts of a URL</span></a><span
style='color:#070707'> </span><span style='color:#333333'>require() function, </span><a
href="#_bookmark159"><span style='color:#070707'>Node Modules</span></a><span
style='color:#070707'> </span><span style='color:#333333'>res.attachment(), </span><a
href="#_bookmark278"><span style='color:#070707'>The Response Object</span></a><span
style='color:#070707'> </span><span style='color:#333333'>res.cookie(), </span><a
href="#_bookmark270"><span style='color:#070707'>The Response Object</span></a><span
style='color:#070707'> </span><span style='color:#333333'>res.download(), </span><a
href="#_bookmark278"><span style='color:#070707'>The Response Object</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.45pt'><span
style='color:#333333'>res.end(),<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark275"><span style='color:#070707'>The<span style='letter-spacing:
.7pt'> </span>Response<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Object</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection509>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>res.format(), </span><a href="#_bookmark277"><span
style='color:#070707'>The Response Object</span></a><span style='color:#333333'>,
</span><a href="#_bookmark303"><span style='color:#070707'>Providing an API</span></a><span
style='color:#070707'> </span><span style='color:#333333'>res.json(), </span><a
href="#_bookmark273"><span style='color:#070707'>The Response Object</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>res.jsonp(), </span><a href="#_bookmark274"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>res.links(), </span><a href="#_bookmark280"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>res.locals object, </span><a
href="#_bookmark281"><span style='color:#070707'>The Response Object</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>res.locals.flash object, </span><a href="#_bookmark421"><span
style='color:#070707'>Using Sessions to Implement Flash Messages</span></a><span
style='color:#070707'> </span><span style='color:#333333'>res.redirect(), </span><a
href="#_bookmark271"><span style='color:#070707'>The Response Object</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark493"><span style='color:#333333;text-decoration:none'>res.render(),</span></a><span
style='color:#333333'> </span><a href="#_bookmark282"><span style='color:#070707'>The
Response Object</span></a><a href="#_bookmark493"><span style='color:#333333;
text-decoration:none'>,</span></a><span style='color:#333333'> </span><a
href="#_bookmark291"><span style='color:#070707'>Rendering Content</span></a><a
href="#_bookmark493"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Using Views to</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>Send HTML Email</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>res.send(),<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark114"><span
style='color:#070707'>Initial<span style='letter-spacing:.7pt'> </span>Steps</span></a><span
style='color:#333333'>,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark272"><span style='color:#070707'>The<span style='letter-spacing:
.65pt'> </span>Response<span style='letter-spacing:.7pt'> </span>Object</span></a><span
style='color:#333333'>,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark291"><span style='color:#070707'>Rendering<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Content</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>,</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark887"><span
style='color:#070707'>Debugging<span style='letter-spacing:1.15pt'> </span><span
style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>res.sendFile(), </span><a href="#_bookmark279"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>res.set(), </span><a href="#_bookmark269"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>res.status(), </span><a href="#_bookmark268"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>res.type(), </span><a href="#_bookmark276"><span
style='color:#070707'>The Response Object</span></a><span style='color:#070707'>
</span><span style='color:#333333'>resources (see learning resources)</span></p>

<p class=MsoBodyText style='margin-top:.3pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>response headers, </span><a href="#_bookmark242"><span
style='color:#070707'>Response Headers</span></a><span style='color:#333333'>, </span><a
href="#_bookmark245"><span style='color:#070707'>Internet Media Types</span></a><span
style='color:#070707'> </span><span style='color:#333333'>response objects</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>properties<span style='letter-spacing:.75pt'> </span>and<span
style='letter-spacing:.85pt'> </span>methods,<span style='letter-spacing:.8pt'>
</span></span><a href="#_bookmark267"><span style='color:#070707'>The<span
style='letter-spacing:.8pt'> </span>Response<span style='letter-spacing:.75pt'>
</span>Object</span></a><span style='color:#333333'>-</span><a
href="#_bookmark283"><span style='color:#070707'>The<span style='letter-spacing:
.8pt'> </span>Response<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Object</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>QA testing, </span><a href="#_bookmark194"><span
style='color:#070707'>Writing Our First Test</span></a><span style='color:#070707'>
</span><span style='color:#333333'>rendering content, </span><a
href="#_bookmark291"><span style='color:#070707'>Rendering Content</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>response-time middleware, </span><a href="#_bookmark452"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>REST APIs, </span><a href="#_bookmark635"><span
style='color:#070707'>REST APIs and JSON</span></a><span style='color:#333333'>-</span><a
href="#_bookmark663"><span style='color:#070707'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>cross-origin<span style='letter-spacing:.9pt'> </span>resource<span
style='letter-spacing:.9pt'> </span>sharing,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark653"><span style='color:#070707'>Cross-Origin<span
style='letter-spacing:.95pt'> </span>Resource<span style='letter-spacing:.85pt'>
</span><span style='letter-spacing:-.1pt'>Sharing</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection510>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>error<span
style='letter-spacing:.5pt'> </span>reporting,<span style='letter-spacing:.6pt'>
</span></span><a href="#_bookmark647"><span style='color:#070707'>API<span
style='letter-spacing:.55pt'> </span>Error<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Reporting</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Express as source of, </span><a href="#_bookmark661"><span
style='color:#070707'>Using Express to Provide an API</span></a><span
style='color:#070707'> </span><span style='color:#333333'>JSON and XML, </span><a
href="#_bookmark640"><span style='color:#070707'>JSON and XML</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>planning<span
style='letter-spacing:.55pt'> </span>an<span style='letter-spacing:.55pt'> </span>API,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark642"><span
style='color:#070707'>Our<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>API</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:158.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>rendering tweets, </span><a href="#_bookmark839"><span
style='color:#070707'>Rendering Tweets</span></a><span style='color:#333333'>-</span><a
href="#_bookmark840"><span style='color:#070707'>Rendering Tweets</span></a><span
style='color:#070707'> </span><span style='color:#333333'>testing, </span><a
href="#_bookmark658"><span style='color:#070707'>Our Tests</span></a><span
style='color:#333333'>-</span><a href="#_bookmark660"><span style='color:#070707'>Our
Tests</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>REST/RESTful, defined, </span><a href="#_bookmark637"><span
style='color:#070707'>REST APIs and JSON</span></a><span style='color:#070707'>
</span><span style='color:#333333'>reverse proxy, </span><a href="#_bookmark527"><span
style='color:#070707'>Scaling Out with Multiple Servers</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark822"><span style='color:#333333;text-decoration:none'>role-based
authorization,</span></a><span style='color:#333333'> </span><a
href="#_bookmark820"><span style='color:#070707'>Role-Based Authorization</span></a><a
href="#_bookmark822"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Role-Based</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Authorization</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Rollup, </span><a href="#_bookmark757"><span
style='color:#070707'>Changing Your Static Content</span></a><span
style='color:#070707'> </span><span style='color:#333333'>root directory, </span><a
href="#_bookmark110"><span style='color:#070707'>Initial Steps</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:390.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Route 53, </span><a href="#_bookmark905"><span
style='color:#070707'>Security</span></a><span style='color:#070707'> </span><span
style='color:#333333'>route handlers</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>as<span style='letter-spacing:.6pt'> </span>middleware,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark619"><span
style='color:#070707'>Route<span style='letter-spacing:.6pt'> </span>Handlers<span
style='letter-spacing:.65pt'> </span>Are<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Middleware</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>grouping logically, </span><a href="#_bookmark629"><span
style='color:#070707'>Grouping Handlers Logically</span></a><span
style='color:#070707'> </span><span style='color:#333333'>middleware versus, </span><a
href="#_bookmark432"><span style='color:#070707'>Middleware Principles</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:129.25pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>uncaught exceptions and, </span><a
href="#_bookmark521"><span style='color:#070707'>Handling Uncaught Exceptions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>route parameters, </span><a
href="#_bookmark623"><span style='color:#070707'>Route Parameters</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>routing,<span style='letter-spacing:1.2pt'> </span></span><a
href="#_bookmark90"><span style='color:#070707'>Routing</span></a><span
style='color:#333333'>,<span style='letter-spacing:1.25pt'> </span></span><a
href="#_bookmark604"><span style='color:#070707'>Routing</span></a><span
style='color:#333333'>-</span><a href="#_bookmark633"><span style='color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>automatically rendering views, </span><a
href="#_bookmark631"><span style='color:#070707'>Automatically Rendering Views</span></a><span
style='color:#070707'> </span><span style='color:#333333'>basics, </span><a
href="#_bookmark604"><span style='color:#070707'>Routing</span></a><span
style='color:#333333'>-</span><a href="#_bookmark608"><span style='color:#070707'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>declaring<span
style='letter-spacing:.5pt'> </span>routes<span style='letter-spacing:.5pt'> </span>in<span
style='letter-spacing:.55pt'> </span>a<span style='letter-spacing:.5pt'> </span>module,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark627"><span
style='color:#070707'>Declaring<span style='letter-spacing:.55pt'> </span>Routes<span
style='letter-spacing:.5pt'> </span>in<span style='letter-spacing:.55pt'> </span>a<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Module</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection511>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>grouping handlers logically, </span><a
href="#_bookmark629"><span style='color:#070707'>Grouping Handlers Logically</span></a><span
style='color:#070707'> </span><span style='color:#333333'>organizing routes, </span><a
href="#_bookmark625"><span style='color:#070707'>Organizing Routes</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>pipeline and, </span><a href="#_bookmark430"><span
style='color:#070707'>Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>React apps, </span><a href="#_bookmark691"><span
style='color:#070707'>Routing</span></a><span style='color:#333333'>-</span><a
href="#_bookmark696"><span style='color:#070707'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>route handlers as middleware, </span><a
href="#_bookmark619"><span style='color:#070707'>Route Handlers Are Middleware</span></a><span
style='color:#070707'> </span><span style='color:#333333'>route parameters, </span><a
href="#_bookmark623"><span style='color:#070707'>Route Parameters</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark621"><span style='color:#333333;text-decoration:none'>route
paths and regular expressions, </span><span style='color:#070707'>Route Paths
and Regular</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Expressions</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:254.1pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SEO and, </span><a href="#_bookmark611"><span
style='color:#070707'>Routes and SEO</span></a><span style='color:#070707;
letter-spacing:2.0pt'> </span><span style='color:#333333'>subdomains, </span><a
href="#_bookmark613"><span style='color:#070707'>Subdomains</span></a><span
style='color:#333333'>-</span><a href="#_bookmark617"><span style='color:#070707'>Subdomains</span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Ruby, </span><a href="#_bookmark14"><span
style='color:#070707'>The JavaScript Revolution</span></a><span
style='color:#333333'>, </span><a href="#_bookmark104"><span style='color:#070707'>Scaffolding</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Ruby on Rails, </span><a
href="#_bookmark105"><span style='color:#070707'>Scaffolding</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image094.gif"
  alt="Text Box: S"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>S3, </span><a href="#_bookmark552"><span
style='color:#070707'>Cloud Persistence</span></a><span style='color:#333333'>,
</span><a href="#_bookmark714"><span style='color:#070707'>Deployment Options</span></a><span
style='color:#070707'> </span><span style='color:#333333'>SaaS (software as a
service), </span><a href="#_bookmark924"><span style='color:#070707'>XaaS</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>save() method, Mongoose, </span><a href="#_bookmark578"><span
style='color:#070707'>Seeding Initial Data</span></a><span style='color:#070707'>
</span><span style='color:#333333'>scaffolding, </span><a href="#_bookmark104"><span
style='color:#070707'>Scaffolding</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>scaling<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.25pt'>out</span></span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:85.95pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>handling uncaught exceptions, </span><a
href="#_bookmark520"><span style='color:#070707'>Handling Uncaught Exceptions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>scaling up versus, </span><a
href="#_bookmark513"><span style='color:#070707'>Scaling Your Website</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>website,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark512"><span
style='color:#070707'>Scaling<span style='letter-spacing:.75pt'> </span>Your<span
style='letter-spacing:.65pt'> </span>Website</span></a><span style='color:#333333'>-</span><a
href="#_bookmark529"><span style='color:#070707'>Scaling<span style='letter-spacing:
.75pt'> </span>Out<span style='letter-spacing:.7pt'> </span>with<span
style='letter-spacing:.75pt'> </span>Multiple<span style='letter-spacing:.7pt'>
</span><span style='letter-spacing:-.1pt'>Servers</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>with app
clusters,</span></a><span style='color:#333333'> </span><a href="#_bookmark516"><span
style='color:#070707'>Scaling Out with App Clusters</span></a><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Scaling Out with</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>App Clusters</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:115%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection512>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:117.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>with multiple servers, </span><a
href="#_bookmark526"><span style='color:#070707'>Scaling Out with Multiple
Servers</span></a><span style='color:#070707'> </span><span style='color:#333333'>schemas,
</span><a href="#_bookmark572"><span style='color:#070707'>Creating Schemas and
Models</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>scope<span style='letter-spacing:.7pt'> </span>variables,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark874"><span
style='color:#070707'>Node<span style='letter-spacing:.75pt'> </span>Inspector<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Clients</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>scripts,<span
style='letter-spacing:.7pt'> </span>in<span style='letter-spacing:.7pt'> </span>package.json<span
style='letter-spacing:.7pt'> </span>file,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark188"><span style='color:#070707'>Installing<span
style='letter-spacing:.7pt'> </span>and<span style='letter-spacing:.7pt'> </span>Configuring<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.2pt'>Jest</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark25"><span style='color:#333333;text-decoration:none'>search
engine optimization (SEO), </span><span style='color:#070707'>Server-Side and
Client-Side</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Applications</span><span style='color:#333333;text-decoration:
none'>,</span></a><span style='color:#333333'> </span><a href="#_bookmark611"><span
style='color:#070707'>R</span></a><a href="#_bookmark25"><span
style='color:#070707'>outes and SEO</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>sections,<span
style='letter-spacing:.8pt'> </span></span><a href="#_bookmark342"><span
style='color:#070707;letter-spacing:-.1pt'>Sections</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>security,<span
style='letter-spacing:1.4pt'> </span></span><a href="#_bookmark761"><span
style='color:#070707'>Security</span></a><span style='color:#333333'>-</span><a
href="#_bookmark827"><span style='color:#070707;letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:103.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>authentication, </span><a href="#_bookmark795"><span
style='color:#070707'>Authentication</span></a><span style='color:#333333'>-</span><a
href="#_bookmark824"><span style='color:#070707'>Adding Authentication
Providers</span></a><span style='color:#070707'> </span><span style='color:
#333333'>cross-site request forgery attacks, </span><a href="#_bookmark792"><span
style='color:#070707'>Cross-Site Request Forgery</span></a><span
style='color:#070707'> </span><span style='color:#333333'>domain registration, </span><a
href="#_bookmark904"><span style='color:#070707'>Security</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>FTP<span
style='letter-spacing:.45pt'> </span>and,<span style='letter-spacing:.5pt'> </span></span><a
href="#_bookmark937"><span style='color:#070707;letter-spacing:-.1pt'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
178%'><span style='color:#333333'>HTTPS, </span><a href="#_bookmark762"><span
style='color:#070707'>HTTPS</span></a><span style='color:#333333'>-</span><a
href="#_bookmark791"><span style='color:#070707'>HTTPS and Proxies</span></a><span
style='color:#070707'> </span><span style='color:#333333'>semantic versioning, </span><a
href="#_bookmark153"><span style='color:#070707'>npm Packages</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Semaphore, </span><a
href="#_bookmark943"><span style='color:#070707'>Deployment</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:15.35pt'><span
style='color:#333333'>semicolons,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark85"><span style='color:#070707'>Hello<span style='letter-spacing:
.8pt'> </span><span style='letter-spacing:-.1pt'>World</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SendGrid, </span><a href="#_bookmark483"><span
style='color:#070707'>Sending Mail to Multiple Recipients</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Sentry, </span><a
href="#_bookmark525"><span style='color:#070707'>Handling Uncaught Exceptions</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark25"><span style='color:#333333;text-decoration:none'>SEO
(search engine optimization), </span><span style='color:#070707'>Server-Side
and Client-Side</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Applications</span><span style='color:#333333;text-decoration:
none'>,</span></a><span style='color:#333333'> </span><a href="#_bookmark611"><span
style='color:#070707'>R</span></a><a href="#_bookmark25"><span
style='color:#070707'>outes and SEO</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:219.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>serve-favicon middleware, </span><a href="#_bookmark449"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#070707'> </span><span
style='color:#333333'>serve-index middleware, </span><a href="#_bookmark447"><span
style='color:#070707'>Common Middleware</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark703"><span style='color:#333333;text-decoration:none'>server
integration,</span></a><span style='color:#333333'> </span><a
href="#_bookmark699"><span style='color:#070707'>Vacations PageServer
Integration</span></a><a href="#_bookmark703"><span style='color:#333333;
text-decoration:none'>-</span><span style='color:#070707'>Vacations Page</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>Server
Integration</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:115%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection513>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>server<span
style='letter-spacing:.5pt'> </span>routing<span style='letter-spacing:.55pt'> </span>(see<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>routing)</span></span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark706"><span style='color:#333333;text-decoration:none'>server,
sending information to,</span></a><span style='color:#333333'> </span><a
href="#_bookmark702"><span style='color:#070707'>Sending Information to the
Server</span></a><a href="#_bookmark706"><span style='color:#333333;text-decoration:
none'>-</span><span style='color:#070707'>Sending</span><span style='color:
#070707;text-decoration:none'> </span><span style='color:#070707'>Information
to the Server</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>server-side<span
style='letter-spacing:.85pt'> </span>applications,<span style='letter-spacing:
.9pt'> </span></span><a href="#_bookmark19"><span style='color:#070707'>Server-Side<span
style='letter-spacing:.85pt'> </span>and<span style='letter-spacing:.9pt'> </span>Client-Side<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>Applications</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark23"><span style='color:#333333;text-decoration:none'>server-side
rendered (SSR) applications, </span><span style='color:#070707'>Server-Side and
Client-Side</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707;letter-spacing:-.1pt'>Applications</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>server-side templates, </span><a href="#_bookmark333"><span
style='color:#070707'>Server-Side Templates</span></a><span style='color:#070707'>
</span><span style='color:#333333'>session middleware, </span><a
href="#_bookmark889"><span style='color:#070707'>Debugging Express</span></a><span
style='color:#070707'> </span><span style='color:#333333'>sessions, </span><a
href="#_bookmark410"><span style='color:#070707'>Sessions</span></a><span
style='color:#333333'>-</span><a href="#_bookmark425"><span style='color:#070707'>What
to Use Sessions For</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.15pt'><span
style='color:#333333'>cookies<span style='letter-spacing:.6pt'> </span>versus,<span
style='letter-spacing:.75pt'> </span></span><a href="#_bookmark398"><span
style='color:#070707'>Cookies<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Sessions</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:110.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark598"><span style='color:#333333;text-decoration:none'>database
for session data storage, </span><span style='color:#070707'>Using a Database
for Session</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Storage</span><span style='color:#333333;text-decoration:
none'>-</span></a><a href="#_bookmark600"><span style='color:#070707'>U</span></a><a
href="#_bookmark598"><span style='color:#070707'>sing a Database for Session
Storage</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:89.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark420"><span style='color:#333333;text-decoration:none'>flash
message implementation, </span><span style='color:#070707'>Using Sessions to
Implement Flash</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Messages</span><span style='color:#333333;text-decoration:
none'>-</span></a><a href="#_bookmark423"><span style='color:#070707'>U</span></a><a
href="#_bookmark420"><span style='color:#070707'>sing Sessions to Implement
Flash Messages</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:274.7pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>memory stores, </span><a href="#_bookmark413"><span
style='color:#070707'>Memory Stores</span></a><span style='color:#070707'> </span><span
style='color:#333333'>uses for, </span><a href="#_bookmark424"><span
style='color:#070707'>What to Use Sessions For</span></a><span
style='color:#070707'> </span><span style='color:#333333'>using, </span><a
href="#_bookmark417"><span style='color:#070707'>Using Sessions</span></a></p>

<p class=MsoBodyText style='margin-top:1.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Set-Cookie<span
style='letter-spacing:.7pt'> </span>header,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark399"><span style='color:#070707'>Cookies<span style='letter-spacing:
.75pt'> </span>and<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Sessions</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>Simple Mail Transfer Protocol (SMTP), </span><a
href="#_bookmark462"><span style='color:#070707'>SMTP, MSAs, and MTAs</span></a><span
style='color:#333333'>, </span><a href="#_bookmark477"><span style='color:#070707;
letter-spacing:-.1pt'>Nodemailer</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Sinatra,<span
style='letter-spacing:.45pt'> </span></span><a href="#_bookmark28"><span
style='color:#070707'>A<span style='letter-spacing:.45pt'> </span>Brief<span
style='letter-spacing:.45pt'> </span>History<span style='letter-spacing:.5pt'> </span>of<span
style='letter-spacing:.45pt'> </span><span style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>single-domain<span
style='letter-spacing:.8pt'> </span>certificates,<span style='letter-spacing:
.85pt'> </span></span><a href="#_bookmark775"><span style='color:#070707'>Purchasing<span
style='letter-spacing:.85pt'> </span>a<span style='letter-spacing:.8pt'> </span><span
style='letter-spacing:-.1pt'>Certificate</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark24"><span style='color:#333333;text-decoration:none'>single-page
applications (SPAs), </span><span style='color:#070707'>Server-Side and
Client-Side</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Applications</span><span style='color:#333333;text-decoration:
none'>,</span></a><span style='color:#333333'> </span><a href="#_bookmark666"><span
style='color:#070707'>S</span></a><a href="#_bookmark24"><span
style='color:#070707'>ingle-Page Applications</span></a></p>

<p class=MsoBodyText style='margin-top:7.3pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>CDNs<span
style='letter-spacing:.7pt'> </span>and,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark745"><span style='color:#070707'>Single-Page<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Applications</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection514>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>deployment options, </span><a href="#_bookmark713"><span
style='color:#070707'>Deployment Options</span></a><span style='color:#070707'>
</span><span style='color:#333333'>homepage, </span><a href="#_bookmark687"><span
style='color:#070707'>The Home Page</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark671"><span style='color:#333333;text-decoration:none'>origins,</span></a><span
style='color:#333333'> </span><a href="#_bookmark669"><span style='color:#070707'>A
Short History of Web Application Development</span></a><a href="#_bookmark671"><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>A
Short</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>History of Web Application Development</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>routing,<span
style='letter-spacing:1.6pt'> </span></span><a href="#_bookmark691"><span
style='color:#070707'>Routing</span></a><span style='color:#333333'>-</span><a
href="#_bookmark696"><span style='color:#070707;letter-spacing:-.1pt'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.6pt'> </span>information<span style='letter-spacing:
.65pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span>server,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark702"><span style='color:#070707'>Sending<span style='letter-spacing:
.65pt'> </span>Information<span style='letter-spacing:.6pt'> </span>to<span
style='letter-spacing:.65pt'> </span>the<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Server</span></span></a><span style='color:#333333;
letter-spacing:-.1pt'>-</span></p>

<p class=MsoBodyText style='margin-top:2.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark706"><span
style='color:#070707'>Sending<span style='letter-spacing:.65pt'> </span>Information<span
style='letter-spacing:.65pt'> </span>to<span style='letter-spacing:.65pt'> </span>the<span
style='letter-spacing:.6pt'> </span><span style='letter-spacing:-.1pt'>Server</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark703"><span style='color:#333333;text-decoration:none'>server
integration,</span></a><span style='color:#333333'> </span><a
href="#_bookmark699"><span style='color:#070707'>Vacations PageServer
Integration</span></a><a href="#_bookmark703"><span style='color:#333333;
text-decoration:none'>-</span><span style='color:#070707'>Vacations</span><span
style='color:#070707;text-decoration:none'> </span><span style='color:#070707'>PageServer
Integration</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>state management, </span><a href="#_bookmark707"><span
style='color:#070707'>State Management</span></a><span style='color:#070707'> </span><span
style='color:#333333'>technology choices, </span><a href="#_bookmark672"><span
style='color:#070707'>SPA Technologies</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>visual<span
style='letter-spacing:.8pt'> </span>design,<span style='letter-spacing:.9pt'> </span></span><a
href="#_bookmark695"><span style='color:#070707'>Vacations<span
style='letter-spacing:.85pt'> </span>PageVisual<span style='letter-spacing:
.8pt'> </span><span style='letter-spacing:-.1pt'>Design</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark668"><span style='color:#333333;text-decoration:none'>web
application development history, </span><span style='color:#070707'>A Short
History of Web</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>Application Development</span><span style='color:#333333;
text-decoration:none'>-</span></a><a href="#_bookmark720"><span
style='color:#070707'>C</span></a><a href="#_bookmark668"><span
style='color:#070707'>onclusion</span></a></p>

<p class=MsoBodyText style='margin-top:10.9pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><span
style='color:#333333'>SMTP (Simple Mail Transfer Protocol), </span><a
href="#_bookmark462"><span style='color:#070707'>SMTP, MSAs, and MTAs</span></a><span
style='color:#333333'>, </span><a href="#_bookmark477"><span style='color:#070707;
letter-spacing:-.1pt'>Nodemailer</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SO (Stack Overflow), </span><a href="#_bookmark1005"><span
style='color:#070707'>Stack Overflow</span></a><span style='color:#333333'>-</span><a
href="#_bookmark1008"><span style='color:#070707'>Stack Overflow</span></a><span
style='color:#070707'> </span><span style='color:#333333'>social media, </span><a
href="#_bookmark830"><span style='color:#070707'>Social Media</span></a><span
style='color:#333333'>-</span><a href="#_bookmark842"><span style='color:#070707'>Rendering
Tweets</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><a
href="#_bookmark833"><span style='color:#333333;text-decoration:none'>plugins<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.65pt'> </span>site<span
style='letter-spacing:.65pt'> </span>performance,<span style='letter-spacing:
.65pt'> </span></span><span style='color:#070707'>Social<span style='letter-spacing:
.65pt'> </span>Media<span style='letter-spacing:.6pt'> </span>Plugins<span
style='letter-spacing:.6pt'> </span>and<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.2pt'>Site</span></span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><a href="#_bookmark833"><span
style='color:#070707;letter-spacing:-.1pt'>Performance</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>rendering<span style='letter-spacing:2.0pt'> </span>tweets,<span
style='letter-spacing:2.0pt'> </span></span><a href="#_bookmark838"><span
style='color:#070707'>Rendering<span style='letter-spacing:2.0pt'> </span>Tweets</span></a><span
style='color:#333333'>-</span><a href="#_bookmark843"><span style='color:#070707'>Rendering<span
style='letter-spacing:2.0pt'> </span>Tweets</span></a><span style='color:#070707;
letter-spacing:4.0pt'> </span><span style='color:#333333'>searching for tweets,
</span><a href="#_bookmark834"><span style='color:#070707'>Searching for Tweets</span></a><span
style='color:#333333'>-</span><a href="#_bookmark837"><span style='color:#070707'>Searching
for Tweets</span></a></p>

<p class=MsoBodyText align=center style='margin-top:1.55pt;margin-right:300.2pt;
margin-bottom:0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:center;
text-indent:-2.85pt;line-height:167%'><span style='color:#333333'>software as a
service (SaaS), </span><a href="#_bookmark924"><span style='color:#070707'>XaaS</span></a><span
style='color:#070707'> </span><span style='color:#333333'>source control, </span><a
href="#_bookmark961"><span style='color:#070707'>Use Source Control</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(see also version
control)</span></p>

</div>

<span style='font-size:11.0pt;line-height:167%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection515>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SPAs (see single-page applications) spoofing, </span><a
href="#_bookmark469"><span style='color:#070707'>Email Headers</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>SpritePad, </span><a href="#_bookmark732"><span
style='color:#070707'>Performance Considerations</span></a><span
style='color:#070707'> </span><span style='color:#333333'>SSL (public key)
certificate, </span><a href="#_bookmark764"><span style='color:#070707'>HTTPS</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>generating<span style='letter-spacing:.7pt'> </span>your<span
style='letter-spacing:.7pt'> </span>own,<span style='letter-spacing:.7pt'> </span></span><a
href="#_bookmark765"><span style='color:#070707'>Generating<span
style='letter-spacing:.75pt'> </span>Your<span style='letter-spacing:.65pt'> </span>Own<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Certificate</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>purchasing,<span
style='letter-spacing:.85pt'> </span></span><a href="#_bookmark774"><span
style='color:#070707'>Purchasing<span style='letter-spacing:.9pt'> </span>a<span
style='letter-spacing:.8pt'> </span>Certificate</span></a><span
style='color:#333333'>-</span><a href="#_bookmark782"><span style='color:#070707'>Purchasing<span
style='letter-spacing:.9pt'> </span>a<span style='letter-spacing:.85pt'> </span><span
style='letter-spacing:-.1pt'>Certificate</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>using a free certificate authority, </span><a
href="#_bookmark771"><span style='color:#070707'>Using a Free Certificate
Authority</span></a><span style='color:#070707'> </span><span style='color:
#333333'>Stack Overflow (SO), </span><a href="#_bookmark1005"><span
style='color:#070707'>Stack Overflow</span></a><span style='color:#333333'>-</span><a
href="#_bookmark1008"><span style='color:#070707'>Stack Overflow</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333;letter-spacing:-.1pt'>state</span></p>

<p class=MsoBodyText style='margin-top:.45pt'><span style='font-size:4.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>cookies and, </span><a href="#_bookmark395"><span
style='color:#070707'>Cookies and Sessions</span></a><span style='color:#070707'>
</span><span style='color:#333333'>management, </span><a href="#_bookmark707"><span
style='color:#070707'>State Management</span></a><span style='color:#070707'> </span><span
style='color:#333333'>React and, </span><a href="#_bookmark686"><span
style='color:#070707'>React Basics</span></a></p>

<p class=MsoBodyText style='margin-top:1.65pt;margin-right:230.1pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
167%'><span style='color:#333333'>static content, </span><a href="#_bookmark722"><span
style='color:#070707'>Static Content</span></a><span style='color:#333333'>-</span><a
href="#_bookmark758"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707;letter-spacing:4.0pt'> </span><span style='color:#333333'>caching
static assets, </span><a href="#_bookmark747"><span style='color:#070707'>Caching
Static Assets</span></a><span style='color:#070707'> </span><span
style='color:#333333'>changing, </span><a href="#_bookmark751"><span
style='color:#070707'>Changing Your Static Content</span></a></p>

<p class=MsoBodyText style='margin-top:.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>content delivery network basics, </span><a
href="#_bookmark735"><span style='color:#070707'>Content Delivery Networks</span></a><span
style='color:#070707'> </span><span style='color:#333333'>designing for CDNs, </span><a
href="#_bookmark740"><span style='color:#070707'>Designing for CDNs</span></a><span
style='color:#333333'>-</span><a href="#_bookmark746"><span style='color:#070707'>Single-Page
Applications</span></a><span style='color:#070707'> </span><span
style='color:#333333'>performance considerations, </span><a href="#_bookmark730"><span
style='color:#070707'>Performance Considerations</span></a></p>

<p class=MsoBodyText style='margin-top:1.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>static<span
style='letter-spacing:.35pt'> </span>IP<span style='letter-spacing:.45pt'> </span>address,<span
style='letter-spacing:.55pt'> </span></span><a href="#_bookmark916"><span
style='color:#070707;letter-spacing:-.1pt'>Nameservers</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark742"><span
style='color:#333333;text-decoration:none'>static<span style='letter-spacing:
.65pt'> </span>middleware,</span></a><span style='color:#333333;letter-spacing:
.7pt'> </span><a href="#_bookmark126"><span style='color:#070707'>Static<span
style='letter-spacing:.65pt'> </span>Files<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.75pt'> </span>Views</span></a><a href="#_bookmark742"><span
style='color:#333333;text-decoration:none'>,</span></a><span style='color:#333333;
letter-spacing:.7pt'> </span><a href="#_bookmark453"><span style='color:#070707'>Common<span
style='letter-spacing:.75pt'> </span>Middleware</span></a><a
href="#_bookmark742"><span style='color:#333333;text-decoration:none'>,<span
style='letter-spacing:.7pt'> </span></span><span style='color:#070707;
letter-spacing:-.1pt'>Server-</span></a></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><a href="#_bookmark742"><span
style='color:#070707'>Rendered<span style='letter-spacing:.95pt'> </span>Website</span><span
style='color:#333333;text-decoration:none'>,</span></a><span style='color:#333333;
letter-spacing:.95pt'> </span><a href="#_bookmark888"><span style='color:#070707'>D</span></a><a
href="#_bookmark742"><span style='color:#070707'>ebugging<span
style='letter-spacing:1.0pt'> </span><span style='letter-spacing:-.1pt'>Express</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>static resources, </span><a href="#_bookmark92"><span
style='color:#070707'>Serving Static Resources</span></a><span
style='color:#333333'>-</span><a href="#_bookmark96"><span style='color:#070707'>Serving
Static Resources</span></a><span style='color:#070707'> </span><span
style='color:#333333'>staticMiddleware() function, </span><a
href="#_bookmark888"><span style='color:#070707'>Debugging Express</span></a></p>

</div>

<span style='font-size:11.0pt;line-height:173%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection516>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:274.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>storage (see databases) (see persistence) stress testing,
</span><a href="#_bookmark538"><span style='color:#070707'>Stress Testing</span></a><span
style='color:#070707;letter-spacing:2.0pt'> </span><span style='color:#333333'>subdomains,
</span><a href="#_bookmark913"><span style='color:#070707'>Subdomains</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.15pt'><span
style='color:#333333'>IP<span style='letter-spacing:.6pt'> </span>addresses<span
style='letter-spacing:.6pt'> </span>and,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark900"><span style='color:#070707'>Domain<span style='letter-spacing:
.65pt'> </span>Registration<span style='letter-spacing:.7pt'> </span>and<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>Hosting</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: T"></td>
 </tr>
</table>

<br clear=ALL>
<span style='color:#333333'>routes and, </span><a href="#_bookmark613"><span
style='color:#070707'>Subdomains</span></a><span style='color:#333333'>-</span><a
href="#_bookmark617"><span style='color:#070707'>Subdomains</span></a><span
style='color:#070707'> </span><span style='color:#333333'>subdomains, in URL, </span><a
href="#_bookmark227"><span style='color:#070707'>The Parts of a URL</span></a></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:267.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>technical debt, </span><a href="#_bookmark968"><span
style='color:#070707'>Dont Procrastinate</span></a><span style='color:#070707'>
</span><span style='color:#333333'>template caching, </span><a
href="#_bookmark334"><span style='color:#070707'>Server-Side Templates</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>templating,<span
style='letter-spacing:1.15pt'> </span></span><a href="#_bookmark310"><span
style='color:#070707'>Templating<span style='letter-spacing:1.15pt'> </span>with<span
style='letter-spacing:1.15pt'> </span>Handlebars</span></a><span
style='color:#333333'>-</span><a href="#_bookmark354"><span style='color:#070707;
letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>avoiding HTML, </span><a href="#_bookmark314"><span
style='color:#070707'>There Are No Absolute Rules Except This One</span></a><span
style='color:#070707'> </span><span style='color:#333333'>basics, </span><a
href="#_bookmark311"><span style='color:#070707'>Templating with Handlebars</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>blocks, </span><a href="#_bookmark329"><span
style='color:#070707'>Blocks</span></a><span style='color:#333333'>-</span><a
href="#_bookmark331"><span style='color:#070707'>Blocks</span></a><span
style='color:#070707'> </span><span style='color:#333333'>comments,<span
style='letter-spacing:1.0pt'> </span></span><a href="#_bookmark327"><span
style='color:#070707;letter-spacing:-.1pt'>Comments</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>criteria for choosing a template engine, </span><a
href="#_bookmark316"><span style='color:#070707'>Choosing a Template Engine</span></a><span
style='color:#070707'> </span><span style='color:#333333'>partials, </span><a
href="#_bookmark344"><span style='color:#070707'>Partials</span></a><span
style='color:#333333'>-</span><a href="#_bookmark349"><span style='color:#070707'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>perfecting templates, </span><a href="#_bookmark351"><span
style='color:#070707'>Perfecting Your Templates</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Pug approach to, </span><a
href="#_bookmark319"><span style='color:#070707'>Pug: A Different Approach</span></a><span
style='color:#070707'> </span><span style='color:#333333'>sections, </span><a
href="#_bookmark342"><span style='color:#070707'>Sections</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:213.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>server-side templates, </span><a
href="#_bookmark333"><span style='color:#070707'>Server-Side Templates</span></a><span
style='color:#070707'> </span><span style='color:#333333'>using layouts in
Express, </span><a href="#_bookmark337"><span style='color:#070707'>Views and
Layouts</span></a><span style='color:#070707'> </span><span style='color:#333333'>views
and layouts, </span><a href="#_bookmark337"><span style='color:#070707'>Views
and Layouts</span></a></p>

<p class=MsoBodyText style='margin-top:1.65pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify'><span
style='color:#333333'>terminal,<span style='letter-spacing:.55pt'> </span></span><a
href="#_bookmark58"><span style='color:#070707'>Using<span style='letter-spacing:
.6pt'> </span>the<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection517>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>third-party<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.2pt'>APIs</span></span></p>

<p class=MsoBodyText style='margin-top:9.8pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>geocoding,<span
style='letter-spacing:1.15pt'> </span></span><a href="#_bookmark844"><span
style='color:#070707'>Geocoding</span></a><span style='color:#333333'>-</span><a
href="#_bookmark853"><span style='color:#070707'>Displaying<span
style='letter-spacing:1.2pt'> </span>a<span style='letter-spacing:1.1pt'> </span><span
style='letter-spacing:-.25pt'>Map</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>integrating with, </span><a href="#_bookmark829"><span
style='color:#070707'>Integrating with Third-Party APIs</span></a><span
style='color:#333333'>-</span><a href="#_bookmark858"><span style='color:#070707'>Conclusion</span></a><span
style='color:#070707'> </span><span style='color:#333333'>social media, </span><a
href="#_bookmark830"><span style='color:#070707'>Social Media</span></a><span
style='color:#333333'>-</span><a href="#_bookmark842"><span style='color:#070707'>Rendering
Tweets</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>weather<span
style='letter-spacing:.75pt'> </span>data,<span style='letter-spacing:.85pt'> </span></span><a
href="#_bookmark855"><span style='color:#070707'>Weather<span style='letter-spacing:
.75pt'> </span>Data</span></a><span style='color:#333333'>-</span><a
href="#_bookmark856"><span style='color:#070707'>Weather<span style='letter-spacing:
.75pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></a></p>

<p class=MsoBodyText style='margin-top:13.4pt;margin-right:100.0pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
115%'><a href="#_bookmark808"><span style='color:#333333;text-decoration:none'>third-party
authentication,</span></a><span style='color:#333333'> </span><a
href="#_bookmark801"><span style='color:#070707'>Third-Party Authentication</span></a><a
href="#_bookmark808"><span style='color:#333333;text-decoration:none'>, </span><span
style='color:#070707'>Authentication</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707'>Versus Registration
and the User Experience</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:94.35pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
115%'><a href="#_bookmark810"><span style='color:#333333;text-decoration:none'>third-party
confusion, </span><span style='color:#070707'>Authentication Versus
Registration and the User</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Experience</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:229.05pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-align:justify;line-height:
173%'><span style='color:#333333'>top-level domains (TLDs), </span><a
href="#_bookmark908"><span style='color:#070707'>Top-Level Domains</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Travis CI, </span><a
href="#_bookmark219"><span style='color:#070707'>Continuous Integration</span></a><span
style='color:#333333'>, </span><a href="#_bookmark942"><span style='color:#070707'>Deployment</span></a><span
style='color:#070707'> </span><span style='color:#333333'>trusted root
certificates, </span><a href="#_bookmark764"><span style='color:#070707'>HTTPS</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333;
letter-spacing:-.1pt'>Twitter</span></p>

<p class=MsoBodyText style='margin-top:9.85pt;margin-right:103.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>rendering<span style='letter-spacing:2.0pt'> </span>tweets,<span
style='letter-spacing:2.0pt'> </span></span><a href="#_bookmark838"><span
style='color:#070707'>Rendering<span style='letter-spacing:2.0pt'> </span>Tweets</span></a><span
style='color:#333333'>-</span><a href="#_bookmark843"><span style='color:#070707'>Rendering<span
style='letter-spacing:2.0pt'> </span>Tweets</span></a><span style='color:#070707;
letter-spacing:4.0pt'> </span><span style='color:#333333'>searching for tweets,
</span><a href="#_bookmark834"><span style='color:#070707'>Searching for Tweets</span></a><span
style='color:#333333'>-</span><a href="#_bookmark837"><span style='color:#070707'>Searching
for Tweets</span></a></p>

<p class=MsoBodyText style='margin-top:.45pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: U"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Ubuntu<span
style='letter-spacing:.6pt'> </span>Linux,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark64"><span style='color:#070707'>Using<span style='letter-spacing:
.65pt'> </span>the<span style='letter-spacing:.55pt'> </span><span
style='letter-spacing:-.1pt'>Terminal</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:148.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>UI (user interface), for file upload, </span><a
href="#_bookmark388"><span style='color:#070707'>Improving File Upload UI</span></a><span
style='color:#070707'> </span><span style='color:#333333'>uncaught exceptions, </span><a
href="#_bookmark520"><span style='color:#070707'>Handling Uncaught Exceptions</span></a><span
style='color:#070707'> </span><span style='color:#333333'>uncaughtException<span
style='letter-spacing:2.0pt'> </span>event,<span style='letter-spacing:2.0pt'> </span></span><a
href="#_bookmark523"><span style='color:#070707'>Handling<span
style='letter-spacing:2.0pt'> </span>Uncaught<span style='letter-spacing:2.0pt'>
</span>Exceptions</span></a><span style='color:#070707'> </span><span
style='color:#333333'>unit testing</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.2pt'><span
style='color:#333333'>basics,<span style='letter-spacing:.75pt'> </span></span><a
href="#_bookmark189"><span style='color:#070707'>Unit<span style='letter-spacing:
.75pt'> </span>Testing</span></a><span style='color:#333333'>-</span><a
href="#_bookmark202"><span style='color:#070707'>Code<span style='letter-spacing:
.75pt'> </span><span style='letter-spacing:-.1pt'>Coverage</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>code<span
style='letter-spacing:.55pt'> </span>coverage,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark200"><span style='color:#070707'>Code<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.1pt'>Coverage</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection518>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>defined, </span><a href="#_bookmark181"><span
style='color:#070707'>Overview of QA Techniques</span></a><span
style='color:#070707'> </span><span style='color:#333333'>mocking, </span><a
href="#_bookmark190"><span style='color:#070707'>Mocking</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:74.7pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark191"><span style='color:#333333;text-decoration:none'>refactoring
the application for testability, </span><span style='color:#070707'>Refactoring
the Application</span><span style='color:#070707;text-decoration:none'> </span><span
style='color:#070707'>for Testability</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>test<span
style='letter-spacing:.6pt'> </span>maintenance,<span style='letter-spacing:
.65pt'> </span></span><a href="#_bookmark198"><span style='color:#070707'>Test<span
style='letter-spacing:.65pt'> </span><span style='letter-spacing:-.1pt'>Maintenance</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>writing a test, </span><a href="#_bookmark193"><span
style='color:#070707'>Writing Our First Test</span></a><span style='color:#333333'>-</span><a
href="#_bookmark196"><span style='color:#070707'>Writing Our First Test</span></a><span
style='color:#070707'> </span><span style='color:#333333'>uploading files, </span><a
href="#_bookmark382"><span style='color:#070707'>File Uploads</span></a><span
style='color:#333333'>-</span><a href="#_bookmark390"><span style='color:#070707'>Improving
File Upload UI</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>uptime<span style='letter-spacing:.75pt'> </span>monitors,<span
style='letter-spacing:.85pt'> </span></span><a href="#_bookmark535"><span
style='color:#070707'>Third-Party<span style='letter-spacing:.85pt'> </span>Uptime<span
style='letter-spacing:.8pt'> </span><span style='letter-spacing:-.1pt'>Monitors</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>UptimeRobot, </span><a href="#_bookmark536"><span
style='color:#070707'>Third-Party Uptime Monitors</span></a><span
style='color:#070707'> </span><span style='color:#333333'>URLs, </span><a
href="#_bookmark607"><span style='color:#070707'>Routing</span></a></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>(see<span style='letter-spacing:.35pt'> </span>also<span
style='letter-spacing:.4pt'> </span><span style='letter-spacing:-.1pt'>routing)</span></span></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>components of, </span><a href="#_bookmark224"><span
style='color:#070707'>The Parts of a URL</span></a><span style='color:#070707'>
</span><span style='color:#333333'>creating for lasting IA, </span><a
href="#_bookmark607"><span style='color:#070707'>Routing</span></a><span
style='color:#333333'>-</span><a href="#_bookmark609"><span style='color:#070707'>Routing</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>usability<span
style='letter-spacing:.5pt'> </span>(QA<span style='letter-spacing:.5pt'> </span>element),<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark173"><span
style='color:#070707'>QA:<span style='letter-spacing:.5pt'> </span>Is<span
style='letter-spacing:.45pt'> </span>It<span style='letter-spacing:.5pt'> </span>Worth<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.25pt'>It?</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark808"><span style='color:#333333;text-decoration:none'>user
experience, registration and, </span><span style='color:#070707'>Authentication
Versus Registration and</span><span style='color:#070707;text-decoration:none'>
</span><span style='color:#070707'>the User Experience</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>user<span
style='letter-spacing:.5pt'> </span>interface<span style='letter-spacing:.55pt'>
</span>(UI),<span style='letter-spacing:.6pt'> </span>for<span
style='letter-spacing:.55pt'> </span>file<span style='letter-spacing:.55pt'> </span>upload,<span
style='letter-spacing:.6pt'> </span></span><a href="#_bookmark388"><span
style='color:#070707'>Improving<span style='letter-spacing:.6pt'> </span>File<span
style='letter-spacing:.55pt'> </span>Upload<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.25pt'>UI</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: V"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:306.8pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;text-indent:-28.8pt;line-height:
160%'><span style='color:#333333'>version control, </span><a
href="#_bookmark140"><span style='color:#070707'>Version Control</span></a><span
style='color:#070707'> </span><span style='color:#333333'>(see also source
control)</span></p>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:185.9pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>vhost middleware, </span><a href="#_bookmark454"><span
style='color:#070707'>Common Middleware</span></a><span style='color:#333333'>,
</span><a href="#_bookmark614"><span style='color:#070707'>Subdomains</span></a><span
style='color:#070707'> </span><span style='color:#333333'>view model, </span><a
href="#_bookmark582"><span style='color:#070707'>Retrieving Data</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>views,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark118"><span
style='color:#070707'>Views<span style='letter-spacing:.65pt'> </span>and<span
style='letter-spacing:.7pt'> </span>Layouts</span></a><span style='color:#333333'>-</span><a
href="#_bookmark125"><span style='color:#070707'>Views<span style='letter-spacing:
.65pt'> </span>and<span style='letter-spacing:.75pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection519>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:148.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>automatically rendering, </span><a href="#_bookmark631"><span
style='color:#070707'>Automatically Rendering Views</span></a><span
style='color:#070707'> </span><span style='color:#333333'>dynamic content in, </span><a
href="#_bookmark129"><span style='color:#070707'>Dynamic Content in Views</span></a><span
style='color:#070707'> </span><span style='color:#333333'>middleware for, </span><a
href="#_bookmark126"><span style='color:#070707'>Static Files and Views</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>sending<span
style='letter-spacing:.6pt'> </span>HTML<span style='letter-spacing:.55pt'> </span>email<span
style='letter-spacing:.5pt'> </span>with,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark491"><span style='color:#070707'>Using<span style='letter-spacing:
.6pt'> </span>Views<span style='letter-spacing:.55pt'> </span>to<span
style='letter-spacing:.6pt'> </span>Send<span style='letter-spacing:.6pt'> </span>HTML<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>Email</span></span></a><span
style='color:#333333;letter-spacing:-.1pt'>-</span></p>

<p class=MsoBodyText style='margin-top:2.6pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><a
href="#_bookmark494"><span style='color:#070707'>Using Views to Send HTML Email</span></a><span
style='color:#070707'> </span><span style='color:#333333'>templating<span
style='letter-spacing:.6pt'> </span>and,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark337"><span style='color:#070707'>Views<span style='letter-spacing:
.6pt'> </span>and<span style='letter-spacing:.6pt'> </span><span
style='letter-spacing:-.1pt'>Layouts</span></span></a></p>

<p class=MsoBodyText style='margin-top:1.6pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>vim,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark100"><span
style='color:#070707;letter-spacing:-.1pt'>Editors</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>virtual machines (VMs), </span><a href="#_bookmark66"><span
style='color:#070707'>Using the Terminal</span></a><span style='color:#070707'>
</span><span style='color:#333333'>VirtualBox, </span><a href="#_bookmark65"><span
style='color:#070707'>Using the Terminal</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>virtualization, </span><a href="#_bookmark923"><span
style='color:#070707'>Traditional hosting or cloud hosting?</span></a><span
style='color:#070707'> </span><span style='color:#333333'>Visual Studio Code, </span><a
href="#_bookmark76"><span style='color:#070707'>Editors</span></a><span
style='color:#333333'>, </span><a href="#_bookmark875"><span style='color:#070707'>Node
Inspector Clients</span></a><span style='color:#070707'> </span><span
style='color:#333333'>Vue.js, </span><a href="#_bookmark675"><span
style='color:#070707'>SPA Technologies</span></a></p>

<p class=MsoBodyText>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image092.gif"
  alt="Text Box: W"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>watch expressions, </span><a href="#_bookmark872"><span
style='color:#070707'>Node Inspector Clients</span></a><span style='color:#070707'>
</span><span style='color:#333333'>weather<span style='letter-spacing:.75pt'> </span>data,<span
style='letter-spacing:.85pt'> </span></span><a href="#_bookmark855"><span
style='color:#070707'>Weather<span style='letter-spacing:.75pt'> </span>Data</span></a><span
style='color:#333333'>-</span><a href="#_bookmark856"><span style='color:#070707'>Weather<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.2pt'>Data</span></span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark668"><span style='color:#333333;text-decoration:none'>web
application development, brief history of, </span><span style='color:#070707'>A
Short History of Web</span></a><span style='color:#070707'> </span><a
href="#_bookmark671"><span style='color:#070707'>A</span></a><a
href="#_bookmark668"><span style='color:#070707'>pplication Development</span><span
style='color:#333333;text-decoration:none'>-</span><span style='color:#070707'>A
Short History of Web Application</span></a><span style='color:#070707'> </span><a
href="#_bookmark671"><span style='color:#070707;letter-spacing:-.1pt'>Development</span></a></p>

<p class=MsoBodyText style='margin-top:9.5pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Web Apps (Microsoft Azure), </span><a href="#_bookmark941"><span
style='color:#070707'>Deployment</span></a><span style='color:#070707'> </span><span
style='color:#333333'>web server project</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>creating<span style='letter-spacing:.7pt'> </span>with<span
style='letter-spacing:.75pt'> </span>Express,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark102"><span style='color:#070707'>Saving<span
style='letter-spacing:.7pt'> </span>Time<span style='letter-spacing:.7pt'> </span>with<span
style='letter-spacing:.75pt'> </span>Express</span></a><span style='color:#333333'>-</span><a
href="#_bookmark133"><span style='color:#070707;letter-spacing:-.1pt'>Conclusion</span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:37.5pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark95"><span style='color:#333333;text-decoration:none'>creating
with Node,</span></a><span style='color:#333333'> </span><a href="#_bookmark81"><span
style='color:#070707'>A Simple Web Server with Node</span></a><a
href="#_bookmark95"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Serving Static</span><span style='color:#070707;
text-decoration:none'> </span><span style='color:#070707;letter-spacing:-.1pt'>Resources</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>event-driven<span
style='letter-spacing:1.25pt'> </span>programming,<span style='letter-spacing:
1.25pt'> </span></span><a href="#_bookmark87"><span style='color:#070707'>Event-Driven<span
style='letter-spacing:1.25pt'> </span><span style='letter-spacing:-.1pt'>Programming</span></span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection520>

<p class=MsoBodyText style='margin-top:3.6pt;margin-right:317.45pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>Hello world, </span><a href="#_bookmark84"><span
style='color:#070707'>Hello World</span></a><span style='color:#070707'> </span><span
style='color:#333333'>routing, </span><a href="#_bookmark90"><span
style='color:#070707'>Routing</span></a><span style='color:#070707'> </span><span
style='color:#333333'>scaffolding, </span><a href="#_bookmark104"><span
style='color:#070707'>Scaffolding</span></a></p>

<p class=MsoBodyText style='margin-top:.2pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;text-indent:28.8pt;line-height:
182%'><span style='color:#333333'>static resources, </span><a
href="#_bookmark92"><span style='color:#070707'>Serving Static Resources</span></a><span
style='color:#333333'>-</span><a href="#_bookmark96"><span style='color:#070707'>Serving
Static Resources</span></a><span style='color:#070707'> </span><span
style='color:#333333'>web service, defined, </span><a href="#_bookmark636"><span
style='color:#070707'>REST APIs and JSON</span></a></p>

<p class=MsoBodyText style='margin-left:55.0pt;line-height:14.8pt'><span
style='color:#333333'>Webpack,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark15"><span style='color:#070707'>The<span style='letter-spacing:
.75pt'> </span>JavaScript<span style='letter-spacing:.8pt'> </span>Revolution</span></a><span
style='color:#333333'>,<span style='letter-spacing:.8pt'> </span></span><a
href="#_bookmark755"><span style='color:#070707'>Changing<span
style='letter-spacing:.85pt'> </span>Your<span style='letter-spacing:.75pt'> </span>Static<span
style='letter-spacing:.75pt'> </span><span style='letter-spacing:-.1pt'>Content</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:239.2pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>webpack-dev-server, </span><a href="#_bookmark716"><span
style='color:#070707'>Deployment Options</span></a><span style='color:#070707'>
</span><span style='color:#333333;letter-spacing:-.1pt'>websites</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>longevity<span style='letter-spacing:.65pt'> </span>plan<span
style='letter-spacing:.65pt'> </span>for,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark955"><span style='color:#070707'>Have<span style='letter-spacing:
.65pt'> </span>a<span style='letter-spacing:.6pt'> </span>Longevity<span
style='letter-spacing:.65pt'> </span>Plan</span></a><span style='color:#333333'>-</span><a
href="#_bookmark960"><span style='color:#070707'>Have<span style='letter-spacing:
.6pt'> </span>a<span style='letter-spacing:.6pt'> </span>Longevity<span
style='letter-spacing:.7pt'> </span><span style='letter-spacing:-.2pt'>Plan</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>monitoring,<span
style='letter-spacing:.95pt'> </span></span><a href="#_bookmark532"><span
style='color:#070707'>Monitoring<span style='letter-spacing:.95pt'> </span>Your<span
style='letter-spacing:.9pt'> </span><span style='letter-spacing:-.1pt'>Website</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:0cm;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt'><span style='color:#333333'>scaling,<span
style='letter-spacing:.7pt'> </span></span><a href="#_bookmark512"><span
style='color:#070707'>Scaling<span style='letter-spacing:.75pt'> </span>Your<span
style='letter-spacing:.7pt'> </span>Website</span></a><span style='color:#333333'>-</span><a
href="#_bookmark529"><span style='color:#070707'>Scaling<span style='letter-spacing:
.75pt'> </span>Out<span style='letter-spacing:.65pt'> </span>with<span
style='letter-spacing:.75pt'> </span>Multiple<span style='letter-spacing:.7pt'>
</span><span style='letter-spacing:-.1pt'>Servers</span></span></a></p>

<p class=MsoBodyText style='margin-top:12.0pt;margin-right:85.3pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:115%'><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>scaling
out with app clusters,</span></a><span style='color:#333333'> </span><a
href="#_bookmark516"><span style='color:#070707'>Scaling Out with App Clusters</span></a><a
href="#_bookmark519"><span style='color:#333333;text-decoration:none'>-</span><span
style='color:#070707'>Scaling</span><span style='color:#070707;text-decoration:
none'> </span><span style='color:#070707'>Out with App Clusters</span></a></p>

<p class=MsoBodyText style='margin-top:9.45pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>server-rendered, </span><a href="#_bookmark741"><span
style='color:#070707'>Server-Rendered Website</span></a><span style='color:
#070707'> </span><span style='color:#333333'>uptime monitors, </span><a
href="#_bookmark535"><span style='color:#070707'>Third-Party Uptime Monitors</span></a></p>

<p class=MsoBodyText style='margin-top:1.55pt;margin-right:281.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>WHATWG, </span><a href="#_bookmark999"><span
style='color:#070707'>Online Documentation</span></a><span style='color:#070707'>
</span><span style='color:#333333'>widgets, </span><a href="#_bookmark345"><span
style='color:#070707'>Partials</span></a></p>

<p class=MsoBodyText style='margin-top:.15pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>wildcard certificates, </span><a href="#_bookmark776"><span
style='color:#070707'>Purchasing a Certificate</span></a><span
style='color:#070707'> </span><span style='color:#333333;letter-spacing:-.1pt'>Windows</span></p>

<p class=MsoBodyText style='margin-left:83.75pt;line-height:14.1pt'><span
style='color:#333333'>Node<span style='letter-spacing:.6pt'> </span>installation<span
style='letter-spacing:.65pt'> </span>on,<span style='letter-spacing:.65pt'> </span></span><a
href="#_bookmark56"><span style='color:#070707'>Getting<span style='letter-spacing:
.65pt'> </span><span style='letter-spacing:-.2pt'>Node</span></span></a></p>

<p class=MsoBodyText style='margin-top:11.95pt;margin-right:247.35pt;
margin-bottom:0cm;margin-left:83.75pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>shell options, </span><a href="#_bookmark62"><span
style='color:#070707'>Using the Terminal</span></a><span style='color:#070707'>
</span><span style='color:#333333'>Ubuntu Linux and, </span><a
href="#_bookmark64"><span style='color:#070707'>Using the Terminal</span></a><span
style='color:#070707'> </span><span style='color:#333333'>virtualization, </span><a
href="#_bookmark66"><span style='color:#070707'>Using the Terminal</span></a></p>

<p class=MsoBodyText><br clear=ALL>
</p>

</div>

<span style='font-size:3.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection521>

<p class=MsoBodyText style='margin-left:55.0pt'><span style='font-size:10.0pt'><img
width=576 height=4
src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image093.gif"></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:4.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.8pt;margin-right:205.55pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:173%'><span
style='color:#333333'>X-Forwarded-Proto header, </span><a href="#_bookmark789"><span
style='color:#070707'>HTTPS and Proxies</span></a><span style='color:#070707'> </span><span
style='color:#333333'>XML, JSON and, </span><a href="#_bookmark640"><span
style='color:#070707'>JSON and XML</span></a></p>

<p class=MsoBodyText style='margin-top:.1pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>XSS<span
style='letter-spacing:.65pt'> </span>(cross-site<span style='letter-spacing:
.65pt'> </span>request<span style='letter-spacing:.6pt'> </span>scripting)<span
style='letter-spacing:.65pt'> </span>attacks,<span style='letter-spacing:.75pt'>
</span></span><a href="#_bookmark396"><span style='color:#070707'>Cookies<span
style='letter-spacing:.65pt'> </span>and<span style='letter-spacing:.7pt'> </span><span
style='letter-spacing:-.1pt'>Sessions</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: Y"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Yarn,<span
style='letter-spacing:.5pt'> </span></span><a href="#_bookmark680"><span
style='color:#070707'>Creating<span style='letter-spacing:.55pt'> </span>a<span
style='letter-spacing:.45pt'> </span>React<span style='letter-spacing:.5pt'> </span><span
style='letter-spacing:-.25pt'>App</span></span></a></p>

<p class=MsoBodyText style='margin-top:.25pt'>

<table cellpadding=0 cellspacing=0 align=left>
 <tr>
  <td width=120 height=0></td>
 </tr>
 <tr>
  <td></td>
  <td><img width=580 height=4
  src="Web%20Development%20with%20Node%20and%20Express%20Leveraging%20the%20JavaScript%20Stack%20(Ethan%20Brown)%20(z-lib.org)_files/image091.gif"
  alt="Text Box: Z"></td>
 </tr>
</table>

<br clear=ALL>
</p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:5.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:4.75pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>Zakas,<span
style='letter-spacing:.75pt'> </span>Nicholas,<span style='letter-spacing:.8pt'>
</span></span><a href="#_bookmark214"><span style='color:#070707;letter-spacing:
-.1pt'>Linting</span></a></p>

</div>

<span style='font-size:11.0pt;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection522>

<h4 align=left style='margin-top:3.55pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#3F3F3F'>About<span style='letter-spacing:.55pt'> </span>the<span
style='letter-spacing:.5pt'> </span><span style='letter-spacing:-.1pt'>Author</span></span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:79.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><b><span
style='color:#333333'>Ethan<span style='letter-spacing:1.7pt'> </span>Brown<span
style='letter-spacing:1.7pt'> </span></span></b><span style='color:#333333'>is<span
style='letter-spacing:1.7pt'> </span>director<span style='letter-spacing:1.7pt'>
</span>of<span style='letter-spacing:1.7pt'> </span>technology<span
style='letter-spacing:1.8pt'> </span>at<span style='letter-spacing:1.7pt'> </span>VMS,<span
style='letter-spacing:1.8pt'> </span>where<span style='letter-spacing:1.7pt'> </span>hes<span
style='letter-spacing:1.7pt'> </span>responsible for the architecture and
implementation of VMSPro, cloud-based software for decision support, risk
analysis, and creative ideation for large projects. With over 20 years of
programming experience, from embedded to the<span style='letter-spacing:4.0pt'>
</span>web, Ethan has embraced the JavaScript stack as the web platform of the <span
style='letter-spacing:-.1pt'>future.</span></span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection523>

<h4 align=left style='margin-top:3.55pt;margin-right:0cm;margin-bottom:0cm;
margin-left:55.0pt;margin-bottom:.0001pt;text-align:left'><span
style='color:#3F3F3F;letter-spacing:-.1pt'>Colophon</span></h4>

<p class=MsoBodyText style='margin-top:13.45pt;margin-right:80.8pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The animals on the cover of <i>Web Development with Node
and Express </i>are<span style='letter-spacing:4.0pt'> </span>a black lark (<i>Melanocorypha
yeltoniensis</i>) and a white-winged lark (<i>Melanocorypha leucopter</i>).
Both birds are partially migratory and have been known to range far afield of
their most suitable habitat in the steppes<span style='letter-spacing:2.0pt'> </span>of<span
style='letter-spacing:1.65pt'> </span>Kazakhstan<span style='letter-spacing:
1.7pt'> </span>and<span style='letter-spacing:1.7pt'> </span>central<span
style='letter-spacing:1.65pt'> </span>Russia.<span style='letter-spacing:1.7pt'>
</span>In<span style='letter-spacing:1.7pt'> </span>addition<span
style='letter-spacing:1.7pt'> </span>to<span style='letter-spacing:1.7pt'> </span>breeding<span
style='letter-spacing:1.7pt'> </span>there,<span style='letter-spacing:1.7pt'> </span>male
black larks will also winter in the Kazakh steppes, while females migrate
southward. White-winged larks, on the other hand, fly farther west and<span
style='letter-spacing:2.0pt'> </span>north beyond the Black Sea during the
winter months. The global range of these birds extends still farther: Europe
constitutes a quarter to one-half of the<span style='letter-spacing:1.35pt'> </span>global<span
style='letter-spacing:1.35pt'> </span>range<span style='letter-spacing:1.35pt'>
</span>of<span style='letter-spacing:1.35pt'> </span>the<span style='letter-spacing:
1.35pt'> </span>white-winged<span style='letter-spacing:1.45pt'> </span>lark<span
style='letter-spacing:1.45pt'> </span>and<span style='letter-spacing:1.45pt'> </span>only<span
style='letter-spacing:1.45pt'> </span>five<span style='letter-spacing:1.35pt'> </span>percent<span
style='letter-spacing:1.35pt'> </span>to<span style='letter-spacing:1.45pt'> </span>a
quarter of the global range of the black lark.</span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Black larks are so named for the black coloring that
covers nearly the<span style='letter-spacing:4.0pt'> </span>entire body of
males of the species. Females, by contrast, resemble the coloring of the male
in only their black legs and the black feathers of their underwings. A
combination of dark and pale grays covers the rest of the <span
style='letter-spacing:-.1pt'>female.</span></span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>White-winged larks possess a distinctive pattern of
black, white, and chestnut wing feathers. Gray streaks down the white-winged
larks back complement a pale white lower body. Males differ in appearance from
females of the species only in the males chestnut crowns.</span></p>

<p class=MsoBodyText style='margin-top:.3pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Both black and white-winged larks evince the
distinctively melodious call that has endeared larks of all variations to the
imaginations of writers and musicians<span style='letter-spacing:1.5pt'> </span>for<span
style='letter-spacing:1.5pt'> </span>centuries.<span style='letter-spacing:
1.6pt'> </span>Both<span style='letter-spacing:1.6pt'> </span>birds<span
style='letter-spacing:1.5pt'> </span>eat<span style='letter-spacing:1.5pt'> </span>insects<span
style='letter-spacing:1.5pt'> </span>and<span style='letter-spacing:1.6pt'> </span>seeds<span
style='letter-spacing:1.5pt'> </span>as<span style='letter-spacing:1.5pt'> </span>adults,<span
style='letter-spacing:1.6pt'> </span>and both birds make nests on the ground.
Black larks have been observed carrying dung to their nests to build walls or
lay a kind of pavement,</span></p>

</div>

<span style='font-size:11.0pt;line-height:133%;font-family:"Times New Roman",serif'><br
clear=all style='page-break-before:always'>
</span>

<div class=WordSection524>

<p class=MsoBodyText style='margin-top:4.05pt;margin-right:0cm;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt'><span style='color:#333333'>though<span
style='letter-spacing:.55pt'> </span>the<span style='letter-spacing:.45pt'> </span>cause<span
style='letter-spacing:.5pt'> </span>for<span style='letter-spacing:.5pt'> </span>this<span
style='letter-spacing:.5pt'> </span>behavior<span style='letter-spacing:.5pt'> </span>has<span
style='letter-spacing:.5pt'> </span>not<span style='letter-spacing:.5pt'> </span>been<span
style='letter-spacing:.55pt'> </span><span style='letter-spacing:-.1pt'>identified.</span></span></p>

<p class=MsoBodyText style='margin-top:.5pt'><span style='font-size:20.0pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:85.3pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>Many of the animals on OReilly covers are endangered;
all of them are important to the world.</span></p>

<p class=MsoBodyText style='margin-top:.2pt'><span style='font-size:15.5pt'>&nbsp;</span></p>

<p class=MsoBodyText style='margin-top:0cm;margin-right:74.7pt;margin-bottom:
0cm;margin-left:55.0pt;margin-bottom:.0001pt;line-height:133%'><span
style='color:#333333'>The cover illustration is by Karen Montgomery based on a
black and white engraving<span style='letter-spacing:2.0pt'> </span>from<span
style='letter-spacing:1.95pt'> </span>Lydekkers<span style='letter-spacing:
1.95pt'> </span><i>The<span style='letter-spacing:1.95pt'> </span>Royal<span
style='letter-spacing:1.95pt'> </span>Natural<span style='letter-spacing:1.95pt'>
</span>History</i>.<span style='letter-spacing:2.0pt'> </span>The<span
style='letter-spacing:1.95pt'> </span>cover<span style='letter-spacing:1.95pt'>
</span>fonts are<span style='letter-spacing:1.55pt'> </span>Gilroy<span
style='letter-spacing:1.6pt'> </span>Semibold<span style='letter-spacing:1.6pt'>
</span>and<span style='letter-spacing:1.6pt'> </span>Guardian<span
style='letter-spacing:1.6pt'> </span>Sans.<span style='letter-spacing:1.6pt'> </span>The<span
style='letter-spacing:1.55pt'> </span>text<span style='letter-spacing:1.55pt'> </span>font<span
style='letter-spacing:1.55pt'> </span>is<span style='letter-spacing:1.55pt'> </span>Adobe<span
style='letter-spacing:1.55pt'> </span>Minion Pro; the heading font is Adobe
Myriad Condensed; and the code font is Dalton Maags Ubuntu Mono.</span></p>

</div>

</body>

</html>
